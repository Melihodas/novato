window.Spectre=function(e){function t(t){for(var n,i,o=t[0],a=t[1],s=0,l=[];s<o.length;s++)i=o[s],r[i]&&l.push(r[i][0]),r[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(u&&u(t);l.length;)l.shift()()}var n={},r={1:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise(function(t,i){n=r[e]=[t,i]});t.push(n[2]=o);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+""+({}[e]||e)+"."+{0:"29c791d85e308592e053"}[e]+".js"}(e),a=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+i+": "+o+")");a.type=i,a.request=o,n[1](a)}r[e]=void 0}};var u=setTimeout(function(){a({type:"timeout",target:s})},12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://c-ning.videosvc.mixer.com/players/spectre/release/2019.7.12+4feff9db/",i.oe=function(e){throw console.error(e),e};var o=window.webpackJsonpSpectre=window.webpackJsonpSpectre||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var u=a;return i(i.s=130)}([function(e,t){e.exports=window.React},function(e,t,n){!function(e){"use strict";var t={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5},n=(r.isNullOrUndefined=function(e){return null==e},r.disableCookies=function(){r._canUseCookies=!1},r.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(o,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},r);function r(){}var i,o=/[xy]/g,a=(s.prototype.addNotificationListener=function(e){this.listeners.push(e)},s.prototype.removeNotificationListener=function(e){for(var t=this.listeners.indexOf(e);-1<t;)this.listeners.splice(t,1),t=this.listeners.indexOf(e)},s.prototype.eventsSent=function(e){for(var t=this,n=function(n){r.listeners[n].eventsSent&&setTimeout(function(){return t.listeners[n].eventsSent(e)},0)},r=this,i=0;i<this.listeners.length;++i)n(i)},s.prototype.eventsDiscarded=function(e,t){for(var n=this,r=function(r){i.listeners[r].eventsDiscarded&&setTimeout(function(){return n.listeners[r].eventsDiscarded(e,t)},0)},i=this,o=0;o<this.listeners.length;++o)r(o)},s);function s(){this.listeners=[]}(i=e.LoggingSeverity||(e.LoggingSeverity={}))[i.CRITICAL=1]="CRITICAL",i[i.WARNING=2]="WARNING";var u={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69},l=(c.sanitizeDiagnosticText=function(e){return'"'+e.replace(/\"/g,"")+'"'},c.dataType="MessageData",c.AiNonUserActionablePrefix="AI (Internal): ",c.AiUserActionablePrefix="AI: ",c);function c(e,t,n,r){void 0===n&&(n=!1),this.messageId=e,this.message=(n?c.AiUserActionablePrefix:c.AiNonUserActionablePrefix)+e;var i=(t?" message:"+c.sanitizeDiagnosticText(t):"")+(r?" props:"+c.sanitizeDiagnosticText(JSON.stringify(r)):"");this.message+=i}var d=(f.prototype.throwInternal=function(t,n,r,i,o){void 0===o&&(o=!1);var a=new l(n,r,o,i);if(this.enableDebugExceptions())throw a;if(void 0!==a&&a&&void 0!==a.message){if(o){var s=+a.messageId;(!this._messageLogged[s]||this.consoleLoggingLevel()>=e.LoggingSeverity.WARNING)&&(this.warnToConsole(a.message),this._messageLogged[s]=!0)}else this.consoleLoggingLevel()>=e.LoggingSeverity.WARNING&&this.warnToConsole(a.message);this.logInternalMessage(t,a)}},f.prototype.warnToConsole=function(e){"undefined"!=typeof console&&console&&("function"==typeof console.warn?console.warn(e):"function"==typeof console.log&&console.log(e))},f.prototype.resetInternalMessageCount=function(){this._messageCount=0,this._messageLogged={}},f.prototype.logInternalMessage=function(e,t){if(!this._areInternalMessagesThrottled()){var n=!0,r=this.AIInternalMessagePrefix+t.messageId;if(this._messageLogged[r]?n=!1:this._messageLogged[r]=!0,n&&(e<=this.telemetryLoggingLevel()&&(this.queue.push(t),this._messageCount++),this._messageCount==this.maxInternalMessageLimit())){var i="Internal events throttle limit per PageView reached for this app.",o=new l(u.MessageLimitPerPVExceeded,i,!1);this.queue.push(o),this.warnToConsole(i)}}},f.prototype._areInternalMessagesThrottled=function(){return this._messageCount>=this.maxInternalMessageLimit()},f);function f(e){this.AIInternalMessagePrefix="AITR_",this.enableDebugExceptions=function(){return!1},this.consoleLoggingLevel=function(){return 1},this.telemetryLoggingLevel=function(){return 0},this.maxInternalMessageLimit=function(){return 25},this.queue=[],this._messageCount=0,this._messageLogged={},n.isNullOrUndefined(e)||(n.isNullOrUndefined(e.loggingLevelConsole)||(this.consoleLoggingLevel=function(){return e.loggingLevelConsole}),n.isNullOrUndefined(e.loggingLevelTelemetry)||(this.telemetryLoggingLevel=function(){return e.loggingLevelTelemetry}),n.isNullOrUndefined(e.maxMessageLimit)||(this.maxInternalMessageLimit=function(){return e.maxMessageLimit}),n.isNullOrUndefined(e.enableDebugExceptions)||(this.enableDebugExceptions=function(){return e.enableDebugExceptions}))}var p=(h.prototype.initialize=function(e,t){var r=this;if(this._isInitialized)throw Error("Core should not be initialized more than once");if(!e||n.isNullOrUndefined(e.instrumentationKey))throw Error("Please provide instrumentation key");if(this.config=e,this._notificationManager=new a,this.config.extensions=n.isNullOrUndefined(this.config.extensions)?[]:this.config.extensions,this.config.extensionConfig=n.isNullOrUndefined(this.config.extensionConfig)?{}:this.config.extensionConfig,this.config.extensionConfig.NotificationManager=this._notificationManager,this.logger=new d(e),t.forEach(function(e){if(n.isNullOrUndefined(e.initialize))throw Error(m)}),0<this.config.extensions.length){var i=!0,o=!1;if(this.config.extensions.forEach(function(e){n.isNullOrUndefined(e)&&(i=!1),e.priority>b&&(o=!0)}),!i)throw Error(m);if(o)throw Error(v)}(u=this._extensions).push.apply(u,[this._channelController].concat(t,this.config.extensions)),this._extensions=this._extensions.sort(function(e,t){var n=e,r=t,i=typeof n.processTelemetry,o=typeof r.processTelemetry;return"function"==i&&"function"==o?n.priority-r.priority:"function"==i&&"function"!=o?1:"function"!=i&&"function"==o?-1:void 0});var s={};this._extensions.forEach(function(e){var t=e;t&&t.priority&&(n.isNullOrUndefined(s[t.priority])?s[t.priority]=t.identifier:r.logger.warnToConsole("Two extensions have same priority"+s[t.priority]+", "+t.identifier))});for(var u,l=-1,c=0;c<this._extensions.length-1;c++){var f=this._extensions[c];if(!f||"function"==typeof f.processTelemetry){if(f.priority===b){l=c+1;break}this._extensions[c].setNextPlugin(this._extensions[c+1])}}if(this._channelController.initialize(this.config,this,this._extensions),this._extensions.forEach(function(e){e&&e.priority<b&&e.initialize(r.config,r,r._extensions)}),l<this._extensions.length&&this._extensions.splice(l),0===this.getTransmissionControls().length)throw new Error("No channels available");this._isInitialized=!0},h.prototype.getTransmissionControls=function(){return this._channelController.ChannelControls},h.prototype.track=function(e){if(null===e)throw this._notifiyInvalidEvent(e),Error("Invalid telemetry item");if(e.baseData&&!e.baseType)throw this._notifiyInvalidEvent(e),Error("Provide data.baseType for data.baseData");e.baseType||(e.baseType="EventData"),e.iKey||(e.iKey=this.config.instrumentationKey),e.time||(e.time=(new Date).toISOString()),n.isNullOrUndefined(e.ver)&&(e.ver="4.0"),this._validateTelmetryItem(e);for(var t=0;t<this._extensions.length;){if(this._extensions[t].processTelemetry){this._extensions[t].processTelemetry(e);break}t++}},h.prototype.addNotificationListener=function(e){this._notificationManager.addNotificationListener(e)},h.prototype.removeNotificationListener=function(e){this._notificationManager.removeNotificationListener(e)},h.prototype.pollInternalLogs=function(){var e=this,t=this.config.diagnosticLogInterval;return 0<t||(t=1e4),setInterval(function(){var t=e.logger.queue;t.forEach(function(t){var n={name:"InternalMessageId: "+t.messageId,iKey:e.config.instrumentationKey,time:(new Date).toISOString(),baseType:l.dataType,baseData:{message:t.message}};e.track(n)}),t.length=0},t)},h.prototype._validateTelmetryItem=function(e){if(n.isNullOrUndefined(e.name))throw this._notifiyInvalidEvent(e),Error("telemetry name required");if(n.isNullOrUndefined(e.time))throw this._notifiyInvalidEvent(e),Error("telemetry timestamp required");if(n.isNullOrUndefined(e.iKey))throw this._notifiyInvalidEvent(e),Error("telemetry instrumentationKey required")},h.prototype._notifiyInvalidEvent=function(e){this._notificationManager.eventsDiscarded([e],t.InvalidEvent)},h);function h(){this._isInitialized=!1,this._extensions=new Array,this._channelController=new g}var g=(y.prototype.processTelemetry=function(e){this.channelQueue.forEach(function(t){0<t.length&&t[0].processTelemetry(e)})},Object.defineProperty(y.prototype,"ChannelControls",{get:function(){return this.channelQueue},enumerable:!0,configurable:!0}),y.prototype.initialize=function(e,t,r){var i=this;if(e.isCookieUseDisabled&&n.disableCookies(),this.channelQueue=new Array,e.channels){var o=void 0;e.channels.forEach(function(n){if(n&&0<n.length){if((n=n.sort(function(e,t){return e.priority-t.priority})).forEach(function(n){n.priority<b&&(o=n.identifier),n.initialize(e,t,r)}),o)throw Error(_+o);for(var a=1;a<n.length;a++)n[a-1].setNextPlugin(n[a]);i.channelQueue.push(n)}})}for(var a=new Array,s=0;s<r.length;s++){var u=r[s];u.priority>b&&a.push(u)}if(0<a.length){for((a=a.sort(function(e,t){return e.priority-t.priority})).forEach(function(n){return n.initialize(e,t,r)}),s=1;s<a.length;s++)a[s-1].setNextPlugin(a[s]);this.channelQueue.push(a)}},y);function y(){this.identifier="ChannelControllerPlugin",this.priority=b}var m="Extensions must provide callback to initialize",v="Channels must be provided through config.channels only",b=500,_="Channel has invalid priority";e.MinChannelPriorty=100,e.EventsDiscardedReason=t,e.AppInsightsCore=p,e.CoreUtils=n,e.NotificationManager=a,e.DiagnosticLogger=d,e._InternalLogMessage=l,e._InternalMessageId=u,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){!function(e){"use strict";function t(e,t){return null==e}function n(e){throw void 0===e&&(e=1),new Error("Argument "+e+" is empty.")}function r(e){return"function"==typeof e&&"getType"in e}function i(e){throw void 0===e&&(e=1),new Error("Argument "+e+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function o(e,t){if(null==e)throw new Error("Argument contains array with empty element at index "+t);if(null==e.getType)throw new Error("Argument contains array with invalid element at index "+t+', it should be an action-creator instance from "typesafe-actions"')}function a(e){return"string"==typeof e||"symbol"==typeof e}function s(e){return!a(e)}function u(e){throw void 0===e&&(e=1),new Error("Argument "+e+" is invalid, it should be an action type of type: string | symbol")}function l(e,t){if(null==e)throw new Error("Argument contains array with empty element at index "+t);if("string"!=typeof e&&"symbol"!=typeof e)throw new Error("Argument contains array with invalid element at index "+t+", it should be of type: string | symbol")}function c(e,r,o,a){return t(e)&&n(1),s(e)&&i(1),{type:e,payload:r,meta:o,error:a}}function d(e,r){t(e)&&n(1),s(e)&&u(1);var i=null!=r?r(e):function(){return{type:e}};return Object.assign(i,{getType:function(){return e},toString:function(){return e}})}function f(e){return t(e)&&n(1),s(e)&&u(1),Object.assign(function(){return d(e,function(e){return function(t,n){return{type:e,payload:t,meta:n}}})},{map:function(t){return d(e,function(e){return function(n,r){return Object.assign(t(n,r),{type:e})}})}})}function p(e){return t(e)&&n(1),r(e)||i(1),e.getType()}e.action=c,e.createAction=function(e,t){var n=null==t?function(){return c(e)}:t(c.bind(null,e));return Object.assign(n,{getType:function(){return e},toString:function(){return e}})},e.createActionDeprecated=function(e,t){var n;if(null!=t){if("function"!=typeof t)throw new Error("second argument is not a function");n=t}else n=function(){return{type:e}};if(null==e)throw new Error("first argument is missing");if("string"!=typeof e&&"symbol"!=typeof e)throw new Error("first argument should be type of: string | symbol");return n},e.createAsyncAction=function(e,t,n,r){return[e,t,n].forEach(l),Object.assign(function(){return{request:f(e)(),success:f(t)(),failure:f(n)(),cancel:r&&f(r)()}},{})},e.createCustomAction=d,e.createReducer=function e(t,n){void 0===n&&(n={});var i=Object.assign({},n);return Object.assign(function(e,n){if(void 0===e&&(e=t),i.hasOwnProperty(n.type)){var r=i[n.type];if("function"!=typeof r)throw Error('Reducer under "'+n.type+'" key is not a valid reducer');return r(e,n)}return e},{handlers:Object.assign({},i),handleAction:function(n,o){var s=Array.isArray(n)?n:[n],u={};return s.map(function(e){return r(e)?p(e):a(e)?e:function(e){throw void 0===e&&(e=1),new Error("Argument "+e+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}()}).forEach(function(e){return u[e]=o}),e(t,Object.assign({},i,u))}})},e.createStandardAction=f,e.getType=p,e.isActionOf=function(e,r){t(e)&&n(1);var i=Array.isArray(e)?e:[e];i.forEach(o);var a=function(e){return i.some(function(t){return e.type===t.getType()})};return void 0===r?a:a(r)},e.isOfType=function(e,r){t(e)&&n(1);var i=Array.isArray(e)?e:[e];i.forEach(l);var o=function(e){return i.includes(e.type)};return void 0===r?o:o(r)}}(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o,a,s,u,l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function c(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function d(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t){if(null!=e)return e.length>0?t(e):0;throw new Error("Unable to process array because input is null or undefined")}function p(e){return f(e,function(e){return e.reduce(function(e,t){return Math.max(e,t)},Number.MIN_SAFE_INTEGER)})}function h(e){return f(e,function(e){return e.reduce(function(e,t){return Math.min(e,t)},Number.MAX_SAFE_INTEGER)})}function g(e){return f(e,function(t){return t.reduce(function(e,t){return e+t},0)/e.length})}function y(e){void 0===e&&(e=!1);for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&t&&t.forEach(function(e){console.log("[Player-Telemetry]",e)})}(r=t.VideoType||(t.VideoType={})).LIVE="live",r.VOD="vod",(i=t.TransportType||(t.TransportType={})).DASH="dash",i.FTL="ftl",i.HLS="hls",(o=t.TernaryType||(t.TernaryType={})).TRUE="true",o.FALSE="false",o.UNKNOWN="unknown",(a=t.PlayerContext||(t.PlayerContext={})).CAROUSEL="carousel",a.CHANNEL="channel-page",a.EMBED="embed",(s=t.VideoPlaybackIncidentType||(t.VideoPlaybackIncidentType={})).FRAME_DROP="frameDrop",s.CORRUPTED_FRAMES="corruptedFrames",(u=t.TransportIncidentType||(t.TransportIncidentType={})).BUFFER_EMPTY="bufferEmpty",u.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",u.DASH_PLAYBACK_ERROR="dashPlaybackError",u.DASH_ERROR="dashError",u.FTL_ERROR="ftlError",u.HLS_ERROR="hlsError",u.JANUS_ERROR="janusError",u.PACKET_LOSS="packetLoss",u.PLI_PACKET_FIRED="pliPacketFired",u.WEB_RTC_ERROR="webRTCError",u.WEB_SOCKET_ERROR="webSocketError";var m=4294967296;function v(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*function(){if("undefined"!=typeof window&&window.crypto){var e=new Uint32Array(1);return window.crypto.getRandomValues(e),e[0]/m}return Math.random()}()|0;return("x"===e?t:3&t|8).toString(16)})}var b="clips-content.mixer.com",_="videocdn.mixer.com",S="source00000000.ts",w="xble3dash-i.akamaihd.net";function E(e){void 0===e&&(e="");var t="unknown",n="unknown";if(e.includes(b))t="clips",n="clips";else if(e.includes(_))t="fastly",n="fastly";else if(e===S)t="vod",n="vod";else if(e.includes(w))t="",n="";else{var r=e.split(".");n=r[0],t=r[1]}return{location:t,machine:n}}var T="undefined"!=typeof document,x={authMethod:1,coreData:{appId:"Mixer"},isLoggedIn:!0,shareAuthStatus:!1};function k(e,t){var n,r="Mixer.Player."+e;return(n={name:r})[r]={part:"C",def:{fields:t.concat([{name:"timestamp",type:"string"},{name:"platform",type:"string"},{name:"channelId",type:"int32"},{name:"height",type:"int32"},{name:"width",type:"int32"},{name:"context",type:"string"},{name:"isCostream",type:"bool"},{name:"sdkVersion",type:"string"},{name:"sessionGuid",type:"string"},{name:"browserName",type:"string"},{name:"browserVersion",type:"string"},{name:"osName",type:"string"},{name:"osVersion",type:"string"},{name:"isAuthed",type:"bool"},{name:"gaFlags",type:"string"},{name:"GoogleAnalyticsClientId",type:"string"},{name:"isFocused",type:"bool"}])}},n}var C=[k("GetVideoFeedAttempt",[{name:"defaultProtocol",type:"string"},{name:"type",type:"string"},{name:"ftlServer",type:"string"},{name:"hlsRecommendedSegmentBuffer",type:"int32"},{name:"hlsServer",type:"string"},{name:"dashServer",type:"string"}]),k("GetVideoFeedSummary",[{name:"duration",type:"int32"},{name:"ftlAttempts",type:"int32"},{name:"hlsAttempts",type:"int32"},{name:"dashAttempts",type:"int32"},{name:"transport",type:"string"},{name:"success",type:"bool"}]),k("ConnectTransportAttempt",[{name:"attemptCount",type:"int32"},{name:"errorCode",type:"int32"},{name:"errorMessage",type:"string"},{name:"errorName",type:"string"},{name:"trace",type:"string"},{name:"loadTime",type:"int32"},{name:"transport",type:"string"},{name:"success",type:"bool"},{name:"timeSinceGetVideoFeedAttempt",type:"int32"},{name:"hostName",type:"string"},{name:"location",type:"string"},{name:"machine",type:"string"}]),k("ConnectTransportSummary",[{name:"hostName",type:"string"},{name:"lastErrorCode",type:"int32"},{name:"lastErrorMessage",type:"string"},{name:"lastErrorName",type:"string"},{name:"location",type:"string"},{name:"machine",type:"string"},{name:"numAttempts",type:"int32"},{name:"success",type:"bool"},{name:"transport",type:"string"},{name:"timeSinceGetVideoFeedAttempt",type:"int32"}]),k("TransportStatistics",[{name:"errors",type:"int32"},{name:"transport",type:"string"},{name:"hostName",type:"string"},{name:"location",type:"string"},{name:"machine",type:"string"},{name:"bitrate",type:"int32"},{name:"resolution",type:"string"},{name:"averageSegmentDownloadTime",type:"float"},{name:"averageSegmentDuration",type:"float"},{name:"averageSegmentSize",type:"float"},{name:"manifest",type:"string"},{name:"maxSegmentDownloadTime",type:"int32"},{name:"maxSegmentDuration",type:"int32"},{name:"maxSegmentSize",type:"int32"},{name:"minSegmentDownloadTime",type:"int32"},{name:"minSegmentDuration",type:"int32"},{name:"minSegmentSize",type:"int32"},{name:"retryCount",type:"int32"},{name:"segmentCount",type:"int32"},{name:"networkErrorCount",type:"uint32"},{name:"bufferStallCount",type:"uint32"},{name:"bufferStallRate",type:"float"},{name:"fpsDropCount",type:"uint32"},{name:"corruptedSegmentCount",type:"uint32"},{name:"currentVideoTime",type:"float"}]),k("TransportIncident",[{name:"hostName",type:"string"},{name:"incidentType",type:"string"},{name:"transport",type:"string"},{name:"location",type:"string"},{name:"machine",type:"string"},{name:"errorCode",type:"int32"},{name:"errorName",type:"string"},{name:"buffer",type:"float"},{name:"details",type:"string"},{name:"fatal",type:"bool"},{name:"manifest",type:"string"},{name:"reason",type:"string"},{name:"type",type:"string"},{name:"error",type:"string"},{name:"eventDetails",type:"string"}]),k("VideoPlaybackStatistics",[{name:"distHostName",type:"string"},{name:"location",type:"string"},{name:"dist",type:"string"},{name:"totalDelay",type:"int32"},{name:"manifestLoadDelay",type:"int32"},{name:"videoLoadDelay",type:"int32"},{name:"decodeDelay",type:"int32"},{name:"videoWidth",type:"int32"},{name:"videoHeight",type:"int32"},{name:"isSource",type:"bool"},{name:"sourceFps",type:"int32"},{name:"lastFrameRate",type:"int32"},{name:"isSourceFpsConverged",type:"bool"},{name:"qoEEventCount1M",type:"int32"},{name:"qoEEventCount3M",type:"int32"},{name:"qoEEventCount5M",type:"int32"},{name:"qoEEventCount",type:"int32"},{name:"qoEStatus",type:"int32"},{name:"currentVideoTime",type:"float"},{name:"currentSessionTime",type:"int32"},{name:"isWebView",type:"bool"},{name:"transcodesAvailable",type:"string"},{name:"transport",type:"string"}]),k("VideoPlaybackRendering",[{name:"duration",type:"int32"},{name:"sdkVersion",type:"string"},{name:"success",type:"bool"},{name:"timeoutMs",type:"int32"},{name:"transcodesAvailable",type:"string"},{name:"transport",type:"string"}]),k("VideoPlaybackClosedCaptions",[{name:"enabled",type:"bool"},{name:"transport",type:"string"}]),k("VideoPlaybackQualitySwitch",[{name:"currentResolution",type:"int32"},{name:"requestedResolution",type:"int32"},{name:"transport",type:"string"}]),k("VideoPlayerHeartbeat",[{name:"isPlaying",type:"bool"},{name:"resolution",type:"int32"},{name:"sessionDuration",type:"float"},{name:"transport",type:"string"}]),k("PlayerSessionStart",[{name:"userSelectedBitrate",type:"string"}]),k("PlayerSessionEnd",[{name:"duration",type:"float"},{name:"resolution",type:"int32"},{name:"transcodesAvailable",type:"string"}]),k("FirstFrameRendered",[{name:"loadingDuration",type:"int32"},{name:"resolution",type:"int32"},{name:"totalDuration",type:"int32"},{name:"transcodesAvailable",type:"string"},{name:"transport",type:"string"},{name:"durationSinceChannelLoaded",type:"int32"},{name:"durationSinceLight2Loaded",type:"int32"}]),k("JanusFlags",[{name:"janusFlags",type:"string"}]),k("FallbackToNativePlayer",[{name:"supportsMSE",type:"bool"},{name:"supportsHLS",type:"bool"}]),k("PlayerCDNFallback",[{name:"reason",type:"string"}]),k("PlayerLifecycleState",[{name:"state",type:"string"},{name:"entering",type:"bool"},{name:"meta",type:"string"}]),k("PlayerReportedSessions",[{name:"message",type:"string"}]),k("PlayerDebugEvents",[{name:"message",type:"string"},{name:"payload",type:"string"}])];var A={eventCategory:"video_player",eventAction:"player_session_start"},I={eventCategory:"video_player",eventAction:"player_session_end"},O={eventCategory:"video_player",eventAction:"first_frame_loaded"},L={eventCategory:"video_ui",eventAction:"quality_level_increase"},R={eventCategory:"video_ui",eventAction:"quality_level_decrease"},P=function(){function e(e,n,r){var i;void 0===n&&(n=!1),void 0===r&&(r=x);var o=this;this.callbacks=e,this.shouldLog=n,this.noBatching=!1,this.scheduledEvents=[],this.incidentsCount=((i={})[t.TransportType.DASH]=0,i[t.TransportType.FTL]=0,i[t.TransportType.HLS]=0,i),this.previousPacketLoss=0,this.sendScheduledEvents=function(e){for(;e.timeRemaining()>0&&o.scheduledEvents.length>0;){var t=o.scheduledEvents.shift();if(o.isGAEvent(t))o.ga&&o.sendGAEvent(t);else if(o.jsll){var n=o.jsll,r=n.isEventValid,i=n.writeEvent;r(t)?i(t):y(o.shouldLog,"Unable to send "+t.name)}}o.scheduledEvents.length>0&&window.requestIdleCallback(o.sendScheduledEvents)},this.sendGAEvent=function(e){o.ga.event(e,function(t){t&&y(o.shouldLog,"Unable to send GA event: "+JSON.stringify(e)+", with error: "+t)}).send()},this.isGAEvent=function(e){return!!(e&&e.eventCategory&&e.eventAction)},this.logGAEvent=function(e){o.scheduleEvent(e)},this.config=r,this.timeSinceLastEvent=Date.now()}return e.prototype.initXpert=function(e,t,r,i){return void 0===r&&(r=C),c(this,void 0,void 0,function(){var o;return d(this,function(a){switch(a.label){case 0:return this.oneDS=i,o=this,[4,Promise.resolve(n(87))];case 1:return o.jsll=a.sent(),this.jsll.init(t),this.jsll._registerSchemas(r),this.baseEvent=function(e){var t=e.appId,n=e.channelId,r=e.context,i=e.sdkVersion,o=e.sessionGuid,a=void 0===o?v():o,s=e.gaClientId,u=void 0===s?"":s,l=e.gaFlags,c=e.isCostream,d=void 0!==c&&c,f=e.height,p=void 0===f?0:f,h=e.width;return{platform:t,channelId:n,context:r,sdkVersion:i,sessionGuid:a,gaFlags:l,isCostream:d,height:p,width:void 0===h?0:h,browserName:e.browserName,browserVersion:e.browserVersion,osName:e.osName,osVersion:e.osVersion,isAuthed:e.isAuthed,GoogleAnalyticsClientId:u}}(e),[2]}})})},e.prototype.incrementXpertCv=function(){var e=this.jsll.cv;return e.increment(),e.getValue()},e.prototype.getXpertCv=function(){return""+this.jsll.cv.getValue()},e.prototype.logQoSEvent=function(e){var t=e.contentType,n=e.currentOperationName,r=e.cV,i=e.httpMethod,o=e.httpStatusCode,a=e.isSuccess,s=e.latencyMs,u=e.operationName,l=e.operationVersion,c=e.requestUri,d=e.responseSize,f=e.serviceErrorCode,p=void 0===f?-1:f,h=e.serviceName,g=e.serviceType,y=void 0===g?"WebService":g;this.jsll.vortexEvents.sendApiComplete({contentType:t,currentOperationName:n,cV:r,httpMethod:i,httpStatusCode:o,isSuccess:a,operationName:u,operationVersion:l,requestUri:c,responseSize:d,serviceErrorCode:p,serviceName:h,serviceType:y,latencyMs:s})},e.prototype.updateEnvironmentInfo=function(e){var t=this;Object.keys(e).forEach(function(n){var r;!t.baseEvent.hasOwnProperty(n)||(null==(r=e[n])||"number"==typeof r&&isNaN(r))||(t.baseEvent[n]=e[n])})},e.prototype.transformEvent=function(e,t){return{name:this.config.coreData.appId+".Player."+e,data:l({},this.baseEvent,t,{isFocused:!T||!document.hidden,timestamp:new Date(Date.now()).toISOString()})}},e.prototype.scheduleEvent=function(e,t){var n=this.timeSinceLastEvent;if(this.timeSinceLastEvent=Date.now(),Date.now()-n>6e4)return y(this.shouldLog,"Triggered telemetry timeout"),this.scheduledEvents=[],void(this.callbacks&&this.callbacks.timeoutCallback&&this.callbacks.timeoutCallback());if(this.isGAEvent(e))this.ga&&(y(this.shouldLog,e),this.scheduledEvents.push(e),window.requestIdleCallback(this.sendScheduledEvents));else if(T){if(y(this.shouldLog,t,e),this.jsll&&e&&t){var r=this.transformEvent(t,e);this.oneDS.track({name:"Microsoft_Mixer_Player_"+t+"_Legacy",data:l({},this.baseEvent,e,{isFocused:!document.hidden})}),this.scheduledEvents.push(r),window.requestIdleCallback(this.sendScheduledEvents)}}else y(this.shouldLog,"Xpert telemetry only works in a browser environment currently because suck");this.noBatching&&this.sendScheduledEvents({timeRemaining:function(){return 1}})},e.prototype.logGetVideoFeedAttempt=function(e){this.getVideoFeedAttemptTime=Date.now(),this.scheduleEvent(e,"GetVideoFeedAttempt")},e.prototype.logConnectTransportAttempt=function(e){var t=E(e.hostName),n=t.location,r=t.machine,i=Date.now()-this.getVideoFeedAttemptTime;this.scheduleEvent(l({},e,{location:n,machine:r,timeSinceGetVideoFeedAttempt:i}),"ConnectTransportAttempt")},e.prototype.logConnectTransportSummary=function(e){var t=e.hostName,n=e.transport,r=E(t),i=r.location,o=r.machine,a=Date.now()-this.getVideoFeedAttemptTime;this.incidentsCount[n]=0,this.scheduleEvent(l({},e,{location:i,machine:o,timeSinceGetVideoFeedAttempt:a}),"ConnectTransportSummary")},e.prototype.logGetVideoFeedSummary=function(e){this.scheduleEvent(e,"GetVideoFeedSummary")},e.prototype.logTransportIncident=function(e){var n=e.hostName,r=e.incidentType,i=e.transport;switch(r){case t.TransportIncidentType.PACKET_LOSS:this.previousPacketLoss+=1}var o=E(n),a=o.location,s=o.machine;this.incidentsCount[i]+=1,this.scheduleEvent(l({},e,{location:a,machine:s}),"TransportIncident")},e.prototype.logPlayerLifecycleState=function(e){this.scheduleEvent(l({},e),"PlayerLifecycleState")},e.prototype.logPlayerReportedSessions=function(e){this.scheduleEvent(l({},e),"PlayerReportedSessions")},e.prototype.logPlayerDebugEvents=function(e){this.scheduleEvent(l({},e),"PlayerDebugEvents")},e.prototype.logVideoPlaybackStatistics=function(e){this.scheduleEvent(l({},e),"VideoPlaybackStatistics")},e.prototype.logVideoPlaybackRendering=function(e){this.scheduleEvent(l({},e),"VideoPlaybackRendering")},e.prototype.logVideoPlaybackClosedCaptions=function(e){this.scheduleEvent(l({},e),"VideoPlaybackClosedCaptions")},e.prototype.logVideoPlaybackQualitySwitch=function(e){this.scheduleEvent(l({},e),"VideoPlaybackQualitySwitch")},e.prototype.logPlayerSessionStart=function(e){this.scheduleEvent(l({},e),"PlayerSessionStart")},e.prototype.logPlayerSessionEnd=function(e){this.scheduleEvent(l({},e),"PlayerSessionEnd")},e.prototype.logFirstFrameRendered=function(e){this.scheduleEvent(l({},e),"FirstFrameRendered")},e.prototype.logVideoPlayerHeartbeat=function(e){this.scheduleEvent(l({},e),"VideoPlayerHeartbeat")},e.prototype.logTransportStatistics=function(e){var t=e.hostName,n=e.fragDownloadTimes,r=e.fragSizes,i=e.segmentDurations,o=e.transport,a=E(t),s=a.location,u=a.machine;this.scheduleEvent(l({},e,{averageSegmentDownloadTime:Number(g(n).toFixed(2)),averageSegmentDuration:Number(g(i).toFixed(2)),averageSegmentSize:Number(g(r).toFixed(2)),errors:this.incidentsCount[o],location:s,machine:u,maxSegmentDownloadTime:p(n),maxSegmentDuration:p(i),maxSegmentSize:p(r),minSegmentDownloadTime:h(n),minSegmentDuration:h(i),minSegmentSize:h(r)}),"TransportStatistics")},e.prototype.logJanusFlags=function(e){this.scheduleEvent({janusFlags:JSON.stringify(e)},"JanusFlags")},e.prototype.logFallbackToNativePlayer=function(e){this.scheduleEvent(e,"FallbackToNativePlayer")},e.prototype.logPlayerCDNFallback=function(e){this.scheduleEvent(e,"PlayerCDNFallback")},e}();t.generateGuid=v,t.createPlayerTelemetry=function(e,t,n,r,i,o){return void 0===t&&(t={timeoutCallback:function(){}}),void 0===n&&(n={xpert:!0,ga:!1}),void 0===r&&(r=!1),void 0===i&&(i=x),c(void 0,void 0,void 0,function(){var a;return d(this,function(s){switch(s.label){case 0:return a=new P(t,r,i),T?n.xpert?[4,a.initXpert(e,i,C,o)]:[3,2]:[3,4];case 1:return s.sent(),[3,3];case 2:y(r,"Xpert telemetry is not logging"),s.label=3;case 3:return[3,5];case 4:y(r,"Xpert telemetry only works in a browser environment currently because suck"),s.label=5;case 5:return[2,a]}})})},t.FIRST_FRAME_RENDERED="FirstFrameRendered",t.PLAYER_SESSION_END_EVENT="PlayerSessionEnd",t.PLAYER_SESSION_START_EVENT="PlayerSessionStart",t.VIDEO_PLAYBACK_CLOSED_CAPTIONS_EVENT="VideoPlaybackClosedCaptions",t.VIDEO_PLAYBACK_QUALITY_SWITCH_EVENT="VideoPlaybackQualitySwitch",t.VIDEO_PLAYBACK_RENDERING_EVENT="VideoPlaybackRendering",t.VIDEO_PLAYER_HEARTBEAT_EVENT="VideoPlayerHeartbeat",t.JANUS_FLAGS="JanusFlags",t.FALLBACK_TO_NATIVE_PLAYER="FallbackToNativePlayer",t.PLAYER_CDN_FALLBACK="PlayerCDNFallback",t.PLAYER_LIFECYCLE_STATE="PlayerLifecycleState",t.PLAYER_REPORT_EVENT="PlayerReportedSessions",t.PLAYER_DEBUG_EVENT="PlayerDebugEvents",t.PLAYER_SESSION_START_GA_EVENT=A,t.PLAYER_SESSION_END_GA_EVENT=I,t.FIRST_FRAME_LOADED_GA_EVENT=O,t.QUALITY_LEVEL_INCREASE_GA_EVENT=L,t.QUALITY_LEVEL_DECREASE_GA_EVENT=R},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),u=null,l=0,c=[],d=n(85);function f(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(v(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(v(r.parts[a],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function p(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function h(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertAt.before,n);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function y(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return m(t,e.attrs),h(e,t),t}function m(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var a=l++;n=u||(u=y(t)),r=S.bind(null,n,a,!1),i=S.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",m(t,e.attrs),h(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=d(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){g(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return f(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}e&&f(p(e,t),t);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete o[s.id]}}}};var b,_=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function S(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=_(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t,n){var r=n(100);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}},function(e,t,n){var r=n(124);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){"use strict";n.r(t),n.d(t,"createStore",function(){return s}),n.d(t,"combineReducers",function(){return l}),n.d(t,"bindActionCreators",function(){return d}),n.d(t,"applyMiddleware",function(){return h}),n.d(t,"compose",function(){return p}),n.d(t,"__DO_NOT_USE__ActionTypes",function(){return o});var r=n(34),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function a(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function s(e,t,n){var i;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(s)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var u=e,l=t,c=[],d=c,f=!1;function p(){d===c&&(d=c.slice())}function h(){if(f)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return l}function g(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(f)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return p(),d.push(e),function(){if(t){if(f)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,p();var n=d.indexOf(e);d.splice(n,1)}}}function y(e){if(!a(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,l=u(l,e)}finally{f=!1}for(var t=c=d,n=0;n<t.length;n++){(0,t[n])()}return e}return y({type:o.INIT}),(i={dispatch:y,subscribe:g,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,y({type:o.REPLACE})}})[r.a]=function(){var e,t=g;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[r.a]=function(){return this},e},i}function u(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function l(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var a,s=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:o.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},o=0;o<s.length;o++){var l=s[o],c=n[l],d=e[l],f=c(d,t);if(void 0===f){var p=u(l,t);throw new Error(p)}i[l]=f,r=r||f!==d}return r?i:e}}function c(e,t){return function(){return t(e.apply(this,arguments))}}function d(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i],a=e[o];"function"==typeof a&&(r[o]=c(a,t))}return r}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map(function(e){return e(i)});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){f(e,t,n[t])})}return e}({},n,{dispatch:r=p.apply(void 0,o)(n.dispatch)})}}}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;(u=new Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){!function(e){"use strict";var t,n={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5},r=function(){function e(){}return e.isNullOrUndefined=function(e){return null==e},e.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(i,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},e}(),i=/[xy]/g,o=function(){function e(){this.listeners=[]}return e.prototype.addNotificationListener=function(e){this.listeners.push(e)},e.prototype.removeNotificationListener=function(e){for(var t=this.listeners.indexOf(e);-1<t;)this.listeners.splice(t,1),t=this.listeners.indexOf(e)},e.prototype.eventsSent=function(e){for(var t=this,n=function(n){r.listeners[n].eventsSent&&setTimeout(function(){return t.listeners[n].eventsSent(e)},0)},r=this,i=0;i<this.listeners.length;++i)n(i)},e.prototype.eventsDiscarded=function(e,t){for(var n=this,r=function(r){i.listeners[r].eventsDiscarded&&setTimeout(function(){return n.listeners[r].eventsDiscarded(e,t)},0)},i=this,o=0;o<this.listeners.length;++o)r(o)},e}();(t=e.LoggingSeverity||(e.LoggingSeverity={}))[t.CRITICAL=1]="CRITICAL",t[t.WARNING=2]="WARNING";var a={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69},s=function(){function e(t,n,r,i){void 0===r&&(r=!1),this.messageId=t,this.message=(r?e.AiUserActionablePrefix:e.AiNonUserActionablePrefix)+t;var o=(n?" message:"+e.sanitizeDiagnosticText(n):"")+(i?" props:"+e.sanitizeDiagnosticText(JSON.stringify(i)):"");this.message+=o}return e.sanitizeDiagnosticText=function(e){return'"'+e.replace(/\"/g,"")+'"'},e.dataType="MessageData",e.AiNonUserActionablePrefix="AI (Internal): ",e.AiUserActionablePrefix="AI: ",e}(),u=function(){function t(e){this.AIInternalMessagePrefix="AITR_",this.enableDebugExceptions=function(){return!1},this.consoleLoggingLevel=function(){return 1},this.telemetryLoggingLevel=function(){return 0},this.maxInternalMessageLimit=function(){return 25},this.queue=[],this._messageCount=0,this._messageLogged={},r.isNullOrUndefined(e)||(r.isNullOrUndefined(e.loggingLevelConsole)||(this.consoleLoggingLevel=function(){return e.loggingLevelConsole}),r.isNullOrUndefined(e.loggingLevelTelemetry)||(this.telemetryLoggingLevel=function(){return e.loggingLevelTelemetry}),r.isNullOrUndefined(e.maxMessageLimit)||(this.maxInternalMessageLimit=function(){return e.maxMessageLimit}),r.isNullOrUndefined(e.enableDebugExceptions)||(this.enableDebugExceptions=function(){return e.enableDebugExceptions}))}return t.prototype.throwInternal=function(t,n,r,i,o){void 0===o&&(o=!1);var a=new s(n,r,o,i);if(this.enableDebugExceptions())throw a;if(void 0!==a&&a&&void 0!==a.message){if(o){var u=+a.messageId;(!this._messageLogged[u]||this.consoleLoggingLevel()>=e.LoggingSeverity.WARNING)&&(this.warnToConsole(a.message),this._messageLogged[u]=!0)}else this.consoleLoggingLevel()>=e.LoggingSeverity.WARNING&&this.warnToConsole(a.message);this.logInternalMessage(t,a)}},t.prototype.warnToConsole=function(e){"undefined"!=typeof console&&console&&("function"==typeof console.warn?console.warn(e):"function"==typeof console.log&&console.log(e))},t.prototype.resetInternalMessageCount=function(){this._messageCount=0,this._messageLogged={}},t.prototype.logInternalMessage=function(e,t){if(!this._areInternalMessagesThrottled()){var n=!0,r=this.AIInternalMessagePrefix+t.messageId;if(this._messageLogged[r]?n=!1:this._messageLogged[r]=!0,n&&(e<=this.telemetryLoggingLevel()&&(this.queue.push(t),this._messageCount++),this._messageCount==this.maxInternalMessageLimit())){var i="Internal events throttle limit per PageView reached for this app.",o=new s(a.MessageLimitPerPVExceeded,i,!1);this.queue.push(o),this.warnToConsole(i)}}},t.prototype._areInternalMessagesThrottled=function(){return this._messageCount>=this.maxInternalMessageLimit()},t}(),l=function(){function e(){this._isInitialized=!1,this._extensions=new Array,this._channelController=new c}return e.prototype.initialize=function(e,t){var n=this;if(this._isInitialized)throw Error("Core should not be initialized more than once");if(!e||r.isNullOrUndefined(e.instrumentationKey))throw Error("Please provide instrumentation key");if(this.config=e,this._notificationManager=new o,this.config.extensions=r.isNullOrUndefined(this.config.extensions)?[]:this.config.extensions,this.config.extensionConfig=r.isNullOrUndefined(this.config.extensionConfig)?{}:this.config.extensionConfig,this.config.extensionConfig.NotificationManager=this._notificationManager,this.logger=new u(e),t.forEach(function(e){if(r.isNullOrUndefined(e.initialize))throw Error(d)}),0<this.config.extensions.length){var i=!0;if(this.config.extensions.forEach(function(e){r.isNullOrUndefined(e)&&(i=!1)}),!i)throw Error(d)}(s=this._extensions).push.apply(s,[this._channelController].concat(t,this.config.extensions)),this._extensions=this._extensions.sort(function(e,t){var n=e,r=t,i=typeof n.processTelemetry,o=typeof r.processTelemetry;return"function"===i&&"function"===o?n.priority-r.priority:"function"===i&&"function"!==o?1:"function"!==i&&"function"===o?-1:void 0});var a={};this._extensions.forEach(function(e){var t=e;t&&t.priority&&(r.isNullOrUndefined(a[t.priority])?a[t.priority]=t.identifier:n.logger.warnToConsole("Two extensions have same priority"+a[t.priority]+", "+t.identifier))});for(var s,l=-1,c=0;c<this._extensions.length-1;c++){var p=this._extensions[c];if(!p||"function"==typeof p.processTelemetry){if(p.priority===f){l=c+1;break}this._extensions[c].setNextPlugin(this._extensions[c+1])}}if(this._channelController.initialize(this.config,this,this._extensions),this._extensions.forEach(function(e){e&&e.priority<f&&e.initialize(n.config,n,n._extensions)}),l<this._extensions.length&&this._extensions.splice(l),0===this.getTransmissionControls().length)throw new Error("No channels available");this._isInitialized=!0},e.prototype.getTransmissionControls=function(){return this._channelController.ChannelControls},e.prototype.track=function(e){if(null===e)throw this._notifiyInvalidEvent(e),Error("Invalid telemetry item");if(e.baseData&&!e.baseType)throw this._notifiyInvalidEvent(e),Error("Provide data.baseType for data.baseData");e.baseType||(e.baseType="EventData"),e.iKey||(e.iKey=this.config.instrumentationKey),e.time||(e.time=(new Date).toISOString()),r.isNullOrUndefined(e.ver)&&(e.ver="4.0"),this._validateTelmetryItem(e);for(var t=0;t<this._extensions.length;){if(this._extensions[t].processTelemetry){this._extensions[t].processTelemetry(e);break}t++}},e.prototype.addNotificationListener=function(e){this._notificationManager.addNotificationListener(e)},e.prototype.removeNotificationListener=function(e){this._notificationManager.removeNotificationListener(e)},e.prototype.pollInternalLogs=function(){var e=this,t=this.config.diagnosticLogInterval;return 0<t||(t=1e4),setInterval(function(){var t=e.logger.queue;t.forEach(function(t){var n={name:"InternalMessageId: "+t.messageId,iKey:e.config.instrumentationKey,time:(new Date).toISOString(),baseType:s.dataType,baseData:{message:t.message}};e.track(n)}),t.length=0},t)},e.prototype._validateTelmetryItem=function(e){if(r.isNullOrUndefined(e.name))throw this._notifiyInvalidEvent(e),Error("telemetry name required");if(r.isNullOrUndefined(e.time))throw this._notifiyInvalidEvent(e),Error("telemetry timestamp required");if(r.isNullOrUndefined(e.iKey))throw this._notifiyInvalidEvent(e),Error("telemetry instrumentationKey required")},e.prototype._notifiyInvalidEvent=function(e){this._notificationManager.eventsDiscarded([e],n.InvalidEvent)},e}(),c=function(){function e(){this.identifier="ChannelControllerPlugin",this.priority=f}return e.prototype.processTelemetry=function(e){this.channelQueue.forEach(function(t){0<t.length&&t[0].processTelemetry(e)})},Object.defineProperty(e.prototype,"ChannelControls",{get:function(){return this.channelQueue},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e,t,n){var r=this;if(this.channelQueue=new Array,e.channels)e.channels.forEach(function(i){if(i&&0<i.length){(i=i.sort(function(e,t){return e.priority-t.priority})).forEach(function(r){return r.initialize(e,t,n)});for(var o=1;o<i.length;o++)i[o-1].setNextPlugin(i[o]);r.channelQueue.push(i)}});else{for(var i=new Array,o=0;o<n.length;o++){var a=n[o];a.priority>f&&i.push(a)}if(0<i.length){for((i=i.sort(function(e,t){return e.priority-t.priority})).forEach(function(r){return r.initialize(e,t,n)}),o=1;o<i.length;o++)i[o-1].setNextPlugin(i[o]);this.channelQueue.push(i)}}},e}(),d="Extensions must provide callback to initialize",f=200;e.MinChannelPriorty=100,e.EventsDiscardedReason=n,e.AppInsightsCore=l,e.CoreUtils=r,e.NotificationManager=o,e.DiagnosticLogger=u,e._InternalLogMessage=s,e._InternalMessageId=a,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){!function(e){"use strict";var t={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5},n=(r.isNullOrUndefined=function(e){return null==e},r.disableCookies=function(){r._canUseCookies=!1},r.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(o,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},r);function r(){}var i,o=/[xy]/g,a=(s.prototype.addNotificationListener=function(e){this.listeners.push(e)},s.prototype.removeNotificationListener=function(e){for(var t=this.listeners.indexOf(e);-1<t;)this.listeners.splice(t,1),t=this.listeners.indexOf(e)},s.prototype.eventsSent=function(e){for(var t=this,n=function(n){r.listeners[n].eventsSent&&setTimeout(function(){return t.listeners[n].eventsSent(e)},0)},r=this,i=0;i<this.listeners.length;++i)n(i)},s.prototype.eventsDiscarded=function(e,t){for(var n=this,r=function(r){i.listeners[r].eventsDiscarded&&setTimeout(function(){return n.listeners[r].eventsDiscarded(e,t)},0)},i=this,o=0;o<this.listeners.length;++o)r(o)},s);function s(){this.listeners=[]}(i=e.LoggingSeverity||(e.LoggingSeverity={}))[i.CRITICAL=1]="CRITICAL",i[i.WARNING=2]="WARNING";var u={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69},l=(c.sanitizeDiagnosticText=function(e){return'"'+e.replace(/\"/g,"")+'"'},c.dataType="MessageData",c.AiNonUserActionablePrefix="AI (Internal): ",c.AiUserActionablePrefix="AI: ",c);function c(e,t,n,r){void 0===n&&(n=!1),this.messageId=e,this.message=(n?c.AiUserActionablePrefix:c.AiNonUserActionablePrefix)+e;var i=(t?" message:"+c.sanitizeDiagnosticText(t):"")+(r?" props:"+c.sanitizeDiagnosticText(JSON.stringify(r)):"");this.message+=i}var d=(f.prototype.throwInternal=function(t,n,r,i,o){void 0===o&&(o=!1);var a=new l(n,r,o,i);if(this.enableDebugExceptions())throw a;if(void 0!==a&&a&&void 0!==a.message){if(o){var s=+a.messageId;(!this._messageLogged[s]||this.consoleLoggingLevel()>=e.LoggingSeverity.WARNING)&&(this.warnToConsole(a.message),this._messageLogged[s]=!0)}else this.consoleLoggingLevel()>=e.LoggingSeverity.WARNING&&this.warnToConsole(a.message);this.logInternalMessage(t,a)}},f.prototype.warnToConsole=function(e){"undefined"!=typeof console&&console&&("function"==typeof console.warn?console.warn(e):"function"==typeof console.log&&console.log(e))},f.prototype.resetInternalMessageCount=function(){this._messageCount=0,this._messageLogged={}},f.prototype.logInternalMessage=function(e,t){if(!this._areInternalMessagesThrottled()){var n=!0,r=this.AIInternalMessagePrefix+t.messageId;if(this._messageLogged[r]?n=!1:this._messageLogged[r]=!0,n&&(e<=this.telemetryLoggingLevel()&&(this.queue.push(t),this._messageCount++),this._messageCount==this.maxInternalMessageLimit())){var i="Internal events throttle limit per PageView reached for this app.",o=new l(u.MessageLimitPerPVExceeded,i,!1);this.queue.push(o),this.warnToConsole(i)}}},f.prototype._areInternalMessagesThrottled=function(){return this._messageCount>=this.maxInternalMessageLimit()},f);function f(e){this.AIInternalMessagePrefix="AITR_",this.enableDebugExceptions=function(){return!1},this.consoleLoggingLevel=function(){return 1},this.telemetryLoggingLevel=function(){return 0},this.maxInternalMessageLimit=function(){return 25},this.queue=[],this._messageCount=0,this._messageLogged={},n.isNullOrUndefined(e)||(n.isNullOrUndefined(e.loggingLevelConsole)||(this.consoleLoggingLevel=function(){return e.loggingLevelConsole}),n.isNullOrUndefined(e.loggingLevelTelemetry)||(this.telemetryLoggingLevel=function(){return e.loggingLevelTelemetry}),n.isNullOrUndefined(e.maxMessageLimit)||(this.maxInternalMessageLimit=function(){return e.maxMessageLimit}),n.isNullOrUndefined(e.enableDebugExceptions)||(this.enableDebugExceptions=function(){return e.enableDebugExceptions}))}var p=(h.prototype.initialize=function(e,t){var r=this;if(this._isInitialized)throw Error("Core should not be initialized more than once");if(!e||n.isNullOrUndefined(e.instrumentationKey))throw Error("Please provide instrumentation key");if(this.config=e,this._notificationManager=new a,this.config.extensions=n.isNullOrUndefined(this.config.extensions)?[]:this.config.extensions,this.config.extensionConfig=n.isNullOrUndefined(this.config.extensionConfig)?{}:this.config.extensionConfig,this.config.extensionConfig.NotificationManager=this._notificationManager,this.logger=new d(e),t.forEach(function(e){if(n.isNullOrUndefined(e.initialize))throw Error(m)}),0<this.config.extensions.length){var i=!0,o=!1;if(this.config.extensions.forEach(function(e){n.isNullOrUndefined(e)&&(i=!1),e.priority>b&&(o=!0)}),!i)throw Error(m);if(o)throw Error(v)}(u=this._extensions).push.apply(u,[this._channelController].concat(t,this.config.extensions)),this._extensions=this._extensions.sort(function(e,t){var n=e,r=t,i=typeof n.processTelemetry,o=typeof r.processTelemetry;return"function"==i&&"function"==o?n.priority-r.priority:"function"==i&&"function"!=o?1:"function"!=i&&"function"==o?-1:void 0});var s={};this._extensions.forEach(function(e){var t=e;t&&t.priority&&(n.isNullOrUndefined(s[t.priority])?s[t.priority]=t.identifier:r.logger.warnToConsole("Two extensions have same priority"+s[t.priority]+", "+t.identifier))});for(var u,l=-1,c=0;c<this._extensions.length-1;c++){var f=this._extensions[c];if(!f||"function"==typeof f.processTelemetry){if(f.priority===b){l=c+1;break}this._extensions[c].setNextPlugin(this._extensions[c+1])}}if(this._channelController.initialize(this.config,this,this._extensions),this._extensions.forEach(function(e){e&&e.priority<b&&e.initialize(r.config,r,r._extensions)}),l<this._extensions.length&&this._extensions.splice(l),0===this.getTransmissionControls().length)throw new Error("No channels available");this._isInitialized=!0},h.prototype.getTransmissionControls=function(){return this._channelController.ChannelControls},h.prototype.track=function(e){if(null===e)throw this._notifiyInvalidEvent(e),Error("Invalid telemetry item");if(e.baseData&&!e.baseType)throw this._notifiyInvalidEvent(e),Error("Provide data.baseType for data.baseData");e.baseType||(e.baseType="EventData"),e.iKey||(e.iKey=this.config.instrumentationKey),e.time||(e.time=(new Date).toISOString()),n.isNullOrUndefined(e.ver)&&(e.ver="4.0"),this._validateTelmetryItem(e);for(var t=0;t<this._extensions.length;){if(this._extensions[t].processTelemetry){this._extensions[t].processTelemetry(e);break}t++}},h.prototype.addNotificationListener=function(e){this._notificationManager.addNotificationListener(e)},h.prototype.removeNotificationListener=function(e){this._notificationManager.removeNotificationListener(e)},h.prototype.pollInternalLogs=function(){var e=this,t=this.config.diagnosticLogInterval;return 0<t||(t=1e4),setInterval(function(){var t=e.logger.queue;t.forEach(function(t){var n={name:"InternalMessageId: "+t.messageId,iKey:e.config.instrumentationKey,time:(new Date).toISOString(),baseType:l.dataType,baseData:{message:t.message}};e.track(n)}),t.length=0},t)},h.prototype._validateTelmetryItem=function(e){if(n.isNullOrUndefined(e.name))throw this._notifiyInvalidEvent(e),Error("telemetry name required");if(n.isNullOrUndefined(e.time))throw this._notifiyInvalidEvent(e),Error("telemetry timestamp required");if(n.isNullOrUndefined(e.iKey))throw this._notifiyInvalidEvent(e),Error("telemetry instrumentationKey required")},h.prototype._notifiyInvalidEvent=function(e){this._notificationManager.eventsDiscarded([e],t.InvalidEvent)},h);function h(){this._isInitialized=!1,this._extensions=new Array,this._channelController=new g}var g=(y.prototype.processTelemetry=function(e){this.channelQueue.forEach(function(t){0<t.length&&t[0].processTelemetry(e)})},Object.defineProperty(y.prototype,"ChannelControls",{get:function(){return this.channelQueue},enumerable:!0,configurable:!0}),y.prototype.initialize=function(e,t,r){var i=this;if(e.isCookieUseDisabled&&n.disableCookies(),this.channelQueue=new Array,e.channels){var o=void 0;e.channels.forEach(function(n){if(n&&0<n.length){if((n=n.sort(function(e,t){return e.priority-t.priority})).forEach(function(n){n.priority<b&&(o=n.identifier),n.initialize(e,t,r)}),o)throw Error(_+o);for(var a=1;a<n.length;a++)n[a-1].setNextPlugin(n[a]);i.channelQueue.push(n)}})}for(var a=new Array,s=0;s<r.length;s++){var u=r[s];u.priority>b&&a.push(u)}if(0<a.length){for((a=a.sort(function(e,t){return e.priority-t.priority})).forEach(function(n){return n.initialize(e,t,r)}),s=1;s<a.length;s++)a[s-1].setNextPlugin(a[s]);this.channelQueue.push(a)}},y);function y(){this.identifier="ChannelControllerPlugin",this.priority=b}var m="Extensions must provide callback to initialize",v="Channels must be provided through config.channels only",b=500,_="Channel has invalid priority";e.MinChannelPriorty=100,e.EventsDiscardedReason=t,e.AppInsightsCore=p,e.CoreUtils=n,e.NotificationManager=a,e.DiagnosticLogger=d,e._InternalLogMessage=l,e._InternalMessageId=u,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){!function(e){"use strict";function t(e,t){return null==e}function n(e){throw void 0===e&&(e=1),new Error("Argument "+e+" is empty.")}function r(e){return"function"==typeof e&&"getType"in e}function i(e){throw void 0===e&&(e=1),new Error("Argument "+e+' is invalid, it should be an action-creator instance from "typesafe-actions"')}function o(e,t){if(null==e)throw new Error("Argument contains array with empty element at index "+t);if(null==e.getType)throw new Error("Argument contains array with invalid element at index "+t+', it should be an action-creator instance from "typesafe-actions"')}function a(e){return"string"==typeof e||"symbol"==typeof e}function s(e){return!a(e)}function u(e){throw void 0===e&&(e=1),new Error("Argument "+e+" is invalid, it should be an action type of type: string | symbol")}function l(e,t){if(null==e)throw new Error("Argument contains array with empty element at index "+t);if("string"!=typeof e&&"symbol"!=typeof e)throw new Error("Argument contains array with invalid element at index "+t+", it should be of type: string | symbol")}function c(e,r,o,a){return t(e)&&n(1),s(e)&&i(1),{type:e,payload:r,meta:o,error:a}}function d(e,r){t(e)&&n(1),s(e)&&u(1);var i=null!=r?r(e):function(){return{type:e}};return Object.assign(i,{getType:function(){return e},toString:function(){return e}})}function f(e){return t(e)&&n(1),s(e)&&u(1),Object.assign(function(){return d(e,function(e){return function(t,n){return{type:e,payload:t,meta:n}}})},{map:function(t){return d(e,function(e){return function(n,r){return Object.assign(t(n,r),{type:e})}})}})}function p(e){return t(e)&&n(1),r(e)||i(1),e.getType()}e.action=c,e.createAction=function(e,t){var n=null==t?function(){return c(e)}:t(c.bind(null,e));return Object.assign(n,{getType:function(){return e},toString:function(){return e}})},e.createActionDeprecated=function(e,t){var n;if(null!=t){if("function"!=typeof t)throw new Error("second argument is not a function");n=t}else n=function(){return{type:e}};if(null==e)throw new Error("first argument is missing");if("string"!=typeof e&&"symbol"!=typeof e)throw new Error("first argument should be type of: string | symbol");return n},e.createAsyncAction=function(e,t,n,r){return[e,t,n].forEach(l),Object.assign(function(){return{request:f(e)(),success:f(t)(),failure:f(n)(),cancel:r&&f(r)()}},{})},e.createCustomAction=d,e.createReducer=function e(t,n){void 0===n&&(n={});var i=Object.assign({},n);return Object.assign(function(e,n){if(void 0===e&&(e=t),i.hasOwnProperty(n.type)){var r=i[n.type];if("function"!=typeof r)throw Error('Reducer under "'+n.type+'" key is not a valid reducer');return r(e,n)}return e},{handlers:Object.assign({},i),handleAction:function(n,o){var s=Array.isArray(n)?n:[n],u={};return s.map(function(e){return r(e)?p(e):a(e)?e:function(e){throw void 0===e&&(e=1),new Error("Argument "+e+' is invalid, it should be an action-creator instance from "typesafe-actions" or action type of type: string | symbol')}()}).forEach(function(e){return u[e]=o}),e(t,Object.assign({},i,u))}})},e.createStandardAction=f,e.getType=p,e.isActionOf=function(e,r){t(e)&&n(1);var i=Array.isArray(e)?e:[e];i.forEach(o);var a=function(e){return i.some(function(t){return e.type===t.getType()})};return void 0===r?a:a(r)},e.isOfType=function(e,r){t(e)&&n(1);var i=Array.isArray(e)?e:[e];i.forEach(l);var o=function(e){return i.includes(e.type)};return void 0===r?o:o(r)}}(t)},function(e,t,n){e.exports=n(108)()},function(e,t,n){var r=n(115);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(128);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(99);e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},function(e,t,n){var r=n(105),i=n(106),o=n(107);e.exports=function(e,t){return r(e)||i(e,t)||o()}},function(e,t,n){var r=n(88),i=n(89),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){var r=n(122);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(120);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t,n){var r=n(111);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(119);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(121);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(129);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(114);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(117);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(126);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},,,function(e,t,n){"use strict";e.exports=n(110)},function(e,t,n){"use strict";(function(e,r){var i,o=n(46);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(o.a)(i);t.a=a}).call(this,n(40),n(41)(e))},function(e,t,n){"use strict";var r=n(31),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var i=p(n);i&&i!==h&&e(t,i,r)}var a=c(n);d&&(a=a.concat(d(n)));for(var s=u(t),g=u(n),y=0;y<a.length;++y){var m=a[y];if(!(o[m]||r&&r[m]||g&&g[m]||s&&s[m])){var v=f(n,m);try{l(t,m,v)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";(function(e,r){var i,o=n(76);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(o.a)(i);t.a=a}).call(this,n(40),n(41)(e))},function(e,t,n){var r=n(118);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(125);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(127);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=window.ReactDOM},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){var r;r=function(){var e=!0;function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function r(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var i,a=n(/(ipod|iphone|ipad)/i).toLowerCase(),s=!/like android/i.test(t)&&/android/i.test(t),u=/nexus\s*[0-6]\s*/i.test(t),l=!u&&/nexus\s*[0-9]+/i.test(t),c=/CrOS/.test(t),d=/silk/i.test(t),f=/sailfish/i.test(t),p=/tizen/i.test(t),h=/(web|hpw)(o|0)s/i.test(t),g=/windows phone/i.test(t),y=(/SamsungBrowser/i.test(t),!g&&/windows/i.test(t)),m=!a&&!d&&/macintosh/i.test(t),v=!s&&!f&&!p&&!h&&/linux/i.test(t),b=r(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),_=n(/version\/(\d+(\.\d+)?)/i),S=/tablet/i.test(t)&&!/tablet pc/i.test(t),w=!S&&/[^-]mobi/i.test(t),E=/xbox/i.test(t);/opera/i.test(t)?i={name:"Opera",opera:e,version:_||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?i={name:"Opera",opera:e,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||_}:/SamsungBrowser/i.test(t)?i={name:"Samsung Internet for Android",samsungBrowser:e,version:_||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?i={name:"NAVER Whale browser",whale:e,version:n(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?i={name:"MZ Browser",mzbrowser:e,version:n(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?i={name:"Opera Coast",coast:e,version:_||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?i={name:"Focus",focus:e,version:n(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?i={name:"Yandex Browser",yandexbrowser:e,version:_||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?i={name:"UC Browser",ucbrowser:e,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?i={name:"Maxthon",maxthon:e,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?i={name:"Epiphany",epiphany:e,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?i={name:"Puffin",puffin:e,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?i={name:"Sleipnir",sleipnir:e,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?i={name:"K-Meleon",kMeleon:e,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:g?(i={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},b?(i.msedge=e,i.version=b):(i.msie=e,i.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?i={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?i={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?i={name:"Microsoft Edge",msedge:e,version:b}:/vivaldi/i.test(t)?i={name:"Vivaldi",vivaldi:e,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||_}:f?i={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?i={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(i={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(i.firefoxos=e,i.osname="Firefox OS")):d?i={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?i={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?i={name:"SlimerJS",slimer:e,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:_||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(i={name:"WebOS",osname:"WebOS",webos:e,version:_||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(i.touchpad=e)):/bada/i.test(t)?i={name:"Bada",osname:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:p?i={name:"Tizen",osname:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||_}:/qupzilla/i.test(t)?i={name:"QupZilla",qupzilla:e,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||_}:/chromium/i.test(t)?i={name:"Chromium",chromium:e,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||_}:/chrome|crios|crmo/i.test(t)?i={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?i={name:"Android",version:_}:/safari|applewebkit/i.test(t)?(i={name:"Safari",safari:e},_&&(i.version=_)):a?(i={name:"iphone"==a?"iPhone":"ipad"==a?"iPad":"iPod"},_&&(i.version=_)):i=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:n(/googlebot\/(\d+(\.\d+))/i)||_}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(i.name=i.name||"Blink",i.blink=e):(i.name=i.name||"Webkit",i.webkit=e),!i.version&&_&&(i.version=_)):!i.opera&&/gecko\//i.test(t)&&(i.name=i.name||"Gecko",i.gecko=e,i.version=i.version||n(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||!s&&!i.silk?!i.windowsphone&&a?(i[a]=e,i.ios=e,i.osname="iOS"):m?(i.mac=e,i.osname="macOS"):E?(i.xbox=e,i.osname="Xbox"):y?(i.windows=e,i.osname="Windows"):v&&(i.linux=e,i.osname="Linux"):(i.android=e,i.osname="Android");var T="";i.windows?T=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?T=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?T=(T=n(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):a?T=(T=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):s?T=n(/android[ \/-](\d+(\.\d+)*)/i):i.webos?T=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?T=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?T=n(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(T=n(/tizen[\/\s](\d+(\.\d+)*)/i)),T&&(i.osversion=T);var x=!i.windows&&T.split(".")[0];return S||l||"ipad"==a||s&&(3==x||x>=4&&!w)||i.silk?i.tablet=e:(w||"iphone"==a||"ipod"==a||s||u||i.blackberry||i.webos||i.bada)&&(i.mobile=e),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.whale&&1===o([i.version,"1.0"])||i.mzbrowser&&1===o([i.version,"6.0"])||i.focus&&1===o([i.version,"1.0"])||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=e:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=e:i.x=e,i}var n=t("undefined"!=typeof navigator&&navigator.userAgent||"");function r(e){return e.split(".").length}function i(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function o(e){for(var t=Math.max(r(e[0]),r(e[1])),n=i(e,function(e){var n=t-r(e);return i((e+=new Array(n+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--t>=0;){if(n[0][t]>n[1][t])return 1;if(n[0][t]!==n[1][t])return-1;if(0===t)return 0}}function a(e,r,i){var a=n;"string"==typeof r&&(i=r,r=void 0),void 0===r&&(r=!1),i&&(a=t(i));var s=""+a.version;for(var u in e)if(e.hasOwnProperty(u)&&a[u]){if("string"!=typeof e[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(e));return o([s,e[u]])<0}return r}return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in n)return!0}return!1},n.isUnsupportedBrowser=a,n.compareVersions=o,n.check=function(e,t,n){return!a(e,t,n)},n._detect=t,n.detect=t,n},e.exports?e.exports=r():n(86)("bowser",r)},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},function(e,t,n){var r;"undefined"!=typeof window&&(r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||e,o),u=i?i+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},l.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,r,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,o),!0;case 6:return c.fn.call(c.context,t,n,r,o,a),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,r);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||u(this,o);else{for(var s=0,l=[],c=a.length;s<c;s++)(a[s].fn!==t||r&&!a[s].once||n&&a[s].context!==n)&&l.push(a[s]);l.length?this._events[o]=1===l.length?l[0]:l:u(this,o)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&u(this,t)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l},"./node_modules/node-libs-browser/node_modules/events/events.js":function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(l=n.slice()).length,u=0;u<a;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,o,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,n){var r,i,o,a,s;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):t;var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var u=i.exec(a.path);a.netLoc=u[1],a.path=u[2]}a.netLoc&&!a.path&&(a.path="/");var l={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(l.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var c=a.path,d=c.substring(0,c.lastIndexOf("/")+1)+o.path;l.path=s.normalizePath(d)}else l.path=a.path,o.params||(l.params=a.params,o.query||(l.query=a.query));return null===l.path&&(l.path=n.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(l)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(o,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},"./node_modules/webworkify-webpack/index.js":function(e,t,n){function r(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r.default||r}var i="[\\.|\\-|\\+|\\w|/|@]+",o="\\((/\\*.*?\\*/)?s?.*?("+i+").*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,r){var s={};s[r]=[];var u=t.toString(),l=u.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return s;for(var c,d=l[1],f=new RegExp("(\\\\n|\\W)"+a(d)+o,"g");c=f.exec(u);)"dll-reference"!==c[3]&&s[r].push(c[3]);for(f=new RegExp("\\("+a(d)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+o,"g");c=f.exec(u);)e[c[2]]||(s[r].push(c[1]),e[c[2]]=n(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);for(var p,h=Object.keys(s),g=0;g<h.length;g++)for(var y=0;y<s[h[g]].length;y++)p=s[h[g]][y],isNaN(1*p)||(s[h[g]][y]=1*s[h[g]][y]);return s}function u(e){return Object.keys(e).reduce(function(t,n){return t||e[n].length>0},!1)}e.exports=function(e,t){t=t||{};var i={main:n.m},o=t.all?{main:Object.keys(i.main)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};u(n);)for(var o=Object.keys(n),a=0;a<o.length;a++){var l=o[a],c=n[l].pop();if(i[l]=i[l]||{},!i[l][c]&&e[l][c]){i[l][c]=!0,r[l]=r[l]||[],r[l].push(c);for(var d=s(e,e[l][c],l),f=Object.keys(d),p=0;p<f.length;p++)n[f[p]]=n[f[p]]||[],n[f[p]]=n[f[p]].concat(d[f[p]])}}return r}(i,e),a="";Object.keys(o).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;o[e][t];)t++;o[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o[e].map(function(t){return JSON.stringify(t)+": "+i[e][t].toString()}).join(",")+"});\n"}),a=a+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o.main.map(function(e){return JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"}))(self);";var l=new window.Blob([a],{type:"text/javascript"});if(t.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),d=new window.Worker(c);return d.objectURL=c,d}},"./src/config.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/controller/abr-controller.js"),i=n("./src/controller/buffer-controller.js"),o=n("./src/controller/cap-level-controller.js"),a=n("./src/controller/fps-controller.js"),s=n("./src/utils/xhr-loader.js"),u=n("./src/controller/audio-track-controller.js"),l=n("./src/controller/audio-stream-controller.js"),c=n("./src/utils/cues.js"),d=n("./src/controller/timeline-controller.js"),f=n("./src/controller/subtitle-track-controller.js"),p=n("./src/controller/subtitle-stream-controller.js"),h=n("./src/controller/eme-controller.js"),g=n("./src/utils/mediakeys-helper.js");t.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:r.default,bufferController:i.default,capLevelController:o.default,fpsController:a.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:g.requestMediaKeySystemAccess},t.hlsDefaultConfig.subtitleStreamController=p.SubtitleStreamController,t.hlsDefaultConfig.subtitleTrackController=f.default,t.hlsDefaultConfig.timelineController=d.default,t.hlsDefaultConfig.cueHandler=c,t.hlsDefaultConfig.enableCEA708Captions=!0,t.hlsDefaultConfig.enableWebVTT=!0,t.hlsDefaultConfig.captionsTextTrack1Label="English",t.hlsDefaultConfig.captionsTextTrack1LanguageCode="en",t.hlsDefaultConfig.captionsTextTrack2Label="Spanish",t.hlsDefaultConfig.captionsTextTrack2LanguageCode="es",t.hlsDefaultConfig.audioStreamController=l.default,t.hlsDefaultConfig.audioTrackController=u.default,t.hlsDefaultConfig.emeController=h.default},"./src/controller/abr-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/utils/buffer-helper.js"),u=n("./src/errors.js"),l=n("./src/utils/logger.js"),c=n("./src/utils/ewma-bandwidth-estimator.js"),d=window.performance,f=function(t){function n(e){var n=t.call(this,e,o.default.FRAG_LOADING,o.default.FRAG_LOADED,o.default.FRAG_BUFFERED,o.default.ERROR)||this;return n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=e,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(n),n}return i(n,t),n.prototype.destroy=function(){this.clearTimer(),a.default.prototype.destroy.call(this)},n.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n=this.hls,r=n.config,i=t.level,o=void 0,a=void 0;n.levels[i].details.live?(o=r.abrEwmaFastLive,a=r.abrEwmaSlowLive):(o=r.abrEwmaFastVoD,a=r.abrEwmaSlowVoD),this._bwEstimator=new c.default(n,a,o,r.abrEwmaDefaultEstimate)}},n.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent;if(n){var r=n.loader,i=e.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return l.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=r.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var u=d.now()-a.trequest,c=Math.abs(t.playbackRate);if(u>500*n.duration/c){var f=e.levels,p=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/u),h=f[n.level],g=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,y=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*g/8)),m=t.currentTime,v=(y-a.loaded)/p,b=(s.BufferHelper.bufferInfo(t,m,e.config.maxBufferHole).end-m)/c;if(b<2*n.duration/c&&v>b){var _=void 0,S=void 0;for(S=n.level-1;S>i;S--){var w=f[S].realBitrate?Math.max(f[S].realBitrate,f[S].bitrate):f[S].bitrate;if((_=n.duration*w/(6.4*p))<b)break}_<v&&(l.logger.warn("loading too slow, abort fragment loading and switch to level "+S+":fragLoadedDelay["+S+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+_.toFixed(1)+"<"+v.toFixed(1)+":"+b.toFixed(1)),e.nextLoadLevel=S,this._bwEstimator.sample(u,a.loaded),r.abort(),this.clearTimer(),e.trigger(o.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}}},n.prototype.onFragLoaded=function(t){var n=t.frag;if("main"===n.type&&e.isFinite(n.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[n.level],i=(r.loaded?r.loaded.bytes:0)+t.stats.loaded,o=(r.loaded?r.loaded.duration:0)+t.frag.duration;r.loaded={bytes:i,duration:o},r.realBitrate=Math.round(8*i/o)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},n.prototype.onFragBuffered=function(t){var n=t.stats,r=t.frag;if(!0!==n.aborted&&"main"===r.type&&e.isFinite(r.sn)&&(!r.bitrateTest||n.tload===n.tbuffered)){var i=n.tparsed-n.trequest;l.logger.log("latency/loading/parsing/append/kbps:"+Math.round(n.tfirst-n.trequest)+"/"+Math.round(n.tload-n.tfirst)+"/"+Math.round(n.tparsed-n.tload)+"/"+Math.round(n.tbuffered-n.tparsed)+"/"+Math.round(8*n.loaded/(n.tbuffered-n.trequest))),this._bwEstimator.sample(i,n.loaded),n.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},n.prototype.onError=function(e){switch(e.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},n.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(n.prototype,"nextAutoLevel",{get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_nextABRAutoLevel",{get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,r=e.config,i=e.minAutoLevel,o=e.media,a=this.lastLoadedFragLevel,u=this.fragCurrent?this.fragCurrent.duration:0,c=o?o.currentTime:0,d=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,p=(s.BufferHelper.bufferInfo(o,c,r.maxBufferHole).end-c)/d,h=this._findBestLevel(a,u,f,i,t,p,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(h>=0)return h;l.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var g=u?Math.min(u,r.maxStarvationDelay):r.maxStarvationDelay,y=r.abrBandWidthFactor,m=r.abrBandWidthUpFactor;if(0===p){var v=this.bitrateTestDelay;if(v)g=(u?Math.min(u,r.maxLoadingDelay):r.maxLoadingDelay)-v,l.logger.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),y=m=1}return h=this._findBestLevel(a,u,f,i,t,p+g,y,m,n),Math.max(h,0)},enumerable:!0,configurable:!0}),n.prototype._findBestLevel=function(e,t,n,r,i,o,a,s,u){for(var c=i;c>=r;c--){var d=u[c];if(d){var f=d.details,p=f?f.totalduration/f.fragments.length:t,h=!!f&&f.live,g=void 0;g=c<=e?a*n:s*n;var y=u[c].realBitrate?Math.max(u[c].realBitrate,u[c].bitrate):u[c].bitrate,m=y*p/g;if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(g)+"/"+y+"/"+p+"/"+o+"/"+m),g>y&&(!m||h&&!this.bitrateTestDelay||m<o))return c}}return-1},n}(a.default);t.default=f}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/audio-stream-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/utils/binary-search.js"),a=n("./src/utils/buffer-helper.js"),s=n("./src/demux/demuxer.js"),u=n("./src/events.js"),l=n("./src/controller/level-helper.js"),c=n("./src/utils/time-ranges.js"),d=n("./src/errors.js"),f=n("./src/utils/logger.js"),p=n("./src/utils/discontinuities.js"),h=n("./src/controller/fragment-tracker.js"),g=n("./src/loader/fragment.js"),y=n("./src/controller/base-stream-controller.js"),m=window.performance,v=function(t){function n(e,n){var r=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.AUDIO_TRACKS_UPDATED,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.BUFFER_RESET,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED,u.default.INIT_PTS_FOUND)||this;return r.fragmentTracker=n,r.config=e.config,r.audioCodecSwap=!1,r._state=y.State.STOPPED,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}return i(n,t),n.prototype.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,r=e.initPTS;"main"===t&&(this.initPTS[n]=r,this.videoTrackCC=n,f.logger.log("InitPTS for cc: "+n+" found from video track: "+r),this.state===y.State.WAITING_INIT_PTS&&this.tick())},n.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(f.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=y.State.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=y.State.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=y.State.STOPPED},Object.defineProperty(n.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,f.logger.log("audio stream:"+t+"->"+e)}},enumerable:!0,configurable:!0}),n.prototype.doTick=function(){var t,n,r,i=this.hls,s=i.config;switch(this.state){case y.State.ERROR:case y.State.PAUSED:case y.State.BUFFER_FLUSHING:break;case y.State.STARTING:this.state=y.State.WAITING_TRACK,this.loadedmetadata=!1;break;case y.State.IDLE:var l=this.tracks;if(!l)break;if(!this.media&&(this.startFragRequested||!s.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var c=this.mediaBuffer?this.mediaBuffer:this.media,d=this.videoBuffer?this.videoBuffer:this.media,g=a.BufferHelper.bufferInfo(c,t,s.maxBufferHole),v=a.BufferHelper.bufferInfo(d,t,s.maxBufferHole),b=g.len,_=g.end,S=this.fragPrevious,w=Math.min(s.maxBufferLength,s.maxMaxBufferLength),E=Math.max(w,v.len),T=this.audioSwitch,x=this.trackId;if((b<E||T)&&x<l.length){if(void 0===(r=l[x].details)){this.state=y.State.WAITING_TRACK;break}if(!T&&this._streamEnded(g,r))return this.hls.trigger(u.default.BUFFER_EOS,{type:"audio"}),void(this.state=y.State.ENDED);var k=r.fragments,C=k.length,A=k[0].start,I=k[C-1].start+k[C-1].duration,O=void 0;if(T)if(r.live&&!r.PTSKnown)f.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),_=0;else if(_=t,r.PTSKnown&&t<A){if(!(g.end>A||g.nextStart))return;f.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=A+.05}if(r.initSegment&&!r.initSegment.data)O=r.initSegment;else if(_<=A){if(O=k[0],null!==this.videoTrackCC&&O.cc!==this.videoTrackCC&&(O=p.findFragWithCC(k,this.videoTrackCC)),r.live&&O.loadIdx&&O.loadIdx===this.fragLoadIdx){var L=g.nextStart?g.nextStart:A;return f.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(L+.05)),void(this.media.currentTime=L+.05)}}else{var R=void 0,P=s.maxFragLookUpTolerance,D=S?k[S.sn-k[0].sn+1]:void 0,M=function(e){var t=Math.min(P,e.duration);return e.start+e.duration-t<=_?1:e.start-t>_&&e.start?-1:0};_<I?(_>I-P&&(P=0),R=D&&!M(D)?D:o.default.search(k,M)):R=k[C-1],R&&(O=R,A=R.start,S&&O.level===S.level&&O.sn===S.sn&&(O.sn<r.endSN?(O=k[O.sn+1-r.startSN],f.logger.log("SN just loaded, load next one: "+O.sn)):O=null))}O&&(O.encrypted?(f.logger.log("Loading key for "+O.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+x),this.state=y.State.KEY_LOADING,i.trigger(u.default.KEY_LOADING,{frag:O})):(f.logger.log("Loading "+O.sn+", cc: "+O.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+x+", currentTime:"+t+",bufferEnd:"+_.toFixed(3)),this.fragCurrent=O,(T||this.fragmentTracker.getState(O)===h.FragmentState.NOT_LOADED)&&(this.startFragRequested=!0,e.isFinite(O.sn)&&(this.nextLoadPosition=O.start+O.duration),i.trigger(u.default.FRAG_LOADING,{frag:O}),this.state=y.State.FRAG_LOADING)))}break;case y.State.WAITING_TRACK:(n=this.tracks[this.trackId])&&n.details&&(this.state=y.State.IDLE);break;case y.State.FRAG_LOADING_WAITING_RETRY:var N=m.now(),F=this.retryDate,j=(c=this.media)&&c.seeking;(!F||N>=F||j)&&(f.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=y.State.IDLE);break;case y.State.WAITING_INIT_PTS:var U=this.videoTrackCC;if(void 0===this.initPTS[U])break;var B=this.waitingFragment;if(B){var V=B.frag.cc;U!==V?(n=this.tracks[this.trackId]).details&&n.details.live&&(f.logger.warn("Waiting fragment CC ("+V+") does not match video track CC ("+U+")"),this.waitingFragment=null,this.state=y.State.IDLE):(this.state=y.State.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=y.State.IDLE;break;case y.State.STOPPED:case y.State.FRAG_LOADING:case y.State.PARSING:case y.State.PARSED:case y.State.ENDED:}},n.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},n.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(f.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},n.prototype.onAudioTracksUpdated=function(e){f.logger.log("audio tracks updated"),this.tracks=e.audioTracks},n.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=y.State.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=y.State.IDLE),this.tick()},n.prototype.onAudioTrackLoaded=function(t){var n=t.details,r=t.id,i=this.tracks[r],o=n.totalduration,a=0;if(f.logger.log("track "+r+" loaded ["+n.startSN+","+n.endSN+"],duration:"+o),n.live){var s=i.details;s&&n.fragments.length>0?(l.mergeDetails(s,n),a=n.fragments[0].start,n.PTSKnown?f.logger.log("live audio playlist sliding:"+a.toFixed(3)):f.logger.log("live audio playlist - outdated PTS, unknown sliding")):(n.PTSKnown=!1,f.logger.log("live audio playlist - first load, unknown sliding"))}else n.PTSKnown=!1;if(i.details=n,!this.startFragRequested){if(-1===this.startPosition){var u=n.startTimeOffset;e.isFinite(u)?(f.logger.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===y.State.WAITING_TRACK&&(this.state=y.State.IDLE),this.tick()},n.prototype.onKeyLoaded=function(){this.state===y.State.KEY_LOADING&&(this.state=y.State.IDLE,this.tick())},n.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===y.State.FRAG_LOADING&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var r=this.tracks[this.trackId],i=r.details,o=i.totalduration,a=t.level,l=t.sn,c=t.cc,d=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",p=this.stats=e.stats;if("initSegment"===l)this.state=y.State.IDLE,p.tparsed=p.tbuffered=m.now(),i.initSegment.data=e.payload,this.hls.trigger(u.default.FRAG_BUFFERED,{stats:p,frag:t,id:"audio"}),this.tick();else{this.state=y.State.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new s.default(this.hls,"audio"));var h=this.initPTS[c],g=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==h){this.pendingBuffering=!0,f.logger.log("Demuxing "+l+" of ["+i.startSN+" ,"+i.endSN+"],track "+a);this.demuxer.push(e.payload,g,d,null,t,o,!1,h)}else f.logger.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+l+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.waitingFragment=e,this.state=y.State.WAITING_INIT_PTS}}this.fragLoadError=0},n.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===y.State.PARSING){var r=e.tracks,i=void 0;if(r.video&&delete r.video,i=r.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(u.default.BUFFER_CODECS,r),f.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var o=i.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,a))}this.tick()}}},n.prototype.onFragParsingData=function(t){var n=this,r=this.fragCurrent,i=t.frag;if(r&&"audio"===t.id&&"audio"===t.type&&i.sn===r.sn&&i.level===r.level&&this.state===y.State.PARSING){var o=this.trackId,a=this.tracks[o],s=this.hls;e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),r.addElementaryStream(g.default.ElementaryStreamTypes.AUDIO),f.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),l.updateFragPTSDTS(a.details,r,t.startPTS,t.endPTS);var c=this.audioSwitch,p=this.media,h=!1;if(c&&p)if(p.readyState){var m=p.currentTime;f.logger.log("switching audio track : currentTime:"+m),m>=t.startPTS&&(f.logger.log("switching audio track : flushing all audio"),this.state=y.State.BUFFER_FLUSHING,s.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),h=!0,this.audioSwitch=!1,s.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:o}))}else this.audioSwitch=!1,s.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:o});var v=this.pendingData;if(!v)return f.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void s.trigger(u.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&v.push({type:t.type,data:e,parent:"audio",content:"data"})}),!h&&v.length&&(v.forEach(function(e){n.state===y.State.PARSING&&(n.pendingBuffering=!0,n.hls.trigger(u.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},n.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===y.State.PARSING&&(this.stats.tparsed=m.now(),this.state=y.State.PARSED,this._checkAppendedParsed())},n.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},n.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},n.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==y.State.PARSING&&t!==y.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},n.prototype._checkAppendedParsed=function(){if(!(this.state!==y.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=m.now(),n.trigger(u.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;f.logger.log("audio buffered : "+c.default.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=y.State.IDLE}this.tick()}},n.prototype.onError=function(t){var n=t.frag;if(!n||"audio"===n.type)switch(t.details){case d.ErrorDetails.FRAG_LOAD_ERROR:case d.ErrorDetails.FRAG_LOAD_TIMEOUT:var r=t.frag;if(r&&"audio"!==r.type)break;if(!t.fatal){var i=this.fragLoadError;if(i?i++:i=1,i<=(s=this.config).fragLoadingMaxRetry){this.fragLoadError=i;var o=Math.min(Math.pow(2,i-1)*s.fragLoadingRetryDelay,s.fragLoadingMaxRetryTimeout);f.logger.warn("AudioStreamController: frag loading failed, retry in "+o+" ms"),this.retryDate=m.now()+o,this.state=y.State.FRAG_LOADING_WAITING_RETRY}else f.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=y.State.ERROR}break;case d.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case d.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case d.ErrorDetails.KEY_LOAD_ERROR:case d.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==y.State.ERROR&&(this.state=t.fatal?y.State.ERROR:y.State.IDLE,f.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case d.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===y.State.PARSING||this.state===y.State.PARSED)){var s,l=this.mediaBuffer,c=this.media.currentTime;if(l&&a.BufferHelper.isBuffered(l,c)&&a.BufferHelper.isBuffered(l,c+.5))(s=this.config).maxMaxBufferLength>=s.maxBufferLength&&(s.maxMaxBufferLength/=2,f.logger.warn("AudioStreamController: reduce max buffer length to "+s.maxMaxBufferLength+"s")),this.state=y.State.IDLE;else f.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=y.State.BUFFER_FLUSHING,this.hls.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"})}}},n.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(f.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach(function(t){e.hls.trigger(u.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=y.State.PARSED):(this.state=y.State.IDLE,this.fragPrevious=null,this.tick())},n}(y.default);t.default=v}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/audio-track-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/task-loop.js"),s=n("./src/utils/logger.js"),u=n("./src/errors.js"),l=function(e){function t(t){var n=e.call(this,t,o.default.MANIFEST_LOADING,o.default.MANIFEST_PARSED,o.default.AUDIO_TRACK_LOADED,o.default.AUDIO_TRACK_SWITCHED,o.default.LEVEL_LOADED,o.default.ERROR)||this;return n._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}return i(t,e),t.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},t.prototype.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(o.default.AUDIO_TRACKS_UPDATED,{audioTracks:t})},t.prototype.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)s.logger.warn("Invalid audio track id:",e.id);else{if(s.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},t.prototype.onLevelLoaded=function(e){var t=this.hls.levels[e.level];if(t.audioGroupIds){var n=t.audioGroupIds[t.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},t.prototype.onError=function(e){e.type===u.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(s.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},Object.defineProperty(t.prototype,"audioTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1},enumerable:!0,configurable:!0}),t.prototype._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)s.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)s.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];s.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var n=t.url,r=t.type,i=t.id;this.hls.trigger(o.default.AUDIO_TRACK_SWITCHING,{id:i,type:r,url:n}),this._loadTrackDetailsIfNeeded(t)}},t.prototype.doTick=function(){this._updateTrack(this._trackId)},t.prototype._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var n=this.tracks[this._trackId],r=null;if(n&&(r=n.name),this._selectDefaultTrack){var i=t.filter(function(e){return e.default});i.length?t=i:s.logger.warn("No default audio tracks defined")}var a=!1,l=function(){t.forEach(function(t){a||e.audioGroupId&&t.groupId!==e.audioGroupId||r&&r!==t.name||(e._setAudioTrack(t.id),a=!0)})};l(),a||(r=null,l()),a||(s.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(o.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},t.prototype._needsTrackLoading=function(e){var t=e.details,n=e.url;return!(t&&!t.live)&&!!n},t.prototype._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,n=e.id;s.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(o.default.AUDIO_TRACK_LOADING,{url:t,id:n})}},t.prototype._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,s.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},t.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],n=t.name,r=t.language,i=t.groupId;s.logger.warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+n+'" / "'+r+'"');for(var o=e,a=0;a<this.tracks.length;a++){if(!this.trackIdBlacklist[a])if(this.tracks[a].name===n){o=a;break}}o!==e?(s.logger.log("Attempting audio-track fallback id:",o,"group-id:",this.tracks[o].groupId),this._setAudioTrack(o)):s.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+r+'"')},t}(a.default);t.default=l},"./src/controller/base-stream-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/task-loop.js"),a=n("./src/controller/fragment-tracker.js"),s=n("./src/utils/buffer-helper.js"),u=n("./src/utils/logger.js");t.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};var l=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.doTick=function(){},r.prototype.startLoad=function(){},r.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=t.State.STOPPED},r.prototype._streamEnded=function(e,t){var n=this.fragCurrent,r=this.fragmentTracker;if(!t.live&&n&&!n.backtracked&&n.sn===t.endSN&&!e.nextStart){var i=r.getState(n);return i===a.FragmentState.PARTIAL||i===a.FragmentState.OK}return!1},r.prototype.onMediaSeeking=function(){var n=this.config,r=this.media,i=this.mediaBuffer,o=this.state,a=r?r.currentTime:null,l=s.BufferHelper.bufferInfo(i||r,a,this.config.maxBufferHole);if(e.isFinite(a)&&u.logger.log("media seeking to "+a.toFixed(3)),o===t.State.FRAG_LOADING){var c=this.fragCurrent;if(0===l.len&&c){var d=n.maxFragLookUpTolerance,f=c.start-d,p=c.start+c.duration+d;a<f||a>p?(c.loader&&(u.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),c.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=t.State.IDLE):u.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else o===t.State.ENDED&&(0===l.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=t.State.IDLE);r&&(this.lastCurrentTime=a),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=a),this.tick()},r.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.prototype.onHandlerDestroying=function(){this.stopLoad(),n.prototype.onHandlerDestroying.call(this)},r.prototype.onHandlerDestroyed=function(){this.state=t.State.STOPPED,this.fragmentTracker=null},r}(o.default);t.default=l}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/buffer-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/utils/logger.js"),u=n("./src/errors.js"),l=n("./src/utils/mediasource-helper.js").getMediaSource(),c=function(t){function n(e){var n=t.call(this,e,o.default.MEDIA_ATTACHING,o.default.MEDIA_DETACHING,o.default.MANIFEST_PARSED,o.default.BUFFER_RESET,o.default.BUFFER_APPENDING,o.default.BUFFER_CODECS,o.default.BUFFER_EOS,o.default.BUFFER_FLUSHING,o.default.LEVEL_PTS_UPDATED,o.default.LEVEL_UPDATED)||this;return n._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n.bufferCodecEventsExpected=0,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return i(n,t),n.prototype.destroy=function(){a.default.prototype.destroy.call(this)},n.prototype.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(Math.abs(r.timestampOffset-e.start)>.1){var i=r.updating;try{r.abort()}catch(e){s.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(s.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}},n.prototype.onManifestParsed=function(e){this.bufferCodecEventsExpected=e.altAudio?2:1,s.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},n.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new l;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=window.URL.createObjectURL(n),this._objectUrl=t.src}},n.prototype.onMediaDetaching=function(){s.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){s.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):s.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(o.default.MEDIA_DETACHED)},n.prototype.onMediaSourceOpen=function(){s.logger.log("media source opened"),this.hls.trigger(o.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},n.prototype.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,n=Object.keys(t).length;(n&&!e||2===n)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},n.prototype.onMediaSourceClose=function(){s.logger.log("media source closed")},n.prototype.onMediaSourceEnded=function(){s.logger.log("media source ended")},n.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;s.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,n=this.segments.reduce(function(e,n){return n.parent===t?e+1:e},0),r={},i=this.sourceBuffer;for(var a in i)r[a]=i[a].buffered;this.hls.trigger(o.default.BUFFER_APPENDED,{parent:t,pending:n,timeRanges:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===n&&this.flushLiveBackBuffer()},n.prototype.onSBUpdateError=function(e){s.logger.error("sourceBuffer error:",e),this.hls.trigger(o.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},n.prototype.onBufferCodecs=function(e){var t=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(e).forEach(function(n){t.pendingTracks[n]=e[n]});var n=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),n&&"open"===n.readyState&&this.checkPendingTracks()}},n.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var r in e)if(!t[r]){var i=e[r],a=i.levelCodec||i.codec,l=i.container+";codecs="+a;s.logger.log("creating sourceBuffer("+l+")");try{var c=t[r]=n.addSourceBuffer(l);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[r]={codec:a,container:i.container},i.buffer=c}catch(e){s.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(o.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:l})}}this.hls.trigger(o.default.BUFFER_CREATED,{tracks:e})},n.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},n.prototype.onBufferAppendFail=function(e){s.logger.error("sourceBuffer error:",e.event),this.hls.trigger(o.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.prototype.onBufferEos=function(e){var t=this.sourceBuffer,n=e.type;for(var r in t)n&&r!==n||t[r].ended||(t[r].ended=!0,s.logger.log(r+" sourceBuffer now EOS"));this.checkEos()},n.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var r=e[n];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}s.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){s.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},n.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},n.prototype.flushLiveBackBuffer=function(){if(this._live){var e=this.hls.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))for(var t=this.media.currentTime,n=this.sourceBuffer,r=Object.keys(n),i=t-Math.max(e,this._levelTargetDuration),o=r.length-1;o>=0;o--){var a=r[o],s=n[a].buffered;s.length>0&&i>s.start(0)&&this.removeBufferRange(a,n[a],0,i)}}},n.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},n.prototype.updateMediaElementDuration=function(){var t,n=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer)if(!0===this.sourceBuffer[r].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===n.liveDurationInfinity?(s.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!e.isFinite(t))&&(s.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},n.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n)t+=n[r].buffered.length}catch(e){s.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(o.default.BUFFER_FLUSHED)}},n.prototype.doAppending=function(){var e=this.hls,t=this.segments,n=this.sourceBuffer;if(Object.keys(n).length){if(this.media.error)return this.segments=[],void s.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(t&&t.length){var r=t.shift();try{var i=n[r.type];i?i.updating?t.unshift(r):(i.ended=!1,this.parent=r.parent,i.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(n){s.logger.error("error while trying to append buffer:"+n.message),t.unshift(r);var a={type:u.ErrorTypes.MEDIA_ERROR,parent:r.parent};22!==n.code?(this.appendError?this.appendError++:this.appendError=1,a.details=u.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(s.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0,e.trigger(o.default.ERROR,a)):(a.fatal=!1,e.trigger(o.default.ERROR,a))):(this.segments=[],a.details=u.ErrorDetails.BUFFER_FULL_ERROR,a.fatal=!1,e.trigger(o.default.ERROR,a))}}}},n.prototype.flushBuffer=function(e,t,n){var r,i=this.sourceBuffer;if(Object.keys(i).length){if(s.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var o in i)if(!n||o===n){if((r=i[o]).ended=!1,r.updating)return s.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(o,r,e,t))return this.flushBufferCounter++,!1}}else s.logger.warn("abort flushing too many retries");s.logger.log("buffer flushed")}return!0},n.prototype.removeBufferRange=function(e,t,n,r){try{for(var i=0;i<t.buffered.length;i++){var o=t.buffered.start(i),a=t.buffered.end(i),u=Math.max(o,n),l=Math.min(a,r);if(Math.min(l,a)-u>.5)return s.logger.log("sb remove "+e+" ["+u+","+l+"], of ["+o+","+a+"], pos:"+this.media.currentTime),t.remove(u,l),!0}}catch(e){s.logger.warn("removeBufferRange failed",e)}return!1},n}(a.default);t.default=c}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/cap-level-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=function(t){function n(n){var r=t.call(this,n,o.default.FPS_DROP_LEVEL_CAPPING,o.default.MEDIA_ATTACHING,o.default.MANIFEST_PARSED,o.default.BUFFER_CODECS,o.default.MEDIA_DETACHING)||this;return r.autoLevelCapping=e.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r}return i(n,t),n.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},n.prototype.onFpsDropLevelCapping=function(e){n.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},n.prototype.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},n.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this._startCapping()},n.prototype.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this._startCapping()},n.prototype.onLevelsUpdated=function(e){this.levels=e.levels},n.prototype.onMediaDetaching=function(){this._stopCapping()},n.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},n.prototype.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var r=this.levels.filter(function(r,i){return n.isLevelAllowed(i,t.restrictedLevels)&&i<=e});return n.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},n.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=e.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=e.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(n.prototype,"mediaWidth",{get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=n.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mediaHeight",{get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=n.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"contentScaleFactor",{get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e},enumerable:!0,configurable:!0}),n.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},n.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var r,i,o=e.length-1,a=0;a<e.length;a+=1){var s=e[a];if((s.width>=t||s.height>=n)&&(r=s,!(i=e[a+1])||r.width!==i.width||r.height!==i.height)){o=a;break}}return o},n}(n("./src/event-handler.js").default);t.default=a}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/eme-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/event-handler.js"),a=n("./src/events.js"),s=n("./src/errors.js"),u=n("./src/utils/logger.js"),l=window.XMLHttpRequest,c="com.widevine.alpha",d="com.microsoft.playready",f=function(e){function t(t){var n=e.call(this,t,a.default.MEDIA_ATTACHED,a.default.MANIFEST_PARSED)||this;return n._widevineLicenseUrl=t.config.widevineLicenseUrl,n._licenseXhrSetup=t.config.licenseXhrSetup,n._emeEnabled=t.config.emeEnabled,n._requestMediaKeySystemAccess=t.config.requestMediaKeySystemAccessFunc,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._isMediaEncrypted=!1,n._requestLicenseFailureCount=0,n}return i(t,e),t.prototype.getLicenseServerUrl=function(e){var t;switch(e){case c:t=this._widevineLicenseUrl;break;default:t=null}return t||(u.logger.error('No license server URL configured for key-system "'+e+'"'),this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),t},t.prototype._attemptKeySystemAccess=function(e,t,n){var r=this,i=function(e,t,n){switch(e){case c:return function(e,t,n){var r={videoCapabilities:[]};return t.forEach(function(e){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})}),[r]}(0,n);default:throw Error("Unknown key-system: "+e)}}(e,0,n);i?(u.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,i).then(function(t){r._onMediaKeySystemAccessObtained(e,t)}).catch(function(t){u.logger.error('Failed to obtain key-system "'+e+'" access:',t)})):u.logger.warn("Can not create config for key-system (maybe because platform is not supported):",e)},Object.defineProperty(t.prototype,"requestMediaKeySystemAccess",{get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess},enumerable:!0,configurable:!0}),t.prototype._onMediaKeySystemAccessObtained=function(e,t){var n=this;u.logger.log('Access for key-system "'+e+'" obtained');var r={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(r),t.createMediaKeys().then(function(t){r.mediaKeys=t,u.logger.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated()}).catch(function(e){u.logger.error("Failed to create media-keys:",e)})},t.prototype._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},t.prototype._onNewMediaKeySession=function(e){var t=this;u.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",function(n){t._onKeySessionMessage(e,n.message)},!1)},t.prototype._onKeySessionMessage=function(e,t){u.logger.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){u.logger.log("Received license data, updating key-session"),e.update(t)})},t.prototype._onMediaEncrypted=function(e,t){u.logger.log('Media is encrypted using "'+e+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=e,this._mediaEncryptionInitData=t,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},t.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return u.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});u.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},t.prototype._generateRequestWithPreferredKeySession=function(){var e=this,t=this._mediaKeysList[0];if(!t)return u.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(t.mediaKeysSessionInitialized)u.logger.warn("Key-Session already initialized but requested again");else{var n=t.mediaKeysSession;n||(u.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}));var r=this._mediaEncryptionInitDataType,i=this._mediaEncryptionInitData;u.logger.log('Generating key-session request for "'+r+'" init data type'),t.mediaKeysSessionInitialized=!0,n.generateRequest(r,i).then(function(){u.logger.debug("Key-session generation succeeded")}).catch(function(t){u.logger.error("Error generating key-session request:",t),e.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},t.prototype._createLicenseXhr=function(e,t,n){var r=new l,i=this._licenseXhrSetup;try{if(i)try{i(r,e)}catch(t){r.open("POST",e,!0),i(r,e)}r.readyState||r.open("POST",e,!0)}catch(e){return u.logger.error("Error setting up key-system license XHR",e),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,e,t,n),r},t.prototype._onLicenseRequestReadyStageChange=function(e,t,n,r){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,u.logger.log("License request succeeded"),r(e.response);else{if(u.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=3){var i=3-this._requestLicenseFailureCount+1;return u.logger.warn("Retrying license request, "+i+" attempts left"),void this._requestLicense(n,r)}this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},t.prototype._generateLicenseRequestChallenge=function(e,t){var n;return e.mediaKeySystemDomain===d?u.logger.error("PlayReady is not supported (yet)"):e.mediaKeySystemDomain===c?n=t:u.logger.error("Unsupported key-system:",e.mediaKeySystemDomain),n},t.prototype._requestLicense=function(e,t){u.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return u.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});var r=this.getLicenseServerUrl(n.mediaKeySystemDomain),i=this._createLicenseXhr(r,e,t);u.logger.log("Sending license request to URL: "+r),i.send(this._generateLicenseRequestChallenge(n,e))},t.prototype.onMediaAttached=function(e){var t=this;if(this._emeEnabled){var n=e.media;this._media=n,n.addEventListener("encrypted",function(e){t._onMediaEncrypted(e.initDataType,e.initData)})}},t.prototype.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map(function(e){return e.audioCodec}),n=e.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(c,t,n)}},t}(o.default);t.default=f},"./src/controller/fps-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/utils/logger.js"),u=window.performance,l=function(e){function t(t){return e.call(this,t,o.default.MEDIA_ATTACHING)||this}return i(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,n){var r=u.now();if(t){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,l=t-this.lastDecodedFrames,c=1e3*a/i,d=this.hls;if(d.trigger(o.default.FPS_DROP,{currentDropped:a,currentDecoded:l,totalDroppedFrames:n}),c>0&&a>d.config.fpsDroppedMonitoringThreshold*l){var f=d.currentLevel;s.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(-1===d.autoLevelCapping||d.autoLevelCapping>=f)&&(f-=1,d.trigger(o.default.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:d.currentLevel}),d.autoLevelCapping=f,d.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(a.default);t.default=l},"./src/controller/fragment-finders.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/binary-search.js");function i(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function o(e,t,n){var r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.endProgramDateTime-r>e}t.findFragmentByPDT=function(t,n,r){if(!Array.isArray(t)||!t.length||!e.isFinite(n))return null;if(n<t[0].programDateTime)return null;if(n>=t[t.length-1].endProgramDateTime)return null;r=r||0;for(var i=0;i<t.length;++i){var a=t[i];if(o(n,r,a))return a}return null},t.findFragmentByPTS=function(e,t,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a=e?t[e.sn-t[0].sn+1]:null;return a&&!i(n,o,a)?a:r.default.search(t,i.bind(null,n,o))},t.fragmentWithinToleranceTest=i,t.pdtWithinToleranceTest=o}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/fragment-tracker.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/event-handler.js"),a=n("./src/events.js");t.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var s=function(n){function r(e){var t=n.call(this,e,a.default.BUFFER_APPENDED,a.default.FRAG_BUFFERED,a.default.FRAG_LOADED)||this;return t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}return i(r,n),r.prototype.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,o.default.prototype.destroy.call(this),n.prototype.destroy.call(this)},r.prototype.getBufferedFrag=function(e,t){var n=this.fragments,r=Object.keys(n).filter(function(r){var i=n[r];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var o=i.body;return o.startPTS<=e&&e<=o.endPTS});if(0===r.length)return null;var i=r.pop();return n[i].body},r.prototype.detectEvictedFragments=function(e,t){var n,r,i=this;Object.keys(this.fragments).forEach(function(o){var a=i.fragments[o];if(!0===a.buffered){var s=a.range[e];if(s){n=s.time;for(var u=0;u<n.length;u++)if(r=n[u],!1===i.isTimeBuffered(r.startPTS,r.endPTS,t)){i.removeFragment(a.body);break}}}})},r.prototype.detectPartialFragments=function(e){var t=this,n=this.getFragmentKey(e),r=this.fragments[n];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach(function(n){if(e.hasElementaryStream(n)){var i=t.timeRanges[n];r.range[n]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}}))},r.prototype.getBufferedTimes=function(e,t,n){for(var r,i,o=[],a=!1,s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,i=n.end(s)+this.bufferPadding,e>=r&&t<=i){o.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))});break}if(e<i&&t>r)o.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))}),a=!0;else if(t<=r)break}return{time:o,partial:a}},r.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},r.prototype.getPartialFragment=function(e){var t,n,r,i=this,o=null,a=0;return Object.keys(this.fragments).forEach(function(s){var u=i.fragments[s];i.isPartial(u)&&(n=u.body.startPTS-i.bufferPadding,r=u.body.endPTS+i.bufferPadding,e>=n&&e<=r&&(t=Math.min(e-n,r-e),a<=t&&(o=u.body,a=t)))}),o},r.prototype.getState=function(e){var n=this.getFragmentKey(e),r=this.fragments[n],i=t.FragmentState.NOT_LOADED;return void 0!==r&&(i=r.buffered?!0===this.isPartial(r)?t.FragmentState.PARTIAL:t.FragmentState.OK:t.FragmentState.APPENDING),i},r.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},r.prototype.isTimeBuffered=function(e,t,n){for(var r,i,o=0;o<n.length;o++){if(r=n.start(o)-this.bufferPadding,i=n.end(o)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1},r.prototype.onFragLoaded=function(t){var n=t.frag;e.isFinite(n.sn)&&!n.bitrateTest&&(this.fragments[this.getFragmentKey(n)]={body:n,range:Object.create(null),buffered:!1})},r.prototype.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var n=t.timeRanges[e];t.detectEvictedFragments(e,n)})},r.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},r.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},r.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},r.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},r}(o.default);t.FragmentTracker=s}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/gap-controller.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/buffer-helper.js"),i=n("./src/errors.js"),o=n("./src/events.js"),a=n("./src/utils/logger.js"),s=function(){function e(e,t,n,r){this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r,this.stallReported=!1}return e.prototype.poll=function(e,t){var n=this.config,i=this.media,o=i.currentTime,s=window.performance.now();if(o!==e)return this.stallReported&&(a.logger.warn("playback not stuck anymore @"+o+", after "+Math.round(s-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(i.ended||!i.buffered.length||i.readyState>2||i.seeking&&r.BufferHelper.isBuffered(i,o))){var u=s-this.stalled,l=r.BufferHelper.bufferInfo(i,o,n.maxBufferHole);this.stalled?(u>=1e3&&this._reportStall(l.len),this._tryFixBufferStall(l,u)):this.stalled=s}},e.prototype._tryFixBufferStall=function(e,t){var n=this.config,r=this.fragmentTracker,i=this.media.currentTime,o=r.getPartialFragment(i);o&&this._trySkipBufferHole(o),e.len>.5&&t>1e3*n.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e.prototype._reportStall=function(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,a.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},e.prototype._trySkipBufferHole=function(e){for(var t=this.hls,n=this.media,r=n.currentTime,s=0,u=0;u<n.buffered.length;u++){var l=n.buffered.start(u);if(r>=s&&r<l)return n.currentTime=Math.max(l,n.currentTime+.1),a.logger.warn("skipping hole, adjusting currentTime from "+r+" to "+n.currentTime),this.stalled=null,void t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+n.currentTime,frag:e});s=n.buffered.end(u)}},e.prototype._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,r=n.currentTime,s=(this.nudgeRetry||0)+1;if(this.nudgeRetry=s,s<e.nudgeMaxRetry){var u=r+s*e.nudgeOffset;a.logger.log("adjust currentTime from "+r+" to "+u),n.currentTime=u,t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else a.logger.error("still stuck in high buffer @"+r+" after "+e.nudgeMaxRetry+", raise fatal error"),t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();t.default=s},"./src/controller/id3-track-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/demux/id3.js"),u=n("./src/utils/texttrack-utils.js"),l=function(e){function t(t){var n=e.call(this,t,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.FRAG_PARSING_METADATA)||this;return n.id3Track=void 0,n.media=void 0,n}return i(t,e),t.prototype.destroy=function(){a.default.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){u.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},t.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return u.sendAddTrackEvent(n,this.media),n}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var o=s.default.getID3Frames(n[i].data);if(o){var a=n[i].pts,u=i<n.length-1?n[i+1].pts:t.endPTS;a===u&&(u+=1e-4);for(var l=0;l<o.length;l++){var c=o[l];if(!s.default.isTimeStampFrame(c)){var d=new r(a,u,"");d.value=c,this.id3Track.addCue(d)}}}}},t}(a.default);t.default=l},"./src/controller/level-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=n("./src/events.js"),s=n("./src/event-handler.js"),u=n("./src/utils/logger.js"),l=n("./src/errors.js"),c=n("./src/utils/codecs.js"),d=n("./src/controller/level-helper.js"),f=(window.performance,function(e){function t(t){var n=e.call(this,t,a.default.MANIFEST_LOADED,a.default.LEVEL_LOADED,a.default.AUDIO_TRACK_SWITCHED,a.default.FRAG_LOADED,a.default.ERROR)||this;return n.canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,o=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}return i(t,e),t.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},t.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t,n=[],r=[],i={},s=null,f=!1,p=!1;if(e.levels.forEach(function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,f=f||!!e.videoCodec,p=p||!!e.audioCodec,o&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(s=i[e.bitrate])?s.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,n.push(e)),t&&(t.AUDIO&&(p=!0,d.addGroupId(s||e,"audio",t.AUDIO)),t.SUBTITLES&&d.addGroupId(s||e,"text",t.SUBTITLES))}),f&&p&&(n=n.filter(function(e){return!!e.videoCodec})),n=n.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||c.isCodecSupportedInMp4(t,"audio"))&&(!n||c.isCodecSupportedInMp4(n,"video"))}),e.audioTracks&&(r=e.audioTracks.filter(function(e){return!e.audioCodec||c.isCodecSupportedInMp4(e.audioCodec,"audio")})).forEach(function(e,t){e.id=t}),n.length>0){t=n[0].bitrate,n.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=n;for(var h=0;h<n.length;h++)if(n[h].bitrate===t){this._firstLevel=h,u.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(a.default.MANIFEST_PARSED,{levels:n,audioTracks:r,firstLevel:this._firstLevel,stats:e.stats,audio:p,video:f,altAudio:r.some(function(e){return!!e.url})})}else this.hls.trigger(a.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))},enumerable:!0,configurable:!0}),t.prototype.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){u.logger.log("switching to level "+e),this.currentLevelIndex=e;var r=t[e];r.level=e,n.trigger(a.default.LEVEL_SWITCHING,r)}var i=t[e],o=i.details;if(!o||o.live){var s=i.urlId;n.trigger(a.default.LEVEL_LOADING,{url:i.url[s],level:e,id:s})}}else n.trigger(a.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(e){this._firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e},enumerable:!0,configurable:!0}),t.prototype.onError=function(e){if(e.fatal)e.type===l.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,n=!1,r=!1;switch(e.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,r=!0;break;case l.ErrorDetails.LEVEL_LOAD_ERROR:case l.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,n=!0;break;case l.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,n=!0}void 0!==t&&this.recoverLevel(e,t,n,r)}},t.prototype.recoverLevel=function(e,t,n,r){var i,o,a,s=this,l=this.hls.config,c=e.details,d=this._levels[t];if(d.loadError++,d.fragmentError=r,n){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return u.logger.error("level controller, cannot recover from "+c+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);o=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return s.loadLevel()},o),e.levelRetry=!0,this.levelRetryCount++,u.logger.warn("level controller, "+c+", retry in "+o+" ms, current retry count is "+this.levelRetryCount)}(n||r)&&((i=d.url.length)>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,u.logger.warn("level controller, "+c+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(a=0===t?this._levels.length-1:t-1,u.logger.warn("level controller, "+c+": switch to "+a),this.hls.nextAutoLevel=this.currentLevelIndex=a):r&&(u.logger.warn("level controller, "+c+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,n=e.level,r=e.details;if(n===this.currentLevelIndex){var i=this._levels[n];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),r.live){var o=d.computeReloadInterval(i.details,r,e.stats.trequest);u.logger.log("live playlist, reload in "+Math.round(o)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},o)}else this.clearTimer()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=0;i<n.audioGroupIds.length;i++)if(n.audioGroupIds[i]===t){r=i;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},t.prototype.loadLevel=function(){if(u.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,n=e.urlId,r=e.url[n];u.logger.log("Attempt loading level index "+t+" with URL-id "+n),this.hls.trigger(a.default.LEVEL_LOADING,{url:r,level:t,id:n})}}},Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)},enumerable:!0,configurable:!0}),t}(s.default));t.default=f},"./src/controller/level-helper.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js");function i(t,n,i){var o=t[n],a=t[i],s=a.startPTS;e.isFinite(s)?i>n?(o.duration=s-o.start,o.duration<0&&r.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!")):(a.duration=o.start-s,a.duration<0&&r.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):a.start=i>n?o.start+o.duration:Math.max(o.start-a.duration,0)}function o(t,n,r,o,a,s){var u=r;if(e.isFinite(n.startPTS)){var l=Math.abs(n.startPTS-r);e.isFinite(n.deltaPTS)?n.deltaPTS=Math.max(l,n.deltaPTS):n.deltaPTS=l,u=Math.max(r,n.startPTS),r=Math.min(r,n.startPTS),o=Math.max(o,n.endPTS),a=Math.min(a,n.startDTS),s=Math.max(s,n.endDTS)}var c=r-n.start;n.start=n.startPTS=r,n.maxStartPTS=u,n.endPTS=o,n.startDTS=a,n.endDTS=s,n.duration=o-r;var d,f,p,h=n.sn;if(!t||h<t.startSN||h>t.endSN)return 0;for(d=h-t.startSN,(f=t.fragments)[d]=n,p=d;p>0;p--)i(f,p,p-1);for(p=d;p<f.length-1;p++)i(f,p,p+1);return t.PTSKnown=!0,c}function a(e,t,n){if(e&&t)for(var r=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,o=t.startSN-e.startSN,a=r;a<=i;a++){var s=e.fragments[o+a],u=t.fragments[a];if(!s||!u)break;n(s,u,a)}}function s(e,t){var n=t.startSN-e.startSN,r=e.fragments,i=t.fragments;if(!(n<0||n>r.length))for(var o=0;o<i.length;o++)i[o].start+=r[n].start}t.addGroupId=function(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}},t.updatePTS=i,t.updateFragPTSDTS=o,t.mergeDetails=function(t,n){n.initSegment&&t.initSegment&&(n.initSegment=t.initSegment);var i,u=0;if(a(t,n,function(t,r){u=t.cc-r.cc,e.isFinite(t.startPTS)&&(r.start=r.startPTS=t.startPTS,r.endPTS=t.endPTS,r.duration=t.duration,r.backtracked=t.backtracked,r.dropped=t.dropped,i=r),n.PTSKnown=!0}),n.PTSKnown){if(u){r.logger.log("discontinuity sliding from playlist, take drift into account");for(var l=n.fragments,c=0;c<l.length;c++)l[c].cc+=u}i?o(n,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):s(t,n),n.PTSKnown=t.PTSKnown}},t.mergeSubtitlePlaylists=function(e,t,n){void 0===n&&(n=0);var r=-1;a(e,t,function(e,t,n){t.start=e.start,r=n});var i=t.fragments;if(r<0)i.forEach(function(e){e.start+=n});else for(var o=r+1;o<i.length;o++)i[o].start=i[o-1].start+i[o-1].duration},t.mapFragmentIntersection=a,t.adjustSliding=s,t.computeReloadInterval=function(e,t,n){var r=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=r/2;return e&&t.endSN===e.endSN&&(r=i),n&&(r=Math.max(i,r-(window.performance.now()-n))),Math.round(r)}}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/stream-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/utils/binary-search.js"),a=n("./src/utils/buffer-helper.js"),s=n("./src/demux/demuxer.js"),u=n("./src/events.js"),l=n("./src/controller/fragment-tracker.js"),c=n("./src/loader/fragment.js"),d=n("./src/loader/playlist-loader.js"),f=n("./src/controller/level-helper.js"),p=n("./src/utils/time-ranges.js"),h=n("./src/errors.js"),g=n("./src/utils/logger.js"),y=n("./src/utils/discontinuities.js"),m=n("./src/controller/fragment-finders.js"),v=n("./src/controller/gap-controller.js"),b=n("./src/controller/base-stream-controller.js"),_=function(t){function n(e,n){var r=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.LEVEL_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_LOAD_EMERGENCY_ABORTED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_SWITCHED,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED)||this;return r.fragmentTracker=n,r.config=e.config,r.audioCodecSwap=!1,r._state=b.State.STOPPED,r.stallReported=!1,r.gapController=null,r}return i(n,t),n.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(g.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=b.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=b.State.STOPPED},n.prototype.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},n.prototype.doTick=function(){switch(this.state){case b.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case b.State.IDLE:this._doTickIdle();break;case b.State.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=b.State.IDLE);break;case b.State.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(g.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=b.State.IDLE);break;case b.State.ERROR:case b.State.STOPPED:case b.State.FRAG_LOADING:case b.State.PARSING:case b.State.PARSED:case b.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},n.prototype._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch)){var r;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,o=this.levels[i];if(o){var s,l=o.bitrate;s=l?Math.max(8*t.maxBufferSize/l,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var c=a.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,t.maxBufferHole),d=c.len;if(!(d>=s)){g.logger.trace("buffer length of "+d.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var f=o.details;if(!f||f.live&&this.levelLastLoaded!==i)this.state=b.State.WAITING_LEVEL;else{if(this._streamEnded(c,f)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(u.default.BUFFER_EOS,p),void(this.state=b.State.ENDED)}this._fetchPayloadOrEos(r,c,f)}}}}},n.prototype._fetchPayloadOrEos=function(e,t,n){var r=this.fragPrevious,i=this.level,o=n.fragments,a=o.length;if(0!==a){var s,u=o[0].start,l=o[a-1].start+o[a-1].duration,c=t.end;if(n.initSegment&&!n.initSegment.data)s=n.initSegment;else if(n.live){var d=this.config.initialLiveManifestSize;if(a<d)return void g.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(s=this._ensureFragmentAtLivePoint(n,c,u,l,r,o,a)))return}else c<u&&(s=o[0]);s||(s=this._findFragment(u,r,a,o,c,l,n)),s&&(s.encrypted?(g.logger.log("Loading key for "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i),this._loadKey(s)):(g.logger.log("Loading "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i+", currentTime:"+e.toFixed(3)+",bufferEnd:"+c.toFixed(3)),this._loadFragment(s)))}},n.prototype._ensureFragmentAtLivePoint=function(e,t,n,r,i,a,s){var u,l=this.hls.config,c=this.media,d=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-l.maxFragLookUpTolerance,r-d)){var f=this.liveSyncPosition=this.computeLivePosition(n,e);g.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,c&&c.readyState&&c.duration>f&&(c.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>r&&c&&c.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i)if(e.hasProgramDateTime)g.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),u=m.findFragmentByPDT(a,i.endProgramDateTime,l.maxFragLookUpTolerance);else{var p=i.sn+1;if(p>=e.startSN&&p<=e.endSN){var h=a[p-e.startSN];i.cc===h.cc&&(u=h,g.logger.log("live playlist, switching playlist, load frag with next SN: "+u.sn))}u||(u=o.default.search(a,function(e){return i.cc-e.cc}))&&g.logger.log("live playlist, switching playlist, load frag with same CC: "+u.sn)}u||(u=a[Math.min(s-1,Math.round(s/2))],g.logger.log("live playlist, switching playlist, unknown, load middle frag : "+u.sn))}return u},n.prototype._findFragment=function(e,t,n,r,i,o,a){var s,u=this.hls.config;if(i<o){var l=i>o-u.maxFragLookUpTolerance?0:u.maxFragLookUpTolerance;s=m.findFragmentByPTS(t,r,i,l)}else s=r[n-1];if(s){var c=s.sn-a.startSN,d=t&&s.level===t.level,f=r[c-1],p=r[c+1];if(t&&s.sn===t.sn)if(d&&!s.backtracked)if(s.sn<a.endSN){var h=t.deltaPTS;h&&h>u.maxBufferHole&&t.dropped&&c?(s=f,g.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(s=p,g.logger.log("SN just loaded, load next one: "+s.sn,s))}else s=null;else s.backtracked&&(p&&p.backtracked?(g.logger.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+p.sn),s=p):(g.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,f?(s=f).backtracked=!0:c&&(s=null)))}return s},n.prototype._loadKey=function(e){this.state=b.State.KEY_LOADING,this.hls.trigger(u.default.KEY_LOADING,{frag:e})},n.prototype._loadFragment=function(t){var n=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,e.isFinite(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||n===l.FragmentState.NOT_LOADED||n===l.FragmentState.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(u.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new s.default(this.hls,"main")),this.state=b.State.FRAG_LOADING):n===l.FragmentState.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},Object.defineProperty(n.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,g.logger.log("main stream:"+t+"->"+e),this.hls.trigger(u.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},enumerable:!0,configurable:!0}),n.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,d.default.LevelType.MAIN)},Object.defineProperty(n.prototype,"currentLevel",{get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nextBufferedFrag",{get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null},enumerable:!0,configurable:!0}),n.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},Object.defineProperty(n.prototype,"nextLevel",{get:function(){var e=this.nextBufferedFrag;return e?e.level:-1},enumerable:!0,configurable:!0}),n.prototype._checkFragmentChanged=function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),a.BufferHelper.isBuffered(n,t)?e=this.getBufferedFrag(t):a.BufferHelper.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var r=e;if(r!==this.fragPlaying){this.hls.trigger(u.default.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(u.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},n.prototype.immediateLevelSwitch=function(){if(g.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,n=void 0;t?(n=t.paused,t.pause()):n=!0,this.previouslyPaused=n}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)},n.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,a.BufferHelper.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},n.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var n,r=void 0,i=void 0;if((n=this.getBufferedFrag(t.currentTime))&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),t.paused)r=0;else{var o=this.hls.nextLoadLevel,a=this.levels[o],s=this.fragLastKbps;r=s&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*s)+1:0}if((i=this.getBufferedFrag(t.currentTime+r))&&(i=this.followingBufferedFrag(i))){var u=this.fragCurrent;u&&u.loader&&u.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,e.POSITIVE_INFINITY)}}},n.prototype.flushMainBuffer=function(e,t){this.state=b.State.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(u.default.BUFFER_FLUSHING,n)},n.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new v.default(n,t,this.fragmentTracker,this.hls)},n.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(g.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},n.prototype.onMediaSeeked=function(){var t=this.media,n=t?t.currentTime:void 0;e.isFinite(n)&&g.logger.log("media seeked to "+n.toFixed(3)),this.tick()},n.prototype.onManifestLoading=function(){g.logger.log("trigger BUFFER_RESET"),this.hls.trigger(u.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},n.prototype.onManifestParsed=function(e){var t,n=!1,r=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&g.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},n.prototype.onLevelLoaded=function(t){var n=t.details,r=t.level,i=this.levels[this.levelLastLoaded],o=this.levels[r],a=n.totalduration,s=0;if(g.logger.log("level "+r+" loaded ["+n.startSN+","+n.endSN+"],duration:"+a),n.live){var l=o.details;l&&n.fragments.length>0?(f.mergeDetails(l,n),s=n.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,l),n.PTSKnown&&e.isFinite(s)?g.logger.log("live playlist sliding:"+s.toFixed(3)):(g.logger.log("live playlist - outdated PTS, unknown sliding"),y.alignStream(this.fragPrevious,i,n))):(g.logger.log("live playlist - first load, unknown sliding"),n.PTSKnown=!1,y.alignStream(this.fragPrevious,i,n))}else n.PTSKnown=!1;if(o.details=n,this.levelLastLoaded=r,this.hls.trigger(u.default.LEVEL_UPDATED,{details:n,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=n.startTimeOffset;e.isFinite(c)?(c<0&&(g.logger.log("negative start time offset "+c+", count from end of last fragment"),c=s+a+c),g.logger.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c):n.live?(this.startPosition=this.computeLivePosition(s,n),g.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===b.State.WAITING_LEVEL&&(this.state=b.State.IDLE),this.tick()},n.prototype.onKeyLoaded=function(){this.state===b.State.KEY_LOADING&&(this.state=b.State.IDLE,this.tick())},n.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=this.hls,r=this.levels,i=this.media,o=e.frag;if(this.state===b.State.FRAG_LOADING&&t&&"main"===o.type&&o.level===t.level&&o.sn===t.sn){var a=e.stats,l=r[t.level],c=l.details;if(this.bitrateTest=!1,this.stats=a,g.logger.log("Loaded "+t.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+t.level),o.bitrateTest&&n.nextLoadLevel)this.state=b.State.IDLE,this.startFragRequested=!1,a.tparsed=a.tbuffered=window.performance.now(),n.trigger(u.default.FRAG_BUFFERED,{stats:a,frag:t,id:"main"}),this.tick();else if("initSegment"===o.sn)this.state=b.State.IDLE,a.tparsed=a.tbuffered=window.performance.now(),c.initSegment.data=e.payload,n.trigger(u.default.FRAG_BUFFERED,{stats:a,frag:t,id:"main"}),this.tick();else{g.logger.log("Parsing "+t.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+t.level+", cc "+t.cc),this.state=b.State.PARSING,this.pendingBuffering=!0,this.appended=!1,o.bitrateTest&&(o.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:o}));var d=!(i&&i.seeking)&&(c.PTSKnown||!c.live),f=c.initSegment?c.initSegment.data:[],p=this._getAudioCodec(l);(this.demuxer=this.demuxer||new s.default(this.hls,"main")).push(e.payload,f,p,l.videoCodec,t,c.totalduration,d)}}this.fragLoadError=0},n.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===b.State.PARSING){var r=e.tracks,i=void 0,o=void 0;if(r.audio&&this.altAudio&&delete r.audio,o=r.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(g.logger.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===s.indexOf("firefox")&&(a="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==o.container&&(a="mp4a.40.2",g.logger.log("Android: force audio codec to "+a)),o.levelCodec=a,o.id=e.id}for(i in(o=r.video)&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=e.id),this.hls.trigger(u.default.BUFFER_CODECS,r),r){o=r[i],g.logger.log("main track:"+i+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var l=o.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}},n.prototype.onFragParsingData=function(t){var n=this,r=this.fragCurrent,i=t.frag;if(r&&"main"===t.id&&i.sn===r.sn&&i.level===r.level&&("audio"!==t.type||!this.altAudio)&&this.state===b.State.PARSING){var o=this.levels[this.level],a=r;if(e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),!0===t.hasAudio&&a.addElementaryStream(c.default.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&a.addElementaryStream(c.default.ElementaryStreamTypes.VIDEO),g.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)g.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var s=o.details;if(!s||a.sn!==s.startSN)return g.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=b.State.IDLE,this.fragPrevious=a,void this.tick();g.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var l=f.updateFragPTSDTS(o.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),d=this.hls;d.trigger(u.default.LEVEL_PTS_UPDATED,{details:o.details,level:this.level,drift:l,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&n.state===b.State.PARSING&&(n.appended=!0,n.pendingBuffering=!0,d.trigger(u.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},n.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===b.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=b.State.PARSED,this._checkAppendedParsed())},n.prototype.onAudioTrackSwitching=function(t){var n=!!t.url,r=t.id;if(!n){if(this.mediaBuffer!==this.media){g.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(g.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=b.State.IDLE}var o=this.hls;o.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),o.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},n.prototype.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(g.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},n.prototype.onBufferCreated=function(e){var t,n,r=e.tracks,i=!1;for(var o in r){var a=r[o];"main"===a.id?(n=o,t=a,"video"===o&&(this.videoBuffer=r[o].buffer)):i=!0}i&&t?(g.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},n.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==b.State.PARSING&&t!==b.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},n.prototype._checkAppendedParsed=function(){if(!(this.state!==b.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;g.logger.log("main buffered : "+p.default.toString(t.buffered)),this.fragPrevious=e;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=b.State.IDLE}this.tick()}},n.prototype.onError=function(t){var n=t.frag||this.fragCurrent;if(!n||"main"===n.type){var r=!!this.media&&a.BufferHelper.isBuffered(this.media,this.media.currentTime)&&a.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);g.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=b.State.FRAG_LOADING_WAITING_RETRY}else g.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=b.State.ERROR;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==b.State.ERROR&&(t.fatal?(this.state=b.State.ERROR,g.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==b.State.WAITING_LEVEL||(this.state=b.State.IDLE));break;case h.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==b.State.PARSING&&this.state!==b.State.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=b.State.IDLE):(g.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)))}}},n.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,g.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},n.prototype._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},n.prototype.onFragLoadEmergencyAborted=function(){this.state=b.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},n.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(c.default.ElementaryStreamTypes.VIDEO,e.buffered),this.state=b.State.IDLE,this.fragPrevious=null},n.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},n.prototype.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},n.prototype._seekToStartPos=function(){var e=this.media,t=e.currentTime,n=e.seeking?t:this.startPosition;t!==n&&(g.logger.log("target start position not buffered, seek to buffered.start(0) "+n+" from current time "+t+" "),e.currentTime=n)},n.prototype._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(g.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},Object.defineProperty(n.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e},enumerable:!0,configurable:!0}),n}(b.default);t.default=_}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/subtitle-stream-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/utils/logger.js"),s=n("./src/crypt/decrypter.js"),u=n("./src/utils/buffer-helper.js"),l=n("./src/controller/fragment-finders.js"),c=n("./src/controller/fragment-tracker.js"),d=n("./src/controller/base-stream-controller.js"),f=n("./src/controller/level-helper.js"),p=window.performance,h=function(e){function t(t,n){var r=e.call(this,t,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.ERROR,o.default.KEY_LOADED,o.default.FRAG_LOADED,o.default.SUBTITLE_TRACKS_UPDATED,o.default.SUBTITLE_TRACK_SWITCH,o.default.SUBTITLE_TRACK_LOADED,o.default.SUBTITLE_FRAG_PROCESSED,o.default.LEVEL_UPDATED)||this;return r.fragmentTracker=n,r.config=t.config,r.state=d.State.STOPPED,r.tracks=[],r.tracksBuffered=[],r.currentTrackId=-1,r.decrypter=new s.default(t,t.config),r.lastAVStart=0,r._onMediaSeeking=r.onMediaSeeking.bind(r),r}return i(t,e),t.prototype.onSubtitleFragProcessed=function(e){var t=e.frag,n=e.success;if(this.fragPrevious=t,this.state=d.State.IDLE,n){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var i,o=t.start,a=0;a<r.length;a++)if(o>=r[a].start&&o<=r[a].end){i=r[a];break}var s=t.start+t.duration;i?i.end=s:(i={start:o,end:s},r.push(i))}}},t.prototype.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=d.State.IDLE},t.prototype.onMediaDetaching=function(){this.media.removeEventListener("seeking",this._onMediaSeeking),this.media=null,this.state=d.State.STOPPED},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=d.State.IDLE)},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;a.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},t.prototype.onSubtitleTrackLoaded=function(e){var t=e.id,n=e.details,r=this.currentTrackId,i=this.tracks,o=i[r];t>=i.length||t!==r||!o||(n.live&&f.mergeSubtitlePlaylists(o.details,n,this.lastAVStart),o.details=n,this.setInterval(500))},t.prototype.onKeyLoaded=function(){this.state===d.State.KEY_LOADING&&(this.state=d.State.IDLE)},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag.decryptdata,r=e.frag,i=this.hls;if(this.state===d.State.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var a=p.now();this.decrypter.decrypt(e.payload,n.key.buffer,n.iv.buffer,function(e){var t=p.now();i.trigger(o.default.FRAG_DECRYPTED,{frag:r,payload:e,stats:{tstart:a,tdecrypt:t}})})}},t.prototype.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},t.prototype.doTick=function(){if(this.media)switch(this.state){case d.State.IDLE:var e=this,t=e.config,n=e.currentTrackId,r=e.fragmentTracker,i=e.media,s=e.tracks;if(!s||!s[n]||!s[n].details)break;var f=t.maxBufferHole,p=t.maxFragLookUpTolerance,h=Math.min(t.maxBufferLength,t.maxMaxBufferLength),g=u.BufferHelper.bufferedInfo(this._getBuffered(),i.currentTime,f),y=g.end,m=g.len,v=s[n].details,b=v.fragments,_=b.length,S=b[_-1].start+b[_-1].duration;if(m>h)return;var w=void 0,E=this.fragPrevious;y<S?(E&&v.hasProgramDateTime&&(w=l.findFragmentByPDT(b,E.endProgramDateTime,p)),w||(w=l.findFragmentByPTS(E,b,y,p))):w=b[_-1],w&&w.encrypted?(a.logger.log("Loading key for "+w.sn),this.state=d.State.KEY_LOADING,this.hls.trigger(o.default.KEY_LOADING,{frag:w})):w&&r.getState(w)===c.FragmentState.NOT_LOADED&&(this.fragCurrent=w,this.state=d.State.FRAG_LOADING,this.hls.trigger(o.default.FRAG_LOADING,{frag:w}))}else this.state=d.State.IDLE},t.prototype.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},t.prototype._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},t.prototype.onMediaSeeking=function(){this.fragPrevious=null},t}(d.default);t.SubtitleStreamController=h},"./src/controller/subtitle-track-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/utils/logger.js"),u=n("./src/controller/level-helper.js"),l=function(t){function n(e){var n=t.call(this,e,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.MANIFEST_LOADED,o.default.SUBTITLE_TRACK_LOADED)||this;return n.tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n}return i(n,t),n.prototype.destroy=function(){a.default.prototype.destroy.call(this)},n.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},n.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},n.prototype.onManifestLoaded=function(e){var t=this,n=e.subtitles||[];this.tracks=n,this.hls.trigger(o.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},n.prototype.onSubtitleTrackLoaded=function(e){var t=this,n=e.id,r=e.details,i=this.trackId,o=this.tracks,a=o[i];if(n>=o.length||n!==i||!a||this.stopped)this._clearReloadTimer();else if(s.logger.log("subtitle track "+n+" loaded"),r.live){var l=u.computeReloadInterval(a.details,r,e.stats.trequest);s.logger.log("Reloading live subtitle playlist in "+l+"ms"),this.timer=setTimeout(function(){t._loadCurrentTrack()},l)}else this._clearReloadTimer()},n.prototype.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},n.prototype.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},Object.defineProperty(n.prototype,"subtitleTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"subtitleTrack",{get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))},enumerable:!0,configurable:!0}),n.prototype._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},n.prototype._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,n=this.hls,r=t[e];e<0||!r||r.details&&!r.details.live||(s.logger.log("Loading subtitle track "+e),n.trigger(o.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:e}))},n.prototype._toggleTrackModes=function(e){var t=this.media,n=this.subtitleDisplay,r=this.trackId;if(t){var i=c(t.textTracks);if(-1===e)[].slice.call(i).forEach(function(e){e.mode="disabled"});else{var o=i[r];o&&(o.mode="disabled")}var a=i[e];a&&(a.mode=n?"showing":"hidden")}},n.prototype._setSubtitleTrackInternal=function(t){var n=this.hls,r=this.tracks;!e.isFinite(t)||t<-1||t>=r.length||(this.trackId=t,s.logger.log("Switching to subtitle track "+t),n.trigger(o.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},n.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=c(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack=e}},n}(a.default);function c(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"subtitles"===r.kind&&r.label&&t.push(e[n])}return t}t.default=l}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/timeline-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/utils/cea-608-parser.js"),u=n("./src/utils/output-filter.js"),l=n("./src/utils/webvtt-parser.js"),c=n("./src/utils/logger.js"),d=n("./src/utils/texttrack-utils.js");function f(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}var p=function(t){function n(e){var n=t.call(this,e,o.default.MEDIA_ATTACHING,o.default.MEDIA_DETACHING,o.default.FRAG_PARSING_USERDATA,o.default.FRAG_DECRYPTED,o.default.MANIFEST_LOADING,o.default.MANIFEST_LOADED,o.default.FRAG_LOADED,o.default.LEVEL_SWITCHING,o.default.INIT_PTS_FOUND)||this;if(n.hls=e,n.config=e.config,n.enabled=!0,n.Cues=e.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=[],n.cueRanges=[],n.captionsTracks={},n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode}},n.config.enableCEA708Captions){var r=new u.default(n,"textTrack1"),i=new u.default(n,"textTrack2");n.cea608Parser=new s.default(0,r,i)}return n}return i(n,t),n.prototype.addCues=function(e,t,n,r){for(var i,o,a,s,u=this.cueRanges,l=!1,c=u.length;c--;){var d=u[c],f=(i=d[0],o=d[1],a=t,s=n,Math.min(o,s)-Math.max(i,a));if(f>=0&&(d[0]=Math.min(d[0],t),d[1]=Math.max(d[1],n),l=!0,f/(n-t)>.5))return}l||u.push([t,n]),this.Cues.newCue(this.captionsTracks[e],t,n,r)},n.prototype.onInitPtsFound=function(e){var t=this;if("main"===e.id&&(this.initPTS[e.frag.cc]=e.initPTS),this.unparsedVttFrags.length){var n=this.unparsedVttFrags;this.unparsedVttFrags=[],n.forEach(function(e){t.onFragLoaded(e)})}},n.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n];if(r[e])return r}return null},n.prototype.createCaptionsTrack=function(e){var t=this.captionsProperties[e],n=t.label,r=t.languageCode,i=this.captionsTracks;if(!i[e]){var o=this.getExistingTrack(e);if(o)i[e]=o,d.clearCurrentCues(i[e]),d.sendAddTrackEvent(i[e],this.media);else{var a=this.createTextTrack("captions",n,r);a&&(a[e]=!0,i[e]=a)}}},n.prototype.createTextTrack=function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)},n.prototype.destroy=function(){a.default.prototype.destroy.call(this)},n.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},n.prototype.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){d.clearCurrentCues(e[t]),delete e[t]})},n.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},n.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)d.clearCurrentCues(t[n])}},n.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,r){var i;if(r<n.length){for(var o=null,a=0;a<n.length;a++)if(f(n[a],e)){o=n[a];break}o&&(i=o)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),e.default?i.mode=t.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",t.textTracks.push(i)})}},n.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},n.prototype.onFragLoaded=function(t){var n=t.frag,r=t.payload;if("main"===n.type){var i=n.sn;if(i!==this.lastSn+1){var a=this.cea608Parser;a&&a.reset()}this.lastSn=i}else if("subtitle"===n.type)if(r.byteLength){if(!e.isFinite(this.initPTS[n.cc]))return this.unparsedVttFrags.push(t),void(this.initPTS.length&&this.hls.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n}));var s=n.decryptdata;null!=s&&null!=s.key&&"AES-128"===s.method||this._parseVTTs(n,r)}else this.hls.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n})},n.prototype._parseVTTs=function(e,t){var n=this.vttCCs;n[e.cc]||(n[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var r=this.textTracks,i=this.hls;l.default.parse(t,this.initPTS[e.cc],n,e.cc,function(t){var n=r[e.level];"disabled"!==n.mode?(t.forEach(function(e){if(!n.cues.getCueById(e.id))try{n.addCue(e)}catch(r){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}}),i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},function(t){c.logger.log("Failed to parse VTT cue: "+t),i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},n.prototype.onFragDecrypted=function(t){var n=t.payload,r=t.frag;if("subtitle"===r.type){if(!e.isFinite(this.initPTS[r.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(r,n)}},n.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}},n.prototype.extractCea608Data=function(e){for(var t,n,r,i=31&e[0],o=2,a=[],s=0;s<i;s++)t=e[o++],n=127&e[o++],r=127&e[o++],0===n&&0===r||0!=(4&t)&&0===(3&t)&&(a.push(n),a.push(r));return a},n}(a.default);t.default=p}).call(this,n("./src/polyfills/number.js").Number)},"./src/crypt/aes-crypto.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();t.default=r},"./src/crypt/aes-decryptor.js":function(e,t,n){"use strict";function r(e){var t=e.byteLength,n=t&&new DataView(e).getUint8(t-1);return n?e.slice(0,t-n):e}Object.defineProperty(t,"__esModule",{value:!0}),t.removePadding=r;var i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],o=n[2],a=n[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],d=s[3],f=new Uint32Array(256),p=0,h=0,g=0;for(g=0;g<256;g++)f[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var y=h^h<<1^h<<2^h<<3^h<<4;y=y>>>8^255&y^99,e[p]=y,t[y]=p;var m=f[p],v=f[m],b=f[v],_=257*f[y]^16843008*y;r[p]=_<<24|_>>>8,i[p]=_<<16|_>>>16,o[p]=_<<8|_>>>24,a[p]=_,_=16843009*b^65537*v^257*m^16843008*p,u[y]=_<<24|_>>>8,l[y]=_<<16|_>>>16,c[y]=_<<8|_>>>24,d[y]=_,p?(p=m^f[f[f[b^m]]],h^=f[f[h]]):p=h=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o,a,s,u,l=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(l),d=this.invKeySchedule=new Uint32Array(l),f=this.sBox,p=this.rcon,h=this.invSubMix,g=h[0],y=h[1],m=h[2],v=h[3];for(o=0;o<l;o++)o<i?s=c[o]=t[o]:(u=s,o%i==0?(u=f[(u=u<<8|u>>>24)>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u],u^=p[o/i|0]<<24):i>6&&o%i==4&&(u=f[u>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u]),c[o]=s=(c[o-i]^u)>>>0);for(a=0;a<l;a++)o=l-a,u=3&a?c[o]:c[o-4],d[a]=a<4||o<=4?u:g[f[u>>>24]]^y[f[u>>>16&255]]^m[f[u>>>8&255]]^v[f[255&u]],d[a]=d[a]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,n,i){for(var o,a,s,u,l,c,d,f,p,h,g,y,m,v,b=this.keySize+6,_=this.invKeySchedule,S=this.invSBox,w=this.invSubMix,E=w[0],T=w[1],x=w[2],k=w[3],C=this.uint8ArrayToUint32Array_(n),A=C[0],I=C[1],O=C[2],L=C[3],R=new Int32Array(e),P=new Int32Array(R.length),D=this.networkToHostOrderSwap;t<R.length;){for(p=D(R[t]),h=D(R[t+1]),g=D(R[t+2]),y=D(R[t+3]),l=p^_[0],c=y^_[1],d=g^_[2],f=h^_[3],m=4,v=1;v<b;v++)o=E[l>>>24]^T[c>>16&255]^x[d>>8&255]^k[255&f]^_[m],a=E[c>>>24]^T[d>>16&255]^x[f>>8&255]^k[255&l]^_[m+1],s=E[d>>>24]^T[f>>16&255]^x[l>>8&255]^k[255&c]^_[m+2],u=E[f>>>24]^T[l>>16&255]^x[c>>8&255]^k[255&d]^_[m+3],l=o,c=a,d=s,f=u,m+=4;o=S[l>>>24]<<24^S[c>>16&255]<<16^S[d>>8&255]<<8^S[255&f]^_[m],a=S[c>>>24]<<24^S[d>>16&255]<<16^S[f>>8&255]<<8^S[255&l]^_[m+1],s=S[d>>>24]<<24^S[f>>16&255]<<16^S[l>>8&255]<<8^S[255&c]^_[m+2],u=S[f>>>24]<<24^S[l>>16&255]<<16^S[c>>8&255]<<8^S[255&d]^_[m+3],m+=3,P[t]=D(o^A),P[t+1]=D(u^I),P[t+2]=D(s^O),P[t+3]=D(a^L),A=p,I=h,O=g,L=y,t+=4}return i?r(P.buffer):P.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}();t.default=i},"./src/crypt/decrypter.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/crypt/aes-crypto.js"),i=n("./src/crypt/fast-aes-key.js"),o=n("./src/crypt/aes-decryptor.js"),a=n("./src/errors.js"),s=n("./src/utils/logger.js"),u=n("./src/events.js"),l=n("./src/utils/get-self-scope.js").getSelfScope(),c=function(){function e(e,t,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var o=l.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,n,a){var u=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var l=this.decryptor;l||(this.decryptor=l=new o.default),l.expandKey(t),a(l.decrypt(e,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i.default(c,t)),this.fastAesKey.expandKey().then(function(i){new r.default(c,n).decrypt(e,i).catch(function(r){u.onWebCryptoError(r,e,t,n,a)}).then(function(e){a(e)})}).catch(function(r){u.onWebCryptoError(r,e,t,n,a)})}},e.prototype.onWebCryptoError=function(e,t,n,r,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(u.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=c},"./src/crypt/fast-aes-key.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();t.default=r},"./src/demux/aacdemuxer.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/demux/adts.js"),i=n("./src/utils/logger.js"),o=n("./src/demux/id3.js"),a=function(){function t(e,t,n){this.observer=e,this.config=n,this.remuxer=t}return t.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(e){if(!e)return!1;for(var t=(o.default.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(r.probe(e,t))return i.logger.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,n,a,s){for(var u=this._audioTrack,l=o.default.getID3Data(t,0)||[],c=o.default.getTimeStamp(l),d=e.isFinite(c)?90*c:9e4*n,f=0,p=d,h=t.length,g=l.length,y=[{pts:p,dts:p,data:l}];g<h-1;)if(r.isHeader(t,g)&&g+5<h){r.initTrackConfig(u,this.observer,t,g,u.manifestCodec);var m=r.appendFrame(u,t,g,d,f);if(!m){i.logger.log("Unable to parse AAC frame");break}g+=m.length,p=m.sample.pts,f++}else o.default.isHeader(t,g)?(l=o.default.getID3Data(t,g),y.push({pts:p,dts:p,data:l}),g+=l.length):g++;this.remuxer.remux(u,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},n,a,s)},t.prototype.destroy=function(){},t}();t.default=a}).call(this,n("./src/polyfills/number.js").Number)},"./src/demux/adts.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=n("./src/errors.js"),o=n("./src/events.js");function a(e,t,n,a){var s,u,l,c,d,f=navigator.userAgent.toLowerCase(),p=a,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(s=1+((192&t[n+2])>>>6),!((u=(60&t[n+2])>>>2)>h.length-1))return c=(1&t[n+2])<<2,c|=(192&t[n+3])>>>6,r.logger.log("manifest codec:"+a+",ADTS data:type:"+s+",sampleingIndex:"+u+"["+h[u]+"Hz],channelConfig:"+c),/firefox/i.test(f)?u>=6?(s=5,d=new Array(4),l=u-3):(s=2,d=new Array(2),l=u):-1!==f.indexOf("android")?(s=2,d=new Array(2),l=u):(s=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&u>=6?l=u-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(u>=6&&1===c||/vivaldi/i.test(f))||!a&&1===c)&&(s=2,d=new Array(2)),l=u)),d[0]=s<<3,d[0]|=(14&u)>>1,d[1]|=(1&u)<<7,d[1]|=c<<3,5===s&&(d[1]|=(14&l)>>1,d[2]=(1&l)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:h[u],channelCount:c,codec:"mp4a.40."+s,manifestCodec:p};e.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+u})}function s(e,t){return 255===e[t]&&240==(246&e[t+1])}function u(e,t){return 1&e[t+1]?7:9}function l(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e){return 9216e4/e}function d(e,t,n,r,i){var o,a,s=e.length;if(o=u(e,t),a=l(e,t),(a-=o)>0&&t+o+a<=s)return{headerLength:o,frameLength:a,stamp:n+r*i}}t.getAudioConfig=a,t.isHeaderPattern=s,t.getHeaderLength=u,t.getFullFrameLength=l,t.isHeader=function(e,t){return!!(t+1<e.length&&s(e,t))},t.probe=function(e,t){if(t+1<e.length&&s(e,t)){var n=u(e,t);t+5<e.length&&(n=l(e,t));var r=t+n;if(r===e.length||r+1<e.length&&s(e,r))return!0}return!1},t.initTrackConfig=function(e,t,n,i,o){if(!e.samplerate){var s=a(t,n,i,o);e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,r.logger.log("parsed codec:"+e.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)}},t.getFrameDuration=c,t.parseFrameHeader=d,t.appendFrame=function(e,t,n,r,i){var o=d(t,n,r,i,c(e.samplerate));if(o){var a=o.stamp,s=o.headerLength,u=o.frameLength,l={unit:t.subarray(n+s,n+s+u),pts:a,dts:a};return e.samples.push(l),e.len+=u,{sample:l,length:u+s}}}},"./src/demux/demuxer-inline.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("./src/events.js"),o=n("./src/errors.js"),a=n("./src/crypt/decrypter.js"),s=n("./src/demux/aacdemuxer.js"),u=n("./src/demux/mp4demuxer.js"),l=n("./src/demux/tsdemuxer.js"),c=n("./src/demux/mp3demuxer.js"),d=n("./src/remux/mp4-remuxer.js"),f=n("./src/remux/passthrough-remuxer.js"),p=n("./src/utils/get-self-scope.js"),h=n("./src/utils/logger.js"),g=p.getSelfScope();try{r=g.performance.now.bind(g.performance)}catch(e){h.logger.debug("Unable to use Performance API on this environment"),r=g.Date.now}var y=function(){function e(e,t,n,r){this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,n,o,s,u,l,c,d,f,p,h){var g=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var y=this.decrypter;null==y&&(y=this.decrypter=new a.default(this.observer,this.config));var m=r();y.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var a=r();g.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:a}}),g.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),o,s,u,l,c,d,f,p,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),o,s,u,l,c,d,f,p,h)},e.prototype.pushDecrypted=function(e,t,n,r,a,p,h,g,y,m,v,b){var _=this.demuxer;if(!_||(h||g)&&!this.probe(e)){for(var S=this.observer,w=this.typeSupported,E=this.config,T=[{demux:l.default,remux:d.default},{demux:u.default,remux:f.default},{demux:s.default,remux:d.default},{demux:c.default,remux:d.default}],x=0,k=T.length;x<k;x++){var C=T[x],A=C.demux.probe;if(A(e)){var I=this.remuxer=new C.remux(S,E,w,this.vendor);_=new C.demux(S,I,E,w),this.probe=A;break}}if(!_)return void S.trigger(i.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=_}var O=this.remuxer;(h||g)&&(_.resetInitSegment(n,r,a,m),O.resetInitSegment()),h&&(_.resetTimeStamp(b),O.resetTimeStamp(b)),"function"==typeof _.setDecryptData&&_.setDecryptData(t),_.append(e,p,y,v)},e}();t.default=y},"./src/demux/demuxer-worker.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/demux/demuxer-inline.js"),i=n("./src/events.js"),o=n("./src/utils/logger.js"),a=n("./node_modules/node-libs-browser/node_modules/events/events.js");t.default=function(e){var t=new a.EventEmitter;t.trigger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(n))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.demuxer=new r.default(t,a.typeSupported,s,a.vendor),o.enableLogs(s.debug),n("init",null);break;case"demux":e.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),t.on(i.default.FRAG_DECRYPTED,n),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(i.default.FRAG_PARSED,n),t.on(i.default.ERROR,n),t.on(i.default.FRAG_PARSING_METADATA,n),t.on(i.default.FRAG_PARSING_USERDATA,n),t.on(i.default.INIT_PTS_FOUND,n),t.on(i.default.FRAG_PARSING_DATA,function(t,n){var r=[],i={event:t,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),e.postMessage(i,r)})}},"./src/demux/demuxer.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/webworkify-webpack/index.js"),i=n("./src/events.js"),o=n("./src/demux/demuxer-inline.js"),a=n("./src/utils/logger.js"),s=n("./src/errors.js"),u=n("./src/utils/mediasource-helper.js"),l=n("./src/utils/get-self-scope.js"),c=n("./src/observer.js"),d=l.getSelfScope(),f=u.getMediaSource(),p=function(){function t(e,t){var n=this;this.hls=e,this.id=t;var u=this.observer=new c.Observer,l=e.config,p=function(t,r){(r=r||{}).frag=n.frag,r.id=n.id,e.trigger(t,r)};u.on(i.default.FRAG_DECRYPTED,p),u.on(i.default.FRAG_PARSING_INIT_SEGMENT,p),u.on(i.default.FRAG_PARSING_DATA,p),u.on(i.default.FRAG_PARSED,p),u.on(i.default.ERROR,p),u.on(i.default.FRAG_PARSING_METADATA,p),u.on(i.default.FRAG_PARSING_USERDATA,p),u.on(i.default.INIT_PTS_FOUND,p);var h={mp4:f.isTypeSupported("video/mp4"),mpeg:f.isTypeSupported("audio/mpeg"),mp3:f.isTypeSupported('audio/mp4; codecs="mp3"')},g=navigator.vendor;if(l.enableWorker&&"undefined"!=typeof Worker){a.logger.log("demuxing in webworker");var y=void 0;try{y=this.w=r("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),y.addEventListener("message",this.onwmsg),y.onerror=function(t){e.trigger(i.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},y.postMessage({cmd:"init",typeSupported:h,vendor:g,id:t,config:JSON.stringify(l)})}catch(e){a.logger.warn("Error in worker:",e),a.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),y&&d.URL.revokeObjectURL(y.objectURL),this.demuxer=new o.default(u,h,l,g),this.w=void 0}}else this.demuxer=new o.default(u,h,l,g)}return t.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,n,r,i,o,s,u,l){var c=this.w,d=e.isFinite(o.startPTS)?o.startPTS:o.start,f=o.decryptdata,p=this.frag,h=!(p&&o.cc===p.cc),g=!(p&&o.level===p.level),y=p&&o.sn===p.sn+1,m=!g&&y;if(h&&a.logger.log(this.id+":discontinuity detected"),g&&a.logger.log(this.id+":switch detected"),this.frag=o,c)c.postMessage({cmd:"demux",data:t,decryptdata:f,initSegment:n,audioCodec:r,videoCodec:i,timeOffset:d,discontinuity:h,trackSwitch:g,contiguous:m,duration:s,accurateTimeOffset:u,defaultInitPTS:l},t instanceof ArrayBuffer?[t]:[]);else{var v=this.demuxer;v&&v.push(t,f,n,r,i,d,h,g,m,s,u,l)}},t.prototype.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":d.URL.revokeObjectURL(this.w.objectURL);break;case i.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},t}();t.default=p}).call(this,n("./src/polyfills/number.js").Number)},"./src/demux/exp-golomb.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&r.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,n=8,r=8;for(t=0;t<e;t++)0!==r&&(r=(n+this.readEG()+256)%256),n=0===r?n:r},e.prototype.readSPS=function(){var e,t,n,r,i,o,a,s=0,u=0,l=0,c=0,d=this.readUByte.bind(this),f=this.readBits.bind(this),p=this.readUEG.bind(this),h=this.readBoolean.bind(this),g=this.skipBits.bind(this),y=this.skipEG.bind(this),m=this.skipUEG.bind(this),v=this.skipScalingList.bind(this);if(d(),e=d(),f(5),g(3),d(),m(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=p();if(3===b&&g(1),m(),m(),g(1),h())for(o=3!==b?8:12,a=0;a<o;a++)h()&&v(a<6?16:64)}m();var _=p();if(0===_)p();else if(1===_)for(g(1),y(),y(),t=p(),a=0;a<t;a++)y();m(),g(1),n=p(),r=p(),0===(i=f(1))&&g(1),g(1),h()&&(s=p(),u=p(),l=p(),c=p());var S=[1,1];if(h()&&h())switch(d()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(n+1)-2*s-2*u),height:(2-i)*(r+1)*16-(i?2:4)*(l+c),pixelRatio:S}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=i},"./src/demux/id3.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,n){for(var r=n,i=0;e.isHeader(t,n);){i+=10,i+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(i+=10),n+=i}if(i>0)return t.subarray(r,r+i)},e._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},e.getTimeStamp=function(t){for(var n=e.getID3Frames(t),r=0;r<n.length;r++){var i=n[r];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),r=e._readSize(t,4);return{type:n,size:r,data:t.subarray(10,10+r)}},e.getID3Frames=function(t){for(var n=0,r=[];e.isHeader(t,n);){for(var i=e._readSize(t,n+6),o=(n+=10)+i;n+8<o;){var a=e._getFrameData(t.subarray(n)),s=e._decodeFrame(a);s&&r.push(s),n+=a.size+10}e.isFooter(t,n)&&(n+=10)}return r},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data,!0),r=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:r.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var o=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:o}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var o=e._utf8ArrayToStr(t.data);return{key:t.type,data:o}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);for(var n,r,i,o=e.length,a="",s=0;s<o;){if(0===(n=e[s++])&&t)return a;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:r=e[s++],a+=String.fromCharCode((31&n)<<6|63&r);break;case 14:r=e[s++],i=e[s++],a+=String.fromCharCode((15&n)<<12|(63&r)<<6|(63&i)<<0)}}return a},e}(),i=r._utf8ArrayToStr;t.utf8ArrayToStr=i,t.default=r},"./src/demux/mp3demuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/demux/id3.js"),i=n("./src/utils/logger.js"),o=n("./src/demux/mpegaudio.js"),a=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}return e.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,n,a=r.default.getID3Data(e,0);if(a&&void 0!==r.default.getTimeStamp(a))for(t=a.length,n=Math.min(e.length-1,t+100);t<n;t++)if(o.default.probe(e,t))return i.logger.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,i){for(var a=r.default.getID3Data(e,0),s=r.default.getTimeStamp(a),u=s?90*s:9e4*t,l=a.length,c=e.length,d=0,f=0,p=this._audioTrack,h=[{pts:u,dts:u,data:a}];l<c;)if(o.default.isHeader(e,l)){var g=o.default.appendFrame(p,e,l,u,d);if(!g)break;l+=g.length,f=g.sample.pts,d++}else r.default.isHeader(e,l)?(a=r.default.getID3Data(e,l),h.push({pts:f,dts:f,data:a}),l+=a.length):l++;this.remuxer.remux(p,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,n,i)},e.prototype.destroy=function(){},e}();t.default=a},"./src/demux/mp4demuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=n("./src/events.js"),o=Math.pow(2,32)-1,a=function(){function e(e,t){this.observer=e,this.remuxer=t}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,n,r,o){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t);null==n&&(n="mp4a.40.5"),null==r&&(r="avc1.42e01e");var s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:o?t:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:o?t:null}),a.video&&(s.video={container:"video/mp4",codec:r,initSegment:o?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),r&&(this.videoCodec=r)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var r,i,o,a,s,u,l=[];if(t.data?(s=t.start,o=t.end,t=t.data):(s=0,o=t.byteLength),!n.length)return null;for(r=s;r<o;)u=(i=e.readUint32(t,r))>1?r+i:o,e.bin2str(t.subarray(r+4,r+8))===n[0]&&(1===n.length?l.push({data:t,start:r+8,end:u}):(a=e.findBox({data:t,start:r+8,end:u},n.slice(1))).length&&(l=l.concat(a))),r=u;return l},e.parseSegmentIndex=function(t){var n,r=e.findBox(t,["moov"])[0],i=r?r.end:null,o=0,a=e.findBox(t,["sidx"]);if(!a||!a[0])return null;n=[];var s=(a=a[0]).data[0];o=0===s?8:16;var u=e.readUint32(a,o);o+=4;o+=0===s?8:16,o+=2;var l=a.end+0,c=e.readUint16(a,o);o+=2;for(var d=0;d<c;d++){var f=o,p=e.readUint32(a,f);f+=4;var h=2147483647&p;if(1===(2147483648&p)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=e.readUint32(a,f);f+=4,n.push({referenceSize:h,subsegmentDuration:g,info:{duration:g/u,start:l,end:l+h-1}}),l+=h,o=f+=4}return{earliestPresentationTime:0,timescale:u,version:s,referencesCount:c,references:n,moovEndOffset:i}},e.parseInitSegment=function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var o=i.data[i.start],a=0===o?12:20,s=e.readUint32(i,a),u=e.findBox(t,["mdia","mdhd"])[0];if(u){a=0===(o=u.data[u.start])?12:20;var l=e.readUint32(u,a),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var f=e.findBox(t,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var p=e.bin2str(f.data.subarray(f.start+12,f.start+16));r.logger.log("MP4Demuxer:"+d+":"+p+" found")}n[s]={timescale:l,type:d},n[d]={timescale:l,id:s}}}}}}),n},e.getStartDTS=function(t,n){var r,i,o;return r=e.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map(function(n){return e.findBox(n,["tfhd"]).map(function(r){var i,o;return i=e.readUint32(r,4),o=t[i].timescale||9e4,e.findBox(n,["tfdt"]).map(function(t){var n,r;return n=t.data[t.start],r=e.readUint32(t,4),1===n&&(r*=Math.pow(2,32),r+=e.readUint32(t,8)),r})[0]/o})})),o=Math.min.apply(null,i),isFinite(o)?o:0},e.offsetStartDTS=function(t,n,r){e.findBox(n,["moof","traf"]).map(function(n){return e.findBox(n,["tfhd"]).map(function(i){var a=e.readUint32(i,4),s=t[a].timescale||9e4;e.findBox(n,["tfdt"]).map(function(t){var n=t.data[t.start],i=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,i-r*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=r*s,i=Math.max(i,0);var a=Math.floor(i/(o+1)),u=Math.floor(i%(o+1));e.writeUint32(t,4,a),e.writeUint32(t,8,u)}})})})},e.prototype.append=function(t,n,r,o){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),a=this.initData);var s,u=this.initPTS;if(void 0===u){var l=e.getStartDTS(a,t);this.initPTS=u=l-n,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:u})}e.offsetStartDTS(a,t,u),s=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,r,o,t)},e.prototype.destroy=function(){},e}();t.default=a},"./src/demux/mpegaudio.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,r,i){if(!(n+24>t.length)){var o=this.parseHeader(t,n);if(o&&n+o.frameLength<=t.length){var a=r+i*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:t.subarray(n,n+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),e.len+=o.frameLength,{sample:s,length:o.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,o=e[t+2]>>4&15,a=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!==n&&0!==o&&15!==o&&3!==a){var u=3===n?3-i:3===i?3:4,l=1e3*r.BitratesMap[14*u+o-1],c=3===n?0:2===n?1:2,d=r.SamplingRateMap[3*c+a],f=e[t+3]>>6==3?1:2,p=r.SamplesCoefficients[n][i],h=r.BytesInSlot[i],g=8*p*h;return{sampleRate:d,channelCount:f,frameLength:parseInt(p*l/d+s,10)*h,samplesPerFrame:g}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),r=4;n&&n.frameLength&&(r=n.frameLength);var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};t.default=r},"./src/demux/sample-aes.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/crypt/decrypter.js"),i=function(){function e(e,t,n,i){this.decryptdata=n,this.discardEPB=i,this.decrypter=new r.default(e,t,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,n,r){var i=e[t].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,function(o){o=new Uint8Array(o),i.set(o,16),r||s.decryptAacSamples(e,t+1,n)})},e.prototype.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return e},e.prototype.decryptAvcSample=function(e,t,n,r,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),u=this;this.decryptBuffer(s.buffer,function(s){i.data=u.getAvcDecryptedUnit(a,s),o||u.decryptAvcSamples(e,t,n+1,r)})},e.prototype.decryptAvcSamples=function(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var o=i[n];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,o,a),!a)return}}}},e}();t.default=i},"./src/demux/tsdemuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/demux/adts.js"),i=n("./src/demux/mpegaudio.js"),o=n("./src/events.js"),a=n("./src/demux/exp-golomb.js"),s=n("./src/demux/sample-aes.js"),u=n("./src/utils/logger.js"),l=n("./src/errors.js"),c={video:1,audio:2,id3:3,text:4},d=function(){function e(e,t,n,r){this.observer=e,this.config=n,this.typeSupported=r,this.remuxer=t,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new s.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var n=e._syncOffset(t);return!(n<0)&&(n&&u.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:c[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=r,this._duration=i},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,n,r,i){var a,s,c,d,f,p=t.length,h=!1;this.contiguous=r;var g=this.pmtParsed,y=this._avcTrack,m=this._audioTrack,v=this._id3Track,b=y.pid,_=m.pid,S=v.pid,w=this._pmtId,E=y.pesData,T=m.pesData,x=v.pesData,k=this._parsePAT,C=this._parsePMT,A=this._parsePES,I=this._parseAVCPES.bind(this),O=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),R=this._parseID3PES.bind(this),P=e._syncOffset(t);for(p-=(p+P)%188,a=P;a<p;a+=188)if(71===t[a]){if(s=!!(64&t[a+1]),c=((31&t[a+1])<<8)+t[a+2],(48&t[a+3])>>4>1){if((d=a+5+t[a+4])===a+188)continue}else d=a+4;switch(c){case b:s&&(E&&(f=A(E))&&void 0!==f.pts&&I(f,!1),E={data:[],size:0}),E&&(E.data.push(t.subarray(d,a+188)),E.size+=a+188-d);break;case _:s&&(T&&(f=A(T))&&void 0!==f.pts&&(m.isAAC?O(f):L(f)),T={data:[],size:0}),T&&(T.data.push(t.subarray(d,a+188)),T.size+=a+188-d);break;case S:s&&(x&&(f=A(x))&&void 0!==f.pts&&R(f),x={data:[],size:0}),x&&(x.data.push(t.subarray(d,a+188)),x.size+=a+188-d);break;case 0:s&&(d+=t[d]+1),w=this._pmtId=k(t,d);break;case w:s&&(d+=t[d]+1);var D=C(t,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=D.avc)>0&&(y.pid=b),(_=D.audio)>0&&(m.pid=_,m.isAAC=D.isAAC),(S=D.id3)>0&&(v.pid=S),h&&!g&&(u.logger.log("reparse from beginning"),h=!1,a=P-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});E&&(f=A(E))&&void 0!==f.pts?(I(f,!0),y.pesData=null):y.pesData=E,T&&(f=A(T))&&void 0!==f.pts?(m.isAAC?O(f):L(f),m.pesData=null):(T&&T.size&&u.logger.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=T),x&&(f=A(x))&&void 0!==f.pts?(R(f),v.pesData=null):v.pesData=x,null==this.sampleAes?this.remuxer.remux(m,y,v,this._txtTrack,n,r,i):this.decryptAndRemux(m,y,v,this._txtTrack,n,r,i)},e.prototype.decryptAndRemux=function(e,t,n,r,i,o,a){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,n,r,i,o,a)})}else this.decryptAndRemuxAvc(e,t,n,r,i,o,a)},e.prototype.decryptAndRemuxAvc=function(e,t,n,r,i,o,a){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,n,r,i,o,a)})}else this.remuxer.remux(e,t,n,r,i,o,a)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,n,r){var i,o,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(o=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){u.logger.log("unkown stream type:"+e[t]);break}case 15:-1===a.audio&&(a.audio=o);break;case 21:-1===a.id3&&(a.id3=o);break;case 219:if(!r){u.logger.log("unkown stream type:"+e[t]);break}case 27:-1===a.avc&&(a.avc=o);break;case 3:case 4:n?-1===a.audio&&(a.audio=o,a.isAAC=!1):u.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:u.logger.warn("HEVC stream type found, not supported for now");break;default:u.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return a},e.prototype._parsePES=function(e){var t,n,r,i,o,a,s,l,c=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(1===((t=d[0])[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;192&(n=t[7])&&((a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(a-=8589934592),64&n?((s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(s-=8589934592),a-s>54e5&&(u.logger.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),l=(i=t[8])+9,e.size-=l,o=new Uint8Array(e.size);for(var p=0,h=d.length;p<h;p++){var g=(t=d[p]).byteLength;if(l){if(l>g){l-=g;continue}t=t.subarray(l),g-=l,l=0}o.set(t,c),c+=g}return r&&(r-=i+3),{data:o,pts:a,dts:s,len:r}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,r=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&u.logger.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var n,r,i,o=this,s=this._avcTrack,u=this._parseAVCNALu(e.data),l=this.avcSample,c=!1,d=this.pushAccesUnit.bind(this),f=function(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}};e.data=null,l&&u.length&&!s.audFound&&(d(l,s),l=this.avcSample=f(!1,e.pts,e.dts,"")),u.forEach(function(t){switch(t.type){case 1:r=!0,l||(l=o.avcSample=f(!0,e.pts,e.dts,"")),l.frame=!0;var u=t.data;if(c&&u.length>4){var p=new a.default(u).readSliceType();2!==p&&4!==p&&7!==p&&9!==p||(l.key=!0)}break;case 5:r=!0,l||(l=o.avcSample=f(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:r=!0,(n=new a.default(o.discardEPB(t.data))).readUByte();for(var h=0,g=0,y=!1,m=0;!y&&n.bytesAvailable>1;){h=0;do{h+=m=n.readUByte()}while(255===m);g=0;do{g+=m=n.readUByte()}while(255===m);if(4===h&&0!==n.bytesAvailable){if(y=!0,181===n.readUByte())if(49===n.readUShort())if(1195456820===n.readUInt())if(3===n.readUByte()){var v=n.readUByte(),b=31&v,_=[v,n.readUByte()];for(i=0;i<b;i++)_.push(n.readUByte()),_.push(n.readUByte()),_.push(n.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:_})}}else if(g<n.bytesAvailable)for(i=0;i<g;i++)n.readUByte()}break;case 7:if(r=!0,c=!0,!s.sps){var S=(n=new a.default(t.data)).readSPS();s.width=S.width,s.height=S.height,s.pixelRatio=S.pixelRatio,s.sps=[t.data],s.duration=o._duration;var w=t.data.subarray(1,4),E="avc1.";for(i=0;i<3;i++){var T=w[i].toString(16);T.length<2&&(T="0"+T),E+=T}s.codec=E}break;case 8:r=!0,s.pps||(s.pps=[t.data]);break;case 9:r=!1,s.audFound=!0,l&&d(l,s),l=o.avcSample=f(!1,e.pts,e.dts,"");break;case 12:r=!1;break;default:r=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&r&&l.units.push(t)}),t&&l&&(d(l,s),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var n=this._avcTrack.samples;t=n[n.length-1]}if(t){var r=t.units;e=r[r.length-1]}return e},e.prototype._parseAVCNALu=function(e){var t,n,r,i,o=0,a=e.byteLength,s=this._avcTrack,u=s.naluState||0,l=u,c=[],d=-1;for(-1===u&&(d=0,i=31&e[0],u=0,o=1);o<a;)if(t=e[o++],u)if(1!==u)if(t)if(1===t){var f,p;if(d>=0)r={data:e.subarray(d,o-u-1),type:i},c.push(r);else if(f=this._getLastNalUnit())if(l&&o<=4-l&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-l)),(n=o-u-1)>0)(p=new Uint8Array(f.data.byteLength+n)).set(f.data,0),p.set(e.subarray(0,n),f.data.byteLength),f.data=p;o<a?(d=o,i=31&e[o],u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;(d>=0&&u>=0&&(r={data:e.subarray(d,a),type:i,state:u},c.push(r)),0===c.length)&&((f=this._getLastNalUnit())&&((p=new Uint8Array(f.data.byteLength+e.byteLength)).set(f.data,0),p.set(e,f.data.byteLength),f.data=p));return s.naluState=u,c},e.prototype.discardEPB=function(e){for(var t,n,r=e.byteLength,i=[],o=1;o<r-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),n[o]=e[a];return n},e.prototype._parseAACPES=function(e){var t,n,i,a,s,c=this._audioTrack,d=e.data,f=e.pts,p=this.aacOverFlow,h=this.aacLastPTS;if(p){var g=new Uint8Array(p.byteLength+d.byteLength);g.set(p,0),g.set(d,p.byteLength),d=g}for(i=0,s=d.length;i<s-1&&!r.isHeader(d,i);i++);if(i){var y=void 0,m=void 0;if(i<s-1?(y="AAC PES did not start with ADTS header,offset:"+i,m=!1):(y="no ADTS header found in AAC PES",m=!0),u.logger.warn("parsing error:"+y),this.observer.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:m,reason:y}),m)return}if(r.initTrackConfig(c,this.observer,d,i,this.audioCodec),n=0,t=r.getFrameDuration(c.samplerate),p&&h){var v=h+t;Math.abs(v-f)>1&&(u.logger.log("AAC: align PTS for overlapping frames by "+Math.round((v-f)/90)),f=v)}for(;i<s;)if(r.isHeader(d,i)&&i+5<s){var b=r.appendFrame(c,d,i,f,n);if(!b)break;i+=b.length,a=b.sample.pts,n++}else i++;p=i<s?d.subarray(i,s):null,this.aacOverFlow=p,this.aacLastPTS=a},e.prototype._parseMPEGPES=function(e){for(var t=e.data,n=t.length,r=0,o=0,a=e.pts;o<n;)if(i.default.isHeader(t,o)){var s=i.default.appendFrame(this._audioTrack,t,o,a,r);if(!s)break;o+=s.length,r++}else o++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();t.default=d},"./src/errors.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},t.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/event-handler.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=n("./src/errors.js"),o=n("./src/events.js"),a={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},s=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hls=e,this.onEvent=this.onEvent.bind(this),this.handledEvents=t,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(a[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(t){r.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(o.default.ERROR,{type:i.ErrorTypes.OTHER_ERROR,details:i.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();t.default=s},"./src/events.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},"./src/hls.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/url-toolkit/src/url-toolkit.js"),a=n("./src/errors.js"),s=n("./src/loader/playlist-loader.js"),u=n("./src/loader/fragment-loader.js"),l=n("./src/loader/key-loader.js"),c=n("./src/controller/fragment-tracker.js"),d=n("./src/controller/stream-controller.js"),f=n("./src/controller/level-controller.js"),p=n("./src/controller/id3-track-controller.js"),h=n("./src/is-supported.js"),g=n("./src/utils/logger.js"),y=n("./src/config.js"),m=n("./src/events.js"),v=function(e){function t(n){void 0===n&&(n={});var r=e.call(this)||this,i=t.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var o in i)o in n||(n[o]=i[o]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');g.enableLogs(n.debug),r.config=n,r._autoLevelCapping=-1;var a=r.abrController=new n.abrController(r),h=new n.bufferController(r),y=new n.capLevelController(r),m=new n.fpsController(r),v=new s.default(r),b=new u.default(r),_=new l.default(r),S=new p.default(r),w=r.levelController=new f.default(r),E=new c.FragmentTracker(r),T=[w,r.streamController=new d.default(r,E)],x=n.audioStreamController;x&&T.push(new x(r,E)),r.networkControllers=T;var k=[v,b,_,a,h,y,m,S,E];if(x=n.audioTrackController){var C=new x(r);r.audioTrackController=C,k.push(C)}if(x=n.subtitleTrackController){var A=new x(r);r.subtitleTrackController=A,T.push(A)}if(x=n.emeController){var I=new x(r);r.emeController=I,k.push(I)}return(x=n.subtitleStreamController)&&T.push(new x(r,E)),(x=n.timelineController)&&k.push(new x(r)),r.coreComponents=k,r}return i(t,e),Object.defineProperty(t,"version",{get:function(){return"0.12.4"},enumerable:!0,configurable:!0}),t.isSupported=function(){return h.isSupported()},Object.defineProperty(t,"Events",{get:function(){return m.default},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorTypes",{get:function(){return a.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorDetails",{get:function(){return a.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DefaultConfig",{get:function(){return t.defaultConfig?t.defaultConfig:y.hlsDefaultConfig},set:function(e){t.defaultConfig=e},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){g.logger.log("destroy"),this.trigger(m.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(e){g.logger.log("attachMedia"),this.media=e,this.trigger(m.default.MEDIA_ATTACHING,{media:e})},t.prototype.detachMedia=function(){g.logger.log("detachMedia"),this.trigger(m.default.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(e){e=o.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),g.logger.log("loadSource:"+e),this.url=e,this.trigger(m.default.MANIFEST_LOADING,{url:e})},t.prototype.startLoad=function(e){void 0===e&&(e=-1),g.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},t.prototype.stopLoad=function(){g.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},t.prototype.swapAudioCodec=function(){g.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){g.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Object.defineProperty(t.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(e){g.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(e){g.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(e){g.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){g.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(e){g.logger.log("set startLevel:"+e);-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(e){g.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelEnabled",{get:function(){return-1===this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minAutoLevel",{get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,r=0;r<n;r++){if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>t)return r}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxAutoLevel",{get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextAutoLevel",{get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTracks",{get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTracks",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTrack",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleDisplay",{get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)},enumerable:!0,configurable:!0}),t}(n("./src/observer.js").Observer);t.default=v},"./src/is-supported.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/mediasource-helper.js");t.isSupported=function(){var e=r.getMediaSource(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i}},"./src/loader/fragment-loader.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/errors.js"),u=n("./src/utils/logger.js"),l=function(t){function n(e){var n=t.call(this,e,o.default.FRAG_LOADING)||this;return n.loaders={},n}return i(n,t),n.prototype.destroy=function(){var e=this.loaders;for(var n in e){var r=e[n];r&&r.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.prototype.onFragLoading=function(t){var n=t.frag,r=n.type,i=this.loaders,o=this.hls.config,a=o.fLoader,s=o.loader;n.loaded=0;var l,c,d,f=i[r];f&&(u.logger.warn("abort previous fragment loader for type: "+r),f.abort()),f=i[r]=n.loader=o.fLoader?new a(o):new s(o),l={url:n.url,frag:n,responseType:"arraybuffer",progressData:!1};var p=n.byteRangeStartOffset,h=n.byteRangeEndOffset;e.isFinite(p)&&e.isFinite(h)&&(l.rangeStart=p,l.rangeEnd=h),c={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:o.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},f.load(l,c,d)},n.prototype.loadsuccess=function(e,t,n,r){void 0===r&&(r=null);var i=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(o.default.FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:r})},n.prototype.loaderror=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},n.prototype.loadtimeout=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},n.prototype.loadprogress=function(e,t,n,r){void 0===r&&(r=null);var i=t.frag;i.loaded=e.loaded,this.hls.trigger(o.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:r})},n}(a.default);t.default=l}).call(this,n("./src/polyfills/number.js").Number)},"./src/loader/fragment.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=n("./src/loader/level-key.js"),o=function(){function t(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=((e={})[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return Object.defineProperty(t,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=r.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRange",{get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var n=this.lastByteRangeEndOffset;e[0]=n||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endProgramDateTime",{get:function(){if(!e.isFinite(this.programDateTime))return null;var t=e.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),t.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},t.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new i.default).method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n},t}();t.default=o}).call(this,n("./src/polyfills/number.js").Number)},"./src/loader/key-loader.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/errors.js"),u=n("./src/utils/logger.js"),l=function(e){function t(t){var n=e.call(this,t,o.default.KEY_LOADING)||this;return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return i(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},a.default.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=t.decryptdata,a=i.uri;if(a!==this.decrypturl||null===this.decryptkey){var s=this.hls.config;r&&(u.logger.warn("abort previous key loader for type:"+n),r.abort()),t.loader=this.loaders[n]=new s.loader(s),this.decrypturl=a,this.decryptkey=null;var l,c,d;l={url:a,frag:t,responseType:"arraybuffer"},c={timeout:s.fragLoadingTimeOut,maxRetry:0,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(l,c,d)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(o.default.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,n){var r=n.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(o.default.KEY_LOADED,{frag:r})},t.prototype.loaderror=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},t.prototype.loadtimeout=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},t}(a.default);t.default=l},"./src/loader/level-key.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=function(){function e(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=r.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),e}();t.default=i},"./src/loader/level.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return Object.defineProperty(t.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!e.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),t}();t.default=n}).call(this,n("./src/polyfills/number.js").Number)},"./src/loader/m3u8-parser.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=n("./src/loader/fragment.js"),o=n("./src/loader/level.js"),a=n("./src/loader/level-key.js"),s=n("./src/utils/attr-list.js"),u=n("./src/utils/logger.js"),l=n("./src/utils/codecs.js"),c=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,d=/#EXT-X-MEDIA:(.*)/g,f=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),p=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,h=/\.(mp4|m4s|m4v|m4a)$/i,g=function(){function t(){}return t.findGroup=function(e,t){if(!e)return null;for(var n=null,r=0;r<e.length;r++){var i=e[r];i.id===t&&(n=i)}return n},t.convertAVC1ToAVCOTI=function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},t.resolve=function(e,t){return r.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,n){var r,i=[];function o(e,t){["video","audio"].forEach(function(n){var r=e.filter(function(e){return l.isCodecType(e,n)});if(r.length){var i=r.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[n+"Codec"]=i.length>0?i[0]:r[0],e=e.filter(function(e){return-1===r.indexOf(e)})}}),t.unknownCodecs=e}for(c.lastIndex=0;null!=(r=c.exec(e));){var a={},u=a.attrs=new s.default(r[1]);a.url=t.resolve(r[2],n);var d=u.decimalResolution("RESOLUTION");d&&(a.width=d.width,a.height=d.height),a.bitrate=u.decimalInteger("AVERAGE-BANDWIDTH")||u.decimalInteger("BANDWIDTH"),a.name=u.NAME,o([].concat((u.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=t.convertAVC1ToAVCOTI(a.videoCodec)),i.push(a)}return i},t.parseMasterPlaylistMedia=function(e,n,r,i){var o;void 0===i&&(i=[]);var a=[],u=0;for(d.lastIndex=0;null!==(o=d.exec(e));){var l={},c=new s.default(o[1]);if(c.TYPE===r){if(l.groupId=c["GROUP-ID"],l.name=c.NAME,l.type=r,l.default="YES"===c.DEFAULT,l.autoselect="YES"===c.AUTOSELECT,l.forced="YES"===c.FORCED,c.URI&&(l.url=t.resolve(c.URI,n)),l.lang=c.LANGUAGE,l.name||(l.name=l.lang),i.length){var f=t.findGroup(i,l.groupId);l.audioCodec=f?f.codec:i[0].codec}l.id=u++,a.push(l)}}return a},t.parseLevelPlaylist=function(t,n,r,l,c){var d,g,m=0,v=0,b=new o.default(n),_=new a.default,S=0,w=null,E=new i.default,T=null;for(f.lastIndex=0;null!==(d=f.exec(t));){var x=d[1];if(x){E.duration=parseFloat(x);var k=(" "+d[2]).slice(1);E.title=k||null,E.tagList.push(k?["INF",x,k]:["INF",x])}else if(d[3]){if(e.isFinite(E.duration)){var C=m++;E.type=l,E.start=v,E.levelkey=_,E.sn=C,E.level=r,E.cc=S,E.urlId=c,E.baseurl=n,E.relurl=(" "+d[3]).slice(1),y(E,w),b.fragments.push(E),w=E,v+=E.duration,E=new i.default}}else if(d[4]){if(E.rawByteRange=(" "+d[4]).slice(1),w){var A=w.byteRangeEndOffset;A&&(E.lastByteRangeEndOffset=A)}}else if(d[5])E.rawProgramDateTime=(" "+d[5]).slice(1),E.tagList.push(["PROGRAM-DATE-TIME",E.rawProgramDateTime]),null===T&&(T=b.fragments.length);else{for(d=d[0].match(p),g=1;g<d.length&&void 0===d[g];g++);var I=(" "+d[g+1]).slice(1),O=(" "+d[g+2]).slice(1);switch(d[g]){case"#":E.tagList.push(O?[I,O]:[I]);break;case"PLAYLIST-TYPE":b.type=I.toUpperCase();break;case"MEDIA-SEQUENCE":m=b.startSN=parseInt(I);break;case"TARGETDURATION":b.targetduration=parseFloat(I);break;case"VERSION":b.version=parseInt(I);break;case"EXTM3U":break;case"ENDLIST":b.live=!1;break;case"DIS":S++,E.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":S=parseInt(I);break;case"KEY":var L=I,R=new s.default(L),P=R.enumeratedString("METHOD"),D=R.URI,M=R.hexadecimalInteger("IV");P&&(_=new a.default,D&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(P)>=0&&(_.method=P,_.baseuri=n,_.reluri=D,_.key=null,_.iv=M));break;case"START":var N=I,F=new s.default(N).decimalFloatingPoint("TIME-OFFSET");e.isFinite(F)&&(b.startTimeOffset=F);break;case"MAP":var j=new s.default(I);E.relurl=j.URI,E.rawByteRange=j.BYTERANGE,E.baseurl=n,E.level=r,E.type=l,E.sn="initSegment",b.initSegment=E,(E=new i.default).rawProgramDateTime=b.initSegment.rawProgramDateTime;break;default:u.logger.warn("line parsed but not handled: "+d)}}}return(E=w)&&!E.relurl&&(b.fragments.pop(),v-=E.duration),b.totalduration=v,b.averagetargetduration=v/b.fragments.length,b.endSN=m-1,b.startCC=b.fragments[0]?b.fragments[0].cc:0,b.endCC=S,!b.initSegment&&b.fragments.length&&b.fragments.every(function(e){return h.test(e.relurl)})&&(u.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(E=new i.default).relurl=b.fragments[0].relurl,E.baseurl=n,E.level=r,E.type=l,E.sn="initSegment",b.initSegment=E,b.needSidxRanges=!0),T&&function(e,t){for(var n=e[t],r=t-1;r>=0;r--){var i=e[r];i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(b.fragments,T),b},t}();function y(t,n){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):n&&n.programDateTime&&(t.programDateTime=n.endProgramDateTime),e.isFinite(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}t.default=g}).call(this,n("./src/polyfills/number.js").Number)},"./src/loader/playlist-loader.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/errors.js"),u=n("./src/utils/logger.js"),l=n("./src/demux/mp4demuxer.js"),c=n("./src/loader/m3u8-parser.js"),d=window.performance,f={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},p={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},h=function(t){function n(e){var n=t.call(this,e,o.default.MANIFEST_LOADING,o.default.LEVEL_LOADING,o.default.AUDIO_TRACK_LOADING,o.default.SUBTITLE_TRACK_LOADING)||this;return n.loaders={},n}return i(n,t),Object.defineProperty(n,"ContextType",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(n,"LevelType",{get:function(){return p},enumerable:!0,configurable:!0}),n.canHaveQualityLevels=function(e){return e!==f.AUDIO_TRACK&&e!==f.SUBTITLE_TRACK},n.mapContextToLevelType=function(e){switch(e.type){case f.AUDIO_TRACK:return p.AUDIO;case f.SUBTITLE_TRACK:return p.SUBTITLE;default:return p.MAIN}},n.getResponseUrl=function(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n},n.prototype.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return e.loader=i,this.loaders[e.type]=i,i},n.prototype.getInternalLoader=function(e){return this.loaders[e.type]},n.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},n.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},n.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},n.prototype.onManifestLoading=function(e){this.load(e.url,{type:f.MANIFEST,level:0,id:null})},n.prototype.onLevelLoading=function(e){this.load(e.url,{type:f.LEVEL,level:e.level,id:e.id})},n.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:f.AUDIO_TRACK,level:null,id:e.id})},n.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:f.SUBTITLE_TRACK,level:null,id:e.id})},n.prototype.load=function(e,t){var n=this.hls.config;u.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var r,i,o,a,s=this.getInternalLoader(t);if(s){var l=s.context;if(l&&l.url===e)return u.logger.trace("playlist request ongoing"),!1;u.logger.warn("aborting previous loader for type: "+t.type),s.abort()}switch(t.type){case f.MANIFEST:r=n.manifestLoadingMaxRetry,i=n.manifestLoadingTimeOut,o=n.manifestLoadingRetryDelay,a=n.manifestLoadingMaxRetryTimeout;break;case f.LEVEL:r=0,i=n.levelLoadingTimeOut;break;default:r=n.levelLoadingMaxRetry,i=n.levelLoadingTimeOut,o=n.levelLoadingRetryDelay,a=n.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var c={timeout:i,maxRetry:r,retryDelay:o,maxRetryDelay:a},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return u.logger.debug("Calling internal loader delegate for URL: "+e),s.load(t,c,d),!0},n.prototype.loadsuccess=function(e,t,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this._handleSidxRequest(e,n),void this._handlePlaylistLoaded(e,t,n,r);this.resetInternalLoader(n.type);var i=e.data;t.tload=d.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,n,r):this._handleMasterPlaylist(e,t,n,r):this._handleManifestParsingError(e,n,"no EXTM3U delimiter",r)},n.prototype.loaderror=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!1,e)},n.prototype.loadtimeout=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!0)},n.prototype._handleMasterPlaylist=function(e,t,r,i){var a=this.hls,s=e.data,l=n.getResponseUrl(e,r),d=c.default.parseMasterPlaylist(s,l);if(d.length){var f=d.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),p=c.default.parseMasterPlaylistMedia(s,l,"AUDIO",f),h=c.default.parseMasterPlaylistMedia(s,l,"SUBTITLES");if(p.length){var g=!1;p.forEach(function(e){e.url||(g=!0)}),!1===g&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(u.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main"}))}a.trigger(o.default.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:h,url:l,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,r,"no level found in manifest",i)},n.prototype._handleTrackOrLevelPlaylist=function(t,r,i,a){var s=this.hls,u=i.id,l=i.level,p=i.type,h=n.getResponseUrl(t,i),g=e.isFinite(u)?u:0,y=e.isFinite(l)?l:g,m=n.mapContextToLevelType(i),v=c.default.parseLevelPlaylist(t.data,h,y,m,g);if(v.tload=r.tload,p===f.MANIFEST){var b={url:h,details:v};s.trigger(o.default.MANIFEST_LOADED,{levels:[b],audioTracks:[],url:h,stats:r,networkDetails:a})}if(r.tparsed=d.now(),v.needSidxRanges){var _=v.initSegment.url;this.load(_,{isSidxRequest:!0,type:p,level:l,levelDetails:v,id:u,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else i.levelDetails=v,this._handlePlaylistLoaded(t,r,i,a)},n.prototype._handleSidxRequest=function(e,t){var n=l.default.parseSegmentIndex(new Uint8Array(e.data));if(n){var r=n.references,i=t.levelDetails;r.forEach(function(e,t){var n=e.info,r=i.fragments[t];0===r.byteRange.length&&(r.rawByteRange=String(1+n.end-n.start)+"@"+String(n.start))}),i.initSegment.rawByteRange=String(n.moovEndOffset)+"@0"}},n.prototype._handleManifestParsingError=function(e,t,n,r){this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:n,networkDetails:r})},n.prototype._handleNetworkError=function(e,t,n,r){var i,a;void 0===n&&(n=!1),void 0===r&&(r=null),u.logger.info("A network error occured while loading a "+e.type+"-type playlist");var l=this.getInternalLoader(e);switch(e.type){case f.MANIFEST:i=n?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case f.LEVEL:i=n?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case f.AUDIO_TRACK:i=n?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}l&&(l.abort(),this.resetInternalLoader(e.type));var c={type:s.ErrorTypes.NETWORK_ERROR,details:i,fatal:a,url:l.url,loader:l,context:e,networkDetails:t};r&&(c.response=r),this.hls.trigger(o.default.ERROR,c)},n.prototype._handlePlaylistLoaded=function(e,t,r,i){var a=r.type,s=r.level,u=r.id,l=r.levelDetails;if(l.targetduration)if(n.canHaveQualityLevels(r.type))this.hls.trigger(o.default.LEVEL_LOADED,{details:l,level:s||0,id:u||0,stats:t,networkDetails:i});else switch(a){case f.AUDIO_TRACK:this.hls.trigger(o.default.AUDIO_TRACK_LOADED,{details:l,id:u,stats:t,networkDetails:i});break;case f.SUBTITLE_TRACK:this.hls.trigger(o.default.SUBTITLE_TRACK_LOADED,{details:l,id:u,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,r,"invalid target duration",i)},n}(a.default);t.default=h}).call(this,n("./src/polyfills/number.js").Number)},"./src/observer.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.emit.apply(this,[e,e].concat(t))},t}(n("./node_modules/eventemitter3/index.js").EventEmitter);t.Observer=o},"./src/polyfills/number.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/get-self-scope.js").getSelfScope().Number;t.Number=r,r.isFinite=r.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/remux/aac-helper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.default=r},"./src/remux/mp4-generator.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,u,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,o=i;i--;)r+=n[i].byteLength;for((t=new Uint8Array(r))[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i<o;i++)t.set(n[i],r),r+=n[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),o=Math.floor(n%(r+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))},e.moov=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),o=Math.floor(n%(r+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var n,r,i=t.samples||[],o=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,o[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,o)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,r,i,o=[],a=[];for(n=0;n<t.sps.length;n++)i=(r=t.sps[n]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)i=(r=t.pps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),u=t.width,l=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,o=t.width,a=t.height,s=Math.floor(i/(r+1)),u=Math.floor(i%(r+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),o=t.id,a=Math.floor(n/(r+1)),s=Math.floor(n%(r+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var r,i,o,a,s,u,l=t.samples||[],c=l.length,d=12+16*c,f=new Uint8Array(d);for(n+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)o=(i=l[r]).duration,a=i.size,s=i.flags,u=i.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var n,r=e.moov(t);return(n=new Uint8Array(e.FTYP.byteLength+r.byteLength)).set(e.FTYP),n.set(r,e.FTYP.byteLength),n},e}();t.default=i},"./src/remux/mp4-remuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/remux/aac-helper.js"),i=n("./src/remux/mp4-generator.js"),o=n("./src/events.js"),a=n("./src/errors.js"),s=n("./src/utils/logger.js"),u=function(){function e(e,t,n,r){this.observer=e,this.config=t,this.typeSupported=n;var i=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,n,r,i,a,u){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var l=e.samples.length,c=t.samples.length,d=i,f=i;if(l&&c){var p=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;d+=Math.max(0,p),f+=Math.max(0,-p)}if(l){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var h=this.remuxAudio(e,d,a,u);if(c){var g=void 0;h&&(g=h.endPTS-h.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,f,a,g,u)}}else if(c){var y=this.remuxVideo(t,f,a,0,u);y&&e.codec&&this.remuxEmptyAudio(e,d,a,y)}}n.samples.length&&this.remuxID3(n,i),r.samples.length&&this.remuxText(r,i),this.observer.trigger(o.default.FRAG_PARSED)},e.prototype.generateIS=function(e,t,n){var r,u,l=this.observer,c=e.samples,d=t.samples,f=this.typeSupported,p="audio/mp4",h={},g={tracks:h},y=void 0===this._initPTS;if(y&&(r=u=1/0),e.config&&c.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(f.mpeg?(p="audio/mpeg",e.codec=""):f.mp3&&(e.codec="mp3")),h.audio={container:p,codec:e.codec,initSegment:!e.isAAC&&f.mpeg?new Uint8Array:i.default.initSegment([e]),metadata:{channelCount:e.channelCount}},y&&(r=u=c[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&d.length){var m=t.inputTimeScale;t.timescale=m,h.video={container:"video/mp4",codec:t.codec,initSegment:i.default.initSegment([t]),metadata:{width:t.width,height:t.height}},y&&(r=Math.min(r,d[0].pts-m*n),u=Math.min(u,d[0].dts-m*n),this.observer.trigger(o.default.INIT_PTS_FOUND,{initPTS:r}))}Object.keys(h).length?(l.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,y&&(this._initPTS=r,this._initDTS=u)):l.trigger(o.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,n,r,u){var l,c,d,f,p,h,g,y=8,m=e.timescale,v=e.samples,b=[],_=v.length,S=this._PTSNormalize,w=this._initPTS,E=this.nextAvcDts,T=this.isSafari;if(0!==_){T&&(n|=v.length&&E&&(u&&Math.abs(t-E/m)<.1||Math.abs(v[0].pts-E-w)<m/5)),n||(E=t*m),v.forEach(function(e){e.pts=S(e.pts-w,E),e.dts=S(e.dts-w,E)}),v.sort(function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r||e.id-t.id});var x=v.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(x<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(x/90)+" ms to overcome this issue");for(var k=0;k<v.length;k++)v[k].dts+=x}var C=v[0];p=Math.max(C.dts,0),f=Math.max(C.pts,0);var A=Math.round((p-E)/90);n&&A&&(A>1?s.logger.log("AVC:"+A+" ms hole between fragments detected,filling it"):A<-1&&s.logger.log("AVC:"+-A+" ms overlapping between fragments detected"),p=E,v[0].dts=p,f=Math.max(f-A,E),v[0].pts=f,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(f/90)+"/"+Math.round(p/90)+",delta:"+A+" ms")),C=v[v.length-1],g=Math.max(C.dts,0),h=Math.max(C.pts,0,g),T&&(l=Math.round((g-p)/(v.length-1)));var I=0,O=0;for(k=0;k<_;k++){for(var L=v[k],R=L.units,P=R.length,D=0,M=0;M<P;M++)D+=R[M].data.length;O+=D,I+=P,L.length=D,L.dts=T?p+k*l:Math.max(L.dts,p),L.pts=Math.max(L.pts,L.dts)}var N=O+4*I+8;try{c=new Uint8Array(N)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var F=new DataView(c.buffer);F.setUint32(0,N),c.set(i.default.types.mdat,4);for(k=0;k<_;k++){var j=v[k],U=j.units,B=0,V=void 0;for(M=0,P=U.length;M<P;M++){var G=U[M],q=G.data,H=G.data.byteLength;F.setUint32(y,H),y+=4,c.set(q,y),y+=H,B+=4+H}if(T)V=Math.max(0,l*Math.round((j.pts-j.dts)/l));else{if(k<_-1)l=v[k+1].dts-j.dts;else{var K=this.config,z=j.dts-v[k>0?k-1:k].dts;if(K.stretchShortVideoTrack){var Q=K.maxBufferHole,W=Math.floor(Q*m),Y=(r?f+r*m:this.nextAudioPts)-j.pts;Y>W?((l=Y-z)<0&&(l=z),s.logger.log("It is approximately "+Y/90+" ms to the next segment; using duration "+l/90+" ms for the last video frame.")):l=z}else l=z}V=Math.round(j.pts-j.dts)}b.push({size:B,duration:l,cts:V,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:j.key?2:1,isNonSync:j.key?0:1}})}this.nextAvcDts=g+l;var X=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var J=b[0].flags;J.dependsOn=2,J.isNonSync=0}e.samples=b,d=i.default.moof(e.sequenceNumber++,p,e),e.samples=[];var $={data1:d,data2:c,startPTS:f/m,endPTS:(h+l)/m,startDTS:p/m,endDTS:this.nextAvcDts/m,type:"video",hasAudio:!1,hasVideo:!0,nb:b.length,dropped:X};return this.observer.trigger(o.default.FRAG_PARSING_DATA,$),$}},e.prototype.remuxAudio=function(e,t,n,u){var l,c,d,f,p,h,g,y=e.inputTimeScale,m=e.timescale,v=y/m,b=(e.isAAC?1024:1152)*v,_=this._PTSNormalize,S=this._initPTS,w=!e.isAAC&&this.typeSupported.mpeg,E=e.samples,T=[],x=this.nextAudioPts;if(n|=E.length&&x&&(u&&Math.abs(t-x/y)<.1||Math.abs(E[0].pts-x-S)<20*b),E.forEach(function(e){e.pts=e.dts=_(e.pts-S,t*y)}),0!==(E=E.filter(function(e){return e.pts>=0})).length){if(n||(x=u?t*y:E[0].pts),e.isAAC)for(var k=this.config.maxAudioFramesDrift,C=0,A=x;C<E.length;){var I,O=E[C];I=(j=O.pts)-A;var L=Math.abs(1e3*I/y);if(I<=-k*b)s.logger.warn("Dropping 1 audio frame @ "+(A/y).toFixed(3)+"s due to "+Math.round(L)+" ms overlap."),E.splice(C,1),e.len-=O.unit.length;else if(I>=k*b&&L<1e4&&A){var R=Math.round(I/b);s.logger.warn("Injecting "+R+" audio frame @ "+(A/y).toFixed(3)+"s due to "+Math.round(1e3*I/y)+" ms gap.");for(var P=0;P<R;P++){var D=Math.max(A,0);(d=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),d=O.unit.subarray()),E.splice(C,0,{unit:d,pts:D,dts:D}),e.len+=d.length,A+=b,C++}O.pts=O.dts=A,A+=b,C++}else Math.abs(I),O.pts=O.dts=A,A+=b,C++}P=0;for(var M=E.length;P<M;P++){var N=E[P],F=N.unit,j=N.pts;if(void 0!==g)c.duration=Math.round((j-g)/v);else{var U=Math.round(1e3*(j-x)/y),B=0;if(n&&e.isAAC&&U){if(U>0&&U<1e4)B=Math.round((j-x)/b),s.logger.log(U+" ms hole between AAC samples detected,filling it"),B>0&&((d=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(d=F.subarray()),e.len+=B*d.length);else if(U<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(x/y).toFixed(3)+"s/"+(j/y).toFixed(3)+"s/"+-U+"ms"),e.len-=F.byteLength;continue}j=x}if(h=j,!(e.len>0))return;var V=w?e.len:e.len+8;l=w?0:8;try{f=new Uint8Array(V)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:V,reason:"fail allocating audio mdat "+V})}w||(new DataView(f.buffer).setUint32(0,V),f.set(i.default.types.mdat,4));for(C=0;C<B;C++)(d=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),d=F.subarray()),f.set(d,l),l+=d.byteLength,c={size:d.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(c)}f.set(F,l);var G=F.byteLength;l+=G,c={size:G,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(c),g=j}var q=0,H=T.length;if(H>=2&&(q=T[H-2].duration,c.duration=q),H){this.nextAudioPts=x=g+v*q,e.len=0,e.samples=T,p=w?new Uint8Array:i.default.moof(e.sequenceNumber++,h/v,e),e.samples=[];var K=h/y,z=x/y,Q={data1:p,data2:f,startPTS:K,endPTS:z,startDTS:K,endDTS:z,type:"audio",hasAudio:!0,hasVideo:!1,nb:H};return this.observer.trigger(o.default.FRAG_PARSING_DATA,Q),Q}return null}},e.prototype.remuxEmptyAudio=function(e,t,n,i){var o=e.inputTimeScale,a=o/(e.samplerate?e.samplerate:o),u=this.nextAudioPts,l=(void 0!==u?u:i.startDTS*o)+this._initDTS,c=i.endDTS*o+this._initDTS,d=1024*a,f=Math.ceil((c-l)/d),p=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),p){for(var h=[],g=0;g<f;g++){var y=l+g*d;h.push({unit:p,pts:y,dts:y}),e.len+=p.length}e.samples=h,this.remuxAudio(e,t,n)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e){var t,n=e.samples.length,r=e.inputTimeScale,i=this._initPTS,a=this._initDTS;if(n){for(var s=0;s<n;s++)(t=e.samples[s]).pts=(t.pts-i)/r,t.dts=(t.dts-a)/r;this.observer.trigger(o.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.prototype.remuxText=function(e){e.samples.sort(function(e,t){return e.pts-t.pts});var t,n=e.samples.length,r=e.inputTimeScale,i=this._initPTS;if(n){for(var a=0;a<n;a++)(t=e.samples[a]).pts=(t.pts-i)/r;this.observer.trigger(o.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e.prototype._PTSNormalize=function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},e}();t.default=u},"./src/remux/passthrough-remuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/events.js"),i=function(){function e(e){this.observer=e}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,n,i,o,a,s,u){var l=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),l.trigger(r.default.FRAG_PARSING_DATA,{data1:u,startPTS:o,startDTS:o,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(r.default.FRAG_PARSED)},e}();t.default=i},"./src/task-loop.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=e.apply(this,[t].concat(n))||this;return i._tickInterval=null,i._tickTimer=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}return i(t,e),t.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.prototype.hasInterval=function(){return!!this._tickInterval},t.prototype.hasNextTick=function(){return!!this._tickTimer},t.prototype.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)},t.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.prototype.doTick=function(){},t}(n("./src/event-handler.js").default);t.default=o},"./src/utils/attr-list.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=/^(\d+)x(\d+)$/,r=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,i=function(){function t(e){for(var n in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(n)&&(this[n]=e[n])}return t.prototype.decimalInteger=function(t){var n=parseInt(this[t],10);return n>e.MAX_SAFE_INTEGER?1/0:n},t.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var n=parseInt(this[t],16);return n>e.MAX_SAFE_INTEGER?1/0:n},t.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.prototype.enumeratedString=function(e){return this[e]},t.prototype.decimalResolution=function(e){var t=n.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},t.parseAttrList=function(e){var t,n={};for(r.lastIndex=0;null!==(t=r.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n},t}();t.default=i}).call(this,n("./src/polyfills/number.js").Number)},"./src/utils/binary-search.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={search:function(e,t){for(var n=0,r=e.length-1,i=null,o=null;n<=r;){var a=t(o=e[i=(n+r)/2|0]);if(a>0)n=i+1;else{if(!(a<0))return o;r=i-1}}return null}}},"./src/utils/buffer-helper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,n){try{if(e){var r=e.buffered,i=[],o=void 0;for(o=0;o<r.length;o++)i.push({start:r.start(o),end:r.end(o)});return this.bufferedInfo(i,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,n){var r,i,o,a,s,u=[];for(e.sort(function(e,t){var n=e.start-t.start;return n||t.end-e.end}),s=0;s<e.length;s++){var l=u.length;if(l){var c=u[l-1].end;e[s].start-c<n?e[s].end>c&&(u[l-1].end=e[s].end):u.push(e[s])}else u.push(e[s])}for(s=0,r=0,i=o=t;s<u.length;s++){var d=u[s].start,f=u[s].end;if(t+n>=d&&t<f)i=d,r=(o=f)-t;else if(t+n<d){a=d;break}}return{len:r,start:i,end:o,nextStart:a}},e}();t.BufferHelper=r},"./src/utils/cea-608-parser.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function(e){var t=e;return r.hasOwnProperty(e)&&(t=r[e]),String.fromCharCode(t)},o=15,a=100,s={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},u={17:2,18:4,21:6,22:8,23:10,19:13,20:15},l={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},d=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],f={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e];this.verboseLevel}},p=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},h=function(){function e(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),g=function(){function e(e,t,n,r,i,o){this.uchar=e||" ",this.penState=new h(t,n,r,i,o)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),y=function(){function e(){this.chars=[];for(var e=0;e<a;e++)this.chars.push(new g);this.pos=0,this.currPenState=new h}return e.prototype.equals=function(e){for(var t=!0,n=0;n<a;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<a;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<a;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(f.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>a&&(f.log("ERROR","Too large cursor position "+this.pos),this.pos=a)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=i(e);this.pos>=a?f.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t;for(t=e;t<a;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,n=0;n<a;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),m=function(){function e(){this.rows=[];for(var e=0;e<o;e++)this.rows.push(new y);this.currRow=o-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<o;e++)this.rows[e].clear();this.currRow=o-1},e.prototype.equals=function(e){for(var t=!0,n=0;n<o;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<o;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<o;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){f.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){f.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<o;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[r].cueStartTime;if(a&&a<f.time)for(n=0;n<this.nrRollUpRows;n++)this.rows[t-this.nrRollUpRows+n+1].copy(i.rows[r+n])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,l=Math.max(u-1,0);s.setCursor(e.indent),e.color=s.chars[l].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(e){f.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){f.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),f.log("INFO","Rolling up")}else f.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<o;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},e.prototype.getTextAndFormat=function(){return this.rows},e}(),v=function(){function e(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new m,this.nonDisplayedMemory=new m,this.lastOutputScreen=new m,this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,f.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";f.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(f.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){f.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){f.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){f.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){f.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){f.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){f.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){f.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){f.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){f.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){f.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){f.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(f.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,f.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){f.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}f.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=f.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),b=function(){function e(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new v(1,t),new v(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var n,r,i,o=!1;this.lastTime=e,f.setTime(e);for(var a=0;a<t.length;a+=2)if(r=127&t[a],i=127&t[a+1],0!==r||0!==i){if(f.log("DATA","["+p([t[a],t[a+1]])+"] -> ("+p([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n)if(o=this.parseChars(r,i))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(o);else f.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,f.log("WARNING","Couldn't parse cleaned data "+p([r,i])+" orig: "+p([t[a],t[a+1]])))}else this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var n=null;if(!((20===e||28===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,f.log("DEBUG","Repeated command ("+p([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var r=this.channels[n-1];return 20===e||28===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.parseMidrow=function(e,t){var n=null;return(17===e||25===e)&&t>=32&&t<=47&&((n=17===e?1:2)!==this.currChNr?(f.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(t),f.log("DEBUG","MIDROW ("+p([e,t])+")"),!0))},e.prototype.parsePAC=function(e,t){var n,r=null;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,r=t>=64&&t<=95?1===n?s[e]:l[e]:1===n?u[e]:c[e];var i=this.interpretPAC(r,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.interpretPAC=function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},e.prototype.parseChars=function(e,t){var n=null,r=null,o=null;if(e>=25?(n=2,o=e-8):(n=1,o=e),o>=17&&o<=19){var a=t;a=17===o?t+80:18===o?t+112:t+144,f.log("INFO","Special char '"+i(a)+"' in channel "+n),r=[a]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var s=p(r);f.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},e.prototype.parseBackgroundAttributes=function(e,t){var n,r,i;return((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=d[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}();t.default=b},"./src/utils/codecs.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};t.isCodecType=function(e,t){var n=r[t];return!!n&&!0===n[e.slice(0,4)]},t.isCodecSupportedInMp4=function(e,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}},"./src/utils/cues.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/vttparser.js");t.newCue=function(e,t,n,i){for(var o,a,s,u,l,c=window.VTTCue||window.TextTrackCue,d=0;d<i.rows.length;d++)if(s=!0,u=0,l="",!(o=i.rows[d]).isEmpty()){for(var f=0;f<o.chars.length;f++)o.chars[f].uchar.match(/\s/)&&s?u++:(l+=o.chars[f].uchar,s=!1);o.cueStartTime=t,t===n&&(n+=1e-4),a=new c(t,n,r.fixLineBreaks(l.trim())),u>=16?u--:u++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,u/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}},"./src/utils/discontinuities.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/binary-search.js"),i=n("./src/utils/logger.js");function o(e,t){for(var n=null,r=0;r<e.length;r+=1){var i=e[r];if(i&&i.cc===t){n=i;break}}return n}function a(e,t,n){var r=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(r=!0),r}function s(e,t){var n=e.fragments,r=t.fragments;if(r.length&&n.length){var a=o(n,r[0].cc);if(a&&(!a||a.startPTS))return a;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function u(e,t){t.fragments.forEach(function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}),t.PTSKnown=!0}function l(e,t,n){if(a(e,n,t)){var r=s(n.details,t);r&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level"),u(r.start,t))}}function c(t,n){if(n&&n.fragments.length){if(!t.hasProgramDateTime||!n.hasProgramDateTime)return;var r=n.fragments[0].programDateTime,o=(t.fragments[0].programDateTime-r)/1e3+n.fragments[0].start;e.isFinite(o)&&(i.logger.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),u(o,t))}}t.findFirstFragWithCC=o,t.findFragWithCC=function(e,t){return r.default.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})},t.shouldAlignOnDiscontinuities=a,t.findDiscontinuousReferenceFrag=s,t.adjustPts=u,t.alignStream=function(e,t,n){l(e,n,t),!n.PTSKnown&&t&&c(n,t.details)},t.alignDiscontinuities=l,t.alignPDT=c}).call(this,n("./src/polyfills/number.js").Number)},"./src/utils/ewma-bandwidth-estimator.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/ewma.js"),i=function(){function e(e,t,n,i){this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new r.default(t),this.fast_=new r.default(n)}return e.prototype.sample=function(e,t){var n=8e3*t/(e=Math.max(e,this.minDelayMs_)),r=e/1e3;this.fast_.sample(r,n),this.slow_.sample(r,n)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}();t.default=i},"./src/utils/ewma.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();t.default=r},"./src/utils/get-self-scope.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelfScope=function(){return"undefined"==typeof window?self:window}},"./src/utils/logger.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/get-self-scope.js");function i(){}var o={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=o;var s=r.getSelfScope();function u(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];t.forEach(function(t){a[t]=e[t]?e[t].bind(e):function(e){var t=s.console[e];return t?function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];n[0]&&(n[0]=function(e,t){return t="["+e+"] > "+t}(e,n[0])),t.apply(s.console,n)}:i}(t)})}t.enableLogs=function(e){if(!0===e||"object"==typeof e){u(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=o}}else a=o},t.logger=a},"./src/utils/mediakeys-helper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;t.requestMediaKeySystemAccess=r},"./src/utils/mediasource-helper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaSource=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}},"./src/utils/output-filter.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},e}();t.default=r},"./src/utils/texttrack-utils.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddTrackEvent=function(e,t){var n=null;try{n=new window.Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)},t.clearCurrentCues=function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}},"./src/utils/time-ranges.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}}},"./src/utils/vttcue.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(e){return"string"==typeof e&&(!!n[e.toLowerCase()]&&e.toLowerCase())}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function o(n,o,a){var s=this,u=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,f=n,p=o,h=a,g=null,y="",m=!0,v="auto",b="start",_=50,S="middle",w=50,E="middle";if(Object.defineProperty(s,"id",i({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},l,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(s,"startTime",i({},l,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},l,{get:function(){return p},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},l,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},l,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},l,{get:function(){return y},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");y=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},l,{get:function(){return v},set:function(t){if("number"!=typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},l,{get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},l,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},l,{get:function(){return S},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");S=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},l,{get:function(){return w},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");w=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},l,{get:function(){return E},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),s.displayState=void 0,u)return s}return o.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},o}()},"./src/utils/vttparser.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/vttcue.js"),i=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function o(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[]}function a(){this.values=Object.create(null)}function s(e,t,n,r){var i=r?e.split(r):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(n);if(2===a.length)t(a[0],a[1])}}a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var u=new r.default(0,0,0),l="middle"===u.align?"middle":"center";function c(e,t,n){var r=e;function i(){var t=function(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=i(),o(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),o(),t.endTime=i(),o(),function(e,t){var r=new a;s(e,function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];r.integer(e,a),r.percent(e,a)&&r.set("snapToLines",!1),r.alt(e,a,["auto"]),2===o.length&&r.alt("lineAlign",o[1],["start",l,"end"]);break;case"position":o=t.split(","),r.percent(e,o[0]),2===o.length&&r.alt("positionAlign",o[1],["start",l,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",l,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===u.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",l);var o=r.get("position","auto");"auto"===o&&50===u.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}(e,t)}function d(e){return e.replace(/<br(?: \/)?>/gi,"\n")}t.fixLineBreaks=d,o.prototype={parse:function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=d(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),r}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i=void 0;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var o=(i=n()).match(/^()?WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:i=n(),t.state){case"HEADER":/:/.test(i)?s(i,function(e,t){},/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new r.default(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{c(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var u=-1!==i.indexOf("--\x3e");if(!i||u&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}},t.default=o},"./src/utils/webvtt-parser.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/vttparser.js"),i=n("./src/demux/id3.js"),o=function(e,t,n){return e.substr(n||0,t.length)===t},a=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},s={parse:function(t,n,s,u,l,c){var d,f=i.utf8ArrayToStr(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),p="00:00.000",h=0,g=0,y=0,m=[],v=!0,b=new r.default;b.oncue=function(e){var t=s[u],n=s.ccOffset;t&&t.new&&(void 0!==g?n=s.ccOffset=t.start:function(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;i&&i.new;)e.ccOffset+=r.start-i.start,r.new=!1,i=e[(r=i).prevCC];e.presentationOffset=n}(s,u,y)),y&&(n=y-s.presentationOffset),e.startTime+=n-g,e.endTime+=n-g,e.id=a(e.startTime.toString())+a(e.endTime.toString())+a(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&m.push(e)},b.onparsingerror=function(e){d=e},b.onflush=function(){d&&c?c(d):l(m)},f.forEach(function(t){if(v){if(o(t,"X-TIMESTAMP-MAP=")){v=!1,t.substr(16).split(",").forEach(function(e){o(e,"LOCAL:")?p=e.substr(6):o(e,"MPEGTS:")&&(h=parseInt(e.substr(7)))});try{n+(9e4*s[u].start||0)<0&&(n+=8589934592),h-=n,r=p,i=parseInt(r.substr(-3)),a=parseInt(r.substr(-6,2)),l=parseInt(r.substr(-9,2)),c=r.length>9?parseInt(r.substr(0,r.indexOf(":"))):0,g=(e.isFinite(i)&&e.isFinite(a)&&e.isFinite(l)&&e.isFinite(c)?(i+=1e3*a,i+=6e4*l,i+=36e5*c):-1)/1e3,y=h/9e4,-1===g&&(d=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){d=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(v=!1)}var r,i,a,l,c;b.parse(t+"\n")}),b.flush()}};t.default=s}).call(this,n("./src/polyfills/number.js").Number)},"./src/utils/xhr-loader.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=window.performance,o=window.XMLHttpRequest,a=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:i.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new o;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(e,t.url)}catch(n){e.open("GET",t.url,!0),r(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,o=this.stats,a=this.context,s=this.config;if(!o.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===o.tfirst&&(o.tfirst=Math.max(i.now(),o.trequest)),4===n){var u=t.status;if(u>=200&&u<300){o.tload=Math.max(o.tfirst,i.now());var l=void 0,c=void 0;c="arraybuffer"===a.responseType?(l=t.response).byteLength:(l=t.responseText).length,o.loaded=o.total=c;var d={url:t.responseURL,data:l};this.callbacks.onSuccess(d,o,a,t)}else o.retry>=s.maxRetry||u>=400&&u<499?(r.logger.error(u+" while loading "+a.url),this.callbacks.onError({code:u,text:t.statusText},a,t)):(r.logger.warn(u+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),o.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)},e.prototype.loadtimeout=function(){r.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,t)},e}();t.default=a}}).default},e.exports=r())},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=86)}({17:function(e,t,n){var r,i,o;i=[t,n(89)],void 0===(o="function"==typeof(r=function(n,r){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,(n=[{key:"getFirstMatch",value:function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""}},{key:"getSecondMatch",value:function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""}},{key:"matchAndReturnConst",value:function(e,t,n){if(e.test(t))return n}},{key:"getWindowsVersionName",value:function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}},{key:"getAndroidVersionName",value:function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":void 0}},{key:"getVersionPrecision",value:function(e){return e.split(".").length}},{key:"compareVersions",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,u=e.map([t,n],function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===s)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}}},{key:"map",value:function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r}},{key:"getBrowserAlias",value:function(e){return r.BROWSER_ALIASES_MAP[e]}}])&&i(t,n),e;var t,n}();n.default=o,e.exports=t.default})?r.apply(t,i):r)||(e.exports=o)},86:function(e,t,n){var r,i,o;i=[t,n(87)],void 0===(o="function"==typeof(r=function(n,r){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r=(o=r)&&o.__esModule?o:{default:o};var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,(n=[{key:"getParser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof e)throw new Error("UserAgent should be a string");return new r.default(e,t)}},{key:"parse",value:function(e){return new r.default(e).getResult()}}])&&i(t,n),e;var t,n}();n.default=a,e.exports=t.default})?r.apply(t,i):r)||(e.exports=o)},87:function(e,t,n){var r,i,o;i=[t,n(88),n(90),n(91),n(92),n(17)],void 0===(o="function"==typeof(r=function(n,r,i,o,a,s){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r=u(r),i=u(i),o=u(o),a=u(a),s=u(s);var d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null==t||""===t)throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},!0!==n&&this.parse()}return t=e,(n=[{key:"getUA",value:function(){return this._ua}},{key:"test",value:function(e){return e.test(this._ua)}},{key:"parseBrowser",value:function(){var e=this;this.parsedResult.browser={};var t=r.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}},{key:"getBrowser",value:function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}},{key:"getBrowserName",value:function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}},{key:"getBrowserVersion",value:function(){return this.getBrowser().version}},{key:"getOS",value:function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}},{key:"parseOS",value:function(){var e=this;this.parsedResult.os={};var t=i.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}},{key:"getOSName",value:function(e){var t=this.getOS(),n=t.name;return e?String(n).toLowerCase()||"":n||""}},{key:"getOSVersion",value:function(){return this.getOS().version}},{key:"getPlatform",value:function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}},{key:"getPlatformType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getPlatform(),n=t.type;return e?String(n).toLowerCase()||"":n||""}},{key:"parsePlatform",value:function(){var e=this;this.parsedResult.platform={};var t=o.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}},{key:"getEngine",value:function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}},{key:"getEngineName",value:function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}},{key:"parseEngine",value:function(){var e=this;this.parsedResult.engine={};var t=a.default.find(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}},{key:"parse",value:function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}},{key:"getResult",value:function(){return Object.assign({},this.parsedResult)}},{key:"satisfies",value:function(e){var t=this,n={},r=0,i={},o=0,a=Object.keys(e);if(a.forEach(function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"===l(a)&&(n[t]=a,r+=1)}),r>0){var s=Object.keys(n),u=s.find(function(e){return t.isOS(e)});if(u){var c=this.satisfies(n[u]);if(void 0!==c)return c}var d=s.find(function(e){return t.isPlatform(e)});if(d){var f=this.satisfies(n[d]);if(void 0!==f)return f}}if(o>0){var p=Object.keys(i),h=p.find(function(e){return t.isBrowser(e,!0)});if(void 0!==h)return this.compareVersion(i[h])}}},{key:"isBrowser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getBrowserName(),r=[n.toLowerCase()],i=s.default.getBrowserAlias(n);return t&&void 0!==i&&r.push(i.toLowerCase()),-1!==r.indexOf(e.toLowerCase())}},{key:"compareVersion",value:function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1}},{key:"isOS",value:function(e){return this.getOSName(!0)===String(e).toLowerCase()}},{key:"isPlatform",value:function(e){return this.getPlatformType(!0)===String(e).toLowerCase()}},{key:"isEngine",value:function(e){return this.getEngineName(!0)===String(e).toLowerCase()}},{key:"is",value:function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)}},{key:"some",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.some(function(t){return e.is(t)})}}])&&c(t.prototype,n),e;var t,n}();n.default=d,e.exports=t.default})?r.apply(t,i):r)||(e.exports=o)},88:function(e,t,n){var r,i,o;i=[t,n(17)],void 0===(o="function"==typeof(r=function(n,r){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r=(i=r)&&i.__esModule?i:{default:i};var o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=r.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:opera)[\s\/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=r.default.getFirstMatch(/(?:opr|opios)[\s\/](\S+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:SamsungBrowser)[\s\/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=r.default.getFirstMatch(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=r.default.getFirstMatch(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=r.default.getFirstMatch(/(?:swing)[\s\/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:coast)[\s\/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=r.default.getFirstMatch(/(?:yabrowser)[\s\/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:ucbrowser)[\s\/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:Maxthon|mxios)[\s\/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:epiphany)[\s\/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:puffin)[\s\/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:sleipnir)[\s\/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/(?:k-meleon)[\s\/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=r.default.getFirstMatch(/(?:micromessenger)[\s\/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=r.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=r.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=r.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=r.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=r.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=r.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=r.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=r.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=r.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=r.default.getFirstMatch(o,e)||r.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=r.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=r.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=r.default.getFirstMatch(/(?:qupzilla)[\s\/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=r.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s\/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=r.default.getFirstMatch(/(?:chromium)[\s\/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=r.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=r.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){return{name:r.default.getFirstMatch(/^(.*)\/(.*) /,e),version:r.default.getSecondMatch(/^(.*)\/(.*) /,e)}}}];n.default=a,e.exports=t.default})?r.apply(t,i):r)||(e.exports=o)},89:function(e,t,n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){"use strict";e.exports={BROWSER_ALIASES_MAP:{"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex"}}})?r.apply(t,i):r)||(e.exports=o)},90:function(e,t,n){var r,i,o;i=[t,n(17)],void 0===(o="function"==typeof(r=function(n,r){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r=(i=r)&&i.__esModule?i:{default:i};var o=[{test:[/windows phone/i],describe:function(e){var t=r.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:"Windows Phone",version:t}}},{test:[/windows/i],describe:function(e){var t=r.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=r.default.getWindowsVersionName(t);return{name:"Windows",version:t,versionName:n}}},{test:[/macintosh/i],describe:function(e){var t=r.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,".");return{name:"macOS",version:t}}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=r.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:"iOS",version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=r.default.getFirstMatch(/android[\s\/-](\d+(\.\d+)*)/i,e),n=r.default.getAndroidVersionName(t),i={name:"Android",version:t};return n&&(i.versionName=n),i}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=r.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:"WebOS"};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=r.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||r.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||r.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:"BlackBerry",version:t}}},{test:[/bada/i],describe:function(e){var t=r.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:"Bada",version:t}}},{test:[/tizen/i],describe:function(e){var t=r.default.getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i,e);return{name:"Tizen",version:t}}},{test:[/linux/i],describe:function(){return{name:"Linux"}}},{test:[/CrOS/],describe:function(){return{name:"Chrome OS"}}},{test:[/PlayStation 4/],describe:function(e){var t=r.default.getFirstMatch(/PlayStation 4[\/\s](\d+(\.\d+)*)/i,e);return{name:"PlayStation 4",version:t}}}];n.default=o,e.exports=t.default})?r.apply(t,i):r)||(e.exports=o)},91:function(e,t,n){var r,i,o;i=[t,n(17)],void 0===(o="function"==typeof(r=function(n,r){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r=(i=r)&&i.__esModule?i:{default:i};var o={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=r.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.tablet,vendor:"Amazon"}}},{test:[/tablet/i],describe:function(){return{type:o.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=r.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.tv}}}];n.default=a,e.exports=t.default})?r.apply(t,i):r)||(e.exports=o)},92:function(e,t,n){var r,i,o;i=[t,n(17)],void 0===(o="function"==typeof(r=function(n,r){"use strict";var i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r=(i=r)&&i.__esModule?i:{default:i};var o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){var t=/\sedg\//i.test(e);if(t)return{name:"Blink"};var n=r.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:"EdgeHTML",version:n}}},{test:[/trident/i],describe:function(e){var t={name:"Trident"},n=r.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:"Presto"},n=r.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:"Gecko"},n=r.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:"Blink"}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:"WebKit"},n=r.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];n.default=o,e.exports=t.default})?r.apply(t,i):r)||(e.exports=o)}})},function(e,t,n){var r=n(90).default;e.exports=r,e.exports.default=r},function(e,t,n){e.exports={parse:n(101),stringify:n(104)}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e){e.exports={"Audio Only":" ",Auto:"","Auto - {{quality}}":" - {{quality}}",Cancel:"","Closed Captions":"  ","Connection URI":" URI  ","Create Clip":" ","Exit Fullscreen":"   ","Full Screen":" ","General Information":" ",Language:"",Languages:"","Low Latency":"  ",Mute:"",Pause:" ",Play:"","Player Session Guid":"   ","Player Version":" ",Qualities:"",Quality:"","Report Abuse":"  ","Report Video Issues":"   ",Settings:"","Stream Session Guid":"   ",Submit:"","Toggle Spectre":" ",Unmute:" ","Video Stats":" ","Video and audio are not synced":"    ","Video doesn't load":"   ","Video is fine, but can't hear audio":"      ","Video is not smooth":"   ","Video is playing, but there's distortion":"     ","Video resolution changes too often":"      ",Volume:" "}},function(e){e.exports={"Audio Only":"Kun lyd",Auto:"Automatisk","Auto - {{quality}}":"Automatisk - {{quality}}",Cancel:"Annuller","Closed Captions":"Undertekster","Connection URI":"Forbindelses-URI","Create Clip":"Opret klip","Exit Fullscreen":"Afslut fuld skrm","Full Screen":"Fuld skrm","General Information":"Generelle oplysninger",Language:"Sprog",Languages:"Sprog","Low Latency":"Lav ventetid",Mute:"Sl lyd fra",Pause:"Pause",Play:"Afspil","Player Session Guid":"GUID for spillersession","Player Version":"Spillerversion",Qualities:"Kvaliteter",Quality:"Kvalitet","Report Abuse":"Anmeld misbrug","Report Video Issues":"Anmeld videoproblemer",Settings:"Indstillinger","Stream Session Guid":"GUID for streamsessioner",Submit:"Send","Toggle Spectre":"Sl Spectre til/fra",Unmute:"Sl lyden til","Video Stats":"Videostatistik","Video and audio are not synced":"Video og lyd synkroniseres ikke","Video doesn't load":"Video indlses ikke","Video is fine, but can't hear audio":"Video er fin, men kan ikke hre lyd","Video is not smooth":"Video er ujvn","Video is playing, but there's distortion":"Videoen afspilles, men der er forvrngning","Video resolution changes too often":"Videooplsningen ndres for ofte",Volume:"Lydstyrke"}},function(e){e.exports={"Audio Only":"Nur Audio",Auto:"Automatisch","Auto - {{quality}}":"Automatisch - {{quality}}",Cancel:"Abbrechen","Closed Captions":"Untertitel","Connection URI":"Verbindungs-URI","Create Clip":"Clip erstellen","Exit Fullscreen":"Vollbild beenden","Full Screen":"Vollbild","General Information":"Allgemeine Informationen",Language:"Sprache",Languages:"Sprachen","Low Latency":"Geringe Latenz",Mute:"Stummschalten",Pause:"Pausieren",Play:"Spielen","Player Session Guid":"Spielersitzungs-GUID","Player Version":"Playerversion",Qualities:"Qualitten",Quality:"Qualitt","Report Abuse":"Missbrauch melden","Report Video Issues":"Videoprobleme melden",Settings:"Einstellungen","Stream Session Guid":"Stream-Sitzungs-GUID",Submit:"Senden","Toggle Spectre":"Spectre umschalten",Unmute:"Stummschaltung aufheben","Video Stats":"Videostatistiken","Video and audio are not synced":"Video und Audio werden nicht synchronisiert","Video doesn't load":"Video wird nicht geladen","Video is fine, but can't hear audio":"Video ist in Ordnung, aber ohne Ton","Video is not smooth":"Video luft nicht glatt","Video is playing, but there's distortion":"Video wird abgespielt, aber mit Verzerrungen","Video resolution changes too often":"Videoauflsung ndert sich zu oft",Volume:"Lautstrke"}},function(e){e.exports={"Audio Only":"Audio Only",Auto:"Auto","Auto - {{quality}}":"Auto - {{quality}}",Cancel:"Cancel","Closed Captions":"Closed Captions","Connection URI":"Connection URI","Create Clip":"Create Clip","Exit Fullscreen":"Exit Fullscreen","Full Screen":"Full Screen","General Information":"General Information",Language:"Language",Languages:"Languages","Low Latency":"Low Latency",Mute:"Mute",Pause:"Pause",Play:"Play","Player Session Guid":"Player Session Guid","Player Version":"Player Version",Qualities:"Qualities",Quality:"Quality","Report Abuse":"Report Abuse","Report Video Issues":"Report Video Issues",Settings:"Settings","Stream Session Guid":"Stream Session Guid",Submit:"Submit","Toggle Spectre":"Toggle Spectre",Unmute:"Unmute","Video Stats":"Video Stats","Video and audio are not synced":"Video and audio are not synced","Video doesn't load":"Video doesn't load","Video is fine, but can't hear audio":"Video is fine, but can't hear audio","Video is not smooth":"Video is not smooth","Video is playing, but there's distortion":"Video is playing, but there's distortion","Video resolution changes too often":"Video resolution changes too often",Volume:"Volume"}},function(e){e.exports={"Low Latency":"Low Latency","_Low Latency.comment":"Reduced amount of video delay from stream to viewer"}},function(e){e.exports={"Audio Only":" Solo audio ",Auto:"Automtico","Auto - {{quality}}":"Auto - {{quality}}",Cancel:"Cancelar","Closed Captions":"Subttulos","Connection URI":"URI de conexin","Create Clip":"Crear clip","Exit Fullscreen":"Salir de la pantalla completa","Full Screen":"Pantalla completa","General Information":"Informacin general ",Language:"Idioma",Languages:"Idiomas","Low Latency":"Baja latencia",Mute:"Desactivar audio",Pause:"Pausar",Play:"Reproducir","Player Session Guid":"GUID de sesin del reproductor","Player Version":"Versin del reproductor",Qualities:"Calidades",Quality:"Calidad","Report Abuse":"Notificar abuso","Report Video Issues":"Notificar problemas con un vdeo ",Settings:"Configuracin","Stream Session Guid":"GUID de sesin de la secuencia",Submit:"Enviar","Toggle Spectre":"Alternar Spectre",Unmute:"Reactivar audio","Video Stats":"Estadsticas de vdeo ","Video and audio are not synced":"El vdeo y el audio no estn sincronizados","Video doesn't load":"El vdeo no se carga","Video is fine, but can't hear audio":"El vdeo es correcto, pero no se puede or el audio","Video is not smooth":"El vdeo no es uniforme","Video is playing, but there's distortion":"El vdeo se est reproduciendo, pero hay distorsin","Video resolution changes too often":"Los cambios en la resolucin del vdeo son demasiado frecuentes",Volume:"Volumen"}},function(e){e.exports={"Audio Only":" Solo audio ",Auto:"Automtico","Auto - {{quality}}":"Auto - {{quality}}",Cancel:"Cancelar","Closed Captions":"Subttulos","Connection URI":"URI de conexin","Create Clip":"Crear clip","Exit Fullscreen":"Salir de la pantalla completa","Full Screen":"Pantalla completa","General Information":"Informacin general ",Language:"Idioma",Languages:"Idiomas","Low Latency":"Baja latencia",Mute:"Silenciar",Pause:"Pausar",Play:"Reproducir","Player Session Guid":"GUID de sesin del reproductor","Player Version":"Versin del reproductor",Qualities:"Calidades",Quality:"Calidad","Report Abuse":"Notificar abuso","Report Video Issues":"Informar de problemas de video",Settings:"Configuracin","Stream Session Guid":"GUID de sesin de streaming",Submit:"Enviar","Toggle Spectre":"Alternar Spectre",Unmute:"Reactivar audio","Video Stats":"Estadsticas de video","Video and audio are not synced":"El vdeo y el audio no estn sincronizados","Video doesn't load":"El vdeo no se carga","Video is fine, but can't hear audio":"El vdeo es correcto, pero no se puede or el audio","Video is not smooth":"El vdeo no es uniforme","Video is playing, but there's distortion":"El vdeo se est reproduciendo, pero hay distorsin","Video resolution changes too often":"Los cambios en la resolucin del vdeo son demasiado frecuentes",Volume:"Volumen"}},function(e){e.exports={"Audio Only":"Vain ni",Auto:"Automaattinen","Auto - {{quality}}":"Automaattinen  {{quality}}",Cancel:"Peruuta","Closed Captions":"Tekstitys","Connection URI":"Yhteyden URI","Create Clip":"Luo leike","Exit Fullscreen":"Poistu koko nytn tilasta","Full Screen":"Koko nytt","General Information":"Yleiset tiedot",Language:"Kieli",Languages:"Kielet","Low Latency":"Lyhyt viive",Mute:"Mykist",Pause:"Keskeyt",Play:"Toista","Player Session Guid":"Pelaaja-istunnon GUID","Player Version":"Soittimen versio",Qualities:"Ominaisuudet",Quality:"Laatu","Report Abuse":"Ilmoita vrinkytst","Report Video Issues":"Ilmoita video-ongelmista",Settings:"Asetukset","Stream Session Guid":"Suoratoistoistunnon GUID",Submit:"Lhet","Toggle Spectre":"Vaihda Spectren tilaa",Unmute:"Poista mykistys","Video Stats":"Videotilastot","Video and audio are not synced":"Videon ja nen synkronointi ei toimi","Video doesn't load":"Video ei lataudu","Video is fine, but can't hear audio":"Video toimii, mutta nt ei kuulu","Video is not smooth":"Video ei toistu sujuvasti","Video is playing, but there's distortion":"Video toistetaan, mutta siin on vristymi","Video resolution changes too often":"Videon tarkkuus muuttuu liian usein",Volume:"nenvoimakkuus"}},function(e){e.exports={"Audio Only":"Audio uniquement",Auto:"Auto","Auto - {{quality}}":"Auto - {{quality}}",Cancel:"Annuler","Closed Captions":"Sous-titres","Connection URI":"URI de connexion","Create Clip":"Crer un extrait","Exit Fullscreen":"Quitter le mode Plein cran","Full Screen":"Plein cran","General Information":"Informations gnrales",Language:"Langue",Languages:"Langues","Low Latency":"Latence faible",Mute:"Muet",Pause:"Pause",Play:"Lire","Player Session Guid":"GUID de la session du joueur","Player Version":"Version du lecteur",Qualities:"Qualits",Quality:"Qualit","Report Abuse":"Signaler un abus","Report Video Issues":"Signaler des problmes vido",Settings:"Paramtres","Stream Session Guid":"GUID de la session de diffusion en continu",Submit:"Envoyer","Toggle Spectre":"Basculer spectre",Unmute:"Ractiver le son","Video Stats":"Statistiques vido","Video and audio are not synced":"La vido et le son ne sont pas synchroniss","Video doesn't load":"La vido ne charge pas","Video is fine, but can't hear audio":"La vido est correcte, mais elle ne peut pas entendre le son","Video is not smooth":"La vido nest pas lisse","Video is playing, but there's distortion":"La vido est en cours de lecture, mais il y a une distorsion","Video resolution changes too often":"Modifications apportes  la rsolution vido trop frquentes",Volume:"Volume"}},function(e){e.exports={"Audio Only":" ",Auto:"","Auto - {{quality}}":" - {{quality}}",Cancel:"","Closed Captions":" ","Connection URI":"URI  ","Create Clip":" ","Exit Fullscreen":"  ","Full Screen":" ","General Information":" ",Language:"",Languages:"","Low Latency":" ",Mute:"",Pause:"",Play:"","Player Session Guid":"  ","Player Version":" ",Qualities:" ",Quality:"","Report Abuse":"   ","Report Video Issues":"   ",Settings:"","Stream Session Guid":"  ",Submit:"","Toggle Spectre":"  ",Unmute:" ","Video Stats":" ","Video and audio are not synced":"   ","Video doesn't load":"  ","Video is fine, but can't hear audio":"  ,     ","Video is not smooth":"  ","Video is playing, but there's distortion":" ,   ","Video resolution changes too often":"     ",Volume:" "}},function(e){e.exports={"Audio Only":"Solo audio",Auto:"Auto","Auto - {{quality}}":"Auto - {{quality}}",Cancel:"Annulla","Closed Captions":"Sottotitoli","Connection URI":"URI connessione","Create Clip":"Crea clip","Exit Fullscreen":"Esci da modalit schermo intero","Full Screen":"Schermo intero","General Information":"Informazioni generali",Language:"Lingua",Languages:"Lingue","Low Latency":"Bassa latenza",Mute:"Disattiva audio",Pause:"Sospendi",Play:"Riproduci","Player Session Guid":"GUID sessione giocatore","Player Version":"Versione lettore",Qualities:"Qualit",Quality:"Qualit","Report Abuse":"Segnala abuso","Report Video Issues":"Segnala problemi video",Settings:"Impostazioni","Stream Session Guid":"Riproduci in streaming GUID sessione",Submit:"Invia","Toggle Spectre":"Attiva/disattiva spettro",Unmute:"Attiva audio","Video Stats":"Statistiche video","Video and audio are not synced":"Video e audio non sincronizzati","Video doesn't load":"Il video non si carica","Video is fine, but can't hear audio":"Il video si carica ma l'audio non si sente","Video is not smooth":"Il video non  nitido","Video is playing, but there's distortion":"La riproduzione del video  in corso ma c' un effetto distorsione","Video resolution changes too often":"La risoluzione del video cambia troppo spesso",Volume:"Volume"}},function(e){e.exports={"Audio Only":"",Auto:"","Auto - {{quality}}":" - {{quality}}",Cancel:"","Closed Captions":" ","Connection URI":" URI","Create Clip":"","Exit Fullscreen":"","Full Screen":"","General Information":"",Language:"",Languages:"","Low Latency":"",Mute:"",Pause:"",Play:"","Player Session Guid":"  GUID","Player Version":" ",Qualities:"",Quality:"","Report Abuse":"","Report Video Issues":"",Settings:"","Stream Session Guid":"  GUID",Submit:"","Toggle Spectre":"Spectre ",Unmute:"","Video Stats":"","Video and audio are not synced":"","Video doesn't load":"","Video is fine, but can't hear audio":"","Video is not smooth":"","Video is playing, but there's distortion":"","Video resolution changes too often":"",Volume:""}},function(e){e.exports={"Audio Only":"",Auto:"","Auto - {{quality}}":" - {{quality}}",Cancel:"","Closed Captions":"   ","Connection URI":" URI","Create Clip":" ","Exit Fullscreen":"  ","Full Screen":" ","General Information":" ",Language:"",Languages:"","Low Latency":"  ",Mute:"",Pause:" ",Play:"","Player Session Guid":"  GUID","Player Version":" ",Qualities:"",Quality:"","Report Abuse":"","Report Video Issues":"   ",Settings:"","Stream Session Guid":"  GUID",Submit:"","Toggle Spectre":" ",Unmute:" ","Video Stats":" ","Video and audio are not synced":"   ","Video doesn't load":"  ","Video is fine, but can't hear audio":"     ","Video is not smooth":"  ","Video is playing, but there's distortion":"    ","Video resolution changes too often":"    ",Volume:""}},function(e){e.exports={"Audio Only":"Bare lyd",Auto:"Automatisk","Auto - {{quality}}":"Automatisk  {{quality}}",Cancel:"Avbryt","Closed Captions":"Undertekster","Connection URI":"Tilkoblings-URI","Create Clip":"Lag klipp","Exit Fullscreen":"Avslutt fullskjerm","Full Screen":"Fullskjerm","General Information":"Generell informasjon",Language:"Sprk",Languages:"Sprk","Low Latency":"Liten ventetid",Mute:"Demp",Pause:"Pause",Play:"Spill","Player Session Guid":"GUID for spillerkt","Player Version":"Spillerversjon",Qualities:"Kvaliteter",Quality:"Kvalitet","Report Abuse":"Rapporter misbruk","Report Video Issues":"Rapporter videoproblemer",Settings:"Innstillinger","Stream Session Guid":"GUID for strmmekter",Submit:"Send","Toggle Spectre":"Aktiver/deaktiver Spectre",Unmute:"Aktiver varsler","Video Stats":"Videostatistikk","Video and audio are not synced":"Video og lyd er ikke synkronisert","Video doesn't load":"Videoen lastes ikke inn","Video is fine, but can't hear audio":"Videoen er bra, men jeg er uten lyd","Video is not smooth":"Videoen er ujevn","Video is playing, but there's distortion":"Videoen spilles av, men bildet er forvrengt","Video resolution changes too often":"Videoopplsningen endres for ofte",Volume:"Volum"}},function(e){e.exports={"Audio Only":"Alleen audio",Auto:"Automatisch","Auto - {{quality}}":"Automatisch: {{quality}}",Cancel:"Annuleren","Closed Captions":"Ondertiteling","Connection URI":"Verbindings-URI","Create Clip":"Clip maken","Exit Fullscreen":"Volledig scherm afsluiten","Full Screen":"Volledig scherm","General Information":"Algemene informatie",Language:"Taal",Languages:"Talen","Low Latency":"Lage latentie",Mute:"Dempen",Pause:"Pauzeren",Play:"Spelen","Player Session Guid":"GUID van spelersessie","Player Version":"Spelerversie",Qualities:"Kwaliteitsinstellingen",Quality:"Kwaliteit","Report Abuse":"Misbruik melden","Report Video Issues":"Problemen met video melden",Settings:"Instellingen","Stream Session Guid":"GUID van streamsessie",Submit:"Verzenden","Toggle Spectre":"Spook in-/uitschakelen",Unmute:"Dempen opheffen","Video Stats":"Videostatistieken","Video and audio are not synced":"Beeld en geluid lopen niet synchroon","Video doesn't load":"Video wordt niet geladen","Video is fine, but can't hear audio":"Video is in orde, maar ik hoor geen geluid","Video is not smooth":"Video is niet vloeiend","Video is playing, but there's distortion":"Video wordt afgespeeld, maar met vervorming","Video resolution changes too often":"Videoresolutie verandert te vaak",Volume:"Volume"}},function(e){e.exports={"Audio Only":"Tylko dwik",Auto:"Automatycznie","Auto - {{quality}}":"Automatycznie  {{quality}}",Cancel:"Anuluj","Closed Captions":"Napisy","Connection URI":"Identyfikator URI poczenia","Create Clip":"Utwrz klip","Exit Fullscreen":"Zakocz tryb penoekranowy","Full Screen":"Peny ekran","General Information":"Informacje oglne",Language:"Jzyk",Languages:"Jzyki","Low Latency":"Mae opnienie",Mute:"Wycisz",Pause:"Wstrzymaj",Play:"Odtwrz","Player Session Guid":"Identyfikator GUID sesji odtwarzacza","Player Version":"Wersja odtwarzacza",Qualities:"Jakoci",Quality:"Jako","Report Abuse":"Zgo naduycie","Report Video Issues":"Zgo problemy z wideo",Settings:"Ustawienia","Stream Session Guid":"Identyfikator GUID sesji streamowania",Submit:"Przelij","Toggle Spectre":"Przecz odtwarzacz Spectre",Unmute:"Wycz wyciszenie","Video Stats":"Statystyki wideo","Video and audio are not synced":"Obraz i dwik nie s zsynchronizowane","Video doesn't load":"Nie mona zaadowa wideo","Video is fine, but can't hear audio":"Obraz jest dobry, ale nie sucha dwiku","Video is not smooth":"Wideo nie jest pynnie odtwarzane","Video is playing, but there's distortion":"Wideo jest odtwarzane, ale wystpuj zakcenia","Video resolution changes too often":"Rozdzielczo wideo zmienia si zbyt czsto",Volume:"Gono"}},function(e){e.exports={"Audio Only":"Somente udio",Auto:"Automtico","Auto - {{quality}}":"Automtico - {{quality}}",Cancel:"Cancelar","Closed Captions":"Legendas Codificadas","Connection URI":"URI de Conexo","Create Clip":"Criar Clipe","Exit Fullscreen":"Sair da Tela Inteira","Full Screen":"Tela Inteira","General Information":"Informaes Gerais",Language:"Idioma",Languages:"Idiomas","Low Latency":"Baixa Latncia",Mute:"Ativar Mudo",Pause:"Pausar",Play:"Reproduzir","Player Session Guid":"GUID da Sesso do Player","Player Version":"Verso do Player",Qualities:"Qualidades",Quality:"Qualidade","Report Abuse":"Relatar Abuso","Report Video Issues":"Relatar Problemas de Vdeo",Settings:"Configuraes","Stream Session Guid":"GUID da Sesso de Streaming",Submit:"Enviar","Toggle Spectre":"Alternar Spectre",Unmute:"Desativar Mudo","Video Stats":"Estatsticas do Vdeo","Video and audio are not synced":"Vdeo e udio no sincronizados","Video doesn't load":"No  possvel carregar o vdeo","Video is fine, but can't hear audio":"O vdeo est funcionando corretamente, mas no  possvel ouvir o udio","Video is not smooth":"O vdeo no est funcionando corretamente","Video is playing, but there's distortion":"O vdeo est sendo reproduzido, mas h distoro","Video resolution changes too often":"A resoluo do vdeo muda com muita frequncia",Volume:"Volume"}},function(e){e.exports={"Audio Only":"Apenas udio",Auto:"Automtico","Auto - {{quality}}":"Automtico - {{quality}}",Cancel:"Cancelar","Closed Captions":"Legendas de udio","Connection URI":"URI de Ligao","Create Clip":"Criar Clip","Exit Fullscreen":"Sair do modo de Ecr Inteiro","Full Screen":"Ecr Inteiro","General Information":"Informaes Gerais",Language:"Idioma",Languages:"Idiomas","Low Latency":"Latncia Baixa",Mute:"Desativar som",Pause:"Pausa",Play:"Jogar","Player Session Guid":"GUID da Sesso do Leitor","Player Version":"Verso do Leitor",Qualities:"Qualidades",Quality:"Qualidade","Report Abuse":"Reportar Abuso","Report Video Issues":"Reportar Problemas com o Vdeo",Settings:"Definies","Stream Session Guid":"GUID da Sesso de Transmisso",Submit:"Submeter","Toggle Spectre":"Ativar/Desativar Spectre",Unmute:"Ativar som","Video Stats":"Estatsticas de Vdeo","Video and audio are not synced":"O vdeo e o udio no esto sincronizados","Video doesn't load":"O vdeo no carrega","Video is fine, but can't hear audio":"O vdeo est bem, mas no  possvel ouvir o udio","Video is not smooth":"O vdeo tem falhas","Video is playing, but there's distortion":"O vdeo est a ser reproduzido, mas tem interferncias","Video resolution changes too often":"A resoluo do vdeo est sempre a ser alterada",Volume:"Volume"}},function(e){e.exports={"Audio Only":"  ",Auto:"","Auto - {{quality}}":"  {{quality}}",Cancel:"","Closed Captions":" ","Connection URI":"URI ","Create Clip":" ","Exit Fullscreen":"   ","Full Screen":"  ","General Information":"   ",Language:"",Languages:"","Low Latency":" ",Mute:" ",Pause:"",Play:"","Player Session Guid":"GUID  ","Player Version":" ",Qualities:"",Quality:"","Report Abuse":"  ","Report Video Issues":"    ",Settings:"","Stream Session Guid":"GUID   ",Submit:"","Toggle Spectre":"   Spectre",Unmute:" ","Video Stats":"  ","Video and audio are not synced":"    ","Video doesn't load":"  ","Video is fine, but can't hear audio":"  ,    ","Video is not smooth":"  ","Video is playing, but there's distortion":" ,   ","Video resolution changes too often":"    ",Volume:""}},function(e){e.exports={"Audio Only":"Endast ljud",Auto:"Auto","Auto - {{quality}}":"Auto - {{quality}}",Cancel:"Avbryt","Closed Captions":"Undertext","Connection URI":"Anslutnings-URI","Create Clip":"Skapa klipp","Exit Fullscreen":"Avsluta helskrmslge","Full Screen":"Helskrm","General Information":"Allmn information",Language:"Sprk",Languages:"Sprk","Low Latency":"Lg latens",Mute:"Ljud av",Pause:"Pausa",Play:"Spela","Player Session Guid":"Sessions-GUID fr spelare","Player Version":"Spelarversion",Qualities:"Kvaliteter",Quality:"Kvalitet","Report Abuse":"Rapportera missbruk","Report Video Issues":"Rapportera videoproblem",Settings:"Instllningar","Stream Session Guid":"Streamsessions-GUID",Submit:"Skicka","Toggle Spectre":"Vxla till Spectre",Unmute:"Ljud p","Video Stats":"Videostatistik","Video and audio are not synced":"Video och ljud r inte synkade","Video doesn't load":"Videon lses inte in","Video is fine, but can't hear audio":"Videon fungerar, men ljud hrs inte","Video is not smooth":"Videon hackar","Video is playing, but there's distortion":"Videon spelas upp, men har strningar","Video resolution changes too often":"Videoupplsningen ndras fr ofta",Volume:"Volym"}},function(e){e.exports={"Audio Only":"Yalnzca Ses",Auto:"Otomatik","Auto - {{quality}}":"Otomatik - {{quality}}",Cancel:"ptal","Closed Captions":"Kapal Aklamal Alt Yazlar","Connection URI":"Balant URI'si","Create Clip":"Klip Olutur","Exit Fullscreen":"Tam Ekrandan k","Full Screen":"Tam Ekran","General Information":"Genel Bilgiler",Language:"Dil",Languages:"Diller","Low Latency":"Dk Gecikme",Mute:"Sesi Kapat",Pause:"Duraklat",Play:"Oyna","Player Session Guid":"Oyuncu Oturumu GUID'si","Player Version":"Oynatc Srm",Qualities:"Nitelikler",Quality:"Kalite","Report Abuse":"Uygunsuz Kullanm Bildir","Report Video Issues":"Video Sorunlarn Bildir",Settings:"Ayarlar","Stream Session Guid":"evrimii Yrtme Oturumu GUID'si",Submit:"Gnder","Toggle Spectre":"Spectre'a Gei Yap",Unmute:"Sesi A","Video Stats":"Video statistikleri","Video and audio are not synced":"Video ve ses eitlenmemi","Video doesn't load":"Video yklenemiyor","Video is fine, but can't hear audio":"Videoda sorun yok ancak sesi duyamyorum","Video is not smooth":"Video dzgn deil","Video is playing, but there's distortion":"Video yrtlyor ancak bozulma var","Video resolution changes too often":"Video znrl ok sk deiiyor",Volume:"Ses dzeyi"}},function(e){e.exports={"Audio Only":"",Auto:"","Auto - {{quality}}":" - {{quality}}",Cancel:"","Closed Captions":"","Connection URI":" URI","Create Clip":"","Exit Fullscreen":"","Full Screen":"","General Information":"",Language:"",Languages:"","Low Latency":"",Mute:"",Pause:"",Play:"","Player Session Guid":" Guid","Player Version":"",Qualities:"",Quality:"","Report Abuse":"","Report Video Issues":"",Settings:"","Stream Session Guid":" Guid",Submit:"","Toggle Spectre":" Spectre",Unmute:"","Video Stats":"","Video and audio are not synced":"","Video doesn't load":"","Video is fine, but can't hear audio":"","Video is not smooth":"","Video is playing, but there's distortion":"","Video resolution changes too often":"",Volume:""}},function(e){e.exports={"Audio Only":"",Auto:"","Auto - {{quality}}":" - {{quality}}",Cancel:"","Closed Captions":"","Connection URI":" URI","Create Clip":"","Exit Fullscreen":"","Full Screen":"","General Information":" ",Language:"",Languages:"","Low Latency":"",Mute:"",Pause:"",Play:"","Player Session Guid":" Guid","Player Version":"",Qualities:"",Quality:"","Report Abuse":"","Report Video Issues":"",Settings:"","Stream Session Guid":" Guid",Submit:"","Toggle Spectre":" Spectre",Unmute:"","Video Stats":"","Video and audio are not synced":"","Video doesn't load":"","Video is fine, but can't hear audio":"","Video is not smooth":"","Video is playing, but there's distortion":"","Video resolution changes too often":"",Volume:""}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},function(e,t,n){var r=n(112),i=n(113),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){var r=n(116);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(123);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){"use strict";var r=n(8).compose;t.__esModule=!0,t.composeWithDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?r:r.apply(null,arguments)},t.devToolsEnhancer="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}}},,,function(e,t,n){var r=n(84);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,".spectre-player a,.spectre-player abbr,.spectre-player acronym,.spectre-player address,.spectre-player applet,.spectre-player article,.spectre-player aside,.spectre-player audio,.spectre-player b,.spectre-player big,.spectre-player blockquote,.spectre-player body,.spectre-player canvas,.spectre-player caption,.spectre-player center,.spectre-player cite,.spectre-player code,.spectre-player dd,.spectre-player del,.spectre-player details,.spectre-player dfn,.spectre-player div,.spectre-player dl,.spectre-player dt,.spectre-player em,.spectre-player embed,.spectre-player fieldset,.spectre-player figcaption,.spectre-player figure,.spectre-player footer,.spectre-player form,.spectre-player h1,.spectre-player h2,.spectre-player h3,.spectre-player h4,.spectre-player h5,.spectre-player h6,.spectre-player header,.spectre-player hgroup,.spectre-player html,.spectre-player i,.spectre-player iframe,.spectre-player img,.spectre-player ins,.spectre-player kbd,.spectre-player label,.spectre-player legend,.spectre-player li,.spectre-player mark,.spectre-player menu,.spectre-player nav,.spectre-player object,.spectre-player ol,.spectre-player output,.spectre-player p,.spectre-player pre,.spectre-player q,.spectre-player ruby,.spectre-player s,.spectre-player samp,.spectre-player section,.spectre-player small,.spectre-player span,.spectre-player strike,.spectre-player strong,.spectre-player sub,.spectre-player summary,.spectre-player sup,.spectre-player table,.spectre-player tbody,.spectre-player td,.spectre-player tfoot,.spectre-player th,.spectre-player thead,.spectre-player time,.spectre-player tr,.spectre-player tt,.spectre-player u,.spectre-player ul,.spectre-player var,.spectre-player video{margin:0;padding:0;border:0;vertical-align:initial}.spectre-container{width:100%}",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){var n=n||{};for(var r in e.exports=n,n.isInitialized=!1,n.verbosityLevels={NONE:0,ERROR:1,WARNING:2,INFORMATION:3},n.behavior={UNDEFINED:0,NAVIGATIONBACK:1,NAVIGATION:2,NAVIGATIONFORWARD:3,APPLY:4,REMOVE:5,SORT:6,EXPAND:7,REDUCE:8,CONTEXTMENU:9,TAB:10,COPY:11,EXPERIMENTATION:12,PRINT:13,SHOW:14,HIDE:15,MAXIMIZE:16,MINIMIZE:17,BACKBUTTON:18,STARTPROCESS:20,PROCESSCHECKPOINT:21,COMPLETEPROCESS:22,SCENARIOCANCEL:23,DOWNLOADCOMMIT:40,DOWNLOAD:41,SEARCHAUTOCOMPLETE:60,SEARCH:61,SEARCHINITIATE:62,TEXTBOXINPUT:63,PURCHASE:80,ADDTOCART:81,VIEWCART:82,ADDWISHLIST:83,FINDSTORE:84,CHECKOUT:85,REMOVEFROMCART:86,PURCHASECOMPLETE:87,VIEWCHECKOUTPAGE:88,VIEWCARTPAGE:89,VIEWPDP:90,UPDATEITEMQUANTITY:91,INTENTTOBUY:92,PUSHTOINSTALL:93,SIGNIN:100,SIGNOUT:101,SOCIALSHARE:120,SOCIALLIKE:121,SOCIALREPLY:122,CALL:123,EMAIL:124,COMMUNITY:125,VOTE:140,SURVEYINITIATE:141,SURVEYCOMPLETE:142,REPORTAPPLICATION:143,REPORTREVIEW:144,SURVEYCHECKPOINT:145,CONTACT:160,REGISTRATIONINITIATE:161,REGISTRATIONCOMPLETE:162,CANCELSUBSCRIPTION:163,RENEWSUBSCRIPTION:164,CHANGESUBSCRIPTION:165,REGISTRATIONCHECKPOINT:166,CHATINITIATE:180,CHATEND:181,TRIALSIGNUP:200,TRIALINITIATE:201,PARTNERREFERRAL:220,VIDEOSTART:240,VIDEOPAUSE:241,VIDEOCONTINUE:242,VIDEOCHECKPOINT:243,VIDEOJUMP:244,VIDEOCOMPLETE:245,VIDEOBUFFERING:246,VIDEOERROR:247,VIDEOMUTE:248,VIDEOUNMUTE:249,VIDEOFULLSCREEN:250,VIDEOUNFULLSCREEN:251,VIDEOREPLAY:252,VIDEOPLAYERLOAD:253,VIDEOPLAYERCLICK:254,VIDEOVOLUMECONTROL:255,VIDEOAUDIOTRACKCONTROL:256,VIDEOCLOSEDCAPTIONCONTROL:257,VIDEOCLOSEDCAPTIONSTYLE:258,VIDEORESOLUTIONCONTROL:259,VIRTUALEVENTJOIN:260,VIRTUALEVENTEND:261,IMPRESSION:280,CLICK:281,RICHMEDIACOMPLETE:282,ADBUFFERING:283,ADERROR:284,ADSTART:285,ADCOMPLETE:286,ADSKIP:287,ADTIMEOUT:288,OTHER:300},n.behaviorKeys=[],n.behavior)n.behaviorKeys.push(r);n.actionType={CLICKLEFT:"CL",CLICKRIGHT:"CR",CLICKMIDDLE:"CM",SCROLL:"S",ZOOM:"Z",RESIZE:"R",KEYBOARDENTER:"KE",KEYBOARDSPACE:"KS",OTHER:"O"},n.cookie=function(){function e(e,r){for(var i=document.cookie.split(";"),o=0;o<i.length;o++){for(var a=i[o];" "===a.charAt(0);)a=a.substring(1);var s=a.split("=");if(t(s.shift())===e&&s[0].indexOf(r)==(n.utils.isValueAssigned(r)?0:-1))return t(s.join("="))}}function t(e){var t=decodeURIComponent(e.replace("/+/g"," "));return 0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),t}function r(e,t,n){var r;if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),r="; expires="+i.toUTCString()}else r="";window.document.cookie=e+"="+t+r+"; path=/;"}return{getCookie:e,getCookieKeyValue:function(t,n){var r=e(t);if(r&&n)for(var i=r.split("&"),o=0;o<i.length;o++){var a=i[o].split("=");if(a[0]&&n.toLowerCase()===a[0].toLowerCase())return a[1]}},getAllCookies:function(){for(var e=document.cookie.split(";"),r={},i=0;i<e.length;i++){for(var o=e[i];" "===o.charAt(0);)o=o.substring(1);var a=o.split("="),s=t(a.shift());("MSFPC"!=s||"MSFPC"===s&&a[0].indexOf("GUID")==(n.utils.isValueAssigned("GUID")?0:-1))&&(r[s]=t(a.join("=")))}return r},setCookie:r,deleteCookie:function(e){r(e,"",-1)}}}(),n.cv=function(){var e="",t=0,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={maxCorrelationVectorLength:63,baseLength:16};i.validationPattern=new RegExp("^["+r+"]{"+i.baseLength.toString()+"}(.[0-9]+)+$");var o={maxCorrelationVectorLength:127,baseLength:22};o.validationPattern=new RegExp("^["+r+"]{"+o.baseLength.toString()+"}(.[0-9]+)+$");var a=o,s=2;function u(){return e.concat(".",t.toString())}function l(){var e=u();if(p(e))return e}function c(){var e=u();return!!p(e)&&h(e.length+2)}function d(){return!!p(u())&&h(e.length+1+(t+1+"").length)}function f(r){if(!p(r))return n.logger.logWarning("Cannot set invalid correlation vector value"),null;var i=r.lastIndexOf(".");return e=r.substr(0,i),t=parseInt(r.substr(i+1),10),u()}function p(e){if(e){var t=e.split(".")[0];if(t){if(16===t.length)return s=1,function(e){if(i.validationPattern.test(e)&&e.length<=i.maxCorrelationVectorLength)return!0}(e);if(22===t.length)return s=2,function(e){if(o.validationPattern.test(e)&&e.length<=o.maxCorrelationVectorLength)return!0}(e)}}}function h(e){return 1===s?e<=i.maxCorrelationVectorLength:e<=o.maxCorrelationVectorLength}return{header:"MS-CV",tag:"cV",isInit:function(){return p(u())},canExtend:c,canIncrement:d,getValue:l,setValue:f,init:function(n){return n?f(n):(e=function(){for(var e="",t=0;t<a.baseLength;t++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}(),t=0,l())},extend:function(){if(c())return e=e.concat(".",t.toString()),t=0,u()},increment:function(){if(d())return t+=1,u()},incrementExternal:function(e){if(p(e)){var t=e.split("."),n=t.length;t[n-1]=(parseInt(t[n-1],10)+1).toString();for(var r="",a=0;a<n;a++)r+=t[a],a<n-1&&(r+=".");var s=t[0].length===o.baseLength?o.maxCorrelationVectorLength:i.maxCorrelationVectorLength;if(r.length<=s)return r}},isValid:p,useCv1:function(){a=i},useCv2:function(){a=o}}}(),n.logger=function(){return{logError:function(e){n.consoleVerbosity>=n.verbosityLevels.ERROR&&console&&console.error&&console.error("JSLL: "+e)},logWarning:function(e){n.consoleVerbosity>=n.verbosityLevels.WARNING&&console&&console.warn&&console.warn("JSLL: "+e)},logInformation:function(e){n.consoleVerbosity>=n.verbosityLevels.INFORMATION&&console&&console.log&&console.log("JSLL: "+e)}}}(),n.capabilitiesCheck=function(){if(!JSON||!JSON.stringify)return n.logger.logError("Unable to write event: the global JSON.stringify method does not exist"),n.isAvailable=!1,!1},n.utils=function(){var e="",t="",n=window.performance?window.performance.timing:void 0,r="JS:",i="";function o(){return""===t&&(t=window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""),t}function a(e,t){var n=e.left,r=e.top,i=e.right,o=e.bottom,a=t.left,s=t.top,u=t.right,l=t.bottom;return Math.max(0,Math.min(i,u)-Math.max(n,a))*Math.max(0,Math.min(o,l)-Math.max(r,s))}function s(e){return"function"==typeof jQuery&&e instanceof jQuery?e[0]:e}function u(e){var t=String(e);return 1===t.length&&(t="0"+t),t}var l=function(){var e={},t=!1,n=0,r=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],n++);for(var i=function(n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t&&"[object Object]"===Object.prototype.toString.call(n[r])?e[r]=l(!0,e[r],n[r]):e[r]=n[r])};n<r;n++){i(arguments[n])}return e};function c(e,t){var n=e;if(n){for(n=s(n);!t(n);)if(!(n=s(n=n.parentNode))||!n.getAttribute)return null;return n}}function d(e){var t=e.getAttribute(i);return h(t)||""===t}function f(e){return"A"===e.nodeName}function p(e){for(var t in e)(!h(e[t])||"{}"===JSON.stringify(e[t])&&"callback"!==t)&&delete e[t]}function h(e){return!(null==e||""===e)}return{stringifyField:function(e,t){if(t)try{var r=JSON.stringify(t);return"{}"===r&&"timing"===e?function(){for(var e=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],t="{",r=0;r<e.length;r++){var i=n[e[r]];h(i)&&(t+='"'+e[r]+'":'+i,r<e.length-1&&(t+=","))}return t+="}"}():r}catch(n){var i="string"==typeof t?t:"";return'{"error": "ERROR: could not stringify {0} {1}"}'.replace("{0}",e).replace("{1}",i)}},getMuidHost:function(e){return{"microsoft.com":"c1.microsoft.com","xbox.com":"c.xbox.com","live.com":"c.live.com","microsoftstore.com":"c.microsoftstore.com","msn.com":"c.msn.com","windows.com":"c.windows.com"}[e]},isOfCorrectType:function(e,t){if("string"===e)return"string"==typeof t||t instanceof String||t instanceof Date;if("bool"===e)return"boolean"==typeof t||t instanceof Boolean;if(!("number"==typeof t||t instanceof Number))return!1;if("uint8"===e){if(t<0||t>255||t%1!=0)return!1}else if("uint16"===e){if(t<0||t>65535||t%1!=0)return!1}else if("uint32"===e){if(t<0||t>4294967295||t%1!=0)return!1}else if("uint64"===e){if(t<0||t>0x10000000000000000||t%1!=0)return!1}else if("int8"===e){if(t<-128||t>127||t%1!=0)return!1}else if("int16"===e){if(t<-32768||t>32767||t%1!=0)return!1}else if("int32"===e){if(t<-2147483648||t>2147483647||t%1!=0)return!1}else if("int64"===e){if(t<-0x8000000000000000||t>0x8000000000000000||t%1!=0)return!1}else if("float"===e){if(t<-3.402823e38||t>3.402823e38)return!1}else if("double"===e&&(t<-Number.MAX_VALUE||t>Number.MAX_VALUE))return!1;return!0},getOs:function(){if(""===e){var t=o().toLowerCase();e=-1!==t.indexOf("windows phone")?"WindowsPhone":-1!==t.indexOf("win")?"Windows":-1!==t.indexOf("mac")?"MacOS":-1!==t.indexOf("x11")?"Unix":-1!==t.indexOf("android")?"Android":-1!==t.indexOf("linux")?"Linux":-1!==t.indexOf("webos")?"webOS":-1!==t.indexOf("blackberry")?"BlackBerry":-1!==t.indexOf("ipod")||-1!==t.indexOf("ipad")||-1!==t.indexOf("iphone")?"iOS":-1!==t.indexOf("symbian")?"Symbian":-1!==t.indexOf("nokia")?"Nokia":"Unknown"}return e},getUserAgent:o,extractFieldFromObject:function(e,t){var n;return e&&e[t]&&(n=e[t],delete e[t]),n},isElementTrulyVisible:function(e,t){return a((e=s(e)).getBoundingClientRect(),t)>0},dateToISOString:function(e){return e.getUTCFullYear()+"-"+u(e.getUTCMonth()+1)+"-"+u(e.getUTCDate())+"T"+u(e.getUTCHours())+":"+u(e.getUTCMinutes())+":"+u(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},extend:l,returnDomObjectIfjQuery:s,findClosestByAttribute:function(e,t){return i=t,c(e,d)},findClosestAnchor:function(e){return c(e,f)},getPerformanceData:function(){var e;try{e=window.performance.getEntries().filter(function(e){return"script"===e.initiatorType||"link"===e.initiatorType})}catch(e){}return e},getPageLoadTime:function(){var e=void 0;return n.loadEventStart&&n.navigationStart&&n.loadEventStart>0&&(e=n.loadEventStart-n.navigationStart),e},removeInvalidElements:p,removeNonObjectsAndInvalidElements:function(e,t){for(var n in p(e),t){var r=t[n];"object"==typeof e[r]?p(e[r]):delete e[r]}},bracketIt:function(e){return"["+e+"]"},getAppIdWithPrefix:function(e){var t;if(e){var n=e.split(":");t=n.length>1&&"js"===n[0].toLowerCase()?e:r+e}return t},isValueAssigned:h,testHook:{getIntersectionArea:a}}}(),n.ids=function(){var e,t=c(),r=n.cookie,i=null,o=null,a=!1,s="Treatments",u=["c:","i:","w:"],l=["AX","EX","SF","CS","CF","CT","CU","DC","DF","H5","HL","WS","WP"];function c(){return"xxxxxxxx-xxxx-4xxx-Rxxx-xxxxxxxxxxxx".replace(/x/g,function(){return Math.floor(16*Math.random()).toString(16)}).replace("R",(8|Math.floor(3*Math.random())).toString(16))}function d(e){return e?e[s]:r.getCookie(s)}function f(e){if(!e||e.length<4)return!1;for(var t=!1,n=e.substring(0,3).toString().toUpperCase(),r=0;r<l.length;r++)if(l[r]+":"===n&&e.length<=256){t=!0;break}return t}function p(e){if(e){if(e!==o){o=null;for(var t=e.split(","),r=0;r<t.length;r++)f(t[r])?o?o+=","+t[r]:o=t[r]:n.logger.logWarning("Unsupported flight id format for this app expId: "+t[r])}}else o=null}function h(){return o}return{getVisitorId:function(e){return e?e.MUID:r.getCookie("MUID")},getMuidUserId:function(e){var t="";return(t=e?e.MUID:r.getCookie("MUID"))&&t.length?"t:"+t:t},setAppUserId:function(e){if(i=null,e){for(var t=0;t<u.length;t++)if(u[t]===e.substring(0,2)){i=e;break}i||n.logger.logWarning("Unsupported app user id: "+e+". Supported app user ids are: c:, i:, and w:")}},getAppUserId:function(){return i},readExpIdFromCookie:function(e){return p(e?e[s]:d()),h()},readExpIdFromCoreData:function(e){return p(e),h()},getImpressionGuid:function(){return t},getPageViewImpressionGuid:function(){return a?t=c():a=!0,t},getGroups:d,setDeviceClass:function(t){t&&(e=t)},getDeviceClass:function(){return e},setExpIdCookieName:function(e){s=e},getExpIdCookieName:function(){return s}}}(),n.vortexEvents=function(){var e=n.ids,t=[],r="notInit",i=0;function o(){t.length>0&&(n.writeEvent(t),t=[])}return{sendError:function(e,t){n.ct.captureClientError({errorInfo:e,displayedToUser:t})},sendApiComplete:function(t){var r={name:"Ms.Webi.OutgoingRequest",cV:t.cV,data:{baseData:{operationName:t.currentOperationName,targetUri:t.requestUri,latencyMs:t.latencyMs,serviceErrorCode:t.serviceErrorCode||-1,succeeded:t.isSuccess,requestMethod:t.httpMethod,responseContentType:t.contentType,protocolStatusCode:t.httpStatusCode,dependencyOperationName:t.operationName,dependencyOperationVersion:t.operationVersion,dependencyName:t.serviceName,dependencyType:t.serviceType||"WebService",responseSizeBytes:t.responseSize},baseType:"Ms.Qos.OutgoingServiceRequest",impressionGuid:e.getImpressionGuid(),message:t.errorMessage,retryCount:t.retryCount,customData:t.customData}};n.ct.captureQos(r)},sendJsllEvent:function(e){"CorsDisallowed"===e.type?n.ct.captureCorsDisallowed(e):"EventTooLong"===e.type&&n.ct.captureEventTooLong(e)},SendOrScheduleEvent:function(e,a){!0!==a&&"complete"!==r?(t.push(e),i>1&&t.length>=i&&o()):n.writeEvent(e)},batchQueuedEvents:o,drainQueuedEvents:function(){if("complete"===document.readyState)for(;t.length>0;)n.writeEvent(t.pop());else n.ct.onDomReadyDo(n.firstEventDoneTasks)},batchEventsByNumber:function(e){i=e},addEventToQueue:function(e){t.push(e)},overrideQueueBehavior:function(e){e&&e.domReadyState&&(r=e.domReadyState)}}}(),n.errorHandler=function(){var e=n.vortexEvents;function t(){if(arguments){var t="";if(arguments[1]){var r=document.createElement("a");r.href=arguments[1],t=n.ct.getUri(r)}var i={Page:n.ct.getUri(document.location),Script:t,Message:arguments[0]||"",LineNumber:arguments[2]||0,StackTrace:arguments[4]?(o=arguments[4],o.stack?o.stack.substring(0,1e3):""):"",UserAgent:n.utils.getUserAgent()||"",Platform:window.navigator.platform||""};e.sendError(i,!1)}var o}return{init:function(){var e,n;e=t,n=window.onerror,window.onerror=function(){n&&n.apply(this,arguments),e.apply(this,arguments)}}}}(),n.timespanHandler=function(){var e={};return{recordTimeSpan:function(t,n){var r=(new Date).getTime();if(n)return r-e[t];e[t]=r}}}(),function(){n._schemas=n._schemas||[];var e=n.utils,t=e.isValueAssigned,r={endpoint:"https://web.vortex.data.microsoft.com/collect/v1",sendMode:1,batchSize:10,authMethod:0,validateEvents:!0,sendEvents:!0,logLevel:n.verbosityLevels.NONE,syncMuid:!1,provisionMsfpc:!0,useDefaultContentName:!0,useShortNameForContentBlob:!1,debounceMs:{scroll:600,resize:3e3},muidDomain:"microsoft.com",biBlobAttributeTag:"data-m",isLoggedIn:!1,shareAuthStatus:!1,cookiesToCollect:["Bounced"],mscomCookies:!1,userConsentCookieName:"MSCC",userConsented:void 0,useBeacon:!0,urlCollectHash:!1,urlCollectQuery:!0,initCv:!1,enabledFeatures:!0,ix:{a:!1,g:!1},autoCapture:{pageView:!0,onLoad:!0,onUnload:!0,click:!0,scroll:!1,resize:!1,jsError:!0,addin:!0,perf:!0,assets:!1,lineage:!1,invalidEvents:!1,msTags:!0,awaTags:!0,eventTooLong:!0,corsDisallowed:!0},callback:{pageName:null,pageActionPageTags:null,pageViewPageTags:null,contentUpdatePageTags:null,pageActionContentTags:null,signedinStatus:null,jsllEventCallback:null,pageUnloadTimings:null},coreData:{referrerUri:document.referrer||void 0,requestUri:"",appId:window.location.hostname,pageName:"",title:"",pageType:"",env:"",product:"",market:"",serverImpressionGuid:"",expId:"",pageTags:{}}};n.getConfig=function(){return r};var i=[];for(var o in r)"object"==typeof r[o]&&i.push(o);var a=["ver","name","time","flags","os","appId","cV","deviceClass"],s=a.length,u=function(){var t=e.getUserAgent(),n=t.indexOf("MSIE ");if(n>0)return parseInt(t.substring(n+5,t.indexOf(".",n)),10)<9;return!1}()?2083:15e3,l="",c=!1,d=t(navigator)&&t(navigator.sendBeacon);n.experimentIdTag="expId",n.isAvailable=!0,n.requestBody="",n.getQueryStringParameters=function(){return l},Object.freeze&&Object.freeze(n.verbosityLevels),n.capabilitiesCheck();var f=window.XDomainRequest?"XDomainRequest":"xhr",p=function(){c=!0,1==r.sendMode&&(n.vortexEvents.overrideQueueBehavior({domReadyState:"complete"}),n.vortexEvents.drainQueuedEvents())};n.firstEventDone=p,n.firstEventDoneTasks=function(){n.vortexEvents.drainQueuedEvents()};var h=function(e,t){n.logger.logError("Failure sending data to vortex: "+e+"Error: "+t.toString())},g=function(e,t,i){n.OnSuccessfulVortexRequest&&n.OnSuccessfulVortexRequest(e),t&&"function"==typeof r.callback.jsllEventCallback&&r.callback.jsllEventCallback(t),!1===c&&(c=!0,1!==r.sendMode||i||p()),n.logger.logInformation("Success sending data to vortex")},y=function(e){n.logger.logError("Failure sending data to vortex using XDomainRequest.  Status code:"+e.status)},m="'",v='"',b="-",_="*";function S(n,r,i){if(t(i)){var o="";return n.length>0&&(o+="&"),e.isOfCorrectType("number",i)||e.isOfCorrectType("bool",i)?o+=r+"="+i:o+="object"==typeof i?r+"="+JSON.stringify(i):r+"="+m+encodeURIComponent(i)+m,o}return""}function w(n,r,i){if(t(i)){var o="";return n.length>1&&(o+=","),e.isOfCorrectType("number",i)||e.isOfCorrectType("bool",i)?o+=v+r+v+":"+i:o+="object"==typeof i?v+r+v+":"+JSON.stringify(i):v+r+v+":"+v+i+v,o}return""}function E(e,n){for(var i="",o=0;o<s;o++)i+=S(i,a[o],e[a[o]]);var u=e.data;for(var l in u)if("baseData"==l){var c=u[l];for(var d in c)i+=S(i,b+d,c[d])}else i+=S(i,_+l,u[l]);var f=e.ext;for(var p in f){var h=f[p];for(var g in h)i+=S(i,"ext"+b+p+b+g,h[g])}return i+="&"+I(),!0===r.shareAuthStatus&&2==r.authMethod&&!0===R()&&(i+="&"+function(e){return"$nr="+t(e.Bounced)}(n)),x(i),i}function T(e){for(var t="{",r=0;r<s;r++)t+=w(t,a[r],e[a[r]]);var i=e.data;i&&(t+=w(t,"data",i));var o=e.ext;return o&&(t+=w(t,"ext",o)),t+="}",n.requestBody=t,t}function x(e){l=e}n.init=function(t){if(!n.isInitialized){n.isInitialized=!0,t&&(e.removeNonObjectsAndInvalidElements(t,i),r=e.extend(!0,r,t));var o=r.sendMode;0==o&&(c=!0,n.vortexEvents.overrideQueueBehavior({domReadyState:"complete"})),o>=1&&n.vortexEvents.overrideQueueBehavior({domReadyState:"notComplete"}),2===o&&n.vortexEvents.batchEventsByNumber(r.batchSize),n.consoleVerbosity=r.logLevel,n.ct.initialize(r),n.ix.init(r),r.initCv&&n.cv.init()}};var k=function(i,o){n.translateEventFromIntermediateStructure&&(i=n.translateEventFromIntermediateStructure(i));var a=i.cV,s=i.appId;i.ver="2.1",i.cV=t(a)?a:n.cv.getValue(),i.time=t(i.time)?i.time:e.dateToISOString(new Date),i.os=e.getOs(),i.deviceClass=n.ids.getDeviceClass()||void 0,i.appId=e.getAppIdWithPrefix(s||r.coreData.appId);var u=window.location.hostname;t(u)||(u="file:"==window.location.protocol?"local":u);var l={ver:"1.1",libVer:"4.2.9",domain:u,msfpc:o.MSFPC,userConsent:t(r.userConsented)?r.userConsented:!!t(o[r.userConsentCookieName]),anid:o.ANON?o.ANON.slice(0,34):void 0},c=i.serviceName?i.serviceName:r.coreData.serviceName;c&&(l.serviceName=c),i.ext?i.ext.javascript=l:i.ext={javascript:l};var d=n.ids.getMuidUserId(o);d&&(i.ext.user={localId:d});var f=r.coreData.env,p=i.ext.app?i.ext.app.env:void 0,h=t(p)?p:f,g=r.coreData.expId?n.ids.readExpIdFromCoreData(r.coreData.expId):n.ids.readExpIdFromCookie(o),y=n.ids.getAppUserId();return(t(h)||t(g)||t(y))&&(i.ext.app||(i.ext.app={}),h&&(i.ext.app.env=h),g&&(i.ext.app.expId=g),y&&(i.ext.app.userId=y)),r.validateEvents&&n.isEventValid&&!n.isEventValid(i)?void 0:(n._validateAndTranslateEvent(i),i)};function C(e,t){var r=new Image;r.onload=function(){1===r.width&&g(e,t)},r.onerror=function(){n.logger.logWarning("Telemetry image beacon not sent properly. Sending through POST."),O(t)},r.src=e}function A(e){var n="",i="",o="";if(e.length){o=e[0].ext.javascript.msfpc;for(var a=0;a<e.length;a++)a>0&&(n+="\n"),n+=T(e[a])}else o=e.ext.javascript.msfpc,n=T(e);var s=r.endpoint+"/t.req?"+n;i="?"+I();return{qp:i+=t(o)?"&ext-javascript-msfpc="+encodeURIComponent(m+o+m):"",requestBody:n,requestSrc:s}}function I(){return"$mscomCookies="+r.mscomCookies}function O(e){var t=A(e);if("xhr"===f){var i=new XMLHttpRequest;i.open("POST",r.endpoint+t.qp,!0),i.withCredentials=!0,i.onload=function(){200===i.status?g(t.requestSrc,e):h(i.statusText,i.status)},i.onerror=function(){h(i.statusText,i.status)},i.send(t.requestBody)}else if("XDomainRequest"===f){var o=new window.XDomainRequest;o.onload=function(){g(t.requestSrc,e)},o.onerror=function(){y(o)},o.open("POST",r.endpoint),o.send(t.requestBody)}else n.logger.logError("No event is sent.")}function L(e){var t=A(e);navigator.sendBeacon(r.endpoint+t.qp,t.requestBody)?g(t.requestSrc,e):O(e)}function R(){return r.callback&&"function"==typeof r.callback.signedinStatus?r.callback.signedinStatus():r.isLoggedIn}n.writeEvent=function(e,i){if(n.isInitialized){var o=!0,a=n.cookie.getAllCookies(),s=t(a.MSFPC);if("[object Array]"===Object.prototype.toString.call(e)){for(var l=[],h=0;h<e.length;h++){var y=k(e[h],a);y&&l.push(y)}if(0==l.length)return;e=l,o=!1}else if(!(e=k(e,a)))return;if(r.sendEvents){var m=JSON.stringify(e).length+r.endpoint.length;if(o&&m+7>u){if(n.logger.logWarning("event is too large to send using get -- using post instead"),r.autoCapture.eventTooLong)(v={}).eventName=e.name,v.payloadLength=m,n.ct.captureEventTooLong(v);o=!1}if(!o&&"XDomainRequest"===f&&r.endpoint&&0!==r.endpoint.indexOf(window.location.protocol)&&(n.logger.logError("Unable to write event: CORS requests are not supported cross-protocol in this browser"),1)){var v;if(r.autoCapture.corsDisallowed)(v={}).eventName=e.name,v.type="CorsDisallowed",n.ct.captureCorsDisallowed(v);return}if(n.testHook&&1==n.testHook.testUsePost&&(o=!1),o)if(!1===c||r.provisionMsfpc&&!s||!0===r.shareAuthStatus){s=!0;var b="/t.js";if(!0===r.shareAuthStatus&&!0===R())if(1===r.authMethod){if(t(a.Bounced))return void C(r.endpoint+"/asm.gif?"+E(e,a),e);b="/asm.js"}else 2===r.authMethod&&(b="/asa.js");!function(e,t,r){var i=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=document.createElement("script");o.onload=function(){g(e,t,!0)},o.onerror=function(){r?n.logger.logError("No event is sent."):(p(),n.writeEvent(t,!0))},o.async=!0,o.src=e,i.appendChild(o)}(r.endpoint+b+"?"+E(e,a),e,i)}else d&&!0===r.useBeacon?L(e):C(r.endpoint+"/t.gif?"+E(e,a),e);else d&&!0===r.useBeacon&&!1===r.shareAuthStatus?L(e):O(e)}else g(E(e,a),e)}else n.vortexEvents.addEventToQueue(e)},n.sendEventThroughIframe=function(t){var i=document.createElement("iframe");i.id="telframe",i.style.display="none",1==r.authMethod&&(i.addEventListener?i.addEventListener("load",p):i.attachEvent("onload",p)),i.src=t,n.cookie.setCookie("Bounced",e.dateToISOString(new Date),.5/24),document.body.appendChild(i)},n._registerSchemas=function(e){for(var t=0;t<e.length;t++)n._schemas[e[t].name]=e[t]},n.console=window.console||{},n.console.fallback=n.console.log||function(){};for(var P=["log","info","warn","error","trace"],D=0;D<P.length;D++){var M=P[D];n.console[M]||(n.console[M]=n.console.fallback)}n.extendCoreData=function(t){e.removeInvalidElements(t),r.coreData=e.extend(!0,r.coreData,t)},n._validateAndTranslateEvent=function(e){return{event:e}},n.testHook={JSLL_VERSION:"4.2.9",defaultConfig:function(){return r},setAllowedGetLength:function(e){u=e},testUsePost:!1,getAllowedGetLength:function(){return u},getQueryFromJSON:E}}(),n._registerSchemas([{name:"Ms.Cll.Javascript.CorsDisallowed","Ms.Cll.Javascript.CorsDisallowed":{part:"C",def:{fields:[{req:!0,name:"eventName",type:"string"},{name:"pageName",type:"string"},{name:"market",type:"string"},{name:"uri",type:"string"},{name:"impressionGuid",type:"string"},{name:"serverImpressionGuid",type:"string"}]}}},{name:"Ms.Cll.Javascript.EventTooLong","Ms.Cll.Javascript.EventTooLong":{part:"C",def:{fields:[{req:!0,name:"eventName",type:"string"},{req:!0,name:"payloadLength",type:"int32"},{name:"pageName",type:"string"},{name:"market",type:"string"},{name:"uri",type:"string"},{name:"impressionGuid",type:"string"},{name:"serverImpressionGuid",type:"string"}]}}},{name:"Ms.Cll.Javascript.Error","Ms.Telemetry.Error":{part:"B",def:{fields:[{name:"errorName",type:"string"},{name:"errorMessage",type:"string"},{name:"severity",type:"int32"},{name:"errorType",type:"string"},{name:"errorCode",type:"int32"},{name:"lineNumber",type:"uint32"},{name:"isDisplayed",type:"bool"},{name:"errorLocation",type:"string"},{name:"errorMethod",type:"string"}]}},"Ms.Cll.Javascript.Error":{part:"C",def:{fields:[{req:!0,name:"code",type:"int32"},{req:!0,name:"message",type:"string"},{name:"pageName",type:"string"},{name:"market",type:"string"},{name:"uri",type:"string"},{name:"impressionGuid",type:"string"},{name:"serverImpressionGuid",type:"string"}]}}},{name:"Ms.Cll.Javascript.EventDropped","Ms.Cll.Javascript.EventDropped":{part:"C",def:{fields:[{req:!0,name:"eventName",type:"string"},{name:"pageName",type:"string"},{name:"market",type:"string"},{name:"uri",type:"string"},{name:"impressionGuid",type:"string"},{name:"serverImpressionGuid",type:"string"},{name:"droppedInfo",type:"string"}]}}},{name:"Ms.Webi.ClientError","Ms.Webi.ClientError":{part:"B",def:{fields:[{req:!0,name:"errorInfo",type:"string"},{name:"wasDisplayed",type:"bool"},{name:"impressionGuid",type:"string"},{name:"serverImpressionGuid",type:"string"},{name:"pageName",type:"string"},{name:"market",type:"string"},{name:"uri",type:"string"},{name:"errorName",type:"string"},{name:"errorMessage",type:"string"},{name:"severity",type:"int32"},{name:"errorType",type:"string"},{name:"errorCode",type:"int32"},{name:"lineNumber",type:"uint32"},{name:"isDisplayed",type:"bool"},{name:"errorLocation",type:"string"},{name:"errorMethod",type:"string"}]}}},{name:"Ms.Webi.OutgoingRequest","Ms.Qos.OutgoingServiceRequest":{part:"B",def:{fields:[{req:!0,name:"operationName",type:"string"},{name:"targetUri",type:"string"},{req:!0,name:"latencyMs",type:"int32"},{name:"serviceErrorCode",type:"int32"},{req:!0,name:"succeeded",type:"bool"},{name:"requestMethod",type:"string"},{name:"responseContentType",type:"string"},{name:"protocol",type:"string"},{name:"protocolStatusCode",type:"string"},{req:!0,name:"dependencyOperationName",type:"string"},{name:"dependencyOperationVersion",type:"string"},{req:!0,name:"dependencyName",type:"string"},{name:"dependencyType",type:"string"},{name:"responseSizeBytes",type:"int32"},{name:"requestStatus",type:"int32"}]}},"Ms.Webi.OutgoingRequest":{part:"C",def:{fields:[{name:"impressionGuid",type:"string"},{name:"message",type:"string"},{name:"retryCount",type:"int32"},{name:"customData",type:"string"},{name:"serverImpressionGuid",type:"string"},{name:"pageName",type:"string"},{name:"market",type:"string"},{name:"uri",type:"string"}]}}},{name:"Ms.Webi.PageView","Ms.Content.PageView":{part:"B",def:{fields:[{name:"ver",type:"string"},{req:!0,name:"impressionGuid",type:"string"},{req:!0,name:"pageName",type:"string"},{name:"uri",type:"string"},{name:"referrerUri",type:"string"},{name:"pageType",type:"string"},{name:"pageTags",type:"string"},{name:"product",type:"string"},{name:"screenState",type:"int32"},{name:"actionType",type:"string"},{name:"behavior",type:"int32"},{name:"resHeight",type:"int32"},{name:"resWidth",type:"int32"},{name:"vpHeight",type:"int32"},{name:"vpWidth",type:"int32"},{name:"market",type:"string"}]}},"Ms.Webi.PageView":{part:"C",def:{fields:[{name:"cookieEnabled",type:"bool"},{name:"flashInstalled",type:"bool"},{name:"flashVersion",type:"string"},{name:"cookies",type:"string"},{name:"isJs",type:"bool"},{name:"title",type:"string"},{name:"isLoggedIn",type:"bool"},{name:"isManual",type:"bool"},{name:"serverImpressionGuid",type:"string"}]}}},{name:"Ms.Webi.ContentUpdate","Ms.Content.ContentUpdate":{part:"B",def:{fields:[{name:"ver",type:"string"},{req:!0,name:"impressionGuid",type:"string"},{req:!0,name:"pageName",type:"string"},{name:"uri",type:"string"},{name:"pageTags",type:"string"},{name:"pageHeight",type:"int32"},{name:"vpHeight",type:"int32"},{name:"vpWidth",type:"int32"},{name:"market",type:"string"},{name:"actionType",type:"string"},{name:"behavior",type:"int32"},{name:"vScrollOffset",type:"int32"},{name:"hScrollOffset",type:"int32"},{name:"contentVer",type:"string"},{req:!0,name:"content",type:"string"}]}},"Ms.Webi.ContentUpdate":{part:"C",def:{fields:[{name:"pageLoadTime",type:"int32"},{name:"title",type:"string"},{name:"isJs",type:"bool"},{name:"cookieEnabled",type:"bool"},{name:"isLoggedIn",type:"bool"},{name:"isManual",type:"bool"},{name:"isDomComplete",type:"bool"},{name:"serverImpressionGuid",type:"string"},{name:"timings",type:"string"}]}}},{name:"Ms.Webi.PageAction","Ms.Content.PageAction":{part:"B",def:{fields:[{name:"ver",type:"string"},{req:!0,name:"impressionGuid",type:"string"},{req:!0,name:"pageName",type:"string"},{name:"uri",type:"string"},{name:"destUri",type:"string"},{name:"market",type:"string"},{name:"pageType",type:"string"},{name:"pageTags",type:"string"},{name:"product",type:"string"},{name:"screenState",type:"int32"},{name:"actionType",type:"string"},{name:"behavior",type:"int32"},{name:"contentVer",type:"string"},{name:"content",type:"string"}]}},"Ms.Webi.PageAction":{part:"C",def:{fields:[{name:"timeToAction",type:"int32"},{name:"cookieEnabled",type:"bool"},{name:"cookies",type:"string"},{name:"isJs",type:"bool"},{name:"title",type:"string"},{name:"referrerUri",type:"string"},{name:"isLoggedIn",type:"bool"},{name:"isManual",type:"bool"},{name:"serverImpressionGuid",type:"string"}]}}},{name:"Ms.Webi.PageUnload","Ms.Content.PageUnload":{part:"B",def:{fields:[{name:"ver",type:"string"},{req:!0,name:"impressionGuid",type:"string"},{req:!0,name:"pageName",type:"string"},{name:"uri",type:"string"}]}},"Ms.Webi.PageUnload":{part:"C",def:{fields:[{name:"dwellTime",type:"int32"},{name:"scrollDepth",type:"string"},{name:"serverImpressionGuid",type:"string"},{name:"timings",type:"string"},{name:"vScrollOffset",type:"int32"},{name:"pageHeight",type:"int32"},{name:"vpHeight",type:"int32"},{name:"pageLoadTime",type:"int32"}]}}}]),n.isEventValid=function(e){var t=n.logger.logWarning;function r(e,r){var i=e.eventName+" - "+e.droppedInfo;r?(t("Dropped event "+i),n.ct.captureEventDrop(e)):t("Dropped field from "+i)}function i(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}function o(e,t){for(var o=[],s=t.length,u=0;u<s;u++){var l=t[u],c=l.name;o.push(c);var d=l.type,f=e[c],p=l.req;if(n.utils.isValueAssigned(f)){if(!n.utils.isOfCorrectType(d,f)){if(r({eventName:a,droppedInfo:"Incorrect type: "+c},p),!0===p)return!1;delete e[c]}}else if(!0===p)return r({eventName:a,droppedInfo:"Missing field: "+c},!0),!1}for(var h in e)"baseData"!=h&&"baseType"!=h&&(i(o,h)||(r({eventName:a,droppedInfo:"Unexpected field "+h},!1),delete e[h]));return!0}if(e){var a=e.name,s=n._schemas,u=e.data.baseType,l=a,c=s[a];if(!c)return r({eventName:a,droppedInfo:"Not registered in JSLL"},!0),!1;if(u){var d=e.data.baseData,f=c[u]?c[u].def.fields:void 0;if(d&&f&&!o(d,f))return!1}if(l){var p=e.data,h=c[l]?c[l].def.fields:void 0;if(p&&h&&!o(p,h))return!1}return!0}return!1},n.translateEventFromIntermediateStructure=function(e){var t=e.name,r=e.data,i=n.utils;if(i.isValueAssigned(r[t])){var o=i.extend(!0,r[t]);delete r[t];var a=[];for(var s in r)a.push(s);var u=i.extend(!0,r[a[0]]);delete r[a[0]],delete e.content;var l=i.extend(!0,"{}"!==JSON.stringify(u)?{baseData:u}:{},o,{baseType:a[0]});return i.extend(!0,e,{data:l})}return e},n.ix=function(){var e={},t="",r="",i=n.utils.isValueAssigned;function o(){return i(t)||i(r)?"https://dpm.demdex.net/id?d_orgid=A5FF776A5245AF830A490D44@AdobeOrg&d_cid="+(i(t)?"88170%01"+t+"%010":"")+(i(r)?(i(t)?"%01":"")+"88169%01"+r+"%010":"")+"&d_ver=2":void 0}function a(){if(i(t))return"https://ad.doubleclick.net/ddm/activity/src=6952136;type=store0;cat=jsll;u58="+t+";dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=1?"}return{init:function(t){e=t.ix},set:function(s){if(s&&(t=s.mc1,r=s.anid,i(t)||i(r))){if(e.a){var u=new XMLHttpRequest;u.onreadystatechange=function(){4==u.readyState&&200==u.status&&n.ct.captureSwap(JSON.parse(u.responseText))};var l=o();i(l)&&(u.open("GET",l,!0),u.setRequestHeader("Accept","application/json; charset=utf-8"),u.send())}e.g&&(l=a(),i(l)&&((new Image).src=l))}},testHook:{getAdobeUrl:o,getGoogleUrl:a,setMc1:function(e){t=e},setAnid:function(e){r=e}}}}(),n.ct=function(){var e="1.0",t="2.0",r=200,i=524288,o={},a={},s=n.cookie,u=n.errorHandler,l=n.ids,c=n.vortexEvents,d=n.utils,f=n.actionType,p={h:0,v:0},h="data-bi-dnt",g="data-bi-mto",y=!1,m={longNames:{isShortNames:!1,id:"data-bi-id",areaName:"data-bi-area",slotNumber:"data-bi-slot",contentName:"data-bi-name",contentSource:"data-bi-source",templateName:"data-bi-view",productId:"data-bi-product",contentType:"data-bi-type"},shortNames:{isShortNames:!0,id:"data-bi-id",areaName:"data-bi-an",slotNumber:"data-bi-sn",contentName:"data-bi-cn",contentSource:"data-bi-cs",templateName:"data-bi-tn",productId:"data-bi-pid",contentType:"data-bi-ct"}},v=m.longNames,b={BUTTON:!0,CHECKBOX:!0,RADIO:!0,RESET:!0,SUBMIT:!0};function _(e){if(("https://web.vortex.data.microsoft.com"==e.origin||"https://login.microsoftonline.com"==e.origin)&&e.data)try{var t=JSON.parse(e.data);if(t&&"firstEventDone"==t.Action&&n.firstEventDone(),t&&t.BouncedCookieExpires){var r="Bounced="+d.dateToISOString(new Date)+"; expires="+new Date(t.BouncedCookieExpires).toUTCString()+"; path=/;";window.document.cookie=r}}catch(e){}}function S(e){/in/.test(document.readyState)?setTimeout(function(){n.ct.onDomReadyDo(e)},100):e.call()}function w(){if(o.callback&&"function"==typeof o.callback.pageName)return o.callback.pageName();if(o.coreData.pageName)return o.coreData.pageName;var e=window.location.pathname,t=e.split("/");return e=t.length>2&&""!==t[2]?t[2]:"Home"}function E(){return o.coreData.title?o.coreData.title:document.title.substring(0,150)}function T(e){var t={A:!0,BUTTON:!0,AREA:!0,INPUT:!0},r=e||window.event,i=r.srcElement||r.target,o={isAuto:!0};if(function(e){return e.which?3===e.which:e.button?2===e.button:void 0}(r)){o.actionType=f.CLICKRIGHT;var a=d.findClosestByAttribute(i,"data-bi-bhvr");d.isValueAssigned(a)||(o.behavior=n.behavior.CONTEXTMENU)}else if(function(e){return e.which?1===e.which:e.button?1===e.button:void 0}(r))o.actionType=f.CLICKLEFT;else if(function(e){if(e.keyCode)return 13===e.keyCode}(r))o.actionType=f.KEYBOARDENTER;else if(function(e){if(e.keyCode)return 32===e.keyCode}(r))o.actionType=f.KEYBOARDSPACE;else{if(!function(e){return e.which?2===e.which:e.button?4===e.button:void 0}(r))return;o.actionType=f.CLICKMIDDLE}for(;i&&i.tagName;){if(t[i.tagName.toUpperCase()]){("INPUT"!==i.tagName.toUpperCase()||b[i.type.toUpperCase()])&&(x(i,g)||O(i,o));break}i=i.parentElement||i.parentNode}}function x(e,t){var n=d.findClosestByAttribute(e,t);return!!d.isValueAssigned(n)}function k(e,t,n){var r;return function(){var i=this,o=arguments,a=!r;clearTimeout(r),r=setTimeout(function(){r=null,t&&t.apply(i,o)},n),a&&e&&e.apply(i,o)}}function C(t){n.timespanHandler.recordTimeSpan("dwellTime",!1),p.v=0,y=!1,t=t||{};var r=s.getAllCookies(),a={},u=n.utils.extend(!0,o.coreData.pageTags);u.metaTags=B(a,!0),U(u,r),"function"==typeof o.callback.pageViewPageTags&&(u=d.extend(!0,u,o.callback.pageViewPageTags()));var c=q(),f={name:"Ms.Webi.PageView",data:{baseData:{ver:e,impressionGuid:l.getPageViewImpressionGuid(),pageName:t.pageName||w(),uri:t.uri||X(),referrerUri:t.referrerUri||o.coreData.referrerUri,market:a.market,pageType:a.pageType,product:a.product,resHeight:c.h,resWidth:c.w,pageTags:JSON.stringify(d.extend(!0,u,t.pageTags)),actionType:t.actionType||a.actionType,behavior:Y(t.behavior)||(a.behavior?a.behavior:n.behavior.UNDEFINED)},baseType:"Ms.Content.PageView",cookieEnabled:z(),cookies:j(r),isJs:!0,title:t.title||E(),isLoggedIn:o.isLoggedIn,serverImpressionGuid:a.serverImpressionGuid,isManual:!0},flags:a.isSensitive?i:void 0};if(o.autoCapture.addin){var h=function(){var e={};if(navigator.plugins["Shockwave Flash"]){e.installed=!0;var t=navigator.plugins["Shockwave Flash"];e.version=t.description.split(" ")[2]}else if(-1!==navigator.userAgent.indexOf("MSIE"))for(var n=(new Date).getFullYear()-1992,r=n;r>0;r--)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+r);e.installed=!0,e.version=r+".0";break}catch(e){}return e}();f.data.flashInstalled=h.installed||!1,f.data.flashVersion=h.version||""}P(f,t,a.env,!0)}function A(){I({isAuto:!0,isDomComplete:!0})}function I(r){r=r||{};var u={},c=n.utils.extend(!0,o.coreData.pageTags);if(c.metaTags=B(u),U(c,s.getAllCookies()),r&&r.isDomComplete&&!0===a.perf&&window.performance&&(window.performance.timing&&(c.timing=d.stringifyField("timing",window.performance.timing)),!0===a.assets)){var f=d.getPerformanceData();f&&(c.AssetPerformance=d.stringifyField("AssetPerformance",f))}"function"==typeof o.callback.contentUpdatePageTags&&(c=d.extend(!0,c,o.callback.contentUpdatePageTags()));var p,h,g=H(),y={};d.isValueAssigned(r.vScrollOffset)&&d.isValueAssigned(r.hScrollOffset)||(y=K()),P({name:"Ms.Webi.ContentUpdate",data:{baseData:{ver:e,impressionGuid:l.getImpressionGuid(),pageName:r.pageName||w(),uri:r.uri||X(),market:u.market,pageTags:JSON.stringify(d.extend(!0,c,r.pageTags)),pageHeight:r.pageHeight||document.body.scrollHeight,vpHeight:g.h,vpWidth:g.w,actionType:r.actionType||u.actionType,behavior:Y(r.behavior)||(u.behavior?u.behavior:n.behavior.UNDEFINED),vScrollOffset:r.vScrollOffset||y.v,hScrollOffset:r.hScrollOffset||y.h,contentVer:t,content:R(r.content)||M((p=g,h={top:0,bottom:p.h,left:0,right:p.w},h))},baseType:"Ms.Content.ContentUpdate",timings:JSON.stringify(r.timings),title:r.title||E(),cookieEnabled:z(),isJs:!0,isManual:!0,isDomComplete:!1,isLoggedIn:o.isLoggedIn,serverImpressionGuid:u.serverImpressionGuid},flags:u.isSensitive?i:void 0},r,u.env,!1)}function O(r,u){var c=!(u=u||{}).isAuto&&x(r,g);if(r&&x(r,h)&&!c)n.logger.logWarning("The element has do-not-track attribute set.  PageAction will not be sent.");else{var f=s.getAllCookies(),p={},y=n.utils.extend(!0,o.coreData.pageTags),m={};(r=d.returnDomObjectIfjQuery(r))&&(p.targetUri=function(e){var t="";switch(e.tagName){case"A":case"AREA":t=e.href||"";break;case"IMG":t=function(e){var t=e;if(t){var n=d.findClosestAnchor(t);if(n&&1===n.length){if(n[0].href)return n[0].href;if(n[0].src)return n[0].src}}return""}(e);break;case"INPUT":var n=e.type;window.event;n&&b[n.toUpperCase()]&&(t=e.form&&e.form.action||window.location.pathname)}return t}(r),m=N(r,!0),a.msTags&&(m=d.extend(m,function(e){var t={};for(;e;)if(!Q(e)){for(var n in e.attributes)if(n&&e.attributes[n]){var r=e.attributes[n].name;r&&0===r.toLowerCase().indexOf("ms.")&&(t[r]=e.attributes[n].value)}e=e.parentElement||e.parentNode}return t}(r))),m.bhvr&&(p.behavior=Y(d.extractFieldFromObject(m,"bhvr")))),y.metaTags=B(p),U(y,f),"function"==typeof o.callback.pageActionPageTags&&(y=d.extend(!0,y,o.callback.pageActionPageTags(r)));var v=o.callback.pageActionContentTags;P({name:"Ms.Webi.PageAction",data:{baseData:{ver:e,impressionGuid:l.getImpressionGuid(),pageName:u.pageName||w(),uri:u.uri||X(),pageTags:d.stringifyField("pageTags",d.extend(!0,y,u.pageTags)),contentVer:t,market:p.market,destUri:u.targetUri||p.targetUri,pageType:p.pageType,product:p.product,actionType:u.actionType||p.actionType,behavior:Y(u.behavior)||(p.behavior?p.behavior:n.behavior.UNDEFINED),content:R(u.content)||d.bracketIt(JSON.stringify(d.extend(m,"function"==typeof v?v(r):{},u&&u.contentTags?u.contentTags:{})))},baseType:"Ms.Content.PageAction",timeToAction:D(),cookieEnabled:z(),cookies:j(f),isJs:!0,title:u.title||E(),isLoggedIn:o.isLoggedIn,isManual:!0,referrerUri:u.referrerUri||o.coreData.referrerUri,serverImpressionGuid:p.serverImpressionGuid},flags:p.isSensitive?i:void 0},u,p.env,!0)}}function L(t){if(!y){y=!0,(t=t||{}).isDomComplete=!0;var r={};B(r);var a=o.callback.pageUnloadTimings,s=document.body.scrollHeight;P({name:"Ms.Webi.PageUnload",data:{baseData:{ver:e,impressionGuid:l.getImpressionGuid(),pageName:t.pageName||w()},baseType:"Ms.Content.PageUnload",dwellTime:n.timespanHandler.recordTimeSpan("dwellTime",!0),scrollDepth:t.scrollDepth||p.v.toString()+"/"+s.toString(),vScrollOffset:t.vScrollOffset||p.v,pageHeight:t.pageHeight||s,vpHeight:H().h,serverImpressionGuid:r.serverImpressionGuid,timings:a?a():void 0},flags:r.isSensitive?i:void 0},t,r.env,!0)}}function R(e){if(d.isValueAssigned(e))return"[object Array]"===Object.prototype.toString.call(e)?JSON.stringify(e):d.bracketIt(JSON.stringify(e))}function P(e,t,n,r){e.time=d.dateToISOString(new Date);var i=e.data;t&&function(e,t,n){n.appId&&(e.appId=n.appId),n.serviceName&&(e.serviceName=n.serviceName),!0!==n.isAuto?t.isManual=!0:t.isManual=void 0,n.isDomComplete&&(t.isDomComplete=n.isDomComplete,t.pageLoadTime=n.pageLoadTime||d.getPageLoadTime())}(e,i,t),n&&(e.ext={app:{env:n}}),c.SendOrScheduleEvent(e,r)}function D(){if(window.performance&&window.performance.timing){var e=window.performance.timing.navigationStart;if(0!==e)return(new Date).getTime()-e}return-1}function M(e){var t=[];return function(e,t,n){if(e)for(var r=0;r<e.length;r++){var i=e[r];if(!x(i,h)&&d.isElementTrulyVisible(i,n)){var o=N(i,!1);o&&t.push(o)}}}(document.querySelectorAll(d.bracketIt(v.areaName)+","+d.bracketIt(v.slotNumber)+","+d.bracketIt(o.biBlobAttributeTag)),t,e),JSON.stringify(t)}function N(e,t){if(!e)return"";var r,i={},a=n.utils.findClosestByAttribute(e,o.biBlobAttributeTag);if(a&&(r=a.getAttribute(o.biBlobAttributeTag)),r)i=JSON.parse(r);else{var s=d.findClosestByAttribute(e,d.bracketIt(v.id));s=d.returnDomObjectIfjQuery(e);var u=d.findClosestByAttribute(e,v.areaName),l=n.utils.extend({},function(e){if(e=d.returnDomObjectIfjQuery(e))return{areaName:e.getAttribute(v.areaName),templateName:e.getAttribute(v.templateName),contentSource:e.getAttribute(v.contentSource),product:e.getAttribute(v.productId),type:e.getAttribute(v.contentType)}}(u));(i={id:s.getAttribute(v.id)||e.id||"",aN:l.areaName,sN:s.getAttribute(v.slotNumber),cN:s.getAttribute(v.contentName)||F(e)||s.getAttribute("alt")||"",cS:s.getAttribute(v.contentSource)||l.contentSource,tN:l.templateName,pid:s.getAttribute(v.productId),cT:s.getAttribute(v.contentType)||l.type}).id&&i.aN&&i.sN&&i.cN||n.logger.logWarning("Invalid content blob.  Missing required attributes (id, aN/area, sN/slot), cN/contentName.  Content information will still be collected!"),v.isShortNames||(i={contentId:i.id,areaName:i.aN,slotNumber:i.sN,contentName:i.cN,contentSource:i.cS,templateName:i.tN,productId:i.pid,contentType:i.cT});for(var c,f=0;f<s.attributes.length;f++){if((c=s.attributes[f]).name!==v.id&&c.name!==v.areaName&&c.name!==v.slotNumber&&c.name!==v.contentName&&c.name!==v.contentSource&&c.name!==v.templateName&&c.name!==v.productId&&c.name!==v.contentType&&-1!==c.name.indexOf("data-bi-"))i[c.name.replace("data-bi-","")]=c.value}}return n.utils.removeInvalidElements(i),o.autoCapture.lineage&&t&&(i=n.utils.extend(i,function(e){for(var t,n,r=[],i=[],a=o.biBlobAttributeTag,s=void 0;e&&e.getAttribute;){var u=e.getAttribute(a)||e[a],l=e.getAttribute("data-module-id")||e["data-module-id"];if(u){var c=JSON.parse(u);c&&(t=c.cN||c.cT,n=c.id||void 0,(t||n)&&(r.push(t),l&&(s=t),i.push(n)))}else t=e.getAttribute(v.contentName)||e.getAttribute(v.contentType),n=e.getAttribute(v.id)||void 0,(t||n)&&(r.push(t),l&&(s=t),i.push(n));e=e.parentElement}return{lineage:r.join(">"),lineageById:i.join(">"),containerName:s}}(e))),i}function F(e){if(!1===o.useDefaultContentName||Q(e)||!e.tagName)return"";var t;switch(e.tagName){case"A":t=document.all?e.innerText||e.innerHTML:e.text||e.innerHTML;case"IMG":case"AREA":t=e.alt;default:t=e.value||e.name||e.alt||e.innerText||e.id}return t.substring(0,r)}function j(e){var t,n,r="",i={},a=[],s=o.cookiesToCollect;if(!1===o.shareAuthStatus)a=s;else for(var u=0;u<s.length;u++)"ANON"!==s[u]&&a.push(s[u]);try{try{window.varCustomerCookies&&window.varCustomerCookies.length>0&&(a=a.concat(window.varCustomerCookies))}catch(e){}for(t in a)a.hasOwnProperty(t)&&(i.hasOwnProperty(a[t])||(i[a[t]]="",(n=e[a[t]])&&""!==n&&(r+=a[t]+"="+n+";")))}catch(e){}return r}function U(e,t){if(o.enabledFeatures){if(e.enabledFeatures)return;var n=t.Features;n&&(e.enabledFeatures=n)}}function B(e,t){var n={},r={};return o.autoCapture.awaTags&&(n=G("awa-",!0)),e.env=V(n,o.coreData,"env"),e.pageType=V(n,o.coreData,"pageType"),e.product=V(n,o.coreData,"product"),e.market=V(n,o.coreData,"market"),e.serverImpressionGuid=V(n,o.coreData,"serverImpressionGuid"),e.isSensitive=V(n,o.coreData,"isSensitive"),!e.behavior&&t&&(e.behavior=Y(V(n,o.coreData,"behavior"))),o.autoCapture.msTags&&(r=G("ms.",!1),n=d.extend(!0,n,r)),n}function V(e,t,n){return t[n]?t[n]:d.extractFieldFromObject(e,n)}function G(e,t){var n,r={};n=document.querySelectorAll("meta");for(var i=0;i<n.length;i++){var o=n[i];if(o.name)if(0===o.name.toLowerCase().indexOf(e))r[t?o.name.replace(e,""):o.name]=o.content}return r}function q(){var e={h:0,w:0};return window.screen&&(e.h=screen.height,e.w=screen.width),e}function H(){var e={h:0,w:0};return window.screen&&(e.h=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,e.w=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth),e}function K(){return{h:parseInt(document.body.scrollLeft||document.documentElement.scrollLeft||window.pageXOffset||0,10),v:parseInt(document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0,10)}}function z(){return navigator.cookieEnabled}function Q(e){if(!e||!e.attributes)return!1;try{var t=e.getAttribute("data-dc");return!!d.isValueAssigned(t)&&"pii"===t.toLowerCase()}catch(e){return!1}}function W(e){for(var t=0;t<n.behaviorKeys.length;t++)if(n.behavior[n.behaviorKeys[t]]===e)return!0;return n.logger.logWarning("Unsupported behavior: "+e+"."),!1}function Y(e){if(d.isValueAssigned(e)){var t=Number(e);if(d.isOfCorrectType("uint16",t)){if(W(t))return t}else if(d.isOfCorrectType("string",e)){var r=n.behavior[e.toUpperCase()];if(d.isOfCorrectType("uint16",r))return r}}}function X(){return J(window.location)}function J(e){if(""===o.coreData.requestUri&&e){var t=e.protocol+"//"+e.hostname+(d.isValueAssigned(e.port)?":"+e.port:"")+e.pathname;if(o.urlCollectHash&&(t+=e.hash),o.urlCollectQuery){var n=e.search;if(!n){var r=window.location.hash,i=r.indexOf("?");-1!=i&&(n=r.slice(i))}t+=n}return t}return o.coreData.requestUri}return{initialize:function(e){if(n.isAvailable){if(a=(o=e).autoCapture,v=!0===o.useShortNameForContentBlob?m.shortNames:m.longNames,a.pageView&&C({isAuto:!0}),a.click)if(window.addEventListener){var t=-1!==navigator.appVersion.indexOf("MSIE")?"click":"mousedown";window.addEventListener(t,T,!1),window.addEventListener("keyup",T,!1)}else document.attachEvent&&(document.attachEvent("onclick",T),document.attachEvent("keyup",T));if(a.jsError&&u.init(),a.scroll){var r=k(null,function(){I({isAuto:!0,actionType:n.actionType.SCROLL})},o.debounceMs.scroll);window.addEventListener?window.addEventListener("scroll",r):window.attachEvent&&window.attachEvent("onscroll",r)}if(a.resize){var i=k(function(){I({isAuto:!0,actionType:n.actionType.RESIZE})},null,o.debounceMs.resize);window.addEventListener?window.addEventListener("resize",i):window.attachEvent&&window.attachEvent("onresize",i)}if(a.onUnload||o.manualPageUnload){var s=function(){var e=K();p.v=p.v>e.v?p.v:e.v};window.addEventListener?window.addEventListener("scroll",s):window.attachEvent&&window.attachEvent("onscroll",s)}if(a.onUnload&&(window.addEventListener?(window.addEventListener("beforeunload",L),window.addEventListener("unload",L)):window.attachEvent&&(window.attachEvent("onbeforeunload",L),window.attachEvent("onunload",L))),2==o.sendMode){var l=n.vortexEvents.batchQueuedEvents;window.addEventListener?(window.addEventListener("beforeunload",l),window.addEventListener("unload",l)):window.attachEvent&&(window.attachEvent("onbeforeunload",l),window.attachEvent("onunload",l))}2==o.authMethod&&1==o.shareAuthStatus&&1==o.isLoggedIn&&(window.addEventListener?window.addEventListener("message",_):window.attachEvent&&window.attachEvent("onmessage",_)),(o.syncMuid||o.autoCapture.onLoad)&&S(n.ct.domReadyTasksWrapper)}},capturePageView:C,captureContentUpdate:I,capturePageAction:function(e,t){O(e,t)},captureContentPageAction:function(e){O(null,e)},capturePageUnload:L,captureCorsDisallowed:function(e){if(e){var t={};B(t),P({name:"Ms.Cll.Javascript.CorsDisallowed",data:{eventName:e.eventName,pageName:w(),uri:e.uri||X(),market:t.market,impressionGuid:l.getImpressionGuid(),serverImpressionGuid:t.serverImpressionGuid},flags:t.isSensitive?i:void 0},e,t.env,!1)}},captureEventTooLong:function(e){if(e){var t={};B(t),P({name:"Ms.Cll.Javascript.EventTooLong",data:{eventName:e.eventName,payloadLength:e.payloadLength,pageName:e.pageName||w(),uri:e.uri||X(),market:t.market,impressionGuid:l.getImpressionGuid(),serverImpressionGuid:t.serverImpressionGuid},flags:t.isSensitive?i:void 0},e,t.env,!1)}},captureClientError:function(e){if(e){var t={};B(t),P({name:"Ms.Webi.ClientError",data:{errorInfo:JSON.stringify(e.errorInfo),wasDisplayed:e.displayedToUser||!1,impressionGuid:l.getImpressionGuid(),pageName:e.pageName||w(),uri:e.uri||X(),market:t.market,serverImpressionGuid:t.serverImpressionGuid},flags:t.isSensitive?i:void 0},e,t.env,!1)}},captureEventDrop:function(e){if(e&&a.invalidEvents){var t={};B(t),P({name:"Ms.Cll.Javascript.EventDropped",data:{eventName:e.eventName,droppedInfo:e.droppedInfo,pageName:e.pageName||w(),uri:e.uri||X(),market:t.market,impressionGuid:l.getImpressionGuid(),serverImpressionGuid:t.serverImpressionGuid},flags:t.isSensitive?i:void 0},e,t.env,!1)}},captureQos:function(e){var t={};B(t);var n=e.data;n.serverImpressionGuid=t.serverImpressionGuid,n.market=t.market,n.pageName=w(),n.uri=X(),P(e,void 0,t.env,!1)},captureSwap:function(e){},domReadyTasksWrapper:function(){n.ct.domReadyTasks()},onDomReadyDo:S,domReadyTasks:function(){o.syncMuid&&function(){var e=d.getMuidHost(o.muidDomain||"microsoft.com");if(e){var t=(window.location.protocol||"http:")+"//"+e+"/c.gif?DI=4050&did=1&t=",r=document.createElement("IMG");r.style.display="none",r.src=t,r.hidden="",r["aria-hidden"]="true",r.role="presentation"}else n.logger.logWarning("Unable to get a muid host for the configured muidDomain '"+o.muidDomain+"'.  Unable to sync muid")}(),a.onLoad&&("complete"===document.readyState?A():window.addEventListener?window.addEventListener("load",A):window.attachEvent&&window.attachEvent("onload",A))},getTimeToClick:D,getPageContent:M,getUri:J,testHook:{isBehaviorValid:W,getValidBehavior:Y,collectMetaTagsAndSetEventProperty:B,getElementContent:N,getPageContent:M,debounce:k,getScreenResolution:q,getViewportDimensions:H}}}(),n.service=function(){var e=n.timespanHandler,t=!0,r=!1,i=null,o=function(o){if("function"==typeof jQuery){t&&($.support.cors=!0);var a,s=o.additionalHeaders||{},u=o.body,l=u?JSON.stringify(u):o.data||void 0,c=o.maxRetry||0,d=0,f=$.noop,p=o.operationName||o.url,h=o.errorFormatter||function(e){return e},g=n.ids,y={url:o.url,type:o.method,data:l,crossDomain:!0,headers:{},success:o.success,timeout:o.timeout,error:o.error,jsonp:o.jsonp,jsonpCallback:o.jsonpCallback,cache:o.cache,beforeSend:function(e){if(f(e),o.contractVersion&&e.setRequestHeader("MS-Contract-Version",o.contractVersion),(!n.utils.isValueAssigned(o.addCvToRequestHeader)&&r||o.addCvToRequestHeader)&&n.cv.isValid(a)&&e.setRequestHeader("MS-CV",a),s)for(var t in s)e.setRequestHeader(t,s[t])}};o.dataType&&(y.dataType=o.dataType),o.noCacheBusting||(y.cache=!1),o.contentType&&(y.contentType=o.contentType),o.accept&&(y.headers.Accept=o.accept),o.accepts&&(y.accepts=o.accepts),o.async&&(y.async=o.async),o.xhrFields&&(y.xhrFields=o.xhrFields),o.complete&&(y.complete=o.complete),o.contents&&(y.contents=o.contents),o.context&&(y.context=o.context),o.dataFilter&&(y.dataFilter=o.dataFilter),o.global&&(y.global=o.global),o.ifModified&&(y.ifModified=o.ifModified),o.isLocal&&(y.isLocal=o.isLocal),o.mimeType&&(y.mimeType=o.mimeType),o.password&&(y.password=o.password),n.utils.isValueAssigned(o.processData)&&(y.processData=o.processData),o.scriptCharset&&(y.scriptCharset=o.scriptCharset),o.statusCode&&(y.statusCode=o.statusCode),o.traditional&&(y.traditional=o.traditional),o.type&&(y.type=o.type),o.username&&(y.username=o.username),o.xhr&&(y.xhr=o.xhr),a=n.cv.isValid(o.cV)?o.cV:n.cv.increment();var m=function(e,t,r){var s=e.getResponseHeader("Content-Length"),u={name:"Ms.Webi.OutgoingRequest",cV:a,data:{baseData:{operationName:o.currentOperationName||n.ct.getUri(document.location),targetUri:i?i(y.url):y.url,latencyMs:r,serviceErrorCode:!t&&e.responseJSON&&e.responseJSON.code&&!isNaN(e.responseJSON.code)?e.responseJSON.code:-1,succeeded:t,requestMethod:y.type,responseContentType:y.dataType,protocolStatusCode:e.status.toString(),dependencyOperationName:p,dependencyOperationVersion:o.version&&o.version.toString(),dependencyName:o.serviceName,dependencyType:"WebService",responseSizeBytes:s&&parseInt(s,10)},baseType:"Ms.Qos.OutgoingServiceRequest",impressionGuid:g.getImpressionGuid(),message:t?void 0:n.utils.stringifyField("errorMessage",e.errorThrown),retryCount:d,customData:o.customDataCallBack&&"function"==typeof o.customDataCallBack?JSON.stringify(o.customDataCallBack(e)):void 0}};o.QosCallback&&"function"==typeof o.QosCallback&&o.QosCallback(e,u),n.ct.captureQos(u)},v=function(){var t=p+"_Retry_"+d;return e.recordTimeSpan(t),$.ajax(y).then(function(n,r,i){var o=e.recordTimeSpan(t,!0);return m(i,!0,o),i},function(r,i){var s=e.recordTimeSpan(t,!0);m(r,!1,s);var u=$.Deferred();return c>d&&(0===r.status||r.status>=500&&r.status<600)?(d++,a=n.cv.isValid(o.cV)?n.cv.incrementExternal(a):n.cv.increment(),setTimeout(function(){v().done(u.resolve).fail(u.reject)},50)):u.reject(r,i),u.promise()})};return v().then(function(e,t,n){return n},function(e){return h(e,o)})}n.logger.logError("jQuery is not defined, cannot use service module")};return{post:function(e){return o(n.utils.extend({},e,{method:"POST"}))},get:function(e){return o(n.utils.extend({maxRetry:1},e,{method:"GET"}))},put:function(e){return o(n.utils.extend({},e,{method:"PUT"}))},del:function(e){return o(n.utils.extend({},e,{method:"DELETE"}))},patch:function(e){return o(n.utils.extend({},e,{method:"PATCH"}))},doNotChangeSupportCors:function(){t=!1},alwaysAddCvToRequestHeader:function(){r=!0},setTargetUriOverride:function(e){"function"==typeof e?i=e:"string"==typeof e&&(i=function(){return e})}}}()},function(e,t,n){var r,i,o=n(38),a=n(39),s=0,u=0;e.exports=function(e,t,n){var l=t&&n||0,c=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var p=o();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:u+1,y=h-s+(g-u)/1e4;if(y<0&&void 0===e.clockseq&&(f=f+1&16383),(y<0||h>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,u=g,i=f;var m=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;c[l++]=m>>>24&255,c[l++]=m>>>16&255,c[l++]=m>>>8&255,c[l++]=255&m;var v=h/4294967296*1e4&268435455;c[l++]=v>>>8&255,c[l++]=255&v,c[l++]=v>>>24&15|16,c[l++]=v>>>16&255,c[l++]=f>>>8|128,c[l++]=255&f;for(var b=0;b<6;++b)c[l+b]=d[b];return t||a(c)}},function(e,t,n){var r=n(38),i=n(39);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(91)),o=f(n(92)),a=f(n(93)),s=f(n(94)),u=f(n(95)),l=f(n(96)),c=f(n(97)),d=f(n(98));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return r(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=i.defaults(t,this.options||{},{order:["querystring","cookie","localStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(o.default),this.addDetector(a.default),this.addDetector(s.default),this.addDetector(u.default),this.addDetector(l.default),this.addDetector(c.default),this.addDetector(d.default)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var n=[];e.forEach(function(e){if(t.detectors[e]){var r=t.detectors[e].lookup(t.options);r&&"string"==typeof r&&(r=[r]),r&&(n=n.concat(r))}});var r=void 0;if(n.forEach(function(e){if(!r){var n=t.services.languageUtils.formatLanguageCode(e);t.services.languageUtils.isWhitelisted(n)&&(r=n)}}),!r){var i=this.i18nOptions.fallbackLng;"string"==typeof i&&(i=[i]),i||(i=[]),r="[object Array]"===Object.prototype.toString.apply(i)?i[0]:i[0]||i.default&&i.default[0]}return r}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)}))}}]),e}();p.type="languageDetector",t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=function(e){return i.call(o.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},t.extend=function(e){return i.call(o.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e};var r=[],i=r.forEach,o=r.slice},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){var i=void 0;if(n){var o=new Date;o.setTime(o.getTime()+60*n*1e3),i="; expires="+o.toGMTString()}else i="";r=r?"domain="+r+";":"",document.cookie=e+"="+t+i+";"+r+"path=/"},i=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null};t.default={name:"cookie",lookup:function(e){var t=void 0;if(e.lookupCookie&&"undefined"!=typeof document){var n=i(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&r(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"querystring",lookup:function(e){var t=void 0;if("undefined"!=typeof window)for(var n=window.location.search.substring(1).split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("=");if(i>0)n[r].substring(0,i)===e.lookupQuerystring&&(t=n[r].substring(i+1))}return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=void 0;try{r="undefined"!==window&&null!==window.localStorage;window.localStorage.setItem("i18next.translate.boo","foo"),window.localStorage.removeItem("i18next.translate.boo")}catch(e){r=!1}t.default={name:"localStorage",lookup:function(e){var t=void 0;if(e.lookupLocalStorage&&r){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&r&&window.localStorage.setItem(t.lookupLocalStorage,e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"htmlTag",lookup:function(e){var t=void 0,n=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"path",lookup:function(e){var t=void 0;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof n[e.lookupFromPathIndex])return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"subdomain",lookup:function(e){var t=void 0;if("undefined"!=typeof window){var n=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);n instanceof Array&&(t="number"==typeof e.lookupFromSubdomainIndex?n[e.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n[0].replace("http://","").replace("https://","").replace(".",""))}return t}}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var r=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,i=n(102),o=Object.create?Object.create(null):{};function a(e,t,n,r,i){var o=t.indexOf("<",r),a=t.slice(r,-1===o?void 0:o);/^\s*$/.test(a)&&(a=" "),(!i&&o>-1&&n+e.length>=0||" "!==a)&&e.push({type:"text",content:a})}e.exports=function(e,t){t||(t={}),t.components||(t.components=o);var n,s=[],u=-1,l=[],c={},d=!1;return e.replace(r,function(r,o){if(d){if(r!=="</"+n.name+">")return;d=!1}var f,p="/"!==r.charAt(1),h=0===r.indexOf("\x3c!--"),g=o+r.length,y=e.charAt(g);p&&!h&&(u++,"tag"===(n=i(r)).type&&t.components[n.name]&&(n.type="component",d=!0),n.voidElement||d||!y||"<"===y||a(n.children,e,u,g,t.ignoreWhitespace),c[n.tagName]=n,0===u&&s.push(n),(f=l[u-1])&&f.children.push(n),l[u]=n),(h||!p||n.voidElement)&&(h||u--,!d&&"<"!==y&&y&&a(f=-1===u?s:l[u].children,e,u,g,t.ignoreWhitespace))}),!s.length&&e.length&&a(s,e,0,0,t.ignoreWhitespace),s}},function(e,t,n){var r=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,i=n(103);e.exports=function(e){var t,n=0,o=!0,a={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return e.replace(r,function(r){if("="===r)return o=!0,void n++;o?0===n?((i[r]||"/"===e.charAt(e.length-2))&&(a.voidElement=!0),a.name=r):(a.attrs[t]=r.replace(/^['"]|['"]$/g,""),t=void 0):(t&&(a.attrs[t]=t),t=r),n++,o=!1}),a}},function(e,t){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},function(e,t){function n(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(n,"")+"</"+t.name+">"}}e.exports=function(e){return e.reduce(function(e,t){return e+n("",t)},"")}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){"use strict";var r=n(109);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116;function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case d:case f:case a:case u:case s:case h:return e;default:switch(e=e&&e.$$typeof){case c:case p:case l:return e;default:return t}}case y:case g:case o:return t}}}function v(e){return m(e)===f}t.typeOf=m,t.AsyncMode=d,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=l,t.Element=i,t.ForwardRef=p,t.Fragment=a,t.Lazy=y,t.Memo=g,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=h,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===f||e===u||e===s||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===p)},t.isAsyncMode=function(e){return v(e)||m(e)===d},t.isConcurrentMode=v,t.isContextConsumer=function(e){return m(e)===c},t.isContextProvider=function(e){return m(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return m(e)===p},t.isFragment=function(e){return m(e)===a},t.isLazy=function(e){return m(e)===y},t.isMemo=function(e){return m(e)===g},t.isPortal=function(e){return m(e)===o},t.isProfiler=function(e){return m(e)===u},t.isStrictMode=function(e){return m(e)===s},t.isSuspense=function(e){return m(e)===h}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player._2kcMYF2VsgcXjibyZbqr3X{color:#fff;position:relative;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;width:100%;overflow:hidden;font-size:1em;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.spectre-player._2kcMYF2VsgcXjibyZbqr3X:fullscreen{width:100%}.spectre-player._2kcMYF2VsgcXjibyZbqr3X:-webkit-full-screen{width:100%}.spectre-player._2kcMYF2VsgcXjibyZbqr3X:-moz-full-screen{width:100%}.spectre-player._2kcMYF2VsgcXjibyZbqr3X:-ms-fullscreen{width:100%}.spectre-player .YC8umoqJ5rBISu9gQMwLl{background-color:#212121;width:100%}.spectre-player ._3o9wZIQMTafrNJGAlpwEPm{background-color:#212121}.spectre-player ._3o9wZIQMTafrNJGAlpwEPm ._3fspTnlrmM7PgCrUkngpzj{color:#fff;font-size:1em;margin-top:-1em;position:absolute;text-align:center;top:50%;width:100%}",""]),t.locals={container:"_2kcMYF2VsgcXjibyZbqr3X",video:"YC8umoqJ5rBISu9gQMwLl","overlay-black-out":"_3o9wZIQMTafrNJGAlpwEPm",overlayBlackOut:"_3o9wZIQMTafrNJGAlpwEPm","audio-only-text":"_3fspTnlrmM7PgCrUkngpzj",audioOnlyText:"_3fspTnlrmM7PgCrUkngpzj"}},function(e,t,n){var r,i,o=n(43),a=n(44),s=0,u=0;e.exports=function(e,t,n){var l=t&&n||0,c=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var p=o();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:u+1,y=h-s+(g-u)/1e4;if(y<0&&void 0===e.clockseq&&(f=f+1&16383),(y<0||h>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,u=g,i=f;var m=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;c[l++]=m>>>24&255,c[l++]=m>>>16&255,c[l++]=m>>>8&255,c[l++]=255&m;var v=h/4294967296*1e4&268435455;c[l++]=v>>>8&255,c[l++]=255&v,c[l++]=v>>>24&15|16,c[l++]=v>>>16&255,c[l++]=f>>>8|128,c[l++]=255&f;for(var b=0;b<6;++b)c[l+b]=d[b];return t||a(c)}},function(e,t,n){var r=n(43),i=n(44);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player .-NMLe_G_MRgnkYvaOIroh{height:100%;position:absolute;width:100%}.hidden .spectre-player .-NMLe_G_MRgnkYvaOIroh{cursor:none}.spectre-player .DL7S_k7PyG_iM7PeBBrK9,.spectre-player ._1_j885UBdf6n8grtSYQm4N{height:100%;left:0;position:absolute;top:0;pointer-events:none;width:100%}.spectre-player .DL7S_k7PyG_iM7PeBBrK9{z-index:5}",""]),t.locals={overlay:"-NMLe_G_MRgnkYvaOIroh",footer:"DL7S_k7PyG_iM7PeBBrK9",header:"_1_j885UBdf6n8grtSYQm4N"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player ._1ykIyPm7cWB2mAdLOQEK8w{-webkit-justify-content:flex-end;justify-content:flex-end;pointer-events:all}.spectre-player ._1ykIyPm7cWB2mAdLOQEK8w ._2NefudXj5Mddbi5UBr4_S-{display:none}",""]),t.locals={"video-settings":"_1ykIyPm7cWB2mAdLOQEK8w",videoSettings:"_1ykIyPm7cWB2mAdLOQEK8w",hide:"_2NefudXj5Mddbi5UBr4_S-"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player ._2w-0jycxJdDXnWVhBz-7-4{bottom:52px;display:-webkit-flex;display:flex;right:36px;max-height:calc(100% - 60px);max-width:calc(100% - 72px);min-width:266px;position:absolute}",""]),t.locals={"main-menu":"_2w-0jycxJdDXnWVhBz-7-4",mainMenu:"_2w-0jycxJdDXnWVhBz-7-4"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player ._3Fd7foOwTR0okj68RdHy_g{background-color:#000}.spectre-player ._3Fd7foOwTR0okj68RdHy_g,.spectre-player ._3Fd7foOwTR0okj68RdHy_g .xCvkrofwSvBLuw2bxi1tB{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.spectre-player ._3Fd7foOwTR0okj68RdHy_g .xCvkrofwSvBLuw2bxi1tB{overflow-y:auto}.spectre-player ._3Fd7foOwTR0okj68RdHy_g ._1kIlUXtgizhBW5Drjbvqmm{-webkit-align-items:center;align-items:center;display:-webkit-flex;display:flex;-webkit-flex-shrink:0;flex-shrink:0;-webkit-justify-content:space-between;justify-content:space-between;padding:8px 8px 8px 16px}.spectre-player ._3Fd7foOwTR0okj68RdHy_g ._1kIlUXtgizhBW5Drjbvqmm .material-icons{width:1em}",""]),t.locals={menu:"_3Fd7foOwTR0okj68RdHy_g",scroller:"xCvkrofwSvBLuw2bxi1tB","menu-item":"_1kIlUXtgizhBW5Drjbvqmm",menuItem:"_1kIlUXtgizhBW5Drjbvqmm"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player ._2YmB_I5OliPyB7_rs748W3{background:none;border:none;color:#fff;cursor:pointer;font-size:1em;margin:8px 4px;padding:0;text-align:center}.spectre-player ._2YmB_I5OliPyB7_rs748W3:disabled{background-color:hsla(0,0%,100%,.12);color:grey}.spectre-player ._2YmB_I5OliPyB7_rs748W3:focus,.spectre-player ._2YmB_I5OliPyB7_rs748W3:hover{background-color:hsla(0,0%,100%,.12)}.spectre-player ._2YmB_I5OliPyB7_rs748W3._38fcwDK0IoFAgrXbLOGwp1{height:36px;width:36px;padding:6px;border-radius:50%;-webkit-flex-direction:column;flex-direction:column;-webkit-justify-content:center;justify-content:center}.spectre-player ._2YmB_I5OliPyB7_rs748W3._38fcwDK0IoFAgrXbLOGwp1,.spectre-player ._2YmB_I5OliPyB7_rs748W3>*{-webkit-align-items:center;align-items:center;display:-webkit-flex;display:flex}",""]),t.locals={"control-button":"_2YmB_I5OliPyB7_rs748W3",controlButton:"_2YmB_I5OliPyB7_rs748W3","button-style-icon":"_38fcwDK0IoFAgrXbLOGwp1",buttonStyleIcon:"_38fcwDK0IoFAgrXbLOGwp1"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,'.spectre-player ._1fQ8OFNjeI20h3Qx3mAF3B{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;height:100%;-webkit-justify-content:center;justify-content:center;position:relative}.spectre-player ._1fQ8OFNjeI20h3Qx3mAF3B:focus-within .pSo_cnWdJ-xZvxzMmPULy.NdUSF9Lqg6rK8YSIsgGx-.ATDQrjuYdFL5jtW-p6jh4,.spectre-player ._1fQ8OFNjeI20h3Qx3mAF3B:hover .pSo_cnWdJ-xZvxzMmPULy.NdUSF9Lqg6rK8YSIsgGx-.ATDQrjuYdFL5jtW-p6jh4{-webkit-transform:translate(0);transform:translate(0);opacity:1}.spectre-player ._1fQ8OFNjeI20h3Qx3mAF3B:focus-within .pSo_cnWdJ-xZvxzMmPULy.NdUSF9Lqg6rK8YSIsgGx-.juQRHCidAm_LKmKelg0R9,.spectre-player ._1fQ8OFNjeI20h3Qx3mAF3B:hover .pSo_cnWdJ-xZvxzMmPULy.NdUSF9Lqg6rK8YSIsgGx-.juQRHCidAm_LKmKelg0R9{-webkit-transform:translate(-50%);transform:translate(-50%);opacity:1}.spectre-player ._1fQ8OFNjeI20h3Qx3mAF3B:focus-within .pSo_cnWdJ-xZvxzMmPULy.NdUSF9Lqg6rK8YSIsgGx-._3uQtudRDBJDzIu0h2uS8Nr,.spectre-player ._1fQ8OFNjeI20h3Qx3mAF3B:hover .pSo_cnWdJ-xZvxzMmPULy.NdUSF9Lqg6rK8YSIsgGx-._3uQtudRDBJDzIu0h2uS8Nr{-webkit-transform:translate(-100%);transform:translate(-100%);opacity:1}.spectre-player ._1fQ8OFNjeI20h3Qx3mAF3B:focus-within .pSo_cnWdJ-xZvxzMmPULy._2KxgOpGHzXllvC34bAxQXq,.spectre-player ._1fQ8OFNjeI20h3Qx3mAF3B:hover .pSo_cnWdJ-xZvxzMmPULy._2KxgOpGHzXllvC34bAxQXq{color:#fff}.spectre-player ._1fQ8OFNjeI20h3Qx3mAF3B:focus-within .pSo_cnWdJ-xZvxzMmPULy._8MP083yDVYGfGlBp_KOcd,.spectre-player ._1fQ8OFNjeI20h3Qx3mAF3B:hover .pSo_cnWdJ-xZvxzMmPULy._8MP083yDVYGfGlBp_KOcd{color:#fff}.spectre-player ._1fQ8OFNjeI20h3Qx3mAF3B:focus-within .pSo_cnWdJ-xZvxzMmPULy._34KZa5mYqo9_PlcasiGRHY,.spectre-player ._1fQ8OFNjeI20h3Qx3mAF3B:hover .pSo_cnWdJ-xZvxzMmPULy._34KZa5mYqo9_PlcasiGRHY{color:#fff}.spectre-player .pSo_cnWdJ-xZvxzMmPULy{-webkit-align-items:center;align-items:center;background-color:#2e354b;border-radius:4px;box-shadow:2px 2px 3px rgba(0,0,0,.2);display:-webkit-flex;display:flex;font-size:13px;min-height:26px;padding:0 10px;pointer-events:none;position:absolute;transition:all .15s cubic-bezier(.35,0,.25,1);white-space:nowrap;will-change:transform}.spectre-player .pSo_cnWdJ-xZvxzMmPULy.NdUSF9Lqg6rK8YSIsgGx-{top:auto;right:auto;bottom:calc(100% + 5px)}.spectre-player .pSo_cnWdJ-xZvxzMmPULy.NdUSF9Lqg6rK8YSIsgGx-.ATDQrjuYdFL5jtW-p6jh4{-webkit-transform:translateY(10%);transform:translateY(10%);opacity:0;left:4px}.spectre-player .pSo_cnWdJ-xZvxzMmPULy.NdUSF9Lqg6rK8YSIsgGx-.ATDQrjuYdFL5jtW-p6jh4:after{margin-left:-5px;left:10px;top:100%}.spectre-player .pSo_cnWdJ-xZvxzMmPULy.NdUSF9Lqg6rK8YSIsgGx-.juQRHCidAm_LKmKelg0R9{-webkit-transform:translate(-50%,10%);transform:translate(-50%,10%);opacity:0;left:50%}.spectre-player .pSo_cnWdJ-xZvxzMmPULy.NdUSF9Lqg6rK8YSIsgGx-.juQRHCidAm_LKmKelg0R9:after{margin-left:-5px;left:50%;top:100%}.spectre-player .pSo_cnWdJ-xZvxzMmPULy.NdUSF9Lqg6rK8YSIsgGx-._3uQtudRDBJDzIu0h2uS8Nr{-webkit-transform:translate(-100%,10%);transform:translate(-100%,10%);opacity:0;left:calc(100% - 4px)}.spectre-player .pSo_cnWdJ-xZvxzMmPULy.NdUSF9Lqg6rK8YSIsgGx-._3uQtudRDBJDzIu0h2uS8Nr:after{margin-left:-5px;left:calc(100% - 10px);top:100%}.spectre-player .pSo_cnWdJ-xZvxzMmPULy._2KxgOpGHzXllvC34bAxQXq,.spectre-player .pSo_cnWdJ-xZvxzMmPULy._34KZa5mYqo9_PlcasiGRHY,.spectre-player .pSo_cnWdJ-xZvxzMmPULy._8MP083yDVYGfGlBp_KOcd{color:#fff}.spectre-player .pSo_cnWdJ-xZvxzMmPULy:after{border:5px solid transparent;border-top-color:#2e354b;content:"";position:absolute}',""]),t.locals={"tool-tip-host":"_1fQ8OFNjeI20h3Qx3mAF3B",toolTipHost:"_1fQ8OFNjeI20h3Qx3mAF3B","tool-tip":"pSo_cnWdJ-xZvxzMmPULy",toolTip:"pSo_cnWdJ-xZvxzMmPULy",top:"NdUSF9Lqg6rK8YSIsgGx-",start:"ATDQrjuYdFL5jtW-p6jh4",middle:"juQRHCidAm_LKmKelg0R9",end:"_3uQtudRDBJDzIu0h2uS8Nr",bottom:"_2KxgOpGHzXllvC34bAxQXq",right:"_8MP083yDVYGfGlBp_KOcd",left:"_34KZa5mYqo9_PlcasiGRHY"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player ._16wCKVGqZho3zFGDpUw2w2{bottom:52px;display:-webkit-flex;display:flex;right:36px;max-height:calc(100% - 60px);max-width:calc(100% - 72px);min-width:266px;position:absolute;min-width:200px}.spectre-player ._16wCKVGqZho3zFGDpUw2w2 ._2t1kDwdrf8ODD8E5PBJacH{-webkit-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-justify-content:flex-end;justify-content:flex-end}.spectre-player ._16wCKVGqZho3zFGDpUw2w2 ._3YV5RFr9T2wlUrFYvJKbgB{border-bottom:1px solid grey}",""]),t.locals={"quality-menu":"_16wCKVGqZho3zFGDpUw2w2",qualityMenu:"_16wCKVGqZho3zFGDpUw2w2",item:"_2t1kDwdrf8ODD8E5PBJacH",header:"_3YV5RFr9T2wlUrFYvJKbgB"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player ._1ezJHbox-QpTHEKFKBohOR{bottom:52px;display:-webkit-flex;display:flex;right:36px;max-height:calc(100% - 60px);max-width:calc(100% - 72px);min-width:266px;position:absolute}.spectre-player ._1ezJHbox-QpTHEKFKBohOR ._1zwDmnmVWVYJgATHmAGyUQ{-webkit-flex-direction:row-reverse;flex-direction:row-reverse;-webkit-justify-content:flex-end;justify-content:flex-end}.spectre-player ._1ezJHbox-QpTHEKFKBohOR ._2EVRyv6eN--eVXaTiwlyqZ{border-bottom:1px solid grey}",""]),t.locals={"language-menu":"_1ezJHbox-QpTHEKFKBohOR",languageMenu:"_1ezJHbox-QpTHEKFKBohOR",item:"_1zwDmnmVWVYJgATHmAGyUQ",header:"_2EVRyv6eN--eVXaTiwlyqZ"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player ._39R-M-VoNuvnldw96ZnONA{bottom:52px;display:-webkit-flex;display:flex;right:36px;max-height:calc(100% - 60px);max-width:calc(100% - 72px);min-width:266px;position:absolute;background-color:rgba(0,0,0,.85);border:2px solid rgba(228,238,242,.12);-webkit-flex-direction:column;flex-direction:column;padding:10px 0 5px}.spectre-player ._39R-M-VoNuvnldw96ZnONA ._1xKucDNGZI3ohMgclM37OK{-webkit-align-items:center;align-items:center;border-bottom:1px solid #0075d5;display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:space-between;justify-content:space-between;margin-left:10px;margin-right:10px}.spectre-player ._39R-M-VoNuvnldw96ZnONA ._1xKucDNGZI3ohMgclM37OK button{height:15px;width:15px}.spectre-player ._39R-M-VoNuvnldw96ZnONA ._1xKucDNGZI3ohMgclM37OK h1{color:#0075d5;font-family:Industrywf,sans-serif;font-size:.8em}.spectre-player ._39R-M-VoNuvnldw96ZnONA ._1xKucDNGZI3ohMgclM37OK i{font-size:1em}.spectre-player ._39R-M-VoNuvnldw96ZnONA ._21FY4rtVWdUwslb-HssRM0{overflow-y:auto}",""]),t.locals={"video-stats-container":"_39R-M-VoNuvnldw96ZnONA",videoStatsContainer:"_39R-M-VoNuvnldw96ZnONA","video-stats-header":"_1xKucDNGZI3ohMgclM37OK",videoStatsHeader:"_1xKucDNGZI3ohMgclM37OK","video-stats-body":"_21FY4rtVWdUwslb-HssRM0",videoStatsBody:"_21FY4rtVWdUwslb-HssRM0"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player ._1RbQz1I7GsW6cZ6ULnjhgM{font-size:1em;padding-top:1em}.spectre-player ._1RbQz1I7GsW6cZ6ULnjhgM table{border-collapse:collapse;width:100%}.spectre-player ._1RbQz1I7GsW6cZ6ULnjhgM th{padding-left:10px;color:#9fa4ae;font-weight:400;text-align:left}.spectre-player ._1RbQz1I7GsW6cZ6ULnjhgM td{padding:5px 10px 5px 0;text-align:right}.spectre-player ._1RbQz1I7GsW6cZ6ULnjhgM tr{font-size:.9em;line-height:25px}.spectre-player ._1RbQz1I7GsW6cZ6ULnjhgM tr:nth-child(2n){background-color:hsla(0,0%,100%,.05)}",""]),t.locals={"video-stats-table":"_1RbQz1I7GsW6cZ6ULnjhgM",videoStatsTable:"_1RbQz1I7GsW6cZ6ULnjhgM"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player.hidden .E27Bl82JIeG6k7my3Q_6I{background:none}.spectre-player.hidden .E27Bl82JIeG6k7my3Q_6I ._3qleW5hIsvWlFHtQQ8qz4G,.spectre-player.hidden .E27Bl82JIeG6k7my3Q_6I .qNiN4czVzqvasYUFYu1hI{opacity:0;-webkit-transform:translateY(100%);transform:translateY(100%)}.spectre-player .E27Bl82JIeG6k7my3Q_6I{pointer-events:all;background:linear-gradient(transparent,#151515 67%,#151515);bottom:0;left:0;position:absolute;width:100%}.spectre-player .E27Bl82JIeG6k7my3Q_6I ._3qleW5hIsvWlFHtQQ8qz4G{opacity:1;transition:opacity 167ms ease-out,-webkit-transform 167ms ease-out;transition:opacity 167ms ease-out,transform 167ms ease-out;transition:opacity 167ms ease-out,transform 167ms ease-out,-webkit-transform 167ms ease-out}.spectre-player .E27Bl82JIeG6k7my3Q_6I ._3qleW5hIsvWlFHtQQ8qz4G ._3vP4MUUftWwGRqLLIciNSA{color:#fff;font-size:16px}@-webkit-keyframes _1ly_CaphaR3uwVHxiPPxER{0%{-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:scale(1.5);transform:scale(1.5)}}@keyframes _1ly_CaphaR3uwVHxiPPxER{0%{-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:scale(1.5);transform:scale(1.5)}}@-webkit-keyframes _1kDXg1R-IbUjTnL1EdqWDZ{0%{-webkit-transform:scale(1.5);transform:scale(1.5)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes _1kDXg1R-IbUjTnL1EdqWDZ{0%{-webkit-transform:scale(1.5);transform:scale(1.5)}to{-webkit-transform:scale(1);transform:scale(1)}}.spectre-player .E27Bl82JIeG6k7my3Q_6I ._2t3dBW6D2rEjH8WmzJD75q:hover{-webkit-animation:_1ly_CaphaR3uwVHxiPPxER 1s;animation:_1ly_CaphaR3uwVHxiPPxER 1s}.spectre-player .E27Bl82JIeG6k7my3Q_6I ._2t3dBW6D2rEjH8WmzJD75q:not(:hover){-webkit-animation:_1kDXg1R-IbUjTnL1EdqWDZ 1s;animation:_1kDXg1R-IbUjTnL1EdqWDZ 1s}.spectre-player .E27Bl82JIeG6k7my3Q_6I .qNiN4czVzqvasYUFYu1hI{margin:0 2px;opacity:1;transition:opacity 167ms ease-out,-webkit-transform 167ms ease-out;transition:opacity 167ms ease-out,transform 167ms ease-out;transition:opacity 167ms ease-out,transform 167ms ease-out,-webkit-transform 167ms ease-out;width:calc(100% - 4px)}.spectre-player .E27Bl82JIeG6k7my3Q_6I ._1LcYy3HQj6SyRJjZtGFUw1{max-width:128px}.spectre-player .E27Bl82JIeG6k7my3Q_6I ._10K2H7DzyLgPbVHlFiybq6{color:#fafafa}.spectre-player .E27Bl82JIeG6k7my3Q_6I ._2tK5ernCOkBptDbeYepg_a{font-size:.6em}.spectre-player .E27Bl82JIeG6k7my3Q_6I .RxpQB3EuWJeDE1bUexYOm{border-bottom:.1em solid #0074dc}.spectre-player .E27Bl82JIeG6k7my3Q_6I ._2JEXTVxjVCSCe9xkCDdzQ1,.spectre-player .E27Bl82JIeG6k7my3Q_6I ._AX7qIyizrhsI5ZnOmBTE,.spectre-player .E27Bl82JIeG6k7my3Q_6I ._3B1aUMNek9PTpF_ulpcji0{text-transform:uppercase}.spectre-player .E27Bl82JIeG6k7my3Q_6I .p5S14CFnftdiZMwybHztm,.spectre-player .E27Bl82JIeG6k7my3Q_6I ._2JEXTVxjVCSCe9xkCDdzQ1,.spectre-player .E27Bl82JIeG6k7my3Q_6I ._AX7qIyizrhsI5ZnOmBTE{font-size:small}.spectre-player .E27Bl82JIeG6k7my3Q_6I ._3Gse0OkoYuW8JfmXkS1dXR,.spectre-player .E27Bl82JIeG6k7my3Q_6I ._AX7qIyizrhsI5ZnOmBTE{margin-left:2px}@media (max-width:768px){.spectre-player .E27Bl82JIeG6k7my3Q_6I ._25VwrBTpjP6FGNdxJZaZZX{display:none}}",""]),t.locals={"controls-bar":"E27Bl82JIeG6k7my3Q_6I",controlsBar:"E27Bl82JIeG6k7my3Q_6I","controls-bar-content":"_3qleW5hIsvWlFHtQQ8qz4G",controlsBarContent:"_3qleW5hIsvWlFHtQQ8qz4G","time-scrubber":"qNiN4czVzqvasYUFYu1hI",timeScrubber:"qNiN4czVzqvasYUFYu1hI",timestamp:"_3vP4MUUftWwGRqLLIciNSA","scale-animation":"_2t3dBW6D2rEjH8WmzJD75q",scaleAnimation:"_2t3dBW6D2rEjH8WmzJD75q","scale-up":"_1ly_CaphaR3uwVHxiPPxER",scaleUp:"_1ly_CaphaR3uwVHxiPPxER","scale-down":"_1kDXg1R-IbUjTnL1EdqWDZ",scaleDown:"_1kDXg1R-IbUjTnL1EdqWDZ","volume-slider":"_1LcYy3HQj6SyRJjZtGFUw1",volumeSlider:"_1LcYy3HQj6SyRJjZtGFUw1",white:"_10K2H7DzyLgPbVHlFiybq6","uhd-icon":"_2tK5ernCOkBptDbeYepg_a",uhdIcon:"_2tK5ernCOkBptDbeYepg_a",selected:"RxpQB3EuWJeDE1bUexYOm","text-icon":"_2JEXTVxjVCSCe9xkCDdzQ1",textIcon:"_2JEXTVxjVCSCe9xkCDdzQ1","text-icon-with-left-icon":"_AX7qIyizrhsI5ZnOmBTE",textIconWithLeftIcon:"_AX7qIyizrhsI5ZnOmBTE",uppercase:"_3B1aUMNek9PTpF_ulpcji0","small-font":"p5S14CFnftdiZMwybHztm",smallFont:"p5S14CFnftdiZMwybHztm","margin-left-xs":"_3Gse0OkoYuW8JfmXkS1dXR",marginLeftXs:"_3Gse0OkoYuW8JfmXkS1dXR","display-on-size":"_25VwrBTpjP6FGNdxJZaZZX",displayOnSize:"_25VwrBTpjP6FGNdxJZaZZX"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player ._2ZdY_-Clmc40gdOX47QcXS{--range:calc(var(--max) - var(--min));--ratio:calc((var(--val) - var(--min))/var(--range));--sx:calc(0.375em + var(--ratio)*(100% - 0.75em));background:transparent;margin:0;padding:0;height:.75em;font:1em/1 arial,sans-serif;cursor:pointer}.spectre-player ._2ZdY_-Clmc40gdOX47QcXS,.spectre-player ._2ZdY_-Clmc40gdOX47QcXS::-webkit-slider-thumb{-webkit-appearance:none}.spectre-player ._2ZdY_-Clmc40gdOX47QcXS._3iAhlkvcDwOq1gWP1sognx::-webkit-slider-thumb{box-sizing:border-box;border:none;width:.75em;height:.75em;border-radius:50%;background:#0075d5;transition:-webkit-transform 83ms ease-out;transition:transform 83ms ease-out;transition:transform 83ms ease-out,-webkit-transform 83ms ease-out;-webkit-transform:scale(1.25);transform:scale(1.25)}.spectre-player ._2ZdY_-Clmc40gdOX47QcXS._3iAhlkvcDwOq1gWP1sognx::-moz-range-thumb{box-sizing:border-box;border:none;width:.75em;height:.75em;border-radius:50%;background:#0075d5;transition:-webkit-transform 83ms ease-out;transition:transform 83ms ease-out;transition:transform 83ms ease-out,-webkit-transform 83ms ease-out;transform:scale(1.25)}.spectre-player ._2ZdY_-Clmc40gdOX47QcXS._3iAhlkvcDwOq1gWP1sognx::-ms-thumb{box-sizing:border-box;border:none;width:.75em;height:.75em;border-radius:50%;background:#0075d5;transition:-webkit-transform 83ms ease-out;transition:transform 83ms ease-out;transition:transform 83ms ease-out,-webkit-transform 83ms ease-out;transform:scale(1.25)}.spectre-player ._2ZdY_-Clmc40gdOX47QcXS::-webkit-slider-runnable-track{box-sizing:border-box;border:none;height:.05em;background:hsla(0,0%,100%,.2);background:linear-gradient(#0075d5,#0075d5) 0/var(--sx) 100% no-repeat hsla(0,0%,100%,.2)}.spectre-player ._2ZdY_-Clmc40gdOX47QcXS::-moz-range-track{box-sizing:border-box;border:none;height:.05em;background:hsla(0,0%,100%,.2)}.spectre-player ._2ZdY_-Clmc40gdOX47QcXS::-ms-track{box-sizing:border-box;border:none;height:.05em;background:hsla(0,0%,100%,.2)}.spectre-player ._2ZdY_-Clmc40gdOX47QcXS::-moz-range-progress{height:.05em;background:#0075d5}.spectre-player ._2ZdY_-Clmc40gdOX47QcXS::-ms-fill-lower{height:.05em;background:#0075d5}.spectre-player ._2ZdY_-Clmc40gdOX47QcXS::-webkit-slider-thumb{margin-top:-.35em;box-sizing:border-box;border:none;width:.75em;height:.75em;border-radius:50%;background:#0075d5;transition:-webkit-transform 83ms ease-out;transition:transform 83ms ease-out;transition:transform 83ms ease-out,-webkit-transform 83ms ease-out}.spectre-player ._2ZdY_-Clmc40gdOX47QcXS::-moz-range-thumb{box-sizing:border-box;border:none;width:.75em;height:.75em;border-radius:50%;background:#0075d5;transition:-webkit-transform 83ms ease-out;transition:transform 83ms ease-out;transition:transform 83ms ease-out,-webkit-transform 83ms ease-out}.spectre-player ._2ZdY_-Clmc40gdOX47QcXS::-ms-thumb{margin-top:0;box-sizing:border-box;border:none;width:.75em;height:.75em;border-radius:50%;background:#0075d5;transition:-webkit-transform 83ms ease-out;transition:transform 83ms ease-out;transition:transform 83ms ease-out,-webkit-transform 83ms ease-out}.spectre-player ._2ZdY_-Clmc40gdOX47QcXS::-ms-tooltip{display:none}",""]),t.locals={slider:"_2ZdY_-Clmc40gdOX47QcXS",changing:"_3iAhlkvcDwOq1gWP1sognx"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player ._1qfRbRuZktPF7hMh2-NlGi{display:-webkit-flex;display:flex;-webkit-justify-content:space-between;justify-content:space-between}.spectre-player .-Nz604ipm_To7lhpK4lg3,.spectre-player ._3d_c9HMkD3G1DyFTky5x_J{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;padding:.2em 0}",""]),t.locals={container:"_1qfRbRuZktPF7hMh2-NlGi","left-content":"-Nz604ipm_To7lhpK4lg3",leftContent:"-Nz604ipm_To7lhpK4lg3","right-content":"_3d_c9HMkD3G1DyFTky5x_J",rightContent:"_3d_c9HMkD3G1DyFTky5x_J"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player .qbvoKPmPKNbozIhqOAHOi{-webkit-align-items:center;align-items:center;background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;font-size:1em;height:36px;-webkit-justify-content:center;justify-content:center;margin:8px 4px;padding:8px 8px 9px;text-align:center}.spectre-player .qbvoKPmPKNbozIhqOAHOi:disabled{background-color:hsla(0,0%,100%,.12);color:grey}.spectre-player .qbvoKPmPKNbozIhqOAHOi:focus,.spectre-player .qbvoKPmPKNbozIhqOAHOi:hover{background-color:hsla(0,0%,100%,.12)}.spectre-player .qbvoKPmPKNbozIhqOAHOi>*{-webkit-align-items:center;align-items:center;display:-webkit-flex;display:flex}.spectre-player .qbvoKPmPKNbozIhqOAHOi ._2_MFt-Cw-lztQvZE6titOr{color:#fafafa}",""]),t.locals={"icon-button":"qbvoKPmPKNbozIhqOAHOi",iconButton:"qbvoKPmPKNbozIhqOAHOi",white:"_2_MFt-Cw-lztQvZE6titOr"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player ._3G523DKbE5r6lFAyxM4cD-{bottom:52px;display:-webkit-flex;display:flex;right:36px;max-height:calc(100% - 60px);max-width:calc(100% - 72px);min-width:266px;position:absolute;pointer-events:all}.spectre-player ._3G523DKbE5r6lFAyxM4cD-.e90HOx8d2fzB228nou06G{display:none}.spectre-player ._3G523DKbE5r6lFAyxM4cD- .or6Iij57y0ozK1wCBRfW5{border-bottom:1px solid grey;-webkit-flex-shrink:0;flex-shrink:0;padding:10px;text-align:center}.spectre-player ._3G523DKbE5r6lFAyxM4cD- .u-2rFBoX7e-VGl4ox9FwF{border-top:1px solid grey;-webkit-flex-shrink:0;flex-shrink:0;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around}.spectre-player ._3G523DKbE5r6lFAyxM4cD- .u-2rFBoX7e-VGl4ox9FwF ._1NmnWUAWusBTP0cm0gh79E{border:1px solid #fff;background-color:#212c3d;font-family:Industrywf,sans-serif;margin:8px 0;padding:8px 20px}.spectre-player ._3G523DKbE5r6lFAyxM4cD- .u-2rFBoX7e-VGl4ox9FwF ._1NmnWUAWusBTP0cm0gh79E:focus,.spectre-player ._3G523DKbE5r6lFAyxM4cD- .u-2rFBoX7e-VGl4ox9FwF ._1NmnWUAWusBTP0cm0gh79E:hover{background-color:#313c4d}",""]),t.locals={"report-menu":"_3G523DKbE5r6lFAyxM4cD-",reportMenu:"_3G523DKbE5r6lFAyxM4cD-",remove:"e90HOx8d2fzB228nou06G",header:"or6Iij57y0ozK1wCBRfW5",footer:"u-2rFBoX7e-VGl4ox9FwF","simple-button":"_1NmnWUAWusBTP0cm0gh79E",simpleButton:"_1NmnWUAWusBTP0cm0gh79E"}},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,".spectre-player ._1MnMzKqe6F7KhkD6SciXDM{border:2px solid #0075d5;border-radius:50%;height:44px;opacity:0;pointer-events:none;position:absolute;transition:opacity .2s cubic-bezier(.35,0,.25,1) 0s;width:44px}@-webkit-keyframes _1ys9Nulwm1p63AgbqckocR{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}to{-webkit-transform:rotate(315deg);transform:rotate(315deg)}}@keyframes _1ys9Nulwm1p63AgbqckocR{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}to{-webkit-transform:rotate(315deg);transform:rotate(315deg)}}.spectre-player ._1MnMzKqe6F7KhkD6SciXDM ._3jSO8U6IbKTDwonKDoD3Yq{border-radius:50%;box-sizing:border-box;height:calc(100% + 4px);width:calc(100% + 4px);border-top:0 solid transparent;border-right:4px solid #0075d5;border-bottom:4px solid transparent}.spectre-player ._1MnMzKqe6F7KhkD6SciXDM.RllhjN12JWYScSbxYitfj{-webkit-animation:_1ys9Nulwm1p63AgbqckocR .8s linear infinite;animation:_1ys9Nulwm1p63AgbqckocR .8s linear infinite;opacity:1;transition-delay:1s}.spectre-player ._1MnMzKqe6F7KhkD6SciXDM._1Yu3fmmBKSWC91ve7TzshH{left:calc(50% - 22px);top:calc(50% - 22px)}.spectre-player ._1MnMzKqe6F7KhkD6SciXDM._26Db3YufAS75txNIxewE5w{right:32px;top:32px}",""]),t.locals={"loading-indicator":"_1MnMzKqe6F7KhkD6SciXDM",loadingIndicator:"_1MnMzKqe6F7KhkD6SciXDM","loading-indicator-chevron":"_3jSO8U6IbKTDwonKDoD3Yq",loadingIndicatorChevron:"_3jSO8U6IbKTDwonKDoD3Yq",visible:"RllhjN12JWYScSbxYitfj","ring-animation":"_1ys9Nulwm1p63AgbqckocR",ringAnimation:"_1ys9Nulwm1p63AgbqckocR",center:"_1Yu3fmmBKSWC91ve7TzshH","top-right":"_26Db3YufAS75txNIxewE5w",topRight:"_26Db3YufAS75txNIxewE5w"}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"StatsApiKey",function(){return Dn}),n.d(r,"Version",function(){return Mn}),n.d(r,"FullVersionString",function(){return Nn}),n.d(r,"Undefined",function(){return Fn}),n.d(r,"isString",function(){return Vn}),n.d(r,"isNumber",function(){return Gn}),n.d(r,"isBoolean",function(){return qn}),n.d(r,"getTenantId",function(){return Hn}),n.d(r,"isBeaconsSupported",function(){return Kn}),n.d(r,"isUint8ArrayAvailable",function(){return zn}),n.d(r,"isLatency",function(){return Qn}),n.d(r,"sanitizeProperty",function(){return Wn}),n.d(r,"getISOString",function(){return Yn}),n.d(r,"isReactNative",function(){return Xn}),n.d(r,"isArray",function(){return Jn}),n.d(r,"getCommonSchemaMetaData",function(){return $n}),n.d(r,"cookieAvailable",function(){return Zn}),n.d(r,"setCookie",function(){return er}),n.d(r,"deleteCookie",function(){return tr}),n.d(r,"getCookie",function(){return nr});var i={};n.r(i),n.d(i,"StatsApiKey",function(){return Ic}),n.d(i,"Version",function(){return Oc}),n.d(i,"FullVersionString",function(){return Lc}),n.d(i,"Undefined",function(){return Rc}),n.d(i,"isValueAssigned",function(){return Nc}),n.d(i,"isString",function(){return Fc}),n.d(i,"isNumber",function(){return jc}),n.d(i,"isBoolean",function(){return Uc}),n.d(i,"getTenantId",function(){return Bc}),n.d(i,"isBeaconsSupported",function(){return Vc}),n.d(i,"isUint8ArrayAvailable",function(){return Gc}),n.d(i,"isLatency",function(){return qc}),n.d(i,"sanitizeProperty",function(){return Hc}),n.d(i,"getISOString",function(){return Kc}),n.d(i,"isReactNative",function(){return zc}),n.d(i,"isArray",function(){return Qc}),n.d(i,"getCommonSchemaMetaData",function(){return Wc}),n.d(i,"cookieAvailable",function(){return Yc}),n.d(i,"setCookie",function(){return Xc}),n.d(i,"deleteCookie",function(){return Jc}),n.d(i,"getCookie",function(){return $c}),n.d(i,"createGuid",function(){return Zc}),n.d(i,"extend",function(){return ed});n(83);var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s,u,l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function c(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function d(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}!function(e){e.HLS="hls",e.FTL="ftl",e.DASH="dash",e.NONE="none"}(s||(s={})),function(e){e[e.QDEFAULT=0]="QDEFAULT",e[e.QDEFAULT480P=1]="QDEFAULT480P",e[e.Q480PANDLOWER=2]="Q480PANDLOWER",e[e.Q480PONLY=3]="Q480PONLY",e[e.QLOWTOHIGH=4]="QLOWTOHIGH"}(u||(u={}));var f=30,p=n(45),h="undefined"!=typeof document,g=function(e){return new Promise(function(t,n){var r=document.createElement("script");r.src=e,r.async=!0,r.onload=function(){return t()},r.onerror=function(e){return n(e)},document.head.appendChild(r)})},y=h?p.detect(navigator.userAgent):{name:"mobile",osname:"mobile",osversion:"react-native",version:"react-native"},m="Chrome"===y.name&&"Android"===y.osname;function v(){try{var e=navigator.userAgent||"",t=/; wv/.test(e);return function(e){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e)}(e)||t}catch(e){return!1}}function b(e){return h&&"mobile"===e}function _(){var e=navigator.userAgent||"";return/SamsungBrowser/i.test(e)}function S(e,t,n){var r=e,i="";return e.includes("#")&&(i=e.substr(e.indexOf("#"),e.length-1),r=e.replace(i,"")),e.includes("?")?"?"!==e.charAt(e.length-1)&&(r+="&"):r+="?",(r+=encodeURIComponent(t)+"="+encodeURIComponent(""+n))+i}function w(e){try{var t=e.split(".");return[t[0]||"unknown",t[1]||"unknown"]}catch(e){return["unknown","unknown"]}}function E(e){if(e){if(/^en[-_]*(au|bz|ca|gb|ie|jm|nz|us|tt|za)?$/i.test(e)||/^english$/i.test(e)||"eng"===e)return"English";if(/^es[-_]*(ar|bo|cr|co|cl|do|ec|es|gt|hn|mx|ni|pa|pe|pr|py|sv|uy|ve)?$/i.test(e)||/^spanish$/i.test(e)||"spa"===e)return"Espaol";if(/^fr[-_]*(be|ca|ch|fr|lu)?$/i.test(e)||/^french$/i.test(e)||"fra"===e)return"Franais";if(/^de[-_]*(at|ch|de|li|lu)?$/i.test(e)||/^german$/i.test(e)||"deu"===e)return"Deutsch";if(/^pt[-_]*(br)?$/i.test(e)||/^portuguese$/i.test(e)||"por"===e)return"Portugus";if(/^it[-_]*(ch|it)?$/i.test(e)||/^italian$/i.test(e)||"ita"===e)return"Italiano";if(/^zh[-_]*(cn|hk|sg|tw)?$/i.test(e)||/^chinese$/i.test(e))return"";if(/^ja[-_]*(jp)?$/i.test(e)||/^japanese$/i.test(e))return"";if(/^nl[-_]*(be)?$/i.test(e)||/^dutch$/i.test(e))return"Nederlands";if(/^sv[-_]*(fi)?$/i.test(e)||/^swedish$/i.test(e))return"Svenska";if(/^no$/i.test(e)||/^norwegian$/i.test(e))return"Norsk";if(/^tng$/i.test(e)||/^descriptive audio$/i.test(e))return"Descriptive Audio"}return e}var T=function(e){return function(t){return e.reduce(function(e,t){return e&&Object.getOwnPropertyDescriptor(e,t)?e[t]:null},t)}},x=function(e,t){var n=Array.from(e.textTracks).filter(function(e){return"captions"===e.kind||"subtitles"===e.kind});return n&&n.length>0?(n[0].mode=t?"showing":"disabled",t):!t},k=["p","l","a","y","a","z","$","$","$"],C=["GamepadLeftTrigger","GamepadRightTrigger","GamepadLeftTrigger","GamepadRightTrigger","GamepadLeftTrigger","GamepadRightTrigger","GamepadRightShoulder"],A=function(e,t,n){void 0===e&&(e="Not Available"),void 0===t&&(t="Not Available"),void 0===n&&(n="Not Available");var r=document.querySelector("light-player");if(r){var i=document.createElement("div");i.className="debug-menu";var o="\n            <div class='debug-menu-container debug-menu-container-width debug-menu-display-flex debug-menu-border-radius-large'>\n                <div>\n                    <h2 class='debug-menu-margin-center debug-menu-color-light-blue'>Video Debug Menu</h2>\n                </div>\n                <div>\n                    <span class='debug-menu-label debug-menu-color-dark-blue'>cv:</span>\n                    "+e+"\n                </div>\n                <div>\n                    <span class='debug-menu-label debug-menu-color-dark-blue'>sg:</span>\n                    "+t+"\n                </div>\n                <div>\n                    <span class='debug-menu-label debug-menu-color-dark-blue'>mixerplayer version:</span>\n                    "+n+"\n                </div>\n                <div>\n                    <div class='debug-menu-display-flex'>\n                        <h4 class='debug-menu-color-dark-blue debug-menu-margin-center'>SDK Selection</h4>\n                    </div>\n                    <div class='debug-menu-form'>\n                        <label class='debug-menu-radio debug-menu-focus-outline' tabindex='0'>\n                            <input type='radio' name='debugMenuParam' class='debug-menu-radio-input' value='v' checked>\n                            Version\n                        </label>\n                        <label class='debug-menu-radio debug-menu-focus-outline' tabindex='0'>\n                            <input type='radio' name='debugMenuParam' class='debug-menu-radio-input' value='p'>\n                            Path\n                        </label>\n                        <input class='debug-menu-sdk-input debug-menu-border-radius-small debug-menu-focus-outline' tabindex='0'/>\n                        <button class='debug-menu-submit-button debug-menu-button debug-menu-border-radius-small debug-menu-focus-outline'\n                            tabindex='0'>Submit</button>\n                        <button class='debug-menu-exit-button debug-menu-button debug-menu-border-radius-small debug-menu-focus-outline'\n                            tabindex='0'>X</button>\n                    </div>\n                </div>\n                <style>\n                    .debug-menu {\n                        display: flex;\n                        flex-direction: column;\n                    }\n\n                    .debug-menu-container {\n                        z-index: 100;\n                        flex-direction: column;\n                        position: relative;\n                        background-color: #25374c;\n                        color: white;\n                        align-items: center;\n                        border: 0.1em solid white;\n                        left: 0;\n                        right: 0;\n                        margin: auto;\n                        padding: 1em 0;\n                    }\n\n                    .debug-menu-container-width {\n                        width: 60%;\n                    }\n\n                    @media screen and (max-width: 480px) {\n                        .debug-menu-container-width {\n                            width: 100%;\n                        }\n                    }\n\n                    .debug-menu-form {\n                        text-align: center;\n                    }\n\n                    .debug-menu-label {\n                        font-weight: bold;\n                    }\n\n                    .debug-menu-radio input {\n                        cursor: pointer;\n                    }\n\n                    .debug-menu-sdk-input {\n                        width: 35%;\n                    }\n\n                    .debug-menu-button {\n                        border: 0.1em solid white;\n                        padding: 0.2em;\n                        cursor: pointer;\n                    }\n\n                    .debug-menu-focus-outline:focus {\n                        outline: #00bef8 solid 0.3em;\n                    }\n\n                    .debug-menu-display-flex {\n                        display: flex;\n                    }\n\n                    .debug-menu-margin-center {\n                        margin: 1em auto;\n                    }\n\n                    .debug-menu-color-light-blue {\n                        color: #00bcf2;\n                    }\n\n                    .debug-menu-color-dark-blue {\n                        color: #0074dc;\n                    }\n\n                    .debug-menu-border-radius-small {\n                        border-radius: 0.5em;\n                    }\n\n                    .debug-menu-border-radius-large {\n                        border-radius: 2em;\n                    }\n                </style>\n            </div>\n        ";return i.insertAdjacentHTML("beforeend",o),r.appendChild(i),L(500),i}},I=function(e){var t=document.querySelector(".debug-menu-submit-button");t&&(t.onclick=function(){e()})},O=function(e){var t=document.querySelector(".debug-menu-exit-button");t&&(t.onclick=function(){e()})},L=function(e){void 0===e&&(e=0);var t=document.querySelector(".debug-menu-sdk-input");t&&setTimeout(function(){return t.focus()},e)},R=function(e){return new Promise(function(t,n){var r;e&&(r=e)&&(r.remove(),1)&&t(),n()})},P=function(){return new Promise(function(e,t){var n=document.querySelectorAll(".debug-menu-radio-input"),r=document.querySelector(".debug-menu-sdk-input");if(n&&n.length>0&&r){var i="";Array.from(n).forEach(function(e){if(e){var t=e;t.checked&&(i=t.value)}});var o=r.value;i&&o&&(g("https://ning.videosvc.mixer.com/api/video/v2/player?"+i+"="+o),e())}t()})},D=n(3);function M(e){return"function"==typeof e}var N=!1,F={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;N=e},get useDeprecatedSynchronousErrorHandling(){return N}};function j(e){setTimeout(function(){throw e},0)}var U={closed:!0,next:function(e){},error:function(e){if(F.useDeprecatedSynchronousErrorHandling)throw e;j(e)},complete:function(){}},B=Array.isArray||function(e){return e&&"number"==typeof e.length};function V(e){return null!==e&&"object"==typeof e}function G(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}G.prototype=Object.create(Error.prototype);var q=G,H=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var o=0;o<n.length;++o){n[o].remove(this)}if(M(r))try{r.call(this)}catch(e){t=e instanceof q?K(e.errors):[e]}if(B(i)){o=-1;for(var a=i.length;++o<a;){var s=i[o];if(V(s))try{s.unsubscribe()}catch(e){t=t||[],e instanceof q?t=t.concat(K(e.errors)):t.push(e)}}}if(t)throw new q(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function K(e){return e.reduce(function(e,t){return e.concat(t instanceof q?t.errors:t)},[])}var z="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Q=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=U;break;case 1:if(!n){o.destination=U;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new W(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new W(o,n,r,i)}return o}return a(t,e),t.prototype[z]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(H),W=function(e){function t(t,n,r,i){var o,a=e.call(this)||this;a._parentSubscriber=t;var s=a;return M(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==U&&(M((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=o,a._error=r,a._complete=i,a}return a(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;F.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=F.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):j(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;j(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};F.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),F.useDeprecatedSynchronousErrorHandling)throw e;j(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!F.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return F.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(j(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Q);var Y="function"==typeof Symbol&&Symbol.observable||"@@observable";function X(){}function J(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:X}var $=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof Q)return e;if(e[z])return e[z]()}return e||t||n?new Q(e,t,n):new Q(U)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||F.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),F.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){F.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof Q?r:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Z(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[Y]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:J(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Z(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function Z(e){if(e||(e=F.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function ee(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}ee.prototype=Object.create(Error.prototype);var te=ee,ne=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return a(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(H),re=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return a(t,e),t}(Q),ie=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return a(t,e),t.prototype[z]=function(){return new re(this)},t.prototype.lift=function(e){var t=new oe(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new te;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new te;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new te;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new te;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new te;return this.hasError?(e.error(this.thrownError),H.EMPTY):this.isStopped?(e.complete(),H.EMPTY):(this.observers.push(e),new ne(this,e))},t.prototype.asObservable=function(){var e=new $;return e.source=this,e},t.create=function(e,t){return new oe(e,t)},t}($),oe=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return a(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):H.EMPTY},t}(ie);function ae(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}ae.prototype=Object.create(Error.prototype);var se=ae,ue=new $(function(e){return e.complete()});function le(e){return e?function(e){return new $(function(t){return e.schedule(function(){return t.complete()})})}(e):ue}function ce(e){return function(t){return 0===e?le():t.lift(new de(e))}}var de=function(){function e(e){if(this.total=e,this.total<0)throw new se}return e.prototype.call=function(e,t){return t.subscribe(new fe(e,this.total))},e}(),fe=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return a(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(Q),pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(Q),he=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return a(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(Q),ge=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};function ye(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var me=ye(),ve=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function be(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var _e=function(e){if(e&&"function"==typeof e[Y])return r=e,function(e){var t=r[Y]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(ve(e))return ge(e);if(be(e))return n=e,function(e){return n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,j),e};if(e&&"function"==typeof e[me])return t=e,function(e){for(var n=t[me]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e};var t,n,r,i=V(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Se(e,t,n,r,i){if(void 0===i&&(i=new he(e,n,r)),!i.closed)return t instanceof $?t.subscribe(i):_e(t)(i)}function we(e){return function(t){return t.lift(new Ee(e))}}var Ee=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new Te(e),r=Se(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),Te=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return a(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(pe),xe=function(){function e(){}return e.prototype.incrementXpertCv=function(){},e.prototype.getXpertCv=function(){return""},e.prototype.logQoSEvent=function(e){},e.prototype.updateEnvironmentInfo=function(e){},e.prototype.isGAEvent=function(e){return!1},e.prototype.logGAEvent=function(e){},e.prototype.logGetVideoFeedAttempt=function(e){},e.prototype.logGetVideoFeedSummary=function(e){},e.prototype.logConnectTransportAttempt=function(e){},e.prototype.logConnectTransportSummary=function(e){},e.prototype.logTransportIncident=function(e){},e.prototype.logTransportStatistics=function(e){},e.prototype.logVideoPlaybackStatistics=function(e){},e.prototype.logVideoPlaybackRendering=function(e){},e.prototype.logVideoPlaybackQualitySwitch=function(e){},e.prototype.logVideoPlayerHeartbeat=function(e){},e.prototype.logJanusFlags=function(e){},e.prototype.logFallbackToNativePlayer=function(e){},e.prototype.logPlayerCDNFallback=function(e){},e.prototype.logPlayerLifecycleState=function(e){},e.prototype.logPlayerReportedSessions=function(e){},e.prototype.logPlayerDebugEvents=function(e){},e.prototype.logVideoPlaybackClosedCaptions=function(e){},e}(),ke=function(){function e(){}return e.prototype.info=function(e){},e.prototype.error=function(e){},e}(),Ce=function(){function e(){}return e.prototype.logTranscodeSelected=function(e,t,n,r,i,o,a){},e.prototype.logQoSEvent=function(e,t,n,r,i,o,a,s,u,l,c,d,f,p){},e.prototype.logStreamLoadAttempt=function(e){},e.prototype.logUnhandledMessage=function(e){},e.prototype.nextCorrelationVector=function(){return"emptyvector"},e.prototype.logTransportFailed=function(e,t,n,r,i,o){},e.prototype.logVideoLoadTime=function(e,t,n,r,i){},e.prototype.logFTLDisabled=function(){},e.prototype.logCaptionsEnabled=function(){},e.prototype.logAudioTrackSelected=function(e,t){},e.prototype.logFTLWebRTCNack=function(e,t,n,r){},e.prototype.logFTLPlisSent=function(e,t,n,r){},e.prototype.logTransportAttempt=function(e,t){},e.prototype.logWatchAttempt=function(e){},e.prototype.logManifestParsed=function(e,t){},e.prototype.logPlayDuration=function(e){},e.prototype.logStartupAbandoned=function(e){},e.prototype.logPeek=function(e){},e.prototype.logWebRTCStats=function(e,t,n,r,i,o,a,s,u,l,c,d,f,p,h,g,y,m,v,b,_,S,w,E,T){},e.prototype.logPacketsLost=function(e,t,n,r,i,o,a){},e.prototype.logFTLWebPlisSent=function(e,t,n,r,i){},e.prototype.logHLSError=function(e,t,n){},e.prototype.logLagDetected=function(e,t,n){},e.prototype.logFrameRatePercent=function(e,t,n,r){},e.prototype.logFailure=function(e,t,n){},e.prototype.logFTLGaveUp=function(e,t,n){},e.prototype.logTotalTransportFailure=function(e,t,n){},e}(),Ae="4.14.4",Ie=function(e){var t="",n=function(e){"string"==typeof e&&(t+=" ----- "+e)};return{getTrace:function(){return t},log:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.forEach(function(r){n(r),e&&t&&console.log("[FTL lib]",r)})},warn:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.forEach(function(r){n(r),e&&t&&console.warn("[FTL lib]",r)})},error:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.forEach(function(r){n(r),e&&t&&console.error("[FTL lib]",r)})}}},Oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function Le(e){void 0===e&&(e=12);for(var t="",n=0;n<e;n++){var r=Math.floor(Math.random()*Oe.length);t+=Oe.substring(r,r+1)}return t}var Re=function(e){var t=e.correlationVector;return{client_id:e.clientId,janus:"attach",plugin:"janus.plugin.plex",session_id:e.sessionId,version:e.version,body:{correlation_vector:t}}},Pe=function(e){var t=e.accessKey,n=e.channelId;return{janus:"message",body:{access_key:t,client_id:e.clientId,id:n,request:"list"},handle_id:e.handleId,session_id:e.sessionId}},De=function(e){var t=e.accessKey,n=e.channelId,r=e.clientId,i=e.feedId,o=e.handleId,a=e.sessionId;return{janus:"message",body:{access_key:t,client_id:r,feed_id:i,id:n,request:"watch",requested_stream_id:e.streamId},handle_id:o,session_id:a}},Me=function(e){var t=e.clientId,n=e.handleId,r=e.sessionId;return{janus:"message",body:{request:"mute",audio:e.shouldMuteAudio?"mute":"unmute",video:e.shouldMuteVideo?"mute":"unmute",client_id:t},handle_id:n,session_id:r}},Ne=function(e){var t=e.correlationVector,n=e.clientId,r=e.handleId;return{janus:"message",body:{request:"hostname",correlation_vector:t,client_id:n},session_id:e.sessionId,handle_id:r}},Fe=function(e){var t=e.is_auto_bw_enabled,n=e.user_invoked,r=void 0===n||n,i=e.transaction;return{janus:"message",body:{request:"setAutoBwState",is_auto_bw_enabled:t,user_invoked:r},handle_id:e.handle_id,session_id:e.session_id,transaction:i}},je=function(e){var t=e.transaction;return{janus:"message",body:{request:"getAutoBwState"},handle_id:e.handle_id,session_id:e.session_id,transaction:t}},Ue=function(e){var t=e.platform,n=e.browser,r=e.timestamp,i=e.framesReceived,o=e.framesDecoded,a=e.framesRendered,s=e.packetsLost,u=e.videoHeight,l=e.currentStall,c=e.qoEEventCount1M,d=e.qoEEventCountTotal,f=e.qoEStatus,p=e.currentVideoTime,h=(e.transaction,e.handle_id),g=e.session_id;return{janus:"message",body:{request:"playbackStats",platform:t,browser:n,timestamp:Math.round(r),framesReceived:i,framesDecoded:o,framesRendered:a,packetsLost:s,videoHeight:u,currentStall:l,qoEEventCount1M:c,qoEEventCountTotal:d,qoEStatus:f,currentVideoTime:p},handle_id:h,session_id:g,transaction:Le()}},Be=function(){return(Be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ve=JSON.stringify,Ge=function(e){var t,n=e.data,r=e.socket,i=e.responseHandler,o=e.transactionMap,a=Le(12);return new Promise(function(e,s){if(r.readyState!==WebSocket.CLOSED){var u=function(n,r){clearTimeout(t),o.delete(n),e(r)};o.set(a,function(e){i?"ack"!==e.janus&&u(a,i(e)):u(a,e)}),r.send(Ve(Be({},n,{transaction:a}))),t=setTimeout(function(){return s("Janus message timed out")},3e4)}else s("Unable to send because socket has already closed")})},qe=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},He=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ke=function(e,t){return qe(void 0,void 0,void 0,function(){var n,r;return He(this,function(i){switch(i.label){case 0:return n={},t&&"function"==typeof t.getStats?[4,t.getStats()]:[3,2];case 1:return r=i.sent(),[3,4];case 2:return[4,e.getStats()];case 3:r=i.sent(),i.label=4;case 4:return r.forEach&&r.forEach(function(e){e&&e.type&&(n[e.type]=e)}),[2,n]}})})},ze=function(e,t){var n=e.clientId,r=e.correlationVector,i=e.handleId,o=e.localDescription,a=e.sessionId,s=e.socket,u=e.transactionMap;void 0===t&&(t=Ie(!1));var l=function(e){var t=e.clientId,n=e.correlationVector,r=e.handleId,i=e.localDescription,o=e.sessionId;return{janus:"message",body:{request:"start",client_id:t,correlation_vector:n},jsep:new RTCSessionDescription(i),handle_id:r,session_id:o}}({clientId:n,correlationVector:r,handleId:i,localDescription:o,sessionId:a});return t.log("Sending start request",l),Ge({data:l,socket:s,transactionMap:u})},Qe=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},We=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ye=function(e,t){return Qe(void 0,void 0,void 0,function(){var n,r,i;return We(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),t.log("Generating local description"),[4,e.createAnswer()];case 1:return n=o.sent(),t.log("Setting stereo parameters in the local SDP"),n&&n.sdp&&(-1!=(r=n.sdp.indexOf("fmtp:97 "))?(r+=8,n.sdp=n.sdp.slice(0,r)+"stereo=1;sprop-stereo=1;"+n.sdp.slice(r)):t.error("Unable to find audio ftmp in local SDP.")),t.log("Setting local description",n),[4,e.setLocalDescription(n)];case 2:return o.sent(),t.log("Successfully set local description"),[2,n];case 3:throw i=o.sent(),t.log("Unable to set local description ",i),i;case 4:return[2]}})})},Xe=function(e,t,n){return Qe(void 0,void 0,void 0,function(){var r;return We(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),n.log("Setting remote description",t),[4,e.setRemoteDescription(t)];case 1:return i.sent(),n.log("Successfully set remote description"),[3,3];case 2:throw r=i.sent(),n.error("Unable to set remote description ",r),r;case 3:return[2]}})})},Je=function(e,t){var n=e.clientId,r=e.correlationVector,i=e.handleId,o=e.remoteDescription,a=e.peerConnection,s=e.sessionId,u=e.socket,l=e.transactionMap;return void 0===t&&(t=Ie(!1)),Qe(void 0,void 0,void 0,function(){var e,c;return We(this,function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),[4,Xe(a,o,t)];case 1:return d.sent(),[4,Ye(a,t)];case 2:return e=d.sent(),[2,ze({clientId:n,correlationVector:r,handleId:i,localDescription:e,sessionId:s,socket:u,transactionMap:l},t)];case 3:throw c=d.sent(),t.error("Unable to start stream ",c),c;case 4:return[2]}})})},$e=function(e,t){return e.ontrack?function(e,t){return new Promise(function(n,r){var i,o=function(a){var s=a.streams;t.log("Handling track event","MediaStreams:",s),clearTimeout(i),s&&s[0]||r("No streams available");var u=s[0];e.removeEventListener("track",o),n(u)};e.addEventListener("track",o),i=setTimeout(r,3e4)})}(e,t):function(e,t){return new Promise(function(n,r){var i,o=function(r){var a=r.stream;t.log("Handling legacy stream event","stream:",a),clearTimeout(i),e.removeEventListener("addstream",o),n(a)};e.addEventListener("addstream",o),i=setTimeout(r,3e4)})}(e,t)},Ze=function(e,t){var n=e.clientId,r=e.correlationVector,i=e.handleId,o=e.iceServers,a=e.remoteDescription,s=e.sessionId,u=e.socket,l=e.transactionMap;void 0===t&&(t=Ie(!1)),t.log("Setting up peer connection","Ice servers",o);var c=o.slice(0,2);t.log(JSON.stringify(c));var d=new RTCPeerConnection({iceServers:c}),f=function(e){var n=e.candidate;t.log("Adding ice candidate",n),d.addIceCandidate(n).then(function(){n&&function(e,t){var n=e.handleId,r=e.candidate,i=e.sessionId,o=e.socket,a=e.transactionMap;void 0===t&&(t=Ie(!1));var s=function(e){var t=e.handleId;return{janus:"trickle",candidate:e.candidate,handle_id:t,session_id:e.sessionId}}({handleId:n,candidate:{candidate:r.candidate,sdpMLineIndex:r.sdpMLineIndex,sdpMid:r.sdpMid},sessionId:i});t.log("Sending trickle request",s),Ge({data:s,socket:o,transactionMap:a}).then(function(e){return t.log("Successfully sent trickle request",e)}).catch(function(e){return t.error("Error sending trickle request",e)})}({handleId:i,candidate:n,sessionId:s,socket:u,transactionMap:l},t)}).catch(function(e){return t.error("Unable to handle ice candidate",e)})};return d.addEventListener("icecandidate",f),Promise.all([$e(d,t),Je({clientId:n,correlationVector:r,handleId:i,remoteDescription:a,peerConnection:d,sessionId:s,socket:u,transactionMap:l},t)]).then(function(e){var n=e[0];return{getStats:function(){return function(e){return qe(void 0,void 0,void 0,function(){var t,n,r,i,o,a;return He(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,4]),t=e.getReceivers(),n=t[0],r=t[1],[4,Promise.all([Ke(e,n),Ke(e,r)])];case 1:return i=s.sent(),o=i[0],a=i[1],[2,{audioStats:o,videoStats:a}];case 2:return s.sent(),[4,Ke(e)];case 3:return[2,{audioStats:{},videoStats:a=s.sent()}];case 4:return[2]}})})}(d)},mediaStream:n,peerConnection:d,killPeerConnection:function(){t.log("Killing peer connection"),d.removeEventListener("icecandidate",f),n.getTracks().forEach(function(e){return e.stop()}),(d.signalingState&&"closed"!==d.signalingState||d.connectionState&&"closed"!==d.connectionState)&&(n.release&&n.release(),d.removeStream&&d.removeStream(n),d.getSenders&&d.getSenders().forEach(function(e){return d.removeTrack(e)})),d.close(),d=null}}}).catch(function(e){throw t.error("Unable to initialize peer connection ",e),e})},et=function(e){return function(t){return e.reduce(function(e,t){return e&&Object.getOwnPropertyDescriptor(e,t)?e[t]:null},t)}},tt=function(e,t){var n=e.clientId,r=e.correlationVector,i=e.sessionId,o=e.socket,a=e.transactionMap;return void 0===t&&(t=Ie(!1)),t.log("Sending attach client request"),Ge({data:Re({clientId:n,sessionId:i,correlationVector:r,version:"0.0.17"}),socket:o,responseHandler:function(e){return et(["data","id"])(e)},transactionMap:a})},nt=function(e,t){var n=e.socket,r=e.transactionMap;return void 0===t&&(t=Ie(!1)),t.log("Sending connection creation request"),Ge({data:{janus:"create"},socket:n,responseHandler:function(e){return et(["data","id"])(e)},transactionMap:r})},rt=function(e,t){var n,r=e.onCloseHandler,i=void 0===r?function(e){return t.log("WebSocket closing",e)}:r,o=e.messageHandlers,a=void 0===o?[]:o,s=e.server,u=e.transactionMap;void 0===t&&(t=Ie(!1)),t.log("Starting socket initialization");var l=new WebSocket(s,"janus-protocol"),c=function(e){var n=e.data,r=JSON.parse(n),i=et(["plugindata","data","result","status"])(r)||"none";t.log("WebSocket message (Status = "+i+"):",r),a.forEach(function(e){return e(r)});var o=u.get(r.transaction);o&&o(r)};return l.addEventListener("close",i),l.addEventListener("message",c),new Promise(function(e,r){function o(){l.removeEventListener("close",i),l.removeEventListener("error",s),l.removeEventListener("message",c),l.removeEventListener("open",a)}var a=function(){clearTimeout(n),e({socket:l,killSocket:function(){t.log("Killing socket connection"),o(),l.close()}})},s=function(e){t.error("WebSocket error",e),clearTimeout(n),o(),r(e)};l.addEventListener("open",a),l.addEventListener("error",s),n=setTimeout(function(){t.error("WebSocket Timeout"),r("WebSocket initialization timed out")},3e4)})},it=JSON.stringify,ot=function(e,t){},at=function(e,t,n){return void 0===n&&(n=ot),function(r){return new Promise(function(i,o){var a=setTimeout(function(){e.removeEventListener("message",s),o(Error("Timeout after "+t+"ms (tx#"+r+")"))},t),s=function(t){return function(e){try{return[JSON.parse(e)]}catch(e){return[]}}(t.data).filter(function(e){return n(r,e)}).forEach(function(t){clearTimeout(a),e.removeEventListener("message",s),i(t)})};e.addEventListener("message",s),e.send(it(r))})}},st=function(e){return function(t){return e(t),t}},ut=function(e){var t=e.socket,n=e.session_id,r=e.handle_id;return function(e,i,o){return void 0===i&&(i=3e4),void 0===o&&(o=Ie(!1)),Promise.resolve(Le()).then(st(function(t){return o.log("setAutoBwState("+e+"), (tx#"+t+")")})).then(function(t){return{is_auto_bw_enabled:e,session_id:n,handle_id:r,transaction:t}}).then(Fe).then(at(t,i,ct)).catch(function(t){return o.error("Error in setAutoBwState("+e+")",t),Promise.reject(t)})}},lt=function(e){var t=e.socket,n=e.session_id,r=e.handle_id;return function(e,i){return void 0===e&&(e=3e4),void 0===i&&(i=Ie(!1)),Promise.resolve(Le()).then(st(function(e){return i.log("getAutoBwState() (tx#"+e+")")})).then(function(e){return{session_id:n,handle_id:r,transaction:e}}).then(je).then(at(t,e,ct)).catch(function(e){return i.error("Error in getAutoBwState()",e),Promise.reject(e)})}},ct=function(e,t){return t.transaction===e.transaction&&"ack"!==t.janus},dt=et(["plugindata","data","result","state"]),ft=function(e){return{autoAvailable:e.is_auto_bw_available,autoEnabled:e.is_auto_bw_enabled}},pt=function(e){var t=e.socket,n=e.session_id,r=e.handle_id;return function(e,i,o){return void 0===i&&(i=3e4),void 0===o&&(o=Ie(!1)),ut({socket:t,session_id:n,handle_id:r})(e,i,o).then(dt).then(ft).catch(function(e){return o.error("Error retrieving auto state"),Promise.reject(e)})}},ht=function(e){var t=e.socket,n=e.session_id,r=e.handle_id;return function(e,i){return void 0===e&&(e=3e4),void 0===i&&(i=Ie(!1)),lt({socket:t,session_id:n,handle_id:r})(e,i).then(dt).then(ft).catch(function(e){return i.error("Error retrieving auto state"),Promise.reject(e)})}},gt=function(){return(gt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},yt=function(e,t){return"ack"!==t.janus},mt=function(e){var t=e.socket,n=e.session_id,r=e.handle_id;return function(e,i,o){return void 0===i&&(i=3e4),void 0===o&&(o=Ie(!1)),Promise.resolve(Le()).then(st(function(e){return o.log("sendPlaybackStats() (tx#"+e+")")})).then(function(t){return gt({handle_id:r,session_id:n,transaction:t},e)}).then(Ue).then(at(t,i,yt)).catch(function(e){return o.error("Error in sendPlaybackStats()",e),Promise.reject(e)})}},vt=function(e,t){var n=e.accessKey,r=e.channelId,i=e.clientId,o=e.handleId,a=e.sessionId,s=e.socket,u=e.transactionMap;return void 0===t&&(t=Ie(!1)),t.log("Sending list request"),Ge({data:Pe({accessKey:n,channelId:r,clientId:i,handleId:o,sessionId:a}),socket:s,responseHandler:function(e){return et(["plugindata","data","result","feeds"])(e)},transactionMap:u})},bt=function(e){var t=et(["plugindata","data","result","result"])(e);return{autoBitrateInfo:et(["auto_bw"])(t),hostname:et(["hostname"])(t)}},_t=function(e,t){var n=e.clientId,r=e.clientVersion,i=e.correlationVector,o=e.device,a=e.deviceVersion,s=e.gaFlags,u=e.handleId,l=e.isEmbed,c=e.os,d=e.osVersion,f=e.platform,p=e.playerVersion,h=e.sessionGuid,g=e.sessionId,y=e.socket,m=e.transactionMap,v=e.userAgent,b=e.userId;void 0===t&&(t=Ie(!1));var _=function(e){var t=e.clientId,n=e.clientVersion,r=e.correlationVector,i=e.device,o=e.deviceVersion,a=e.gaFlags,s=e.handleId,u=e.isEmbed,l=void 0!==u&&u,c=e.os,d=e.osVersion,f=e.platform,p=e.playerVersion,h=e.sessionGuid,g=e.sessionId;return{janus:"message",body:{request:"initialize",protocol_version:1,platform:f,player_version:p,client:t,client_version:n,device:i,device_version:o,is_embed:l,os:c,os_version:d,user_agent:e.userAgent,ga_flags:a,correlation_vector:r,user_id:e.userId,session_guid:h},handle_id:s,session_id:g}}({clientId:n,clientVersion:r,correlationVector:i,device:o,deviceVersion:a,gaFlags:s,handleId:u,isEmbed:l,os:c,osVersion:d,platform:f,playerVersion:p,sessionGuid:h,sessionId:g,userAgent:v,userId:b});return t.log("Sending initalize request",_),Ge({data:_,socket:y,responseHandler:bt,transactionMap:m})},St=function(e,t){var n=e.accessKey,r=e.channelId,i=e.clientId,o=e.feedId,a=e.handleId,s=e.sessionId,u=e.streamId,l=e.socket,c=e.transactionMap;return void 0===t&&(t=Ie(!1)),t.log("Sending watch request"),Ge({data:De({accessKey:n,channelId:r,clientId:i,feedId:o,handleId:a,sessionId:s,streamId:u}),socket:l,responseHandler:function(e){return e},transactionMap:c})},wt="UA-48751750-9",Et=function(){return(e=window)&&e.gaData&&e.gaData[wt]&&e.gaData[wt].experiments?window.gaData[wt].experiments:void 0;var e},Tt=function(e,t){var n=e.correlationVector,r=e.clientId,i=e.handleId,o=e.sessionId,a=e.socket,s=e.transactionMap;return void 0===t&&(t=Ie(!1)),t.log("Sending hostname request"),Ge({data:Ne({correlationVector:n,clientId:r,handleId:i,sessionId:o}),socket:a,responseHandler:function(e){return et(["plugindata","data","result","hostname"])(e)},transactionMap:s})},xt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},kt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ct=function(e){var t=e.accessKey,n=e.channelId,r=e.clientId,i=void 0===r?"unknown":r,o=e.clientVersion,a=void 0===o?"unknown":o,s=e.correlationVector,u=void 0===s?"":s,l=e.selectDefaultQuality,c=e.device,d=void 0===c?"unknown":c,f=e.deviceVersion,p=void 0===f?"unknown":f,h=e.gaFlags,g=void 0===h?Et():h,y=e.keepAliveIntervalMs,m=void 0===y?15e3:y,v=e.iceServers,b=e.isEmbed,_=void 0!==b&&b,S=e.os,w=void 0===S?"unknown":S,E=e.osVersion,T=void 0===E?"unknown":E,x=e.platform,k=void 0===x?"unknown":x,C=e.playerVersion,A=void 0===C?"unknown":C,I=e.server,O=e.sessionGuid,L=void 0===O?"":O,R=e.shouldLog,P=void 0!==R&&R,D=e.userAgent,M=void 0===D?"unknown":D,N=e.userId;return xt(void 0,void 0,void 0,function(){var e,r,o,s,c,f,h,y,b,S,E,x,C,O,R,D,F,j,U,B,V,G,q,H,K,z,Q,W,Y,X,J,$,Z;return kt(this,function(ee){switch(ee.label){case 0:e=new Map,r=Ie(P),o=[],ee.label=1;case 1:return ee.trys.push([1,8,,9]),[4,rt({messageHandlers:o,server:I,transactionMap:e},r)];case 2:return s=ee.sent(),c=s.socket,f=s.killSocket,[4,nt({socket:c,transactionMap:e},r)];case 3:return h=ee.sent(),y=h,[4,tt({clientId:i,correlationVector:u,sessionId:h,socket:c,transactionMap:e},r)];case 4:return b=ee.sent(),S=b,[4,Promise.all([_t({clientId:i,clientVersion:a,correlationVector:u,device:d,deviceVersion:p,gaFlags:g,handleId:b,isEmbed:_,os:w,osVersion:T,platform:k,playerVersion:A,sessionGuid:L,sessionId:h,socket:c,transactionMap:e,userAgent:M,userId:N},r),vt({accessKey:t,channelId:n,clientId:i,handleId:b,sessionId:h,socket:c,transactionMap:e},r),Tt({correlationVector:u,clientId:i,handleId:b,sessionId:h,socket:c,transactionMap:e})])];case 5:if(E=ee.sent(),x=E[0].autoBitrateInfo,C=E[1],O=E[2],r.log("Auto bitrate status:",x),R=et(["0","feed_id"])(C),D=et(["0","streams"])(C),r.log("Access Key: "+t),!D||Array.isArray(D)&&!D.length)throw r.log(JSON.stringify(C)),new Error("[Client] No qualities available");return r.log("Selecting Default Quality"),F=-1,l&&(j=l(D))&&(F=+j.stream_id),[4,St({accessKey:t,channelId:n,clientId:i,feedId:R,handleId:b,sessionId:h,streamId:F,socket:c,transactionMap:e},r)];case 6:if(U=ee.sent(),!(B=new RTCSessionDescription(et(["jsep"])(U))))throw r.log(JSON.stringify(U)),new Error("[Client] Null or empty remoteDescription");if(!B.type)throw r.log(JSON.stringify(U)),new Error("[Client] Remote description required type field is empty");if(null==B.sdp)throw r.log(JSON.stringify(U)),new Error("[Client] Remote description sdp is null");return V=et(["plugindata","data","result","result","actual_stream_id"])(U),G=et(["plugindata","data","result","result","janus_flags"])(U),q=ft(et(["plugindata","data","result","result","auto_bw"])(U)),[4,Ze({clientId:i,correlationVector:u,handleId:b,iceServers:v,remoteDescription:B,sessionId:h,socket:c,transactionMap:e},r)];case 7:return H=ee.sent(),K=H.getStats,z=H.mediaStream,Q=H.peerConnection,W=H.killPeerConnection,Y=function(t){var n=t.shouldMuteAudio,o=t.shouldMuteVideo;return function(e,t){var n=e.clientId,r=e.handleId,i=e.sessionId,o=e.shouldMuteAudio,a=e.shouldMuteVideo,s=e.socket,u=e.transactionMap;return void 0===t&&(t=Ie(!1)),t.log("Sending mute request","MuteAudio: "+o+", MuteVideo: "+a),Ge({data:Me({clientId:n,handleId:r,sessionId:i,shouldMuteAudio:o,shouldMuteVideo:a}),socket:s,transactionMap:u})}({clientId:i,handleId:b,sessionId:h,shouldMuteAudio:n,shouldMuteVideo:o,socket:c,transactionMap:e},r)},X=function(a){return function(e,t){var n=e.accessKey,r=e.channelId,i=e.clientId,o=e.feedId,a=e.handleId,s=e.messageHandlers,u=e.sessionId,l=e.socket,c=e.streamId,d=e.transactionMap;void 0===t&&(t=Ie(!1));var f=function(e){var t=e.accessKey,n=e.channelId;return{janus:"message",body:{access_key:t,client_id:e.clientId,feed_id:e.feedId,id:n,request:"switch",stream_id:e.streamId},handle_id:e.handleId,session_id:e.sessionId}}({accessKey:n,channelId:r,clientId:i,feedId:o,streamId:c,handleId:a,sessionId:u});return t.log("Sending switch request",f),new Promise(function(e){var t=function(n){var i=et(["plugindata","data","result"])(n);if(i&&"switched"===i.status){var a=i.channel_id,u=i.feed_id,l=i.stream_id;if(a===r&&u===o&&l===c){var d=s.findIndex(function(e){return e===t});s.splice(d,1),e()}}};s.push(t),Ge({data:f,socket:l,transactionMap:d})})}({accessKey:t,channelId:n,clientId:i,feedId:R,handleId:b,messageHandlers:o,sessionId:h,socket:c,streamId:a,transactionMap:e},r)},J=function(e,t){var n=e.intervalMs,r=e.sessionId,i=e.socket,o=e.transactionMap;void 0===t&&(t=Ie(!1));var a=setInterval(function(){var e;t.log("Sending keep alive request"),Ge({data:(e={sessionId:r},{janus:"keepalive",session_id:e.sessionId}),socket:i,transactionMap:o}).catch(function(e){t.error("Unable to send keep alive",e),clearInterval(a)})},n);return a}({intervalMs:m,sessionId:h,socket:c,transactionMap:e},r),[2,{defaultQualityIndex:D.findIndex(function(e){return e.stream_id===V}),getStats:K,killStream:function(){clearInterval(J),W(),f()},hostName:O,mediaStream:z,mute:Y,peerConnection:Q,janusFlags:G,qualities:D,socket:c,switchQuality:X,setAutoBwState:ut({socket:c,session_id:y,handle_id:S}),getAutoBwState:lt({socket:c,session_id:y,handle_id:S}),sendPlaybackStats:mt({socket:c,session_id:y,handle_id:S}),autoStatus:q,setAutoState:pt({socket:c,session_id:y,handle_id:S}),getAutoState:ht({socket:c,session_id:y,handle_id:S})}];case 8:throw $=ee.sent(),r.error("Unable to load stream ",$),(Z=$||new Error("Unknown failure in loading stream")).trace=r.getTrace(),Z;case 9:return[2]}})})},At=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return a(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new te;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(ie),It=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return a(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return a(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(H)),Ot=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),Lt=function(e){function t(n,r){void 0===r&&(r=Ot.now);var i=e.call(this,n,function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return a(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Ot),Rt=new Lt(It);function Pt(e,t){var n;return void 0===e&&(e=0),void 0===t&&(t=Rt),(B(n=e)||!(n-parseFloat(n)+1>=0)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=Rt),new $(function(n){return n.add(t.schedule(Dt,e,{subscriber:n,counter:0,period:e})),n})}function Dt(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}var Mt,Nt=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Ft(e,this.predicate,this.thisArg))},e}(),Ft=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return a(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(Q),jt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return a(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(It),Ut=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(Lt))(jt);function Bt(e){return e&&"function"==typeof e.schedule}function Vt(e,t){return new $(function(n){var r=new H,i=0;return r.add(t.schedule(function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function Gt(e,t){return t?Vt(e,t):new $(ge(e))}function qt(e){var t=e.error;e.subscriber.error(t)}Mt||(Mt={});var Ht=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e,t;switch(this.kind){case"N":return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Bt(n)?(e.pop(),Vt(e,n)):Gt(e)}(this.value);case"E":return e=this.error,new $(t?function(n){return t.schedule(qt,0,{error:e,subscriber:n})}:function(t){return t.error(e)});case"C":return le()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();var Kt=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return a(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new zt(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Ht.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Ht.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Ht.createComplete()),this.unsubscribe()},t}(Q),zt=function(){return function(e,t){this.notification=e,this.destination=t}}(),Qt=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return a(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new Wt(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new te;if(this.isStopped||this.hasError?t=H.EMPTY:(this.observers.push(e),t=new ne(this,e)),i&&e.add(e=new Kt(e,i)),n)for(var a=0;a<o&&!e.closed;a++)e.next(r[a]);else for(a=0;a<o&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||Ut).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(ie),Wt=function(){return function(e,t){this.time=e,this.value=t}}();var Yt=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new Xt(e,this.compare,this.keySelector))},e}(),Xt=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return a(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(e){return this.destination.error(e)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},t}(Q),Jt=function(){function e(e){this.qualities$=new ie,this.switching$=new ie,this.stop$=new Qt(1),this.error$=new ie,this.warning$=new ie,this.failure$=new ie,this.audioTracks$=new ie,this.captioned$=new At(!1),this.captionsEnabled$=new At(!1),this.loading$=new At(!0),this.hostName$=new At("unknown"),this.stats$=new ie,this.quality$=new ie,this.auto$=new At({autoAvailable:!1,autoEnabled:!1}),this.playing$=new At(!1),this.muted$=new At(!1),this.audioOnly$=new At(!1),this.promptDowngrade$=new ie,this.supportedConfig=e}return e.prototype.failure=function(){return this.failure$.asObservable()},e.prototype.captioned=function(){return this.captioned$.asObservable()},e.prototype.captionsEnabled=function(){return this.captionsEnabled$.asObservable()},e.prototype.audioTracks=function(){return this.audioTracks$.asObservable()},e.prototype.error=function(){return this.error$.asObservable()},e.prototype.warning=function(){return this.warning$.asObservable()},e.prototype.qualities=function(){return this.qualities$.asObservable()},e.prototype.quality=function(){return this.quality$.asObservable()},e.prototype.auto=function(){return this.auto$.asObservable()},e.prototype.switching=function(){return this.switching$.asObservable()},e.prototype.hostName=function(){return this.hostName$.asObservable().pipe(function(n){return n.lift(new Yt(e,t))});var e,t},e.prototype.stats=function(){return this.stats$},e.prototype.getQualityStats=function(){return{currentEncodeFps:f,isSource:!1}},e.prototype.setQuality=function(e){},e.prototype.setAuto=function(e){},e.prototype.getAuto=function(){return Promise.reject("Not supported on current transport")},e.prototype.getKind=function(){throw new Error("abstract transport should not be used")},e.prototype.setCaptionsShowing=function(e){},e.prototype.setAudioTrack=function(e){},e.prototype.stop=function(){},e.prototype.play=function(){},e.prototype.pause=function(){},e.prototype.destroy=function(){},e.prototype.setAudioOnly=function(e){},e.prototype.setMute=function(e){},e.prototype.playing=function(){return this.playing$.asObservable()},e.prototype.muted=function(){return this.muted$.asObservable()},e.prototype.adjustMaxSize=function(e,t){},e.prototype.audioOnly=function(){return this.audioOnly$.asObservable()},e.prototype.getCurrentStreamTime=function(e){},e.prototype.promptDowngrade=function(){return this.promptDowngrade$.asObservable()},e.prototype.sendPlaybackStatsToJanus=function(e){},e}(),$t=function(){},Zt=y.name,en=y.osname,tn=y.osversion,nn=y.version,rn=function(e){function t(t){var n=t.clientId,r=t.isEmbed,i=void 0!==r&&r,o=t.supportedConfig,a=t.qualitySelector,s=t.statsIntervalMs,u=t.logger,l=t.sessionGuid,c=void 0===l?"":l,d=t.telemetry,f=t.userId,p=e.call(this,o)||this;return p.hasStreamLoaded$=new At(!1),p.destroyed$=new ie,p.feeds$=new ie,p.isEmbed=!1,p.currentQualityIndex=-1,p.onMessage=function(e){var t=e.data,n=JSON.parse(t),r=T(["error"])(n),i=T(["plugindata","data","error"])(n),o=T(["plugindata","data","result","status"])(n);if(r){var a=r.code,s=r.reason;p.logger.error("Janus Error: "+s),p.onError({code:a,details:s,fatal:"rate limit exceeded"===s})}else if(i){var u=T(["plugindata","data"])(n),l=u.error,c=u.error_code;p.logger.error("Janus Plugin Error: "+l),p.onError({code:c,details:l,fatal:!1})}else if(o&&"switching"===o){var d=T(["plugindata","data","result","state"])(n);p.switching$.next(!0),d&&"number"==typeof d.to_stream_id&&p.setQualityIndex(d.to_stream_id)}else o&&"switched"===o?p.switching$.next(!1):o&&"starting"===o?p.startingMessageTimeoutId=setTimeout(function(){p.onError({details:"Started Janus Message Timed Out",fatal:!0,transportFatal:!0})},2e3):p.startingMessageTimeoutId&&o&&"started"===o&&clearTimeout(p.startingMessageTimeoutId)},p.onClose=function(){p.onError({details:"WebSocket closed",fatal:!0}),p.destroy()},p._mute=$t,p._killStream=$t,p._switchQuality=$t,p._setAuto=$t,p._getAuto=$t,p._sendPlaybackStats=$t,p.clientId=n,p.qualitySelector=a,p.statsIntervalMs=s,p.logger=u,p.sessionGuid=c,p.telemetry=d,p.userId=f,p.isEmbed=i,p}return a(t,e),t.prototype.setQualityIndex=function(e){var t=this.localQualities.filter(function(t){return t.stream_id===e});if(t&&t.length>0){var n=t[0].display_name;this.currentQualityIndex=this.localQualities.findIndex(function(e){return e.display_name===n}),this.quality$.next(this.currentQualityIndex)}},t.prototype.getQualityStats=function(){var e=f,t=!1;return this.localQualities&&this.currentQualityIndex>=0&&(e=this.localQualities[this.currentQualityIndex].frame_rate,t=this.localQualities[this.currentQualityIndex].is_source),{currentEncodeFps:e,isSource:t}},t.prototype.setQuality=function(e){return c(this,void 0,void 0,function(){var t,n,r;return d(this,function(i){switch(i.label){case 0:return this.switching$.next(!0),(t=this.auto$.getValue())&&t.autoEnabled?[4,this._setAuto(!1)]:[3,2];case 1:n=i.sent(),this.auto$.next(n),i.label=2;case 2:return r=this.localQualities[e].stream_id,[4,this._switchQuality(r)];case 3:return i.sent(),this.currentQualityIndex=e,this.quality$.next(this.currentQualityIndex),this.switching$.next(!1),[2]}})})},t.prototype.setAuto=function(e){return c(this,void 0,void 0,function(){var t;return d(this,function(n){switch(n.label){case 0:return[4,this._setAuto(e)];case 1:return t=n.sent(),this.auto$.next(t),[2]}})})},t.prototype.getAuto=function(){return this._getAuto()},t.prototype.stop=function(){this.destroy()},t.prototype.play=function(){return c(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.playing$.next(!0),[4,this._mute({shouldMuteAudio:this.muted$.getValue(),shouldMuteVideo:this.audioOnly$.getValue()})];case 1:return t.sent(),[3,3];case 2:throw e=t.sent(),this.logger.error(e),e;case 3:return[2]}})})},t.prototype.pause=function(){return c(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.playing$.next(!1),[4,this._mute({shouldMuteAudio:!0,shouldMuteVideo:!0})];case 1:return t.sent(),[3,3];case 2:throw e=t.sent(),this.logger.error(e),e;case 3:return[2]}})})},t.prototype.loadStream=function(e,t,n,r){var i=t.iceServers,o=t.server;return c(this,void 0,void 0,function(){var t,a,s,u,l,f,p,g,y,m,v,b,_,S,w,E,T,x,k,C,A=this;return d(this,function(I){switch(I.label){case 0:(t=this.telemetry).incrementXpertCv(),I.label=1;case 1:return I.trys.push([1,3,,4]),[4,Ct({accessKey:n,clientId:Zt,clientVersion:""+nn,channelId:e,correlationVector:t.getXpertCv(),keepAliveIntervalMs:15e3,iceServers:i,selectDefaultQuality:function(e){if(A.qualitySelector){var t=e.map(function(e){return{displayName:e.display_name,height:e.height,width:e.width,bitrate:e.kbps}}),n=A.qualitySelector(t);if(n)return e[t.indexOf(n)]||null}},isEmbed:this.isEmbed,os:""+en,osVersion:""+tn,platform:this.clientId,server:o,sessionGuid:this.sessionGuid,userAgent:navigator.userAgent,userId:this.userId})];case 2:return a=I.sent(),s=a.defaultQualityIndex,u=a.getStats,l=a.hostName,f=a.killStream,p=a.janusFlags,g=a.mediaStream,y=a.mute,m=a.peerConnection,v=a.socket,b=a.switchQuality,_=a.getAutoBwState,S=a.setAutoBwState,w=a.sendPlaybackStats,E=a.autoStatus,T=a.setAutoState,x=a.getAutoState,k=a.qualities,this.getAutoBwState=_,this.setAutoBwState=S,this._sendPlaybackStats=w||$t,this._mute=y||$t,this._killStream=f?function(){v.removeEventListener("message",A.onMessage),f()}:$t,this._switchQuality=b||$t,this._setAuto=T||$t,this._getAuto=x||$t,this.localQualities=k,this.currentQualityIndex=s,Pt(this.statsIntervalMs).pipe(we(this.destroyed$)).subscribe(function(){return c(A,void 0,void 0,function(){var e,t,n;return d(this,function(r){switch(r.label){case 0:return[4,u()];case 1:return e=r.sent(),t=e.audioStats,n=e.videoStats,this.stats$.next({audioStats:t,videoStats:n}),[2]}})})}),v.addEventListener("message",this.onMessage),v.addEventListener("close",this.onClose),m.onconnectionstatechange=function(){switch(m.connectionState){case"closed":case"disconnected":case"failed":A.onError({details:"WebRTC PeerConnection closed",fatal:!0}),A.destroy()}},this.destroyed$.pipe(ce(1)).subscribe(function(){v.removeEventListener("close",A.onClose),m.onconnectionstatechange=null}),r(g),this.telemetry.logJanusFlags(p),h||this.telemetry.logVideoPlaybackRendering({duration:0,sdkVersion:Ae,success:!0,timeoutMs:0,transcodesAvailable:D.TernaryType.UNKNOWN,transport:D.TransportType.FTL}),setTimeout(function(){A.qualities$.next(k.map(function(e){return{displayName:e.display_name,width:e.width,height:e.height,bitrate:e.kbps}})),A.quality$.next(s),A.auto$.next(E),A.hostName$.next(l),A.playing$.next(!0),A.hasStreamLoaded$.next(!0)}),[3,4];case 3:throw C=I.sent(),this.logger.error("Unable to load FTL stream: "+C.message),C;case 4:return[2]}})})},t.prototype.feeds=function(){return this.feeds$},t.prototype.getKind=function(){return"ftl"},t.prototype.setAudioTrack=function(e){},t.prototype.setCaptionsShowing=function(e){},t.prototype.destroy=function(){var e,t,n=this;this.hasStreamLoaded$.pipe((e=function(e){return e},function(n){return n.lift(new Nt(e,t))}),we(this.destroyed$)).subscribe(function(){n.destroyed$.next(),n._killStream(),n._mute=$t,n._killStream=$t,n._switchQuality=$t,n.setAutoBwState=$t,n.getAutoBwState=$t,n._sendPlaybackStats=$t})},t.prototype.setAudioOnly=function(e){return c(this,void 0,void 0,function(){var t;return d(this,function(n){switch(n.label){case 0:return t=!this.playing$.getValue(),this.audioOnly$.next(e),[4,this._mute({shouldMuteAudio:t,shouldMuteVideo:t||e})];case 1:return n.sent(),[2]}})})},t.prototype.setMute=function(e){return c(this,void 0,void 0,function(){var t;return d(this,function(n){switch(n.label){case 0:return t=!this.playing$.getValue(),this.muted$.next(e),[4,this._mute({shouldMuteAudio:e||t,shouldMuteVideo:this.audioOnly$.getValue()||t})];case 1:return n.sent(),[2]}})})},t.prototype.onError=function(e){var t=e.code,n=e.details,r=e.name;this.logger.error("FTL Transport Errors: "+t+": "+r+" - "+n),this.telemetry.logTransportIncident({details:n,errorCode:t,errorName:r,hostName:this.hostName$.getValue(),incidentType:D.TransportIncidentType.FTL_ERROR,transport:D.TransportType.FTL}),this.error$.next(e)},t.prototype.switchStreams=function(e,t){this.switching$.next(!0),this._switchQuality(t)},t.prototype.sendPlaybackStatsToJanus=function(e){return c(this,void 0,void 0,function(){return d(this,function(t){return this._sendPlaybackStats(e),[2]})})},t.prototype.getCurrentStreamTime=function(e){},t}(Jt),on=h?g("https://c-ning.videosvc.mixer.com/dependencies/hls.js/0.12.4/hls.min.js").catch(function(e){return g("https://mixer.com/_latest/assets/js/hls.js")}):Promise.reject(),an=function(){if(!h)return!1;var e=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!r};function sn(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new un(e,t))}}var un=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new ln(e,this.project,this.thisArg))},e}(),ln=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return a(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Q);Object.prototype.toString;function cn(e,t,n,r){return M(n)&&(r=n,n=void 0),r?cn(e,t,n).pipe(sn(function(e){return B(e)?r.apply(void 0,e):r(e)})):new $(function(r){!function e(t,n,r,i,o){var a;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var s=t;t.addEventListener(n,r,o),a=function(){return s.removeEventListener(n,r,o)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var u=t;t.on(n,r),a=function(){return u.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var l=t;t.addListener(n,r),a=function(){return l.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var c=0,d=t.length;c<d;c++)e(t[c],n,r,i,o)}i.add(a)}(e,t,function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)},r,n)})}function dn(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[Y]}(e))return function(e,t){return new $(function(n){var r=new H;return r.add(t.schedule(function(){var i=e[Y]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}(e,t);if(be(e))return function(e,t){return new $(function(n){var r=new H;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r})}(e,t);if(ve(e))return Vt(e,t);if(function(e){return e&&"function"==typeof e[me]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new $(function(n){var r,i=new H;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[me](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function fn(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(fn(function(n,r){return(i=e(n,r),o?dn(i,o):i instanceof $?i:new $(_e(i))).pipe(sn(function(e,i){return t(n,e,r,i)}));var i,o},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new pn(e,n))})}var pn=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new hn(e,this.project,this.concurrent))},e}(),hn=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return a(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new he(this,void 0,void 0);this.destination.add(r),Se(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(pe);function gn(e){return e}function yn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return Bt(i)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof i&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof $?e[0]:function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),fn(gn,e)}(n)(Gt(e,r))}var mn=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new vn(e,this.total))},e}(),vn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return a(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(Q);var bn,_n=function(e){return e},Sn=function(e){return{displayName:e.name?e.name:e.height+"p",width:e.width,height:e.height,bitrate:e.bitrate}},wn=function(e){function t(t,n,r,i,o){var a=e.call(this,n)||this;return a.channelId=t,a.metricsLogger=i,a.telemetry=o,a.showCaptions=!1,a.audioTrack=0,a.isAudioOnly=!1,a.hlsManifest=new Qt(1),a.levelOriginalIndexMap=[],a.isMute=!1,a.hlsQualityIndex=-1,a.qualitySelector=function(e){return e[0]},a.currentEncodeFps=f,a}return a(t,e),t.prototype.stashManifest=function(e){var t=e.data;this.hlsManifest.next("string"==typeof t?t:String.fromCharCode.apply(null,new Uint16Array(t)))},t.prototype.setupHLS=function(e,t,n,r,i,o,s){var u=this;void 0===n&&(n=function(){}),void 0===r&&(r=_n),void 0===i&&(i=!1),void 0===o&&(o=!1),this.hostName$.next(e);var c=0,d=0,f=0,p=0,h=0,g=o?S(e,"showAudioOnly",2):e.replace("&showAudioOnly=2","");this.showCaptions=i,s&&(this.qualitySelector=s),this.isAudioOnly=o;var y,m=(y=function(t){t.url===e&&u.stashManifest(t)},function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.load=function(t,n,r){e.prototype.load.call(this,t,n,l({},r,{onSuccess:function(e){y(e),r.onSuccess.apply(this,arguments)}}))},t}(Hls.DefaultConfig.loader)),v=this.hls=function(e,t){var n={autoStartLoad:!1,appendErrorMaxRetry:10,liveMaxLatencyDurationCount:10,maxBufferLength:20,startFragPrefetch:!0,loader:e};return t&&(n.liveSyncDurationCount=t),new Hls(n)}(m,t);r(v),this.audioOnly$.next(o),cn(v,Hls.Events.LEVEL_SWITCHED,function(e,t){return t.level}).pipe(we(this.stop$)).subscribe(function(e){if(!(null==(n=e)||"number"==typeof n&&isNaN(n))){u.hlsQualityIndex=e;var t=u.levelOriginalIndexMap[e];u.quality$.next(t)}var n});var b=this.changedInstance(),_=new Map;cn(v,Hls.Events.MANIFEST_LOADED,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[1]}).pipe(we(b)).subscribe(function(e){var t=e.networkDetails,n=e.stats,r=e.url;u.telemetry.logQoSEvent({contentType:"application/json",cV:u.telemetry.getXpertCv(),currentOperationName:"hlsManifest",latencyMs:n.total,httpMethod:"GET",httpStatusCode:""+t.status,isSuccess:!0,operationName:"hlsManifest",operationVersion:"N/A",requestUri:r,responseSize:120,serviceErrorCode:-1,serviceName:"MixerVideoCDN-Fastly",serviceType:"WebService"})}),cn(v,Hls.Events.ERROR,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[1]}).pipe(we(b)).subscribe(function(e){var t,n=e.details,r=e.fatal,i=e.type;switch(n){case Hls.ErrorDetails.MANIFEST_LOAD_ERROR:c+=1;var o=e.response,a=e.url,s=(t="hlsLoadSource",performance.getEntriesByName("name").find(function(e){return"mark"===e.entryType&&e.name===t})),p=s?Math.trunc(performance.now()-s.startTime):-1,g=u.telemetry;g.logQoSEvent({contentType:"application/json",cV:g.getXpertCv(),currentOperationName:"hlsManifest",latencyMs:p,httpMethod:"GET",httpStatusCode:""+o.code,isSuccess:!1,operationName:"fastly",operationVersion:"N/A",requestUri:a,responseSize:-1,serviceErrorCode:Number(o.code),serviceName:"MixerVideoCDN-Fastly",serviceType:"WebService"});break;case Hls.ErrorDetails.BUFFER_STALLED_ERROR:v.media.currentTime>60?(d+=1,f=Number((60*d/v.media.currentTime).toFixed(2))):d=1;break;case Hls.ErrorDetails.FRAG_PARSING_ERROR:h+=1}if(r)switch(i){case Hls.ErrorTypes.NETWORK_ERROR:v.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:v.recoverMediaError()}_.set(n,_.get(n)+1||1),u.metricsLogger.logHLSError(u.channelId,n,r,u.hostName$.getValue(),(new Date).toString(),_.get(n)||1),u.telemetry.logTransportIncident(l({},e,{hostname:u.hostName$.getValue(),manifest:w,incidentType:D.TransportIncidentType.HLS_ERROR,transport:D.TransportType.HLS})),console.error(e),u.error$.next({details:n,fatal:r})}),cn(v,Hls.Events.MEDIA_ATTACHED).pipe(ce(1),fn(function(){return u.setCaptionsShowing(u.showCaptions),n(),u.telemetry.incrementXpertCv(),performance.mark("hlsLoadSource"),v.loadSource(g),u.hls&&u.hls.media&&(u.hls.media.muted=u.isMute,u.isMute&&u.muted$.next(!0)),cn(v,Hls.Events.MANIFEST_PARSED).pipe(ce(1)).subscribe(function(e){var t=e[1].levels;t.length>0&&(u.hls.startLevel=u.hls.nextLevel=function(e,t){var n=e.map(Sn),r=t(n);return r?n.indexOf(r):-1}(t,u.qualitySelector),u.auto$.next({autoAvailable:!0,autoEnabled:u.hls.autoLevelEnabled})),u.hls.startLoad()}),cn(v,Hls.Events.MANIFEST_LOADED).pipe(ce(1))}),fn(function(){return u.updateCurrentQuality(),v.media&&cn(v.media,"loadedmetadata").pipe(ce(1)).subscribe(function(){if(u.hls.audioTracks.length>0){var e=u.hls.audioTracks.findIndex(function(e){return"English"===E(e.name)});u.hls.audioTrack=e||0}var t=Array.from(u.hls.media.textTracks).some(function(e){return"captions"===e.kind||"subtitles"===e.kind});return u.captioned$.next(t||i),!1}),cn(v,Hls.Events.FRAG_BUFFERED).pipe(ce(1))}),we(b)).subscribe(function(){u.playing$.next(!0)});var w,T=[],x=[],k=0,C=0,A=0,I=[];v.on(Hls.Events.FRAG_PARSING_DATA,function(e,t){"video"===t.type&&t.endPTS-t.startPTS>0&&(u.currentEncodeFps=Number((t.nb/(t.endPTS-t.startPTS)).toFixed(2)))}),v.on(Hls.Events.MANIFEST_LOADING,function(e,t){var n=t.url;return w=n}),v.on(Hls.Events.FRAG_LOADING,function(){return k=Date.now()}),v.on(Hls.Events.FRAG_LOADED,function(e,t){var n=t.frag,r=t.stats;T.push(r.total),x.push(Date.now()-k),C=r.retry,A+=1,I.push(n.duration)}),v.on(Hls.Events.FPS_DROP,function(e,t){t.currentDropped>10&&(v.media.currentTime>60?p++:p=1)}),Pt(6e4).pipe(we(this.stop$)).subscribe(function(){var e=u.hls.levels[u.hlsQualityIndex];if(e){var t=e.bitrate,n=e.height,r=e.width,i=n&&r?r+"x"+n:void 0;u.telemetry.logTransportStatistics({bitrate:t||void 0,hostName:u.hostName$.getValue(),fragDownloadTimes:x,fragSizes:T,manifest:w,resolution:i,retryCount:C,segmentCount:A,segmentDurations:I,transport:D.TransportType.HLS,networkErrorCount:c,bufferStallCount:d,fpsDropCount:p,corruptedSegmentCount:h,bufferStallRate:f,currentVideoTime:Number(v.media.currentTime.toFixed(2))}),x=[],T=[],C=0,A=0,I=[]}}),this.watchLevelChanges()},t.prototype.updateCurrentQuality=function(){var e=this.hls.levels.map(Sn).sort(function(e,t){return t.height-e.height});this.levelOriginalIndexMap=e.reduceRight(function(e,t,n){return e.concat([n])},[]),this.qualities$.next(e)},t.prototype.watchLevelChanges=function(){var e,t=this,n=this.hls;cn(n,Hls.Events.LEVEL_LOADED).pipe(we(this.changedInstance()),ce(1)).subscribe(function(){t.supportedConfig&&!t.supportedConfig.uhd&&t.hls.levels&&t.hls.levels[t.hls.levels.length-1].height>1440&&(t.hls.autoLevelCapping=t.hls.levels.length-2),t.updateCurrentQuality()}),yn(cn(n,Hls.Events.LEVEL_LOADED),cn(n,Hls.Events.LEVEL_UPDATED)).pipe(we(this.changedInstance()),(e=1,function(t){return t.lift(new mn(e))})).subscribe(function(){return t.updateCurrentQuality()})},t.prototype.getQualityStats=function(){return{currentEncodeFps:this.currentEncodeFps,isSource:!1}},t.prototype.setQuality=function(e){var t=this.levelOriginalIndexMap[e];this.hls&&(this.hls.nextLevel=t,this.auto$.next({autoAvailable:!0,autoEnabled:this.hls.autoLevelEnabled}))},t.prototype.setAuto=function(e){this.hls&&(this.hls.nextLevel=e?-1:this.hls.currentLevel,this.auto$.next({autoAvailable:!0,autoEnabled:this.hls.autoLevelEnabled}))},t.prototype.getAuto=function(){return Promise.resolve({autoAvailable:!0,autoEnabled:this.hls.autoLevelEnabled})},t.prototype.setAudioTrack=function(e){this.audioTrack=e,this.hls&&this.hls.audioTracks&&(this.hls.audioTrack=this.audioTrack)},t.prototype.setCaptionsShowing=function(e){var t=this;this.showCaptions=e,this.hls&&this.hls.media&&this.hls.media.textTracks&&(this.hls.media.textTracks.length>0?this.captionsEnabled$.next(x(this.hls.media,this.showCaptions)):this.hls.media.textTracks.addEventListener("addtrack",function(){t.hls.media&&t.captionsEnabled$.next(x(t.hls.media,t.showCaptions))},{once:!0}))},t.prototype.changedInstance=function(){return yn(this.stop$)},t.prototype.getKind=function(){return"hls"},t.prototype.destroy=function(){this.hls&&(this.stop$.next(void 0),this.hls.destroy())},t.prototype.setAudioOnly=function(e){this.isAudioOnly!==e&&this.error$.next({fatal:!0,details:"audioOnly changed"})},t.prototype.setMute=function(e){this.isMute=e,this.hls&&this.hls&&this.hls.media&&(this.hls.media.muted=e,this.muted$.next(e))},t.prototype.pause=function(){this.hls&&this.hls.media&&(this.hls.media.pause(),this.playing$.next(!1))},t.prototype.play=function(){this.hls&&this.hls.media&&(this.hls.media.play(),this.playing$.next(!0))},t.prototype.getCurrentStreamTime=function(e){},t.bufferSectionTime=1e3,t.bufferThresholdCount=4,t.bufferThresholdInterval=12e4,t}(Jt),En=(function(e){function t(t){return e.call(this,t)||this}a(t,e),t.prototype.getKind=function(){return"hls"}}(Jt),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getKind=function(){return"hls"},t}(Jt)),Tn="undefined"!=typeof document&&!!document.createElement("video").canPlayType("application/vnd.apple.mpegURL"),xn=function(){},kn=function(){function e(e){var t=e.onError,n=void 0===t?xn:t,r=e.onPlaying,i=void 0===r?xn:r,o=e.source,a=e.showingCaptions,s=e.captionsEnabled$;this.source="",this.showingCaptions=!1,this.source=o,this.onError=n,this.onPlaying=i,this.showingCaptions=a,s&&(this.captionsEnabled$=s)}return Object.defineProperty(e.prototype,"audioTrack",{set:function(e){this.el&&this.el.audioTracks&&this.el.audioTracks.length>e&&Array.from(this.el.audioTracks).forEach(function(t,n){return t.enabled=n===e})},enumerable:!0,configurable:!0}),e.prototype.attachMedia=function(e){var t=this;e.addEventListener("error",this.onError),e.addEventListener("playing",function(){return t.onPlaying(t.el)}),e.src=this.source,this.el=e,this.toggleCaptions(this.showingCaptions)},e.prototype.changeSource=function(e){this.source=e,this.el&&(this.el.src=this.source)},e.prototype.play=function(){this.el&&this.el.play()},e.prototype.pause=function(){this.el&&this.el.pause()},e.prototype.toggleCaptions=function(e){var t=this;this.showingCaptions=e,this.el&&this.el.textTracks&&(this.el.textTracks.length>0?this.captionsEnabled$&&this.captionsEnabled$.next(x(this.el,this.showingCaptions)):this.el.textTracks.addEventListener("addtrack",function(){t.captionsEnabled$&&t.el&&t.captionsEnabled$.next(x(t.el,t.showingCaptions))},{once:!0}))},e.prototype.getMediaError=function(){return this.el&&this.el.error},e}(),Cn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.source="",t}return a(t,e),t.prototype.play=function(){this.nativeHLS&&(this.nativeHLS.play(),this.playing$.next(!0))},t.prototype.pause=function(){this.nativeHLS&&(this.nativeHLS.pause(),this.playing$.next(!1))},t.prototype.generateHLS=function(e,t){var n=this;if(void 0===t&&(t=!1),!Tn)throw new Error("This platform does not support HLS playback natively, unable to use NativeHLSTransport!");this.source=e;var r=this.nativeHLS=new kn({onError:function(){var e=r.getMediaError(),t=!!e&&(4===e.code||3===e.code);n.error$.next({fatal:t,name:t?"Unable to playback HLS natively":"HLS playback error",details:JSON.stringify({code:e&&e.code,message:e&&e.message})})},onPlaying:function(e){if(n.auto$.next({autoAvailable:!0,autoEnabled:!0}),n.playing$.next(!0),n.qualities$.next([]),e&&(n.captioned$.next(!!(e.textTracks&&e.textTracks.length>0)),e.audioTracks&&e.audioTracks.length>1)){for(var t=[],r=0;r<e.audioTracks.length;r++){var i=e.audioTracks[r],o=i.language.toLowerCase().includes("eng");t.push({autoselect:o,default:o,lang:E(i.language),name:i.label})}n.audioTracks$.next(t)}},source:e,showingCaptions:t,captionsEnabled$:this.captionsEnabled$});return this.nativeHLS},t.prototype.setAudioOnly=function(e){if(this.nativeHLS){var t=e?S(this.source,"showAudioOnly",2):this.source;this.nativeHLS.changeSource(t)}},t.prototype.setAudioTrack=function(e){this.nativeHLS&&(this.nativeHLS.audioTrack=e)},t.prototype.setCaptionsShowing=function(e){this.nativeHLS&&this.nativeHLS.toggleCaptions(e)},t.prototype.getAuto=function(){return Promise.resolve({autoAvailable:!0,autoEnabled:!0})},t}(wn),An=function(e,t){return e.slice().sort(function(e,n){return t(e)-t(n)})},In=function(e){return function(t){return An(t,function(e){return-e.height}).find(e)||t[0]}},On=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i&&i(t);if(o)return o}}};!function(e){e.TurnOffNativeHls="WBvbkrcJRSiKXR20MORUZQ",e.ModeTestConductor="safqZA9rR7CkZ2fZswjnGQ"}(bn||(bn={}));var Ln=function(e){return T([e])("undefined"!=typeof document?T(["gaData","UA-48751750-9","experiments"])(window):void 0)},Rn=n(10),Pn={Normal:1,CostDeferred:2,RealTime:3},Dn="a387cfcf60114a43a7699f9fbb49289e-9bceb9fe-1c06-460f-96c5-6a0b247358bc-7238",Mn="1.0.0-beta.6",Nn="1DS-Web-JS-"+Mn,Fn="undefined",jn=null,Un=null,Bn=Boolean("undefined"!=typeof document&&document.cookie);function Vn(e){return"string"==typeof e}function Gn(e){return"number"==typeof e}function qn(e){return"boolean"==typeof e}function Hn(e){var t=e.indexOf("-");return t>-1?e.substring(0,t):""}function Kn(){return null===jn&&(jn=typeof navigator!==Fn&&Boolean(navigator.sendBeacon)),jn}function zn(){return null===Un&&(Un=typeof Uint8Array!==Fn&&!function(){if(typeof navigator!==Fn&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if((e.indexOf("safari")>=0||e.indexOf("firefox")>=0)&&e.indexOf("chrome")<0)return!0}return!1}()&&!Xn()),Un}function Qn(e){return!!(Gn(e)&&e>=1&&e<=3)}function Wn(e,t){if(!Vn(e)||null==t||""===t)return null;if(Vn(t)||Gn(t)||qn(t)||Jn(t))t={value:t};else if("object"!=typeof t||t.value){if(void 0===t.value||null===t.value||""===t.value||!Vn(t.value)&&!Gn(t.value)&&!qn(t.value)&&!Jn(t.value))return null}else t={value:JSON.stringify(t)};if(Jn(t.value)&&!function(e){if(e.length>0)return Vn(e[0])||qn(e[0])||Gn(e[0]);return!1}(t.value))return null;if(void 0!==t.kind){if(Jn(t.value)||!function(e){if(Gn(e)&&(e>=0&&e<=13||32===e))return!0;return!1}(t.kind))return null;t.value=t.value.toString()}return t}function Yn(e){return e.getUTCFullYear()+"-"+rr(e.getUTCMonth()+1)+"-"+rr(e.getUTCDate())+"T"+rr(e.getUTCHours())+":"+rr(e.getUTCMinutes())+":"+rr(e.getUTCSeconds())+"."+function(e){if(e<10)return"00"+e;if(e<100)return"0"+e;return e.toString()}(e.getUTCMilliseconds())+"Z"}function Xn(){return!(typeof navigator===Fn||!navigator.product)&&"ReactNative"===navigator.product}function Jn(e){return e instanceof Array}function $n(e,t){var n=-1;return t>0&&(32===t?n=1<<13:t<=13&&(n=t<<5)),Jn(e)&&(e=e[0]),-1!==n?n|function(e){if(Gn(e))return 6;if(Vn(e))return 1;if(qn(e))return 7}(e):Gn(e)?6:void 0}function Zn(){return Bn}function er(e,t,n){if(Bn){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var i="; expires="+r.toUTCString();window.document.cookie=e+"="+t+i+"; path=/;"}}function tr(e){er(e,"",-1)}function nr(e){if(Bn){e+="=";for(var t=decodeURIComponent(document.cookie).split(";"),n=0;n<t.length;n++){for(var r=t[n],i=0;" "===r.charAt(i);)i++;if(0===(r=r.substring(i)).indexOf(e))return r.substring(e.length,r.length)}}return""}function rr(e){return e<10?"0"+e:e.toString()}var ir=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),or=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ir(t,e),t.prototype.initialize=function(t,n){if(t){t.endpointUrl||(t.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var r=t.propertyStorageOverride;if(r&&(!r.getProperty||!r.setProperty))throw"Invalid property storage override passed.";t.getWParam=function(){return"undefined"!=typeof document?0:-1}}e.prototype.initialize.call(this,t,n)},t.prototype.track=function(t){t&&(Qn(t.latency)||(t.latency=Pn.Normal)),e.prototype.track.call(this,t)},t}(Rn.AppInsightsCore),ar="MicrosoftApplicationsTelemetryDeviceId",sr="Windows",ur="Mac OS X",lr="Android",cr=/(windows|win32)/i,dr=/ arm;/i,fr=/windows\sphone\s\d+\.\d+/i,pr=/(macintosh|mac os x)/i,hr=/(ipad|iphone|ipod)(?=.*like mac os x)/i,gr=/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,yr=/android/i,mr=/CrOS/i,vr={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},br="undefined",_r="MSIE",Sr="Chrome",wr="Firefox",Er="Safari",Tr="Edge",xr="Electron",kr="SkypeShell",Cr="PhantomJS",Ar="Opera",Ir=function(){function e(e,t){for(var n in this._propertiesPlugin=t,this._utils=r,this._config={userAgent:typeof navigator!==br?navigator.userAgent:""},e)e.hasOwnProperty(n)&&(this._config[n]=e[n])}return e.prototype.initialize=function(e,t){void 0===t&&(t=!1),e&&(this._propertyStorage=e),this._autoCollect(),this._autoCollectFromUserAgent(this._config.userAgent),!t||this._propertyStorage?(this._propertyStorage||this._utils.cookieAvailable()&&!t)&&this._autoCollectInstallId():this._utils.deleteCookie(ar)},e.prototype._autoCollect=function(){if(this._setPartA("ver","4.0"),this._setPartA("ext.utc.popSample",100),this._setPartA("ext.sdk.ver",r.FullVersionString),typeof window!==br){var e=window.location;if(e){var t=e.hostname;t&&this._setPartA("ext.web.domain","file:"===e.protocol?"local":t)}}if(!this._disableCookies&&this._utils.cookieAvailable()){this._setPartA("ext.intweb.msfpc",this._utils.getCookie("MSFPC"));var n=this._utils.getCookie("MUID");n&&this._setPartA("ext.user.localId","t:"+n),this._setPartA("ext.intweb.anid",this._utils.getCookie("ANON").slice(0,34))}if(typeof document!==br){var i=document.documentElement;i&&this._setPartA("ext.app.locale",i.lang)}if(typeof navigator!==br){var o=navigator;this._setPartA("ext.user.locale",o.userLanguage||o.language)}var a=(new Date).getTimezoneOffset(),s=a%60,u=(a-s)/60,l="+";u>0&&(l="-"),u=Math.abs(u),s=Math.abs(s),this._setPartA("ext.loc.tz",l+(u<10?"0"+u:u.toString())+":"+(s<10?"0"+s:s.toString()))},e.prototype._autoCollectFromUserAgent=function(e){if(e){var t=this._getOsName(e.toLowerCase());this._setPartA("ext.os.name",t),this._setPartA("ext.os.ver",this._getOsVersion(e,t));var n=this._getBrowserName(e);this._setPartA("ext.web.browser",n),this._setPartA("ext.web.browserVersion",this._getBrowserVersion(e,n))}},e.prototype._autoCollectInstallId=function(){var e=this._getData(ar);e||(e=Rn.CoreUtils.newGuid()),this._saveData(ar,e),this._setPartA("ext.sdk.installId",e)},e.prototype._getOsName=function(e){return e.match(fr)?"Windows Phone":e.match(dr)?"Windows RT":e.match(cr)?sr:e.match(hr)?"iOS":e.match(yr)?lr:e.match(gr)?"Linux":-1!==e.indexOf("x11")?"Unix":-1!==e.indexOf("blackberry")?"BlackBerry":-1!==e.indexOf("symbian")?"Symbian":-1!==e.indexOf("nokia")?"Nokia":e.match(pr)?ur:e.match(mr)?"Chrome OS":"Unknown"},e.prototype._getOsVersion=function(e,t){return t===sr?this._getGenericOsVersion(e,"Windows NT"):t===lr?this._getGenericOsVersion(e,t):t===ur?this._getMacOsxVersion(e):"Unknown"},e.prototype._getGenericOsVersion=function(e,t){var n=e.match(new RegExp(t+" ([\\d,.]+)"));return n?vr[n[1]]?vr[n[1]]:n[1]:"Unknown"},e.prototype._getMacOsxVersion=function(e){var t=e.match(new RegExp(ur+" ([\\d,_,.]+)"));if(t){var n=t[1].replace(/_/g,".");if(n){var r=this._getDelimiter(n);return r?n.split(r)[0]:n}}return"Unknown"},e.prototype._getBrowserName=function(e){return this._userAgentContainsString("OPR/",e)?Ar:this._userAgentContainsString(Cr,e)?Cr:this._userAgentContainsString(Tr,e)?Tr:this._userAgentContainsString(xr,e)?xr:this._userAgentContainsString(Sr,e)?Sr:this._userAgentContainsString("Trident",e)?_r:this._userAgentContainsString(wr,e)?wr:this._userAgentContainsString(Er,e)?Er:this._userAgentContainsString(kr,e)?kr:"Unknown"},e.prototype._userAgentContainsString=function(e,t){return t.indexOf(e)>-1},e.prototype._getBrowserVersion=function(e,t){return t===_r?this._getIeVersion(e):this._getOtherVersion(t,e)},e.prototype._getIeVersion=function(e){var t=e.match(new RegExp(_r+" ([\\d,.]+)"));if(t)return t[1];var n=e.match(new RegExp("rv:([\\d,.]+)"));return n?n[1]:void 0},e.prototype._getOtherVersion=function(e,t){e===Er&&(e="Version");var n=t.match(new RegExp(e+"/([\\d,.]+)"));return n?n[1]:"Unknown"},e.prototype._getDelimiter=function(e){return e.indexOf(".")>-1?".":e.indexOf("_")>-1?"_":null},e.prototype._saveData=function(e,t){this._propertyStorage?this._propertyStorage.setProperty(e,t):this._utils.setCookie(e,t,365)},e.prototype._getData=function(e){return this._propertyStorage?this._propertyStorage.getProperty(e)||"":this._utils.getCookie(e)},e.prototype._setPartA=function(e,t){this._propertiesPlugin._addProperty(e,t,this._propertiesPlugin._partAPerTenant)},e}(),Or=function(){function e(){this.identifier="SystemPropertiesCollector",this.priority=3,this._partAPerTenant={"":{}},this._propertiesPerTenant={},this._sequenceIdMap={}}return e.prototype.initialize=function(e,t,n){e.extensionConfig=e.extensionConfig||[],e.extensionConfig[this.identifier]=e.extensionConfig[this.identifier]||{},this._autoCollection=new Ir(e.extensionConfig[this.identifier],this),this._autoCollection.initialize(e.propertyStorageOverride,e.disableCookiesUsage)},e.prototype.processTelemetry=function(e){e.ctx=e.ctx?e.ctx:{},e.data=e.data?e.data:{},e.ctx["ext.sdk.seq"]={value:this._getSequenceId(e.iKey)},this._addPropertiesIfAbsent(this._partAPerTenant[e.iKey],e.ctx),this._addPropertiesIfAbsent(this._partAPerTenant[""],e.ctx),this._addPropertiesIfAbsent(this._propertiesPerTenant[e.iKey],e.data),this._addPropertiesIfAbsent(this._propertiesPerTenant[""],e.data),this._nextPlugin.processTelemetry(e)},e.prototype.setNextPlugin=function(e){this._nextPlugin=e},e.prototype._addProperty=function(e,t,n,r){n[r=r||""]||(n[r]={}),n[r][e]=t},e.prototype.setAppId=function(e,t){this._addPartAContext("ext.app.id",e,t)},e.prototype.setAppVersion=function(e,t){this._addPartAContext("ext.app.ver",e,t)},e.prototype.setAppLanguage=function(e,t){this._addPartAContext("ext.app.locale",e,t)},e.prototype.setUserLocalId=function(e,t){this._addPartAContext("ext.user.localId",e,t)},e.prototype.setUserLanguage=function(e,t){this._addPartAContext("ext.user.locale",e,t)},e.prototype.setSystemContext=function(e,t,n){this._addPartAContext(e,t,n)},e.prototype._addPartAContext=function(e,t,n){this._addProperty(e,t,this._partAPerTenant,n)},e.prototype._addPropertiesIfAbsent=function(e,t){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]||(t[n]=e[n]))},e.prototype._getSequenceId=function(e){return void 0===this._sequenceIdMap[e]&&(this._sequenceIdMap[e]=0),++this._sequenceIdMap[e]},e}(),Lr="REAL_TIME",Rr="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Pr=function(){function e(){}return e.getPayloadBlob=function(e,t){var n="",r={};for(var i in e)if(e.hasOwnProperty(i))for(var o=0;o<e[i].length;++o){n&&(n+="\n");var a=n.length;if((n+=this.getEventBlob(e[i][o])).length-a>2e6&&(delete e[i][o],n=n.substring(0,a)),n.length>3984588){r={};var s=e[i];e[i]=s.splice(0,o),r[i]=s;break}}return{payloadBlob:n,remainingRequest:r}},e.getEventBlob=function(e){var t={};if(t.name=e.name,t.time=e.time,t.iKey="o:"+r.getTenantId(e.iKey),e.ctx)for(var n in e.ctx)e.ctx.hasOwnProperty(n)&&this._addJSONProperty(t,n,r.sanitizeProperty(n,e.ctx[n]));if(t.data={},t.data.baseData={},t.data.baseType=e.baseType,e.baseData)for(var n in e.baseData)if(e.baseData.hasOwnProperty(n)){var i=r.sanitizeProperty(n,e.baseData[n]);this._addJSONProperty(t.data.baseData,n,i),this._addJSONPropertyMetaData(t.ext,"baseData."+n,i)}if(e.data)for(var n in e.data)if(e.data.hasOwnProperty(n)){i=r.sanitizeProperty(n,e.data[n]);this._addJSONProperty(t.data,n,i),this._addJSONPropertyMetaData(t.ext,n,i)}return JSON.stringify(t)},e._addJSONProperty=function(e,t,n){if(n){for(var r=e,i=t.split("."),o=0;o<i.length-1;++o)r[i[o]]||(r[i[o]]={}),r=r[i[o]];r[i[i.length-1]]=n.value}},e._addJSONPropertyMetaData=function(e,t,n){if(n){var i=r.getCommonSchemaMetaData(n.value,n.kind);if(i>-1){var o=e;o.metadata||(o.metadata={f:{}}),o=o.metadata.f;for(var a=t.split("."),s=0;s<a.length-1;++s)o[a[s]]||(o[a[s]]={f:{}}),o=o[a[s]].f;r.isArray(n.value)?o[a[a.length-1]]={a:{t:i}}:o[a[a.length-1]]={t:i}}}},e}(),Dr=function(){function e(){}return e.shouldRetryForStatus=function(e){return!(e>=300&&e<500&&408!==e&&429!==e||501===e||505===e)},e.getMillisToBackoffForRetry=function(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*n,Math.min(t,6e5)},e}(),Mr=function(){function e(){this._killedTokenDictionary={}}return e.prototype.setKillSwitchTenants=function(e,t){if(e&&t)try{var n=e.split(",");if("this-request-only"===t)return n;for(var r=1e3*parseInt(t,10),i=0;i<n.length;++i)this._killedTokenDictionary[n[i]]=Date.now()+r}catch(e){return[]}return[]},e.prototype.isTenantKilled=function(e){return void 0!==this._killedTokenDictionary[e]&&this._killedTokenDictionary[e]>Date.now()||(delete this._killedTokenDictionary[e],!1)},e}(),Nr=function(){function e(){this._allowRequestSending=!0,this._shouldAddClockSkewHeaders=!0,this._isFirstRequest=!0,this._clockSkewHeaderValue="use-collector-delta",this._clockSkewSet=!1}return e.prototype.allowRequestSending=function(){return this._isFirstRequest&&!this._clockSkewSet?(this._isFirstRequest=!1,this._allowRequestSending=!1,!0):this._allowRequestSending},e.prototype.shouldAddClockSkewHeaders=function(){return this._shouldAddClockSkewHeaders},e.prototype.getClockSkewHeaderValue=function(){return this._clockSkewHeaderValue},e.prototype.setClockSkew=function(e){this._clockSkewSet||(e?this._clockSkewHeaderValue=e:this._shouldAddClockSkewHeaders=!1,this._clockSkewSet=!0,this._allowRequestSending=!0)},e}(),Fr="POST",jr=function(){function e(e,t,n,i,o){var a=this;this._requestQueue=e,this._config=t,this._postManager=n,this._httpInterface=i,this._notificationManager=o,this._urlString="?cors=true&content-type=application/x-json-stream&client-id=NO_AUTH&client-version="+r.FullVersionString,this._killSwitch=new Mr,this._paused=!1,this._clockSkewManager=new Nr,this._useBeacons=!1,this._activeConnections=0,this._urlString=this._config.endpointUrl+this._urlString,this._httpInterface||(this._useBeacons=!r.isReactNative(),this._httpInterface={sendPOST:function(e,t,n,i){if(a._useXDomainRequest()){var o=new XDomainRequest;o.open(Fr,e),o.onload=function(){n(200,{})},o.onerror=function(){n(400,{})},o.ontimeout=function(){n(500,{})},o.send(t)}else if(r.isReactNative())fetch(e,(u={body:t,method:Fr},u[Rr]=!0,u)).then(function(e){var t={};e.headers&&e.headers.forEach(function(e,n){t[n]=e}),n(e.status,t)}).catch(function(e){n(0,{})});else{var s=new XMLHttpRequest;s[Rr]=!0,s.withCredentials=!0,s.open(Fr,e,!i),s.onload=function(){n(s.status,a._convertAllHeadersToMap(s.getAllResponseHeaders()))},s.onerror=function(){n(s.status,a._convertAllHeadersToMap(s.getAllResponseHeaders()))},s.ontimeout=function(){n(s.status,a._convertAllHeadersToMap(s.getAllResponseHeaders()))},s.send(t)}var u}})}return e.prototype.hasIdleConnection=function(){return this._activeConnections<2},e.prototype.sendQueuedRequests=function(){for(;this.hasIdleConnection()&&!this._paused&&this._requestQueue.length>0&&this._clockSkewManager.allowRequestSending();)this._activeConnections++,this._sendRequest(this._requestQueue.shift(),0,!1);this.hasIdleConnection()&&this._postManager._scheduleTimer()},e.prototype.isCompletelyIdle=function(){return 0===this._activeConnections},e.prototype.teardown=function(){for(;this._requestQueue.length>0;)this._sendRequest(this._requestQueue.shift(),0,!0)},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1,this.sendQueuedRequests()},e.prototype.removeQueuedRequests=function(){this._requestQueue.length=0},e.prototype.sendSynchronousRequest=function(e){this._activeConnections++,this._sendRequest(e,0,!1,!0)},e.prototype._sendRequest=function(e,t,n,i){var o=this;if(void 0===i&&(i=!1),e){if(this._paused)return this._activeConnections--,void this._postManager._addBackRequest(e);var a=0,s="";for(var u in e)e.hasOwnProperty(u)&&(this._killSwitch.isTenantKilled(u)?(this._notificationManager.eventsDiscarded(e[u],Rn.EventsDiscardedReason.KillSwitch),delete e[u]):(s.length>0&&(s+=","),s+=u,a++));if(a>0){var l=Pr.getPayloadBlob(e,a);l.remainingRequest&&this._requestQueue.push(l.remainingRequest);var c=this._urlString+"&apikey="+s+"&upload-time="+Date.now().toString();for(var u in this._clockSkewManager.shouldAddClockSkewHeaders()&&(c=c+"&time-delta-to-apply-millis="+this._clockSkewManager.getClockSkewHeaderValue()),this._config.getWParam&&(c=c+"&w="+this._config.getWParam()),e)if(e.hasOwnProperty(u))for(var d=0;d<e[u].length;++d)e[u][d].sendAttempt>0?e[u][d].sendAttempt++:e[u][d].sendAttempt=1;if(this._useBeacons&&n&&r.isBeaconsSupported()&&navigator.sendBeacon(c,l.payloadBlob))return;this._httpInterface&&this._httpInterface.sendPOST(c,l.payloadBlob,function(r,u){o._retryRequestIfNeeded(r,u,e,a,s,t,n,i)},n||i)}else n||this._handleRequestFinished(null,{},n,i)}},e.prototype._retryRequestIfNeeded=function(e,t,n,r,i,o,a,s){var u=this,l=!0;if(void 0!==e){if(t){var c=this._killSwitch.setKillSwitchTenants(t["kill-tokens"],t["kill-duration-seconds"]);this._clockSkewManager.setClockSkew(t["time-delta-millis"]);for(var d=0;d<c.length;++d)this._notificationManager.eventsDiscarded(n[c[d]],Rn.EventsDiscardedReason.KillSwitch),delete n[c[d]],r--}else this._clockSkewManager.setClockSkew("");if(200===e)return void this._handleRequestFinished(!0,n,a,s);(!Dr.shouldRetryForStatus(e)||r<=0)&&(l=!1)}l?s?(this._activeConnections--,this._postManager._addBackRequest(n)):o<1?setTimeout(function(){return u._sendRequest(n,o+1,!1)},Dr.getMillisToBackoffForRetry(o)):(this._activeConnections--,this._postManager._backOffTransmission(),this._postManager._addBackRequest(n)):this._handleRequestFinished(!1,n,a,s)},e.prototype._handleRequestFinished=function(e,t,n,r){for(var i in e&&this._postManager._clearBackOff(),t)t.hasOwnProperty(i)&&(e?this._notificationManager.eventsSent(t[i]):this._notificationManager.eventsDiscarded(t[i],Rn.EventsDiscardedReason.NonRetryableStatus));this._activeConnections--,r||n||this.sendQueuedRequests()},e.prototype._convertAllHeadersToMap=function(e){var t={};if(e)for(var n=e.split("\n"),r=0;r<n.length;++r){var i=n[r].split(": ");t[i[0]]=i[1]}return t},e.prototype._useXDomainRequest=function(){if(XMLHttpRequest){var e=new XMLHttpRequest;return Boolean(void 0===e.withCredentials&&"undefined"!=typeof XDomainRequest)}},e}(),Ur=function(){function e(e,t){this._outboundQueue=e,this._maxNumberOfEvents=t,this._currentBatch={},this._currentNumEventsInBatch=0}return e.prototype.addEventToBatch=function(e){var t=e.iKey;if(t){if(e.sync){var n={};return n[t]=[e],n}this._currentNumEventsInBatch>=this._maxNumberOfEvents&&this.flushBatch(),void 0===this._currentBatch[t]&&(this._currentBatch[t]=[]),this._currentBatch[t].push(e),this._currentNumEventsInBatch++}return null},e.prototype.flushBatch=function(){this._currentNumEventsInBatch>0&&(this._outboundQueue.push(this._currentBatch),this._currentBatch={},this._currentNumEventsInBatch=0)},e.prototype.hasBatch=function(){return this._currentNumEventsInBatch>0},e}(),Br=500,Vr=function(){function e(){this.identifier="PostChannel",this.priority=1011,this._isTeardownCalled=!1,this._isCurrentlyFlushingNow=!1,this._flushQueue=[],this._databaseAdded=!1,this._paused=!1,this._queueSize=0,this._queueSizeLimit=1e4,this._profiles={},this._currentProfile=Lr,this._timeout=null,this._currentBackoffCount=0,this._timerCount=0,this._flushCallback=-1,this._flushOutboundQueue=[],this._outboundQueue=[],this._inboundQueues={},this._inboundQueues[Pn.RealTime]=[],this._inboundQueues[Pn.CostDeferred]=[],this._inboundQueues[Pn.Normal]=[],this._initializeProfiles(),this._addEmptyQueues(),this._batcher=new Ur(this._outboundQueue,Br),this._syncFlushBatcher=new Ur(this._flushOutboundQueue,Br)}return e.prototype.initialize=function(e,t,n){e.extensionConfig=e.extensionConfig||[],e.extensionConfig[this.identifier]=e.extensionConfig[this.identifier]||{};var r=e.extensionConfig[this.identifier];r.eventsLimitInMem>0&&(this._queueSizeLimit=r.eventsLimitInMem),r.httpXHROverride&&r.httpXHROverride.sendPOST&&(this._xhrOverride=r.httpXHROverride),this._notificationManager=e.extensionConfig.NotificationManager,this._httpManager=new jr(this._outboundQueue,e,this,this._xhrOverride,this._notificationManager);for(var i=0;i<n.length;++i)n[i].priority&&150===n[i].priority&&(this._databaseAdded=!0)},e.prototype.processTelemetry=function(e){var t=e;if(!this._isTeardownCalled){if(t.sendAttempt||(t.sendAttempt=0),t.latency||(t.latency=Pn.Normal),t.sync)if(this._currentBackoffCount>0||this._paused)t.latency=Pn.RealTime,t.sync=!1;else if(this._httpManager)return void this._httpManager.sendSynchronousRequest(this._batcher.addEventToBatch(t));this._queueSize<this._queueSizeLimit?this._addEventToProperQueue(t):this._dropEventWithLatencyOrLess(t.latency)?this._addEventToProperQueue(t):this._notificationManager.eventsDiscarded([t],Rn.EventsDiscardedReason.QueueFull),this._scheduleTimer()}},e.prototype.teardown=function(){this._clearTimeout(),this._flushCallback>0&&clearTimeout(this._flushCallback),this._paused||this._databaseAdded||(this._mergeQueues(),this._batchEvents(Pn.Normal),this._httpManager.teardown()),this._isTeardownCalled=!0},e.prototype.pause=function(){this._clearTimeout(),this._paused=!0,this._httpManager.pause(),this._databaseAdded&&(this._queueSize-=this._inboundQueues[Pn.RealTime][0].length+this._inboundQueues[Pn.CostDeferred][0].length+this._inboundQueues[Pn.Normal][0].length,this._inboundQueues[Pn.RealTime][0]=[],this._inboundQueues[Pn.CostDeferred][0]=[],this._inboundQueues[Pn.Normal][0]=[],this._httpManager.removeQueuedRequests())},e.prototype.resume=function(){this._paused=!1,this._httpManager.resume(),this._scheduleTimer()},e.prototype.setNextPlugin=function(e){},e.prototype._loadTransmitProfiles=function(e){for(var t in this._resetTransmitProfiles(),e)if(e.hasOwnProperty(t)){if(e[t].length<2)continue;if(e[t].splice(0,e[t].length-2),e[t][1]<0&&(e[t][0]=-1),e[t][1]>0&&e[t][0]>0){var n=e[t][0]/e[t][1];e[t][0]=Math.ceil(n)*e[t][1]}this._profiles[t]=e[t]}},e.prototype.flush=function(e,t){var n=this;if(void 0===e&&(e=!0),!this._paused)if(this._clearTimeout(),e)this._addEmptyQueues(),this._isCurrentlyFlushingNow?this._flushQueue.push(t):(this._isCurrentlyFlushingNow=!0,setTimeout(function(){return n._flushImpl(t)},0));else{this._batchEvents(Pn.Normal,this._syncFlushBatcher);for(var r=0;r<this._flushOutboundQueue.length;r++)this._httpManager.sendSynchronousRequest(this._flushOutboundQueue[r]);null!=t&&t()}},e.prototype._setTransmitProfile=function(e){this._currentProfile!==e&&void 0!==this._profiles[e]&&(this._clearTimeout(),this._currentProfile=e,this._scheduleTimer())},e.prototype._sendEventsForLatencyAndAbove=function(e){this._batchEvents(e),this._httpManager.sendQueuedRequests()},e.prototype._hasEvents=function(){return(this._inboundQueues[Pn.RealTime][0].length>0||this._inboundQueues[Pn.CostDeferred][0].length>0||this._inboundQueues[Pn.Normal][0].length>0||this._batcher.hasBatch())&&this._httpManager.hasIdleConnection()},e.prototype._addBackRequest=function(e){if(!this._paused||!this._databaseAdded)for(var t in e)if(e.hasOwnProperty(t)){1===e[t].length&&e[t][0].sync&&(e[t][0].latency=Pn.RealTime,e[t][0].sync=!1);for(var n=0;n<e[t].length;++n)e[t][n].sendAttempt<6?this.processTelemetry(e[t][n]):this._notificationManager.eventsDiscarded([e[t][n]],Rn.EventsDiscardedReason.NonRetryableStatus)}},e.prototype._scheduleTimer=function(){var e=this,t=this._profiles[this._currentProfile][1];if(!this._timeout&&t>=0&&!this._paused)if(this._hasEvents()){0===t&&this._currentBackoffCount>0&&(t=1);var n=1e3;this._currentBackoffCount>0&&(n=Dr.getMillisToBackoffForRetry(this._currentBackoffCount-1)),this._timeout=setTimeout(function(){return e._batchAndSendEvents()},t*n)}else this._timerCount=0},e.prototype._backOffTransmission=function(){this._currentBackoffCount<4&&(this._currentBackoffCount++,this._clearTimeout(),this._scheduleTimer())},e.prototype._clearBackOff=function(){this._currentBackoffCount>0&&(this._currentBackoffCount=0,this._clearTimeout(),this._scheduleTimer())},e.prototype._clearTimeout=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null,this._timerCount=0)},e.prototype._batchAndSendEvents=function(){var e=Pn.RealTime;this._timerCount++,2===this._timerCount&&(e=Pn.Normal,this._timerCount=0),this._sendEventsForLatencyAndAbove(e),this._timeout=null,this._scheduleTimer()},e.prototype._removeFirstQueues=function(){this._inboundQueues[Pn.RealTime].shift(),this._inboundQueues[Pn.CostDeferred].shift(),this._inboundQueues[Pn.Normal].shift()},e.prototype._addEmptyQueues=function(){this._inboundQueues[Pn.RealTime].push([]),this._inboundQueues[Pn.CostDeferred].push([]),this._inboundQueues[Pn.Normal].push([])},e.prototype._mergeQueues=function(){for(var e=Pn.Normal;e<=Pn.RealTime;e++)for(var t=1;t<this._inboundQueues[e].length;t++)for(;this._inboundQueues[e][t].length>0;)this._inboundQueues[e][0].push(this._inboundQueues[e][t].pop())},e.prototype._addEventToProperQueue=function(e){this._paused&&this._databaseAdded||(this._queueSize++,this._inboundQueues[e.latency][this._inboundQueues[e.latency].length-1].push(e))},e.prototype._dropEventWithLatencyOrLess=function(e){for(var t=Pn.Normal;t<=e;){if(this._inboundQueues[t][this._inboundQueues[t].length-1].length>0){var n=this._inboundQueues[t][this._inboundQueues[t].length-1].splice(0,20);return this._notificationManager.eventsDiscarded(n,Rn.EventsDiscardedReason.QueueFull),!0}t++}return!1},e.prototype._batchEvents=function(e,t){void 0===t&&(t=this._batcher);for(var n=Pn.RealTime;n>=e;){for(;this._inboundQueues[n][0].length>0;){var r=this._inboundQueues[n][0].pop();this._queueSize--,t.addEventToBatch(r)}n--}t.flushBatch()},e.prototype._flushImpl=function(e){var t=this;this._hasEvents()&&this._sendEventsForLatencyAndAbove(Pn.Normal),this._checkOutboundQueueEmptyAndSent(function(){t._removeFirstQueues(),null!=e&&e(),t._flushQueue.length>0?t._flushCallback=setTimeout(function(){return t._flushImpl(t._flushQueue.shift())},0):(t._isCurrentlyFlushingNow=!1,t._hasEvents()&&t._scheduleTimer())})},e.prototype._checkOutboundQueueEmptyAndSent=function(e){var t=this;this._httpManager.isCompletelyIdle()?e():this._flushCallback=setTimeout(function(){return t._checkOutboundQueueEmptyAndSent(e)},250)},e.prototype._resetTransmitProfiles=function(){this._clearTimeout(),this._initializeProfiles(),this._currentProfile=Lr,this._scheduleTimer()},e.prototype._initializeProfiles=function(){this._profiles={},this._profiles[Lr]=[2,1],this._profiles.NEAR_REAL_TIME=[6,3],this._profiles.BEST_EFFORT=[18,9]},e}(),Gr=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.initialize=function(t,n){this._postChannel=new Vr,this._propertyManager=new Or;var r=[this._propertyManager,this._postChannel];n&&(r=r.concat(n)),t.extensionConfig=t.extensionConfig||[],t.extensionConfig[this._postChannel.identifier]=t?t.propertyConfiguration:{},e.prototype.initialize.call(this,t,r)},t.prototype.getPropertyManager=function(){return this._propertyManager},t.prototype.getPostChannel=function(){return this._postChannel},t}(or));function qr(e,t){var n=new URL("https://video.mixer.com/video/api/v1/distribution");return function(){try{return document&&document.location&&document.location.host||""}catch(e){return""}}().includes("lab.mixer")&&(n=new URL("https://video-lab.mixer.com/video/api/v1/distribution")),n.searchParams.set("channel",e.toString()),n.searchParams.set("accessKey",t),n.toString()}function Hr(e,t){var n=new URL("https://conductor.videosvc.mixer.com/api/video/v2/channels/"+e+"/dist");n.searchParams.set("accessKey",t),n.searchParams.set("MS-ClientId",h?"MixerWeb":"MixerApp"),n.searchParams.set("MS-ClientVersion",Ae),n.searchParams.set("MS-DeviceType","PC"),n.searchParams.set("MS-OS",y.osname);var r=Ln(bn.ModeTestConductor);return r&&n.searchParams.set("gaFlags",'{"'+bn.ModeTestConductor+'":"'+r+'"}'),n.toString()}function Kr(e){return c(this,void 0,void 0,function(){var t,n;return d(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),[4,fetch(e)];case 1:return t=r.sent(),n=void 0,t.ok?[4,t.json()]:[3,3];case 2:return n=r.sent(),[3,4];case 3:n={status:t.status,statusText:t.statusText},r.label=4;case 4:return[2,n];case 5:return[2,{status:"unknown",statusText:r.sent().message}];case 6:return[2]}})})}function zr(e){if("status"in e)throw new Error("Falcon failure: "+e.statusText);return e.response}function Qr(e){if("status"in e)throw new Error("Conductor failure: "+e.statusText);var t={default:"Hls"===e.default?"hls":"webrtc",hls:{server:e.hls.server,recommendedHlsSegmentBuffer:e.hls.recommendedSegmentBufferSize},recommendedHlsSegmentBuffer:e.hls.recommendedSegmentBufferSize};return void 0!==e.webRtc&&(t.webrtc=e.webRtc),void 0!==e.dash&&(t.dash=e.dash),void 0!==e.hls.simpleFeedServer&&(t.hls.simpleFeedServer=e.hls.simpleFeedServer),void 0!==e.hls.hasClosedCaptions&&(t.hlsHasClosedCaptions=e.hls.hasClosedCaptions),void 0!==e.hls.uhdFeedServer&&(t.hls.hls4kFeedServer=e.hls.uhdFeedServer),t}function Wr(e,t){return c(this,void 0,void 0,function(){var n;return d(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,4]),[4,Kr(Hr(e,t))];case 1:return[2,Qr(r.sent())];case 2:return n=r.sent(),Gr.track({name:"Microsoft_Mixer_Player_FalconFallback",data:{response:n.message}}),[4,Kr(qr(e,t))];case 3:return[2,zr(r.sent())];case 4:return[2]}})})}Gr.initialize({instrumentationKey:"1918f1672f934c5ca6b2669551351de2-b61c1f8e-4440-4e53-8e38-b46e4c88a7e5-7038"});var Yr="undefined"!=typeof Org,Xr=h&&!Yr&&"undefined"!=typeof RTCPeerConnection?g("https://c-ning.videosvc.mixer.com/dependencies/webrtc-adapter/7.1.1/adapter.js").catch(function(e){return g("https://mixer.com/_latest/assets/js/webrtc-adapter.js")}).catch(function(e){return Promise.reject("Unable to load adapter.js "+e)}):Promise.resolve(),Jr=[500,1e3,2e3,4e3],$r=function(){function e(){this._eventMap={},this.state=e.AbstractPlayerState.createInitialState(this),this.state.enter()}return e.prototype.destroy=function(){return this.state.destroy()},e.prototype.getCurrentTransportType=function(){return this.state.getCurrentTransportType()},e.prototype.getStatsInterval=function(){return this.state.getStatsInterval()},e.prototype.loadStream=function(e,t,n,r){return this.state.loadStream(e,t,n,r)},e.prototype.loadVOD=function(e,t){return this.state.loadVOD(e,t)},e.prototype.isPlaying=function(){return this.state.isPlaying()},e.prototype.pause=function(){return this.state.pause()},e.prototype.play=function(){return this.state.play()},e.prototype.setAudioOnly=function(e){return this.state.setAudioOnly(e)},e.prototype.setAudioTrack=function(e){return this.state.setAudioTrack(e)},e.prototype.setCaptionsShowing=function(e){return this.state.setCaptionsShowing(e)},e.prototype.setMute=function(e){return this.state.setMute(e)},e.prototype.setQuality=function(e){return this.state.setQuality(e)},e.prototype.setAuto=function(e){return this.state.setAuto(e)},e.prototype.getAuto=function(){return this.state.getAuto()},e.prototype.getPlayerPorfileTime=function(){return this.state.getPlayerProfileTime()},e.prototype.stop=function(){return this.state.stop()},e.prototype.switchToFTL=function(){return this.state.switchToFTL()},e.prototype.switchToHLS=function(){return this.state.switchToHLS()},e.prototype.addEventListener=function(e,t){this._eventMap[e]=this._eventMap[e]||[],this._eventMap[e].push(t)},e.prototype.removeEventListener=function(e,t){var n=this._eventMap[e];if(n){var r=n.indexOf(t);n.splice(r,1),n.length||delete this._eventMap[e]}},e.prototype.dispatchEvent=function(e,t){var n=this._eventMap[e];if(!n)return!0;for(var r={type:e,data:t,defaultPrevented:!1},i=n.length-1;i>=0;i--)n[i=Math.min(n.length-1,i)](r);return!r.defaultPrevented},e.VERSION=Ae,e}();!function(e){var t=function(){function e(){}return e.createInitialState=function(e){var t=new n;return t._player=e,t._meta={},t._msi={},t._playbackSettings={},t._tsi={},t},Object.defineProperty(e.prototype,"isActiveState",{get:function(){return this._player.state===this},enumerable:!0,configurable:!0}),e.prototype.enter=function(e){this._meta.telemetry&&this._meta.telemetry.logPlayerLifecycleState&&this._meta.telemetry.logPlayerLifecycleState({entering:!0,state:this.stateName,meta:JSON.stringify(e)})},e.prototype.exit=function(e,t){this.isActiveState&&(this._meta.telemetry&&this._meta.telemetry.logPlayerLifecycleState&&this._meta.telemetry.logPlayerLifecycleState({entering:!1,state:this.stateName,meta:JSON.stringify(t)}),this._changeState(e))},e.prototype.destroy=function(){this._player.dispatchEvent("destroyed",!0),this.exit(new h(this,h.TERMINAL_STATE_VIA_DESTROY))},e.prototype.getCurrentTransportType=function(){},e.prototype.getStatsInterval=function(){return this._tsi.statsIntervalMs||1e3},e.prototype.isPlaying=function(){return this._playbackSettings.playing},e.prototype.loadStream=function(e,t,n,i){this._applyOptions(n),this._errorInfo={ftlErrorCount:0,hlsErrorCount:0,hlsNativeFailure:!1,manifestErrorCount:0},this._msi.contentType="stream",this.exit(new r(e,t,i))},e.prototype.loadVOD=function(e,t){this._applyOptions(t),this._player.dispatchEvent("ftlAvailable",!1),this._errorInfo={ftlErrorCount:0,hlsErrorCount:0,hlsNativeFailure:!1,manifestErrorCount:0},this._msi.contentType="vod",this._msi.manifest={hls:{hlsHasClosedCaptions:!1,recommendedHlsSegmentBuffer:3,server:e}},this._tsi.requestedTransport="hls",this._meta.telemetry.logGetVideoFeedAttempt({type:D.VideoType.VOD,hlsServer:e}),this.exit(new i)},e.prototype.pause=function(){this._playbackSettings.paused=!0},e.prototype.play=function(){this._playbackSettings.paused=!1,this._playbackSettings.playing=!0},e.prototype.setAudioOnly=function(e){this._playbackSettings.audioOnly=e},e.prototype.setAudioTrack=function(e){this._playbackSettings.audioTrack=e},e.prototype.setCaptionsShowing=function(e){this._playbackSettings.showingCaptions=e},e.prototype.setMute=function(e){this._playbackSettings.muted=e},e.prototype.setQuality=function(e){this._playbackSettings.qualityIndex=e},e.prototype.setAuto=function(e){this._playbackSettings.autoEnabled=e},e.prototype.getAuto=function(){return Promise.reject("Not supported on current state")},e.prototype.getPlayerProfileTime=function(){return{profileStartLoadStream:this._meta.profileStartLoadStream,profileEndLoadStream:this._meta.profileEndLoadStream}},e.prototype.stop=function(){this._playbackSettings.paused=!1,this._playbackSettings.playing=!1},e.prototype.switchToFTL=function(){this._errorInfo.manifestErrorCount=0,this._errorInfo.ftlErrorCount=0,this._tsi.requestedTransport="ftl",this.exit(new r(this._tsi.channelId,this._msi.accessKey,this._tsi.distOverride))},e.prototype.switchToHLS=function(){this._errorInfo.manifestErrorCount=0,this._errorInfo.hlsErrorCount=0,this._tsi.requestedTransport="hls",this.exit(new r(this._tsi.channelId,this._msi.accessKey,this._tsi.distOverride))},e.prototype._createDefaultQualitySelector=function(e){var t=this._tsi.maxSize;return e===s.HLS?On(this._tsi.defaultQualitySelector):On(this._tsi.defaultQualitySelector,t?In(function(e){return e.width<=Math.min(3e3,t.width)}):null,this._tsi.supportedConfig&&!this._tsi.supportedConfig.uhd?In(function(e){return e.height<=1440}):null)},e.prototype._applyOptions=function(e){this._meta.logger=e.logger||new ke,this._meta.metricsLogger=e.metricsLogger||new Ce,this._playbackSettings.audioOnly=this._playbackSettings.audioOnly||!1,this._playbackSettings.audioTrack=this._playbackSettings.audioTrack||0,this._playbackSettings.showingCaptions=this._playbackSettings.showingCaptions||!1,this._playbackSettings.muted=this._playbackSettings.muted||!!e.muted,this._playbackSettings.paused=this._playbackSettings.paused||!1,this._playbackSettings.playing=this._playbackSettings.playing||void 0===this._playbackSettings.playing,this._playbackSettings.qualityIndex=this._playbackSettings.qualityIndex||0,this._tsi.clientId=e.clientId,this._tsi.defaultQualitySelector=void 0,this._tsi.isHLSUrlOnly=!!e.hlsUrlOnly,this._tsi.isEmbed=!!e.isEmbed,this._tsi.isLowResAtStart=!!e.startLowRes,this._tsi.maxSize=e.maxSize||{height:-1,width:-1},this._tsi.requestedTransport=e.requestedTransport||void 0,this._tsi.sessionGuid=e.sessionGuid||"",this._tsi.statsIntervalMs=e.statsIntervalMs||1e3,this._tsi.trackOneDSEvent=e.trackOneDSEvent||void 0,this._tsi.userId=e.userId||-1,e.defaultQualitySelector&&(this._tsi.defaultQualitySelector=e.defaultQualitySelector),e.supportedConfig&&(this._tsi.supportedConfig=e.supportedConfig),void 0!==e.hlsSimpleFeed&&(this._tsi.isHLSSimpleFeed=!!e.hlsSimpleFeed),e.telemetry?this._meta.telemetry=e.telemetry:this._meta.telemetry=new xe},e.prototype._changeState=function(e){e._errorInfo=this._errorInfo,e._meta=this._meta,e._msi=this._msi,e._playbackSettings=this._playbackSettings,e._player=this._player,e._tsi=this._tsi,this._player.state=e,e.enter()},e}();e.AbstractPlayerState=t;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),Object.defineProperty(t.prototype,"stateName",{get:function(){return"Created"},enumerable:!0,configurable:!0}),t.prototype.error=function(){},t}(t),r=function(e){function t(t,n,r){var i=e.call(this)||this;return i._channelId=t,i._accessKey=n,i._distOverride=r||"",i}return a(t,e),Object.defineProperty(t.prototype,"stateName",{get:function(){return"SetupManifest"},enumerable:!0,configurable:!0}),t.prototype.enter=function(){return c(this,void 0,void 0,function(){var t,n,r;return d(this,function(o){switch(o.label){case 0:e.prototype.enter.call(this,{accessKey:this._accessKey,channelId:this._channelId}),this._msi.accessKey=this._accessKey,this._tsi.channelId=this._channelId,this._tsi.distOverride=this._distOverride,this._meta.metricsLogger.logStreamLoadAttempt(this._channelId),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Wr(this._channelId,this._accessKey)];case 2:return t=o.sent(),this.isActiveState?(this._msi.manifest=t,this._tsi.requestedTransport=this._tsi.requestedTransport||("webrtc"===this._msi.manifest.default?"ftl":"hls"),[3,4]):[2];case 3:return n=o.sent(),[2,this.error("Exception: "+n)];case 4:return r=this._msi.manifest,this._meta.telemetry.logGetVideoFeedAttempt({defaultProtocol:r.default,ftlServer:r.webrtc&&r.webrtc.server,hlsRecommendedSegmentBuffer:(r.recommendedHlsSegmentBuffer||r.hls&&r.hls.recommendedHlsSegmentBuffer||"").toString(),hlsServer:r.hls&&r.hls.server,dashServer:r.dash&&r.dash.server,type:D.VideoType.LIVE}),this._player.dispatchEvent("ftlAvailable",!!r.webrtc&&this._errorInfo.ftlErrorCount<5),this._player.dispatchEvent("hlsAvailable",!!r.hls),this._player.dispatchEvent("dashAvailable",!!r.dash),this._player.dispatchEvent("captioned",!!r.hlsHasClosedCaptions),this.exit(new i),[2]}})})},t.prototype.error=function(e){return c(this,void 0,void 0,function(){return d(this,function(t){return this.exit(new f("manifest"),e),[2]})})},t}(t),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),Object.defineProperty(t.prototype,"stateName",{get:function(){return"SetupTransport"},enumerable:!0,configurable:!0}),t.prototype.enter=function(){e.prototype.enter.call(this);var t=this._getNextAttemptKind();t&&(this._meta.metricsLogger.logTransportAttempt((this._tsi.channelId||"unknown").toString(),t,"ftl"===t?this._errorInfo.ftlErrorCount+1:this._errorInfo.hlsErrorCount+1),"ftl"===t?this.exit(new o,"ftl"):this.exit(new l,"hls"))},t.prototype.error=function(e){this.exit(new h(this,{errorMessage:e,errorInfo:this._errorInfo,supportedConfig:this._tsi.supportedConfig,manifest:this._msi.manifest,requestedTransport:this._tsi.requestedTransport,isWebView:v(),isMobileBrowser:b(this._tsi.clientId),isSamsungBrowser:_()}))},t.prototype._getNextAttemptKind=function(){return!(this._errorInfo.ftlErrorCount<=5&&this._tsi.supportedConfig.ftl&&this._msi.manifest.webrtc)||"ftl"!==this._tsi.requestedTransport&&(this._tsi.requestedTransport||"webrtc"!==this._msi.manifest.default)||v()||b(this._tsi.clientId)&&!_()?this._errorInfo.hlsErrorCount<=5&&this._msi.manifest.hls&&this._tsi.supportedConfig.hls?D.TransportType.HLS:this.error("No supported transports"):D.TransportType.FTL},t}(t),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),Object.defineProperty(t.prototype,"stateName",{get:function(){return"SetupFTL"},enumerable:!0,configurable:!0}),t.prototype.enter=function(){return c(this,void 0,void 0,function(){var t,n,r,i=this;return d(this,function(o){switch(o.label){case 0:e.prototype.enter.call(this),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,Xr];case 2:return o.sent(),this._tsi.startTime=Date.now(),this._meta.profileStartLoadStream=this._tsi.startTime,(t=this._msi.manifest.webrtc)?(this._tsi.hostName=t.server,n=new rn({clientId:this._tsi.clientId,supportedConfig:this._tsi.supportedConfig,logger:this._meta.logger,metricsLogger:this._meta.metricsLogger,statsIntervalMs:this._tsi.statsIntervalMs,qualitySelector:this._tsi.defaultQualitySelector,telemetry:this._meta.telemetry,maxSize:this._tsi.maxSize,sessionGuid:this._tsi.sessionGuid,userId:this._tsi.userId,isEmbed:this._tsi.isEmbed}),this._tsi.transport=n,this._processDistOverride(t),this._tsi.hostName=t.server,[4,n.loadStream(this._tsi.channelId,t,this._msi.accessKey,function(e){i.isActiveState&&(i._tsi.ftlMediaStream=e,i.exit(new p))})]):[2,this.error("No FTLData in manifest")];case 3:return o.sent(),[3,5];case 4:return r=o.sent(),this.error("Exception: "+r,r.trace),[3,5];case 5:return[2]}})})},t.prototype.error=function(e,t){this.exit(new f("ftl",e,void 0,void 0,t))},t.prototype.switchToFTL=function(){},t.prototype._processDistOverride=function(e){this._tsi.distOverride&&(e.server="wss://"+this._tsi.distOverride,e.iceServers=[{urls:["stun:"+this._tsi.distOverride+":3479"]},{urls:["turn:"+this._tsi.distOverride+":3478?transport=udp"],username:"janus",credential:"janus"},{urls:["turn:"+this._tsi.distOverride+":3478?transport=tcp"],username:"janus",credential:"janus"}])},t}(t),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),Object.defineProperty(t.prototype,"stateName",{get:function(){return"SetupHLS"},enumerable:!0,configurable:!0}),t.prototype.enter=function(){return c(this,void 0,void 0,function(){var t,n,r,i,o,a=this;return d(this,function(l){switch(l.label){case 0:e.prototype.enter.call(this),l.label=1;case 1:return l.trys.push([1,6,,7]),this._tsi.startTime=Date.now(),this._meta.profileStartLoadStream=this._tsi.startTime,(t=this._msi.manifest.hls)?(this._tsi.hostName=t.server,this._tsi.isHLSSimpleFeed&&t.simpleFeedServer?this._tsi.hlsSrc=t.simpleFeedServer:this._tsi.supportedConfig&&this._tsi.supportedConfig.uhd&&t.hls4kFeedServer?this._tsi.hlsSrc=t.hls4kFeedServer:this._tsi.hlsSrc=t.server,this._tsi.distOverride&&(this._tsi.hlsSrc=this._tsi.hlsSrc.replace("video.mixer.com",this._tsi.distOverride)),this._tsi.isHLSUrlOnly?(this._tsi.transport=new En(this._tsi.supportedConfig),this._tsi.hlsStream=this._tsi.hlsSrc,this.exit(new p,"hls-url-only"),[2]):(v()&&(this._tsi.hlsSrc=S(this._tsi.hlsSrc,"QualityList",u.QDEFAULT480P)),!Tn||this._errorInfo.hlsNativeFailure||m?[3,2]:(n=window,this._meta.telemetry.logFallbackToNativePlayer({supportsMSE:!(!n||!n.MediaSource),supportsHLS:Tn}),r=new Cn(this._tsi.channelId,this._tsi.supportedConfig,this._meta.logger,this._meta.metricsLogger,this._meta.telemetry),i=r.generateHLS(this._tsi.hlsSrc,this._playbackSettings.showingCaptions),this._tsi.transport=r,this._tsi.hlsStream=i,this.exit(new p,"hls-native"),[3,5]))):[2,this.error("No HLSResponse in Manifest")];case 2:return an()?[4,on]:[3,4];case 3:return l.sent(),this.isActiveState?((this._tsi.transport=new wn(this._tsi.channelId,this._tsi.supportedConfig,this._meta.logger,this._meta.metricsLogger,this._meta.telemetry)).setupHLS(this._tsi.hlsSrc,+t.recommendedHlsSegmentBuffer,function(){},function(e){a.isActiveState&&(a._tsi.hlsStream=e,a.exit(new p,"hls.js"))},this._playbackSettings.showingCaptions,this._playbackSettings.audioOnly,this._createDefaultQualitySelector(s.HLS)),[3,5]):[2];case 4:return this.error("HLS not supported",!0),[2];case 5:return[3,7];case 6:return o=l.sent(),this.error("Exception: "+o),[3,7];case 7:return[2]}})})},t.prototype.error=function(e,t){t?this.exit(new h(this,e)):this.exit(new f("hls",e))},t.prototype.switchToHLS=function(){},t}(t),f=function(e){function t(t,n,r,i,o){var a=e.call(this)||this;return a._failureType=t,a._errorMessage=n||"",a._errorCode=r,a._errorName=i,a._errorTrace=o,a}return a(t,e),Object.defineProperty(t.prototype,"stateName",{get:function(){return"Retry"},enumerable:!0,configurable:!0}),t.prototype.enter=function(){return c(this,void 0,void 0,function(){var t,n,r;return d(this,function(i){switch(i.label){case 0:return e.prototype.enter.call(this,{failureType:this._failureType,errorName:this._errorName,errorMessage:this._errorMessage}),t=this._tsi.channelId,n=this._msi.accessKey,r=this._tsi.distOverride,[4,this._processErrors()];case 1:return i.sent(),this._cleanState(),this._retry(t,n,r),[2]}})})},t.prototype.error=function(e){this._player.dispatchEvent("errorFatal",new Error(e||"unknown error")),this.exit(new h(this,e))},t.prototype.switchToFTL=function(){},t.prototype.switchToHLS=function(){},t.prototype._cleanState=function(){switch(this._failureType){case"ftl":case"hls":try{var e=this._tsi.transport;e&&(this._tsi.transport=null,e.destroy())}catch(e){}this._tsi.transport=null,this._tsi.hlsStream=null,this._tsi.ftlMediaStream=null;break;case"manifest":this._msi={contentType:this._msi.contentType};break;default:return this.error("Invalid failure type: "+this._failureType)}},t.prototype._processErrors=function(){return c(this,void 0,void 0,function(){var e,t,n,r,i,o,a,s,u;return d(this,function(l){switch(l.label){case 0:switch(l.trys.push([0,6,,7]),this._failureType){case"ftl":case"hls":return[3,1];case"manifest":return[3,2]}return[3,4];case 1:return this._errorInfo.manifestErrorCount=0,e=void 0,t=void 0,n=Date.now()-this._tsi.startTime,r=void 0,"ftl"===this._failureType?(this._errorInfo.ftlErrorCount++,e=this._errorInfo.ftlErrorCount,t=this._errorInfo.ftlErrorCount>5,r=D.TransportType.FTL):(this._errorInfo.hlsErrorCount++,e=this._errorInfo.hlsErrorCount,t=this._errorInfo.hlsErrorCount>5,r=D.TransportType.HLS),i=w(this._tsi.hostName),o=i[0],a=i[1],this._meta.metricsLogger.logTransportFailed(r,this._tsi.hostName,a,o,this._errorMessage),this._meta.telemetry.logConnectTransportAttempt({attemptCount:e,hostName:this._tsi.hostName,loadTime:n,success:!1,transport:r,errorCode:this._errorCode,errorMessage:this._errorMessage,trace:this._errorTrace,errorName:this._errorName}),t&&(this._meta.telemetry.logConnectTransportSummary({hostName:this._tsi.hostName,numAttempts:e,success:!1,transport:r,lastErrorCode:this._errorCode,lastErrorMessage:this._errorMessage,lastErrorName:this._errorName}),this._errorInfo.ftlErrorCount>5&&this._errorInfo.hlsErrorCount>5)?[2,this.error("Transport retry exceeded")]:[3,5];case 2:return this._errorInfo.ftlErrorCount=this._errorInfo.hlsErrorCount=0,s=this._errorInfo.manifestErrorCount,this._errorInfo.manifestErrorCount++,this._errorInfo.manifestErrorCount>=5?[2,this.error("Manifest retry exceeded")]:[4,(c=Jr[s],new Promise(function(e){return setTimeout(e,c)}))];case 3:return l.sent(),[3,5];case 4:return[2,this.error("Invalid failure type: "+this._failureType)];case 5:return[3,7];case 6:return u=l.sent(),this.error("Exception: "+u),[3,7];case 7:return[2]}var c})})},t.prototype._retry=function(e,t,n){"stream"===this._msi.contentType?this.exit(new r(e,t,n),this._msi.contentType):this.exit(new i,this._msi.contentType)},t}(t),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._notInPlaybackState$=new ie,t}return a(t,e),Object.defineProperty(t.prototype,"stateName",{get:function(){return"Playback"},enumerable:!0,configurable:!0}),t.prototype.enter=function(){this._notInPlaybackState$.next(!1);var t=this._tsi.transport.getKind();e.prototype.enter.call(this,{transportKind:t});var n=Date.now();this._meta.profileEndLoadStream=n;var r=w(this._tsi.hostName),i=r[0],o=r[1],a="ftl"===t?this._errorInfo.ftlErrorCount+1:this._errorInfo.hlsErrorCount+1;this._meta.metricsLogger.logVideoLoadTime(t,n-this._tsi.startTime,this._tsi.hostName,o,i),this._meta.telemetry.logConnectTransportAttempt({attemptCount:a,hostName:this._tsi.hostName,loadTime:n-this._tsi.startTime,success:!0,transport:"ftl"===t?D.TransportType.FTL:D.TransportType.HLS}),this._meta.telemetry.logConnectTransportSummary({hostName:this._tsi.hostName,numAttempts:a,success:!0,transport:"ftl"===t?D.TransportType.FTL:D.TransportType.HLS}),this._applyPlayerSettings(),"ftl"===t?this._player.dispatchEvent("ftlReady",this._tsi.ftlMediaStream):(this._parseHLSTrackData(),this._player.dispatchEvent("hlsReady",this._tsi.hlsStream)),this._player.dispatchEvent("switchingQuality",!1),this._setupTransportSubscriptions()},t.prototype.exit=function(t,n){this._tsi.transport.destroy(),this._notInPlaybackState$.next(!0),e.prototype.exit.call(this,t,n)},t.prototype.error=function(e,t,n){this._notInPlaybackState$.next(!0),this._player.dispatchEvent("error",new Error(t)),this.exit(new f("ftl"===this._tsi.transport.getKind()?"ftl":"hls",t,e,n),{name:n,details:t})},t.prototype.getCurrentTransportType=function(){return this._tsi.transport.getKind()},t.prototype.pause=function(){this._playbackSettings.paused||(e.prototype.pause.call(this),this._tsi.transport.pause())},t.prototype.play=function(){this._playbackSettings.playing||(e.prototype.play.call(this),this._tsi.transport.play())},t.prototype.setAudioOnly=function(t){this._playbackSettings.audioOnly!==t&&(e.prototype.setAudioOnly.call(this,t),this._meta.logger.info("Setting Audio Only"),"hls"===this._tsi.transport.getKind()&&this._tsi.isHLSUrlOnly?this._player.dispatchEvent("hlsReady",this._playbackSettings.audioOnly?S(this._tsi.hlsSrc,"showAudioOnly",2):this._tsi.hlsSrc):this._tsi.transport.setAudioOnly(t))},t.prototype.setAudioTrack=function(t){this._playbackSettings.audioTrack!==t&&(e.prototype.setAudioTrack.call(this,t),"hls"!==this._tsi.transport.getKind()?this.switchToHLS():(this._tsi.transport.setAudioTrack(t),this._player.dispatchEvent("audioTrack",t)))},t.prototype.setCaptionsShowing=function(t){return c(this,void 0,void 0,function(){return d(this,function(n){return this._playbackSettings.showingCaptions===t?[2]:(e.prototype.setCaptionsShowing.call(this,t),t&&"ftl"===this.getCurrentTransportType()?(this._meta.metricsLogger.logCaptionsEnabled(),this.switchToHLS()):this._tsi.transport.setCaptionsShowing(t),[2])})})},t.prototype.setMute=function(t){this._playbackSettings.muted!==t&&(e.prototype.setMute.call(this,t),this._tsi.transport.setMute(t),"hls"===this._tsi.transport.getKind()&&this._player.dispatchEvent("muted",t))},t.prototype.setQuality=function(t){this._playbackSettings.qualityIndex!==t?(e.prototype.setQuality.call(this,t),this._tsi.transport.setQuality(t)):this._playbackSettings.autoEnabled&&this._tsi.transport.setAuto(!1)},t.prototype.setAuto=function(t){t&&this._playbackSettings.autoEnabled!==t&&(e.prototype.setAuto.call(this,t),this._tsi.transport.setAuto(t))},t.prototype.getAuto=function(){return this._tsi.transport.getAuto()},t.prototype.stop=function(){this._playbackSettings.playing&&(e.prototype.stop.call(this),this._tsi.transport.stop())},t.prototype.switchToFTL=function(){"ftl"!==this._tsi.transport.getKind()&&e.prototype.switchToFTL.call(this)},t.prototype.switchToHLS=function(){"hls"!==this._tsi.transport.getKind()&&e.prototype.switchToHLS.call(this)},t.prototype._parseHLSTrackData=function(){var e=this,t=this._tsi.transport;return(t instanceof wn?t.hlsManifest.pipe(ce(1)).toPromise():fetch(this._tsi.hlsSrc).then(function(e){return e.text()})).then(function(t){var n=t.split("\n").filter(function(e){return e.includes("TYPE=AUDIO")}).map(function(e,t){var n=/NAME=\"([a-zA-Z0-9\s]+)\"/.exec(e),r=n&&n[1]||"Track "+t,i=e.indexOf("AUTOSELECT=YES")>0,o=/LANGUAGE=\"([a-zA-Z0-9\s]+)\"/g.exec(e);return{name:r,autoselect:i,lang:o&&o[1]||"Unknown Language",default:!1,forced:void 0,groupId:void 0,type:void 0,url:void 0}});n.forEach(function(e){e.lang=E(e.name)}),e._player.dispatchEvent("audioTracks",n);var r=n.findIndex(function(e){if(!e.name)return!1;var t=e.name.toLowerCase();return"english"===t||"enus"===t});e._player.dispatchEvent("audioTrack",r>=0?r:0)})},t.prototype._applyPlayerSettings=function(){if(this._playbackSettings.audioOnly&&(this._playbackSettings.audioOnly=!1,this.setAudioOnly(!0)),this._playbackSettings.audioTrack){var e=this._playbackSettings.audioTrack;this._playbackSettings.audioTrack=0,this.setAudioTrack(e)}if(this._playbackSettings.showingCaptions&&(this._playbackSettings.showingCaptions=!1,this.setCaptionsShowing(!0)),this._playbackSettings.muted&&(this._playbackSettings.muted=!1,this.setMute(!0)),this._playbackSettings.paused&&(this._playbackSettings.paused=!1,this.pause()),this._playbackSettings.playing&&(this._playbackSettings.playing=!1,this.play()),this._playbackSettings.qualityIndex){var t=this._playbackSettings.qualityIndex;this._playbackSettings.qualityIndex=0,this.setQuality(t)}},t.prototype._setupTransportSubscriptions=function(){var e=this,t=this._tsi.transport;t.qualities().pipe(we(this._notInPlaybackState$)).subscribe(function(t){e._player.dispatchEvent("qualities",t)}),t.switching().pipe(we(this._notInPlaybackState$)).subscribe(function(t){e._player.dispatchEvent("switchingQuality",t)}),t.stats().pipe(we(this._notInPlaybackState$)).subscribe(function(t){e._player.dispatchEvent("stats",t)}),t.error().pipe(we(this._notInPlaybackState$)).subscribe(function(t){var n=t.code,r=t.details,i=t.fatal,o=t.transportFatal,a=t.name;if(e._errorInfo.hlsNativeFailure=e._errorInfo.hlsNativeFailure||"Unable to playback HLS natively"===a,i){if(o)switch(e.getCurrentTransportType()){case"hls":e._errorInfo.hlsErrorCount=Number.POSITIVE_INFINITY;break;case"ftl":e._errorInfo.ftlErrorCount=Number.POSITIVE_INFINITY}e.error(n,r,a)}}),t.warning().pipe(we(this._notInPlaybackState$)).subscribe(function(t){e._meta.logger.info(t.message),e._player.dispatchEvent("warning",t)}),t.hostName().pipe(we(this._notInPlaybackState$)).subscribe(function(t){e._tsi.hostName=t,e._player.dispatchEvent("hostName",t)}),t.quality().pipe(we(this._notInPlaybackState$)).subscribe(function(t){e._playbackSettings.qualityIndex=t,e._player.dispatchEvent("quality",t)}),t.auto().pipe(we(this._notInPlaybackState$)).subscribe(function(t){e._playbackSettings.autoEnabled=t&&t.autoEnabled,e._player.dispatchEvent("auto",t)}),t.playing().pipe(we(this._notInPlaybackState$)).subscribe(function(t){e._playbackSettings.playing=t,e._player.dispatchEvent("playing",t)}),t.muted().pipe(we(this._notInPlaybackState$)).subscribe(function(t){e._playbackSettings.muted=t,e._player.dispatchEvent("muted",t)}),t.audioOnly().pipe(we(this._notInPlaybackState$)).subscribe(function(t){e._playbackSettings.audioOnly=t,e._player.dispatchEvent("audioOnly",t)}),t.audioTracks().pipe(we(this._notInPlaybackState$)).subscribe(function(t){t.forEach(function(t,n){t.lang||(t.lang=E(t.name)),"English"===t.lang&&e.setAudioTrack(n)}),e._player.dispatchEvent("audioTracks",t)}),t.captioned().pipe(we(this._notInPlaybackState$)).subscribe(function(t){e._player.dispatchEvent("captioned",t||!!e._msi.manifest.hlsHasClosedCaptions)}),t.captionsEnabled().pipe(we(this._notInPlaybackState$)).subscribe(function(t){e._playbackSettings.showingCaptions=t,e._meta.logger.info("Dispatching captionsShowing: "+t),e._player.dispatchEvent("captionsShowing",t)})},t}(t),h=function(e){function t(t,n){var r=e.call(this)||this;return r.previousState=t,r.data=n,r}return a(t,e),Object.defineProperty(t.prototype,"stateName",{get:function(){return"Terminal"},enumerable:!0,configurable:!0}),t.prototype.enter=function(){e.prototype.enter.call(this,{previousState:this.previousState.stateName,data:this.data}),this._tsi.trackOneDSEvent&&this.data!==t.TERMINAL_STATE_VIA_DESTROY&&this._tsi.trackOneDSEvent({name:"microsoft_mixer_player_streamloadfailed",data:{reason:this.data?JSON.stringify(this.data):"unknown"}}),this._tsi.transport&&this._tsi.transport.destroy()},t.prototype.error=function(){},t.prototype.destroy=function(){},t.prototype.getCurrentTransportType=function(){},t.prototype.getStatsInterval=function(){return-1},t.prototype.isPlaying=function(){return!1},t.prototype.loadStream=function(){return c(this,void 0,void 0,function(){return d(this,function(e){return[2,Promise.resolve()]})})},t.prototype.loadVOD=function(){return c(this,void 0,void 0,function(){return d(this,function(e){return[2,Promise.resolve()]})})},t.prototype.pause=function(){},t.prototype.play=function(){},t.prototype.setAudioOnly=function(){},t.prototype.setAudioTrack=function(){},t.prototype.setCaptionsShowing=function(){},t.prototype.setMute=function(){},t.prototype.setQuality=function(){},t.prototype.getPlayerProfileTime=function(){return{profileStartLoadStream:-1,profileEndLoadStream:-1}},t.prototype.stop=function(){},t.prototype.switchToFTL=function(){},t.prototype.switchToHLS=function(){},t.TERMINAL_STATE_VIA_DESTROY="Destroyed",t}(t)}($r||($r={}));if(h){var Zr=window.localStorage.getItem("mixer.video_settings");if(Zr){var ei=void 0;try{ei=JSON.parse(Zr)}catch(e){ei={}}var ti=Date.now();(!ei.initTime||ti-ei.initTime>864e5)&&window.localStorage.setItem("mixer.video_settings",JSON.stringify({initTime:ti,autoplay:!0,muted:!1,volume:.6}))}}var ni=function(){function e(e){var t=this;this._mp=new $r,this._reloadsRemaining=2,this.keyboardKeydownHandler=function(e){if(229!==e.keyCode&&"Shift"!==e.key){var n=t.keyboardKeyCode.shift();if(!t.debugMenu&&n&&e.key===n){if(0===t.keyboardKeyCode.length)!!document.querySelector(".debug-menu")||(t.createDebugMenuHandler(),t.keyboardKeyCode=k.slice())}else t.keyboardKeyCode.length!==k.length&&(t.keyboardKeyCode=k.slice()),"Escape"===e.key?t.destroyDebugMenuHandler():"Enter"===e.key&&t.sdkLoaderHandler()}},this.gamepadKeydownHandler=function(e){if(229!==e.keyCode){var n=t.gamepadKeyCode.shift();if(!t.debugMenu&&n&&e.key===n){if(0===t.gamepadKeyCode.length)!!document.querySelector(".debug-menu")||(t.createDebugMenuHandler(),t.gamepadKeyCode=C.slice())}else if(t.gamepadKeyCode.length!==C.length&&(t.gamepadKeyCode=C.slice()),"GamepadB"===e.key)t.debugMenu&&(e.preventDefault(),e.stopPropagation(),t.destroyDebugMenuHandler());else if("GamepadDPadDown"===e.key||"GamepadLeftThumbstickDown"===e.key||"GamepadDPadUp"===e.key||"GamepadLeftThumbstickUp"===e.key)t.debugMenu&&(e.preventDefault(),e.stopPropagation());else if("GamepadDPadLeft"===e.key||"GamepadLeftThumbstickLeft"===e.key||"GamepadDPadRight"===e.key||"GamepadLeftThumbstickRight"===e.key){if(t.debugMenu){e.preventDefault(),e.stopPropagation();var r=document.activeElement,i=document.querySelector(".debug-menu-form");if(r&&i){var o=Array.from(i.children),a=o.findIndex(function(e){return e===r});"GamepadDPadLeft"===e.key||"GamepadLeftThumbstickLeft"===e.key?a>0&&o[a-1].focus():"GamepadDPadRight"!==e.key&&"GamepadLeftThumbstickRight"!==e.key||a<o.length&&o[a+1].focus()}}}else"GamepadMenu"===e.key&&t.sdkLoaderHandler()}},this.inputHandler=function(e){var n=t.inputKeyCode.shift(),r=e;!t.debugMenu&&n&&r.data&&r.data.length&&r.data.charAt(r.data.length-1)===n?0===t.inputKeyCode.length&&(!!document.querySelector(".debug-menu")||(t.createDebugMenuHandler(),t.inputKeyCode=k.slice())):t.inputKeyCode.length!==k.length&&(t.inputKeyCode=k.slice())},this.setupDebugMenuButtonHandlers=function(){I(function(){t.sdkLoaderHandler()}),O(function(){t.destroyDebugMenuHandler()})},this.sdkLoaderHandler=function(){t.debugMenu&&P().then(function(){t.destroyDebugMenuHandler()}).catch(function(){L()})},this.createDebugMenuHandler=function(){var e=t._options,n=e.telemetry,r=e.sessionGuid,i=T(["MixerPlayer","MixerPlayer","VERSION"])(window);t.debugMenu=A(n?n.getXpertCv():"",r,i),t.setupDebugMenuButtonHandlers()},this.destroyDebugMenuHandler=function(){R(t.debugMenu).then(function(){return t.debugMenu=void 0}).catch(function(){})},this._options=e,h&&(this.keyboardKeyCode=k.slice(),this.gamepadKeyCode=C.slice(),this.inputKeyCode=k.slice(),document.addEventListener("keydown",this.keyboardKeydownHandler,{capture:!0}),document.addEventListener("keydown",this.gamepadKeydownHandler,{capture:!0}),document.addEventListener("input",this.inputHandler))}return Object.defineProperty(e.prototype,"shouldReload",{get:function(){return this._reloadsRemaining>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTransport",{get:function(){return this._mp.state._tsi.transport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distHostName",{get:function(){return this._mp.state._tsi.hostName},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,t){this._mp.addEventListener(this._translateEventTypes(e),t)},e.prototype.removeEventListener=function(e,t){this._mp.removeEventListener(this._translateEventTypes(e),t)},e.prototype.setMixerPlayerOptions=function(e){this._options=e},e.prototype.destroy=function(){return h&&(this.destroyDebugMenuHandler(),document.removeEventListener("keydown",this.keyboardKeydownHandler,{capture:!0}),document.removeEventListener("keydown",this.gamepadKeydownHandler,{capture:!0}),document.removeEventListener("input",this.inputHandler)),this._mp.destroy()},e.prototype.getCurrentTransportType=function(){return this._mp.getCurrentTransportType()},e.prototype.getErrorMap=function(){var e=this._mp.state._errorInfo;return{ftl:e.ftlErrorCount,hls:e.hlsErrorCount,dash:0}},e.prototype.getPlayerProfileTime=function(){return this._mp.getPlayerPorfileTime()},e.prototype.getQualityStats=function(){var e=this.currentTransport;return e?e.getQualityStats():{currentEncodeFps:f,isSource:!1}},e.prototype.getStatsInterval=function(){return this._mp.getStatsInterval()},e.prototype.isFtl=function(){return"ftl"===this._mp.getCurrentTransportType()},e.prototype.isPlaying=function(){return this._mp.isPlaying()},e.prototype.loadStream=function(e,t,n){var r=this;return this._reloadFunc=function(){return r._promisefyLoad(function(){return c(r,void 0,void 0,function(){return d(this,function(r){return[2,this._mp.loadStream(e,t,this._options,n)]})})})},this._reloadFunc()},e.prototype.loadVOD=function(e){var t=this;return this._reloadFunc=function(){return t._promisefyLoad(function(){return c(t,void 0,void 0,function(){return d(this,function(t){return[2,this._mp.loadVOD(e,this._options)]})})})},this._reloadFunc()},e.prototype.pause=function(){return this._mp.pause()},e.prototype.play=function(){return this._mp.play()},e.prototype.reload=function(){if(this.shouldReload&&this._reloadFunc)return this._reloadsRemaining--,this._reloadFunc()},e.prototype.setAudioOnly=function(e){return this._mp.setAudioOnly(e)},e.prototype.setAudioTrack=function(e){return this._mp.setAudioTrack(e)},e.prototype.setCaptionsShowing=function(e){return this._mp.setCaptionsShowing(e)},e.prototype.setMute=function(e){return this._mp.setMute(e)},e.prototype.setQuality=function(e){return this._mp.setQuality(e)},e.prototype.setAuto=function(e){return this._mp.setAuto(e)},e.prototype.getAuto=function(){return this._mp.getAuto()},e.prototype.stop=function(){return this._mp.stop()},e.prototype.switchToFTL=function(){var e=this;return this._promisefyLoad(function(){return e._mp.switchToFTL()})},e.prototype.switchToHLS=function(){return this._mp.switchToHLS()},e.prototype._promisefyLoad=function(e){var t=this;return new Promise(function(n,r){var i=function(){t._mp.removeEventListener("ftlReady",i),t._mp.removeEventListener("hlsReady",i),t._mp.removeEventListener("errorFatal",i),setTimeout(function(){return n()})};t._mp.addEventListener("ftlReady",i),t._mp.addEventListener("hlsReady",i),t._mp.addEventListener("errorFatal",function(e){t._mp.removeEventListener("ftlReady",i),t._mp.removeEventListener("hlsReady",i),t._mp.removeEventListener("errorFatal",i),r(e)}),e()})},e.prototype._translateEventTypes=function(e){var t;switch(e){case"playerDestroyed":t="destroyed";break;case"ftlStream":t="ftlReady";break;default:t=e}return t},e.RELOAD_TIMEOUT=12e3,e.VERSION=$r.VERSION,e}(),ri=function(){function e(){this._eventMap={},this._onceMap=new Map}return e.prototype.emit=function(e,t){var n=this._eventMap[e];if(n)for(var r=n.length-1;r>=0;r--){var i=n[r=Math.min(n.length-1,r)];i.call(this,t),this._onceMap.get(i)&&(this.off(e,i),this._onceMap.delete(i))}},e.prototype.on=function(e,t){this._eventMap[e]=this._eventMap[e]||[],this._eventMap[e].push(t)},e.prototype.once=function(e,t){this.on(e,t),this._onceMap.set(t,!0)},e.prototype.off=function(e,t){var n=this._eventMap[e];if(n){var r=n.indexOf(t);n.splice(r,1),n.length||delete this._eventMap[e],this._onceMap.delete(t)}},e}(),ii=n(18);function oi(){}var ai=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},si=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ui=function(e,t){return ai(void 0,void 0,void 0,function(){var n;return si(this,function(r){switch(r.label){case 0:return[4,fetch(e,{headers:t})];case 1:if(!(n=r.sent()).ok)throw new Error("Fetch error: "+n.status);return[4,n.json()];case 2:return[2,r.sent()]}})})},li=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},ci=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},di=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},fi=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},pi=function(e){var t=e.accessKey,n=e.channelId;return di(void 0,void 0,void 0,function(){var e;return fi(this,function(r){return e=function(e){var t=e.accessKey,n=e.channelId,r=e.clientId,i=e.clientVersion,o=e.deviceType,a=e.os,s=new URL("https://conductor.videosvc.mixer.com/api/video/v2/channels/"+n+"/dist");return s.searchParams.set("accessKey",t),s.searchParams.set("MS-ClientId",r),s.searchParams.set("MS-ClientVersion",i),s.searchParams.set("MS-DeviceType",o),s.searchParams.set("MS-OS",a),s.toString()}({accessKey:t,channelId:n,clientId:"MixerWeb",clientVersion:no.Environment.coreVersion,deviceType:no.Environment.device||"Unknown",os:no.Environment.os||"Unknown"}),[2,ui(e)]})})},hi=function(e){return e.stats},gi={getTimeSpentBuffering:function(e,t){void 0===t&&(t=performance.now());var n=hi(e).timeSpentBuffering;return n.startTime?n.total+(t-n.startTime):n.total},getTimeSpentWatching:function(e,t){void 0===t&&(t=performance.now());var n=hi(e).timeSpentWatching;return n.startTime?n.total+(t-n.startTime):n.total},getVideoDimensions:function(e){return e.videoDimensions}},yi=n(2),mi=Object(yi.createAsyncAction)("@stream/LOAD_STREAM_REQUEST","@stream/LOAD_STREAM_SUCCESS","@stream/LOAD_STREAM_FAILURE")(),vi=function(e){return e.getState().core},bi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_i=function(){return(_i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Si=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},wi=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ei=1e3,Ti=15e3,xi=function(){function e(e){this._stateMachine=e}return Object.defineProperty(e.prototype,"id",{get:function(){return this.constructor.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActiveState",{get:function(){return this._stateMachine.state===this},enumerable:!0,configurable:!0}),e.prototype.audioOnly=function(e){var t=this._stateMachine.core.state.audioOnly;t.requested=e,t.warning=""},e.prototype.audioTrack=function(e){var t=this._stateMachine.core.state.audioTrack;t.requested=e,t.warning=""},e.prototype.autoBitrate=function(e){var t=this._stateMachine.core.state.autoBitrateEnabled;t.requested=e,t.warning=""},e.prototype.mute=function(e){var t=this._stateMachine.core.state.muted;t.requested=e,t.warning=""},e.prototype.play=function(e){var t=this._stateMachine.core.state.playing;t.requested=e,t.warning=""},e.prototype.quality=function(e){var t=this._stateMachine.core.state.quality;t.requested=e,t.warning=""},e.prototype.switchProtocol=function(e){var t=this._stateMachine.core;t.mediaConfig?(t.requestedProtocol=e,this.load(t.mediaConfig)):t.emit(Bi.error,{type:"switch protocol failed",details:t.protocol+" -> "+e,fatal:!1})},e.prototype.textTrack=function(e){var t=this._stateMachine.core.state.textTrack;t.requested=e,t.warning=""},e.prototype.load=function(e){this._stateMachine.core.mediaConfig=e,this._exit(new ki(this._stateMachine))},e.prototype.destroy=function(){this._exit(new Di(this._stateMachine))},e.prototype._exit=function(e){if(this.isActiveState){var t=this.constructor,n=e.constructor,r=this._stateMachine.chart.get(t),i=this._stateMachine.core;e.id===Pi.id||e.id===Di.id||r&&r.has(n)||i.emit(Bi.error,{type:"invalid state transition",details:this.id+" -> "+e.id,fatal:!1}),i.logTelemetry("DevLog",{type:"trace",data:"state transition: "+this.id+" -> "+e.id}),this._stateMachine.state=e,e.streamSessionGuid=e.streamSessionGuid||this.streamSessionGuid,e._enter()}else this._logStreamLoadAborted()},e.prototype._logStreamLoadAborted=function(){this._stateMachine.core.logTelemetry("StreamLoadFailed",{reason:"aborted",streamSessionGuid:this.streamSessionGuid,metadata:{state:this.id}})},e.prototype._reload=function(){var e=this._stateMachine.core.mediaConfig;switch(e.type){case"clip":this._exit(new Ai(this._stateMachine));break;case"live":this._exit(new Ci(this._stateMachine));break;case"vod":this._exit(new Ii(this._stateMachine));break;default:this._exit(new Pi(this._stateMachine,e,"invalid mediaConfig type",e))}},e}(),ki=function(e){function t(t){var n=e.call(this,t)||this;return n.streamSessionGuid=Object(ii.v4)(),n}return bi(t,e),t.prototype._enter=function(){this.streamSessionGuid=this.streamSessionGuid||Object(ii.v4)();var e=this._stateMachine.core,t=e.state;e.streamSessionCount++,e.adapterMetas.forEach(function(e){e.attemptCount=0,e.shortCircuitCount=0}),t.audioTracks=[],t.autoBitrateAvailable=_i({},t.autoBitrateAvailable,{loading:!0}),t.autoBitrateEnabled=_i({},t.autoBitrateEnabled,{loading:!0}),t.playing=_i({},t.playing,{loading:!0}),t.qualities=[],t.quality=_i({},t.quality,{loading:!0}),t.textTracks=[],e.emit(Bi.stateChanged),e.mediaConfig&&this.load(e.mediaConfig)},t.prototype.load=function(e){var t=this._stateMachine.core;t.mediaConfig=e,t.streamSessionStartTime=performance.now(),t.store.dispatch(mi.request({mediaConfig:e,streamSessionGuid:this.streamSessionGuid})),t.logTelemetry("StreamLoadIntent",{contentType:e.type,contentId:""+e.id,streamSessionCount:t.streamSessionCount,streamSessionGuid:this.streamSessionGuid,protocol:t.requestedProtocol||"serverSpecifiedDefault"}),this._reload()},t.id="Created",t}(xi),Ci=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._attemptCount=0,t}return bi(t,e),t.prototype._enter=function(){return Si(this,void 0,void 0,function(){var e,t,n,r;return wi(this,function(i){switch(i.label){case 0:e=this._stateMachine.core,i.label=1;case 1:return i.trys.push([1,3,,4]),this._attemptCount++,[4,(o=e.mediaConfig.id,a=e.mediaConfig.jwtToken,li(void 0,void 0,void 0,function(){var e;return ci(this,function(t){return e=new Headers,a&&e.append("authorization","JWT "+a),[2,ui("https://mixer.com/api/v1/channels/"+o+"/manifest.light2",e)]})}))];case 2:return t=i.sent(),this.isActiveState?(e.channelManifest=t,e.accessKey=t.accessKey,e.channelId=+e.mediaConfig.id,this._exit(new Oi(this._stateMachine)),[3,4]):(this._logStreamLoadAborted(),[2]);case 3:return n=i.sent(),this.isActiveState?(r=this._attemptCount>=5,e.emit(Bi.error,{type:"Channel Manifest Error",details:JSON.stringify(n),fatal:r}),r?this._exit(new Pi(this._stateMachine,e.mediaConfig,"channel manifest fetch error",e.mediaConfig)):this._enter(),[3,4]):(this._logStreamLoadAborted(),[2]);case 4:return[2]}var o,a})})},t.prototype._switchProtocol=function(){},t.id="SetupChannelManifest",t}(xi),Ai=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._attemptCount=0,t}return bi(t,e),t.prototype._enter=function(){return Si(this,void 0,void 0,function(){var e,t,n;return wi(this,function(r){switch(r.label){case 0:e=this._stateMachine.core,r.label=1;case 1:return r.trys.push([1,3,,4]),this._attemptCount++,[4,(i=e.mediaConfig.id,ui("https://mixer.com/api/v1/clips/"+i))];case 2:return t=r.sent(),this.isActiveState?((n=t.contentLocators.find(function(e){return"HlsStreaming"===e.locatorType}))?(e.streamManifest={default:"Hls",hls:{recommendedSegmentBufferSize:3,server:n.uri}},e.channelId=t.ownerChannelId,e.requestedProtocol="hls",this._exit(new Li(this._stateMachine))):this._exit(new Pi(this._stateMachine,e.mediaConfig,"clip manifest content error",t)),[3,4]):(this._logStreamLoadAborted(),[2]);case 3:return r.sent(),this.isActiveState?(this._attemptCount<5?this._enter():this._exit(new Pi(this._stateMachine,e.mediaConfig,"clip manifest fetch error",e.mediaConfig)),[3,4]):(this._logStreamLoadAborted(),[2]);case 4:return[2]}var i})})},t.id="SetupClipManifestState",t}(xi),Ii=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._attemptCount=0,t}return bi(t,e),t.prototype._enter=function(){return Si(this,void 0,void 0,function(){var e,t,n;return wi(this,function(r){switch(r.label){case 0:e=this._stateMachine.core,r.label=1;case 1:return r.trys.push([1,3,,4]),this._attemptCount++,[4,(i=e.mediaConfig.id,ui("https://mixer.com/api/v1/recordings/"+i))];case 2:return t=r.sent(),this.isActiveState?((n=t.vods.find(function(e){return"hls"===e.format}))?(e.streamManifest={default:"Hls",hls:{recommendedSegmentBufferSize:3,server:n.baseUrl+"manifest.m3u8"}},e.channelId=t.channelId,e.requestedProtocol="hls",this._exit(new Li(this._stateMachine))):this._exit(new Pi(this._stateMachine,e.mediaConfig,"vod manifest content error",t)),[3,4]):(this._logStreamLoadAborted(),[2]);case 3:return r.sent(),this.isActiveState?(this._attemptCount<5?this._enter():this._exit(new Pi(this._stateMachine,e.mediaConfig,"vod manifest fetch error",e.mediaConfig)),[3,4]):(this._logStreamLoadAborted(),[2]);case 4:return[2]}var i})})},t.id="SetupVODManifestState",t}(xi),Oi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._attemptCount=0,t}return bi(t,e),t.prototype._enter=function(){return Si(this,void 0,void 0,function(){var e,t,n,r;return wi(this,function(i){switch(i.label){case 0:e=this._stateMachine.core,i.label=1;case 1:return i.trys.push([1,3,,4]),this._attemptCount++,[4,pi({accessKey:e.accessKey,channelId:e.channelId})];case 2:return t=i.sent(),this.isActiveState?(n=[],t.hls&&n.push("hls"),t.webRtc&&n.push("webRtc"),t.dash&&n.push("dash"),n.length?(e.state.lowLatencyAvailable=n.includes("webRtc")&&!!e.adapterMetas.find(function(e){return e.valid&&"webRtc"===e.protocol}),e.state.protocols=n,e.emit(Bi.stateChanged),e.streamManifest=t,this._exit(new Li(this._stateMachine))):this._exit(new Pi(this._stateMachine,e.mediaConfig,"stream manifest content error",t)),[3,4]):(this._logStreamLoadAborted(),[2]);case 3:return r=i.sent(),this.isActiveState?(this._attemptCount<5?this._enter():this._exit(new Pi(this._stateMachine,e.mediaConfig,"stream manifest fetch error",{error:r.message,mediaConfig:e.mediaConfig})),[3,4]):(this._logStreamLoadAborted(),[2]);case 4:return[2]}})})},t.prototype._switchProtocol=function(){},t.id="SetupStreamManifest",t}(xi),Li=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return bi(t,e),t.prototype._enter=function(){return Si(this,void 0,void 0,function(){var e,t,n,r,i,o=this;return wi(this,function(a){switch(a.label){case 0:if(e=this._stateMachine.core,!(t=this._pickAdapterMeta()))return[3,5];e.state.protocol=t.protocol,t.attemptCount++,n=null,a.label=1;case 1:return a.trys.push([1,3,,4]),(n=new t.adapterConstructor).core=e,n.instructions=e.streamManifest[t.protocol],n.onError=function(t,n,r){return o.isActiveState&&e.emit(Bi.error,{type:t,details:n,fatal:"warning"!==r})},[4,n.loadStream()];case 2:return a.sent(),[3,4];case 3:return r=a.sent(),this.isActiveState?"warning"===(i=r).severity?[2]:(e.logTelemetry("DevLog",{type:"trace",data:"Error setting up "+t.adapterConstructor.id+": "+i.details}),"adapterFatal"===i.severity?t.valid=!1:e.requestedProtocol=t.attemptCount<t.adapterConstructor.attemptLimit?t.protocol:void 0,this._reload(),[2]):(this._logStreamLoadAborted(),[2]);case 4:return this.isActiveState?(e.adapter=n,this._exit(new Ri(this._stateMachine)),[3,6]):(this._logStreamLoadAborted(),[2]);case 5:this._exit(new Pi(this._stateMachine,e.mediaConfig,"adapter matching error",{adapterTypes:no.adapterTypes.map(function(e){return e.id}),requestedProtocol:e.requestedProtocol,streamManifest:e.streamManifest})),a.label=6;case 6:return[2]}})})},t.prototype._pickAdapterMeta=function(){var e,t=this._stateMachine.core,n=t.adapterMetas,r=t.requestedProtocol,i=t.streamManifest,o=function(e){return n.find(function(t){return!(!t.valid||t.attemptCount>=5||!i[t.protocol])&&(!e||e.toLowerCase()===t.protocol.toLowerCase())})};return r&&!(e=o(r))&&t.logTelemetry("DevLog",{type:"trace",data:"Unable to fulfill client requested protocol: "+r}),e||"Any"===i.default||"Unknown"===i.default||!(e=o(i.default))&&t.logTelemetry("DevLog",{type:"trace",data:"Unable to fulfill conductor default protocol: "+i.default}),e||(t.requestedProtocol=void 0,e=o()),e},t.id="SetupAdapter",t}(xi),Ri=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._prevFrameStats={},t._streamLoadFailed=!1,t._unsentFrameStats=[],t._handleFirstFrameCallback=function(e){if(!t._streamLoadFailed){var n=t._stateMachine.core;if(e){var r=n.adapter.constructor.protocol,i=n.adapter.server.toString();n.store.dispatch(mi.success({streamManifest:n.streamManifest,renderedProtocol:{protocol:r,server:i}})),n.logTelemetry("StreamSessionStart",{adapter:n.adapter.constructor.id,connectionUri:i,contentId:""+n.mediaConfig.id,contentType:n.mediaConfig.type,streamSessionCount:n.streamSessionCount,streamSessionGuid:t.streamSessionGuid,streamSessionTime:(performance.now()-n.streamSessionStartTime)/1e3,hasTranscodesAvailable:!!n.state.qualities.length,protocol:r}),t._heartbeatIntervalHandle=setInterval(function(){if(n.state.playing.applied){var e=n.adapter.computeStats();n.logTelemetry("StreamSessionHeartbeat",{connectionUri:n.adapter.server.toString(),frames:t._unsentFrameStats.length?t._unsentFrameStats:void 0,streamSessionCount:n.streamSessionCount,renderedTranscode:(n.state.quality.applied?n.state.quality.applied.height:0)+"p",streamSessionGuid:t.streamSessionGuid,streamSessionTime:(performance.now()-n.streamSessionStartTime)/1e3,timeSpentBuffering:gi.getTimeSpentBuffering(vi(n.store))/1e3,timeSpentWatching:gi.getTimeSpentWatching(vi(n.store))/1e3,protocol:n.adapter.constructor.protocol,selectedTranscode:n.state.quality.requested?n.state.quality.requested.height+"p":"unknown",videoHeight:e.videoHeight,videoWidth:e.videoWidth}),t._unsentFrameStats=[]}},Ti),t._frameStatsIntervalHandle=setInterval(function(){if(n.state.playing.applied){var e=n.adapter.computeStats(),r=Object.keys(e.frameStats);if(r.length){for(var i={},o=0,a=r;o<a.length;o++){var s=a[o],u=e.frameStats[s];i[s]=u-(t._prevFrameStats[s]||0),t._prevFrameStats[s]=u}t._unsentFrameStats.push(i)}}},Ei)}else n.store.dispatch(mi.failure({mediaId:n.channelId,error:new Error("no ffr")})),n.logTelemetry("StreamLoadFailed",{reason:"no ffr",streamSessionGuid:t.streamSessionGuid});n.adapter.onFirstFrame=oi}},t}return bi(t,e),t.prototype._enter=function(){return Si(this,void 0,void 0,function(){var e,t,n,r,i,o,a,s,u=this;return wi(this,function(l){e=this._stateMachine.core,t=e.adapter,n=e.adapterMetas,r=this._adapterMeta=n.find(function(e){return e.adapterConstructor===t.constructor}),i=0,e.state.playing.requested?r.shortCircuitCount<2&&(r.shortCircuitCount++,i=setTimeout(function(){u.isActiveState?(e.logTelemetry("DevLog",{type:"trace",data:"Timed out trying to load video for "+r.adapterConstructor.id+", short-circuit retrying"}),u._reload()):u._logStreamLoadAborted()},12e3)):(e.store.dispatch(mi.failure({mediaId:e.channelId,error:new Error("autoplay disabled")})),e.logTelemetry("StreamLoadFailed",{reason:"autoplay disabled",streamSessionGuid:this.streamSessionGuid}),this._streamLoadFailed=!0),e.state.muted.requested||e.emit(Bi.error,{type:"mute warning",details:'Unmuted at load, "streamsessionstart" telemetry event may not fire until the viewer manually starts playback.',fatal:!1});try{t.video=e.nativePlayer,t.onError=function(t,n,r){u.isActiveState&&(e.emit(Bi.error,{type:t,details:n,fatal:"warning"!==r}),u._handleAdapterError({details:n,severity:r,type:t}))},t.onFirstFrame=function(e){return u.isActiveState&&u._handleFirstFrameCallback(e)},t.loadVideo(),clearTimeout(i),o=e.state.audioTrack.applied,t.audioTrack&&o&&(c=e.state.audioTracks,(a=c.find(function(e){return"English"===e.label})||c[0])&&a.id!==o.id&&t.audioTrack(a)),e.state.protocol=r.adapterConstructor.protocol,n.filter(function(e){return e.adapterConstructor===t.constructor})[0].attemptCount=0}catch(t){if(!this.isActiveState)return this._logStreamLoadAborted(),[2];"warning"!==(s=t).severity&&clearTimeout(i),this._handleAdapterError(s),e.logTelemetry("DevLog",{type:"trace",data:"Error loading video with adapter: "+r.adapterConstructor.id+": "+JSON.stringify(s)})}var c;return[2]})})},t.prototype._exit=function(t){this._stateMachine.core.adapter.destroy(),clearInterval(this._heartbeatIntervalHandle),clearInterval(this._frameStatsIntervalHandle),e.prototype._exit.call(this,t)},t.prototype.destroy=function(){e.prototype.destroy.call(this);var t=this._stateMachine.core.adapter;t.destroy&&t.destroy()},t.prototype.load=function(t){var n=this._stateMachine.core,r=n.state.quality.requested;r&&!n.state.autoBitrateEnabled.requested?n.defaultQualitySelector=function(e){return(e.map(function(e){return{quality:e,delta:Math.abs(r.height-e.height)}}).sort(function(e,t){return e.delta>t.delta?1:-1})[0]||{}).quality}:n.defaultQualitySelector=oi,e.prototype.load.call(this,t)},t.prototype.switchProtocol=function(t){var n=this._stateMachine.core;"live"===n.mediaConfig.type?(n.state.playing.loading=!0,n.emit(Bi.stateChanged),n.requestedProtocol=t,this.streamSessionGuid=Object(ii.v4)(),n.adapterMetas.forEach(function(e){return e.attemptCount=0}),this._exit(new Li(this._stateMachine))):e.prototype.switchProtocol.call(this,t)},t.prototype.play=function(t){var n=this._stateMachine.core;n.state.playing.computed!==t&&(e.prototype.play.call(this,t),n.adapter.play(t))},t.prototype.mute=function(t){var n=this._stateMachine.core;n.state.muted.computed!==t&&(e.prototype.mute.call(this,t),n.adapter.mute(t))},t.prototype.audioOnly=function(t){var n=this._stateMachine.core;n.state.audioOnly.computed!==t&&(e.prototype.audioOnly.call(this,t),n.adapter.audioOnly&&n.adapter.audioOnly(t))},t.prototype.audioTrack=function(t){var n=this._stateMachine.core;n.state.audioTrack.computed!==t&&(e.prototype.audioTrack.call(this,t),n.adapter.audioTrack&&n.adapter.audioTrack(t))},t.prototype.autoBitrate=function(t){var n=this._stateMachine.core;n.state.autoBitrateEnabled.computed!==t&&(e.prototype.autoBitrate.call(this,t),n.adapter.autoBitrate&&n.adapter.autoBitrate(t))},t.prototype.quality=function(t){var n=this._stateMachine.core;n.state.quality.computed!==t&&(e.prototype.quality.call(this,t),n.adapter.quality&&n.adapter.quality(t))},t.prototype.textTrack=function(t){var n=this._stateMachine.core;n.state.textTrack.computed!==t&&(e.prototype.textTrack.call(this,t),n.adapter.textTrack&&n.adapter.textTrack(t))},t.prototype._handleAdapterError=function(e){switch(e.severity){case"warning":this._stateMachine.core.emit(Bi.error,{type:"video load warning",details:e.details,fatal:!1});break;case"adapterFatal":this._adapterMeta.valid=!1;case"sessionFatal":this._reload()}},t.id="Playback",t}(xi),Pi=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.mediaConfig=n,o.reason=r||"unknown",o.metadata=i,o}return bi(t,e),t.prototype._enter=function(){var e=this._stateMachine.core,t={reason:this.reason,streamSessionGuid:this.streamSessionGuid,metadata:JSON.stringify(this.metadata)};e.store.dispatch(mi.failure({mediaId:this.mediaConfig?this.mediaConfig.id:"unknown",error:new Error("no ffr")})),e.logTelemetry("StreamLoadFailed",t),this._exit(new Di(this._stateMachine,t))},t.id="StreamLoadFailed",t}(xi),Di=function(e){function t(t,n){var r=e.call(this,t)||this;return r.error=n,r}return bi(t,e),t.prototype._enter=function(){this.error&&this._stateMachine.core.emit(Bi.error,{type:"Spectre Error",details:this.error.toString(),fatal:!0})},t.prototype.audioOnly=function(){},t.prototype.audioTrack=function(){},t.prototype.autoBitrate=function(){},t.prototype.destroy=function(){},t.prototype.mute=function(){},t.prototype.play=function(){},t.prototype.quality=function(){},t.prototype.switchProtocol=function(){},t.prototype.textTrack=function(){},t.prototype._reload=function(){},t.id="Terminal",t}(xi),Mi=function(){function e(e,t){this.core=e,this.chart=t,this.state=new ki(this)}return e.prototype.audioOnly=function(e){this.state.audioOnly(e)},e.prototype.audioTrack=function(e){this.state.audioTrack(e)},e.prototype.autoBitrate=function(e){this.state.autoBitrate(e)},e.prototype.destroy=function(){this.state.destroy()},e.prototype.load=function(e){this.state.load(e)},e.prototype.mute=function(e){this.state.mute(e)},e.prototype.play=function(e){this.state.play(e)},e.prototype.quality=function(e){this.state.quality(e)},e.prototype.switchProtocol=function(e){this.state.switchProtocol(e)},e.prototype.textTrack=function(e){this.state.textTrack(e)},e}(),Ni=(n(32),function(){return Math.random().toString(36).substring(7).split("").join(".")}),Fi={INIT:"@@redux/INIT"+Ni(),REPLACE:"@@redux/REPLACE"+Ni(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ni()}};function ji(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function Ui(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:Fi.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:Fi.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Fi.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var u=a[s],l=n[u],c=e[u],d=l(c,t);if(void 0===d){var f=ji(u,t);throw new Error(f)}i[u]=d,r=r||d!==c}return r?i:e}}var Bi,Vi=Object(yi.createAction)("@playback/NOTIFY_BUFFERING",function(e){return function(t){return void 0===t&&(t=performance.now()),e({time:t})}}),Gi=Object(yi.createAction)("@playback/REQUEST_IS_MUTED",function(e){return function(t){return e({setIsMuted:t})}}),qi=Object(yi.createAsyncAction)("@playback/REQUEST_PAUSE_REQUEST","@playback/REQUEST_PAUSE_SUCCESS","@playback/REQUEST_PAUSE_FAILURE")(),Hi=(Object(yi.createAction)("@playback/REQUEST_PROTOCOL",function(e){return function(t){return e({protocol:t})}}),Object(yi.createAction)("@playback/SEEK",function(e){return function(t){return e({currenTime:t})}}),Object(yi.createAction)("@playback/SELECT_TEXT_TRACK",function(e){return function(t){return e({textTrack:t})}}),Object(yi.createAction)("@playback/SELECT_QUALITY",function(e){return function(t){return e({quality:t})}}),Object(yi.createAction)("@playback/SELECT_AUDIO_TRACK",function(e){return function(t){return e({audioTrack:t})}}),Object(yi.createAction)("@internal/SET_IS_PLAYING",function(e){return function(t,n){return void 0===n&&(n=performance.now()),e({isPaused:t,time:n})}})),Ki=Object(yi.createAction)("@playback/SET_VOLUME",function(e){return function(t){return e({volume:t})}}),zi=function(){return(zi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Qi=Ui({timeSpentBuffering:function(e,t){switch(void 0===e&&(e={total:0,startTime:null}),t.type){case Object(yi.getType)(mi.success):return{total:0,startTime:null};case Object(yi.getType)(Vi):if(!e.startTime)return zi({},e,{startTime:t.payload.time});break;case Object(yi.getType)(Hi):if(e.startTime)return{total:e.total+(t.payload.time-e.startTime),startTime:null}}return e},timeSpentWatching:function(e,t){switch(void 0===e&&(e={total:0,startTime:null}),t.type){case Object(yi.getType)(mi.success):return{total:0,startTime:null};case Object(yi.getType)(Vi):if(e.startTime)return{total:e.total+(t.payload.time-e.startTime),startTime:null};break;case Object(yi.getType)(Hi):if(t.payload.isPaused){if(e.startTime)return{total:e.total+(t.payload.time-e.startTime),startTime:null}}else if(!e.startTime)return zi({},e,{startTime:t.payload.time})}return e},videoDimensions:function(e,t){return void 0===e&&(e={width:0,height:0}),e}}),Wi=function(){return(Wi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Yi=Ui({sessionID:function(e,t){return void 0===e&&(e=null),e},request:function(e,t){switch(void 0===e&&(e={mediaConfig:null,streamSessionGuid:""}),t.type){case Object(yi.getType)(mi.request):return Wi({},t.payload)}return e},renderedProtocol:function(e,t){switch(void 0===e&&(e={protocol:"",server:""}),t.type){case Object(yi.getType)(mi.success):return t.payload.renderedProtocol}return e},accessKey:function(e,t){return void 0===e&&(e=null),e},config:function(e,t){return void 0===e&&(e=null),e},textTracks:function(e,t){return void 0===e&&(e=[]),e},audioTracks:function(e,t){return void 0===e&&(e=[]),e},isCaptioningAvailable:function(e,t){return void 0===e&&(e=!1),e},isAutoAvailable:function(e,t){return void 0===e&&(e=!1),e},variants:function(e,t){return void 0===e&&(e=[]),e},duration:function(e,t){return void 0===e&&(e=0),e}}),Xi=Ui({status:function(e,t){return void 0===e&&(e={intent:null,state:2,status:0,error:null}),e},volume:function(e,t){return void 0===e&&(e=0),e},isMuted:function(e,t){return void 0===e&&(e={intent:null,state:2,status:0,error:null}),e},audioTrack:function(e,t){return void 0===e&&(e={intent:null,state:0,status:0,error:null}),e},textTrack:function(e,t){return void 0===e&&(e={intent:null,state:null,status:0,error:null}),e},quality:function(e,t){return void 0===e&&(e={intent:null,state:"auto",status:0,error:null}),e},currentTime:function(e,t){return void 0===e&&(e=0),e}}),Ji=Ui({authentication:function(e,t){return void 0===e&&(e={}),e},playerSessionID:function(e,t){return void 0===e&&(e=null),e},appName:function(e,t){return void 0===e&&(e=null),e},appVersion:function(e,t){return void 0===e&&(e=null),e},playerVersion:function(e,t){return void 0===e&&(e=null),e},userAgent:function(e,t){return void 0===e&&(e=""),e},context:function(e,t){return void 0===e&&(e=2),e},experiment:function(e,t){return void 0===e&&(e=null),e},gaClientID:function(e,t){return void 0===e&&(e=""),e},mixerUserID:function(e,t){return void 0===e&&(e=null),e}}),$i=Ui({stats:Qi,stream:Yi,playback:Xi,environment:Ji}),Zi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eo=function(){return(eo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};!function(e){e.destroyed="destroyed",e.error="error",e.meta="meta",e.stateChanged="stateChanged"}(Bi||(Bi={}));var to=new Map([[ki,new Set([Ci,Ai,Ii])],[Ci,new Set([ki,Oi])],[Ai,new Set([ki,Li])],[Ii,new Set([ki,Li])],[Oi,new Set([ki,Li])],[Li,new Set([ki,Ci,Ai,Ii,Ri])],[Ri,new Set([ki,Li,Ci,Ai,Ii])],[Pi,new Set([])],[Di,new Set([ki])]]),no=function(e){function t(n){var r=n.audioOnly,i=void 0!==r&&r,o=n.autoBitrate,a=void 0===o||o,s=n.autoPlay,u=void 0===s||s,l=n.context,c=n.logTelemetry,d=n.mediaConfig,f=n.mute,p=void 0!==f&&f,h=n.nativePlayer,g=n.playerSessionGuid,y=n.protocol,m=n.store,v=n.userRoles,b=void 0===v?[]:v,_=e.call(this)||this;if(_.streamSessionCount=0,_._stateChangeQueued=!1,_._telemetrySequenceNumber=0,!t.adapterTypes)throw new Error("No adapter types set. Call PlayerCore.setAdapterTypes and pass in array of adapter types");return _.context=l,_.defaultQualitySelector=_.defaultQualitySelector||oi,_._logTelemetry=c,_.nativePlayer=h,_.playerSessionGuid=g,_.requestedProtocol=y,_.store=m,_.userRoles=b,h.__spectre=_,_.adapterMetas=t.adapterTypes.map(function(e){return{attemptCount:0,adapterConstructor:e,shortCircuitCount:0,protocol:e.protocol,valid:!0}}),_.state={audioOnly:{applied:!1,requested:i,computed:i,loading:!1},audioTrack:{applied:null,requested:null,computed:null,loading:!1},audioTracks:[],autoBitrateAvailable:{applied:!1,requested:!1,computed:!1,loading:!1},autoBitrateEnabled:{applied:!1,requested:a,computed:a,loading:!a},captionsAvailable:!1,lowLatencyAvailable:!1,muted:{applied:!1,requested:p,computed:p,loading:p},playing:{applied:!1,requested:u,computed:u,loading:!0},protocols:[],quality:{applied:null,requested:null,computed:null,loading:!0},qualities:[],textTrack:{applied:null,requested:null,computed:null,loading:!1},textTracks:[]},_.stateMachine=new Mi(_,to),h.__spectre=_,_.playerSessionStartTime=performance.now(),_.logTelemetry("PlayerSessionStart"),d&&_.stateMachine.load(d),_}return Zi(t,e),t.setAdapterTypes=function(e){e.forEach(function(e){return e.init&&e.init()}),this.adapterTypes=e},Object.defineProperty(t.prototype,"protocol",{get:function(){return this.adapter&&this.adapter.constructor.protocol},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(e){this.on(Bi.stateChanged,e)},t.prototype.unsubscribe=function(e){this.off(Bi.stateChanged,e)},t.prototype.mute=function(e){this.stateMachine.mute(e)},t.prototype.textTrack=function(e){this.stateMachine.textTrack(e)},t.prototype.quality=function(e){this.stateMachine.quality(e)},t.prototype.audioTrack=function(e){this.stateMachine.audioTrack(e)},t.prototype.load=function(e){this.stateMachine.load(e)},t.prototype.play=function(e){this.stateMachine.play(e)},t.prototype.autoBitrate=function(e){this.stateMachine.autoBitrate(e)},t.prototype.audioOnly=function(e){this.stateMachine.audioOnly(e)},t.prototype.destroy=function(){this.stateMachine.destroy()},t.prototype.switchProtocol=function(e){this.stateMachine.switchProtocol(e)},t.prototype.off=function(t,n){e.prototype.off.call(this,t,n)},t.prototype.on=function(t,n){e.prototype.on.call(this,t,n)},t.prototype.once=function(t,n){e.prototype.once.call(this,t,n)},t.prototype.emit=function(t,n){var r=this;if(t===Bi.stateChanged)this._stateChangeQueued||(this._stateChangeQueued=!0,setTimeout(function(){r._stateChangeQueued=!1,e.prototype.emit.call(r,t,n)}));else{if(t===Bi.error){var i=n;this.logTelemetry("DevLog",{type:"error",data:i.type+": "+i.details})}e.prototype.emit.call(this,t,n)}},t.prototype.logTelemetry=function(e,n){if(void 0===n&&(n={}),"StreamLoadFailed"===e||"StreamSessionStart"===e){var r=n;if(t._streamSessionStatuses[r.streamSessionGuid])return void this.emit(Bi.error,{type:"Duplicate Telemetry Event",details:JSON.stringify({eventName:e,data:n}),fatal:!1})}if("StreamSessionStart"===e){r=n;t._streamSessionStatuses[r.streamSessionGuid]={status:"started",timestamp:new Date}}else if("StreamLoadFailed"===e){r=n;t._streamSessionStatuses[r.streamSessionGuid]={status:"failed",timestamp:new Date}}var i=t.Environment;this._logTelemetry({name:e,data:eo({},n,{appId:i.appId,appVersion:i.appVersion,channelId:this.channelId,context:this.context,cV:i.correlationVector,experiments:i.experiments,GoogleAnalyticsClientId:i.gaId,platform:i.platform,playerSessionGuid:this.playerSessionGuid,playerSessionTime:(performance.now()-this.playerSessionStartTime)/1e3,playerVersion:i.playerVersion,mixerUserId:i.userId,mixerUserRoles:this.userRoles,sequenceNumber:this._telemetrySequenceNumber++})}),"DevLog"!==e&&"StreamSessionHeartbeat"!==e&&this.logTelemetry("DevLog",{type:"trace",data:e+": "+JSON.stringify(n)})},t.adapterTypes=[],t.version="1.0.0",t.Environment={coreVersion:t.version},t._streamSessionStatuses={},t}(ri),ro=function(e){if(e){if(/^en[-_]*(au|bz|ca|gb|ie|jm|nz|us|tt|za)?$/i.test(e)||/^english$/i.test(e)||"eng"===e)return"English";if(/^es[-_]*(ar|bo|cr|co|cl|do|ec|es|gt|hn|mx|ni|pa|pe|pr|py|sv|uy|ve)?$/i.test(e)||/^spanish$/i.test(e)||"spa"===e)return"Espaol";if(/^fr[-_]*(be|ca|ch|fr|lu)?$/i.test(e)||/^french$/i.test(e)||"fra"===e)return"Franais";if(/^de[-_]*(at|ch|de|li|lu)?$/i.test(e)||/^german$/i.test(e)||"deu"===e)return"Deutsch";if(/^pt[-_]*(br)?$/i.test(e)||/^portuguese$/i.test(e)||"por"===e)return"Portugus";if(/^it[-_]*(ch|it)?$/i.test(e)||/^italian$/i.test(e)||"ita"===e)return"Italiano";if(/^zh[-_]*(cn|hk|sg|tw)?$/i.test(e)||/^chinese$/i.test(e))return"";if(/^ja[-_]*(jp)?$/i.test(e)||/^japanese$/i.test(e))return"";if(/^nl[-_]*(be)?$/i.test(e)||/^dutch$/i.test(e))return"Nederlands";if(/^sv[-_]*(fi)?$/i.test(e)||/^swedish$/i.test(e))return"Svenska";if(/^no$/i.test(e)||/^norwegian$/i.test(e))return"Norsk";if(/^tng$/i.test(e)||/^descriptive audio$/i.test(e))return"Descriptive Audio"}return e},io=function(){return(io=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},oo=function(){function e(){this.destroyed=!1}return Object.defineProperty(e.prototype,"accessKey",{get:function(){return this.core.accessKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"channelId",{get:function(){return this.core.channelId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultQualitySelector",{get:function(){return this.core.defaultQualitySelector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playerSessionGuid",{get:function(){return this.core.playerSessionGuid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this.core.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"store",{get:function(){return this.core.store},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"streamSessionGuid",{get:function(){return this.core.stateMachine.state.streamSessionGuid},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.destroyed=!0,this._onStateChanged=oi},e.prototype.audioOnlyChanging=function(e){this.state.audioOnly=io({},this.state.audioOnly,{requested:e,loading:!0,computed:e}),this._onStateChanged()},e.prototype.audioOnlyChanged=function(e){this.state.audioOnly=io({},this.state.audioOnly,{applied:e,loading:!1,computed:e}),this._onStateChanged()},e.prototype.audioOnlyChangeFailed=function(e){this.state.audioOnly=io({},this.state.audioOnly,{loading:!1,warning:e,computed:this.state.audioOnly.applied}),this.onError("actionfailed",e,"warning"),this._onStateChanged()},e.prototype.audioTrackChanging=function(e){e&&(e.label=ro(e.language)),this.state.audioTrack=io({},this.state.audioTrack,{requested:e,loading:!0,computed:e}),this._onStateChanged()},e.prototype.audioTrackChanged=function(e){e&&(e.label=ro(e.language)),this.state.audioTrack=io({},this.state.audioTrack,{applied:e,loading:!1,computed:e}),this._onStateChanged()},e.prototype.audioTrackChangeFailed=function(e){this.state.audioTrack=io({},this.state.audioTrack,{loading:!1,warning:e,computed:this.state.audioTrack.applied}),this.onError("actionfailed",e,"warning"),this._onStateChanged()},e.prototype.audioTracksChanged=function(e){this.state.audioTracks=e.map(function(e){return{id:e.id,language:e.language,label:ro(e.language)}}).sort(function(e,t){return e.label.localeCompare(t.label)}),this._onStateChanged()},e.prototype.autoBitrateAvailableChanging=function(e){this.state.autoBitrateAvailable=io({},this.state.autoBitrateAvailable,{requested:e,loading:!0,computed:e}),this._onStateChanged()},e.prototype.autoBitrateAvailableChanged=function(e){this.state.autoBitrateAvailable=io({},this.state.autoBitrateAvailable,{applied:e,loading:!1,computed:e}),this._onStateChanged()},e.prototype.autoBitrateAvailableChangeFailed=function(e){this.state.autoBitrateAvailable=io({},this.state.autoBitrateAvailable,{loading:!1,warning:e,computed:this.state.autoBitrateAvailable.applied}),this.onError("actionfailed",e,"warning"),this._onStateChanged()},e.prototype.autoBitrateEnabledChanging=function(e){this.state.autoBitrateEnabled=io({},this.state.autoBitrateEnabled,{requested:e,loading:!0,computed:e}),this._onStateChanged()},e.prototype.autoBitrateEnabledChanged=function(e){this.state.autoBitrateEnabled=io({},this.state.autoBitrateEnabled,{applied:e,loading:!1,computed:e}),this._onStateChanged()},e.prototype.autoBitrateEnabledChangeFailed=function(e){this.state.autoBitrateEnabled=io({},this.state.autoBitrateEnabled,{loading:!1,warning:e,computed:this.state.autoBitrateEnabled.applied}),this.onError("actionfailed",e,"warning"),this._onStateChanged()},e.prototype.muteChanging=function(e){this.state.muted=io({},this.state.muted,{requested:e,loading:!0,computed:e}),this._onStateChanged()},e.prototype.muteChanged=function(e){this.state.muted=io({},this.state.muted,{applied:e,loading:!1,computed:e}),this._onStateChanged()},e.prototype.muteChangeFailed=function(e){this.state.muted=io({},this.state.muted,{loading:!1,warning:e,computed:this.state.muted.applied}),this.onError("actionfailed",e,"warning"),this._onStateChanged()},e.prototype.playbackChanging=function(e){this.store.dispatch(Hi(!e)),this.state.playing=io({},this.state.playing,{requested:e,loading:!0,computed:e}),this._onStateChanged()},e.prototype.playbackChanged=function(e){this.store.dispatch(Hi(!e)),this.state.playing=io({},this.state.playing,{applied:e,loading:!1,computed:e}),this._onStateChanged()},e.prototype.playbackChangeFailed=function(e){this.store.dispatch(qi.failure({error:new Error(e),isPaused:!this.state.playing})),this.state.playing=io({},this.state.playing,{loading:!1,warning:e,computed:this.state.playing.applied}),this.onError("actionfailed",e,"warning"),this._onStateChanged()},e.prototype.qualitiesChanged=function(e){this.state.qualities=e,this._onStateChanged()},e.prototype.qualityChanging=function(e){this.state.quality=io({},this.state.quality,{requested:e,loading:!0,computed:e}),this._onStateChanged()},e.prototype.qualityChanged=function(e){this.state.quality=io({},this.state.quality,{applied:e,loading:!1,computed:e}),this._onStateChanged()},e.prototype.qualityChangeFailed=function(e){this.state.quality=io({},this.state.quality,{loading:!1,warning:e,computed:this.state.quality.applied}),this.onError("actionfailed",e,"warning"),this._onStateChanged()},e.prototype.textTrackChanging=function(e){this.state.textTrack=io({},this.state.textTrack,{requested:e,loading:!0,computed:e}),this._onStateChanged()},e.prototype.textTrackChanged=function(e){this.state.textTrack=io({},this.state.textTrack,{applied:e,loading:!1,computed:e}),this._onStateChanged()},e.prototype.textTrackChangeFailed=function(e){this.state.textTrack=io({},this.state.textTrack,{loading:!1,warning:e,computed:this.state.textTrack.applied}),this.onError("actionfailed",e,"warning"),this._onStateChanged()},e.prototype.textTracksChanged=function(e){this.state.textTracks=e,this._onStateChanged()},e.prototype._onStateChanged=function(){this.destroyed||this.core.emit(Bi.stateChanged)},e.attemptLimit=5,e.fetchManifestOnFailure=!0,e}(),ao=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),so=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ao(t,e),t.prototype._updateServerForAudioOnly=function(e){e?this.server.searchParams.set("showAudioOnly","2"):this.server.searchParams.delete("showAudioOnly")},t}(oo),uo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lo=function(){return(lo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},co=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},fo=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},po="WebRTC adapter error",ho=2e3,go=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uo(t,e),Object.defineProperty(t.prototype,"server",{get:function(){return new URL(this.instructions.server)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.transport&&this.transport.destroy()},t.prototype.loadStream=function(){return co(this,void 0,void 0,function(){var e;return fo(this,function(t){switch(t.label){case 0:return e=this,[4,yo.create(this)];case 1:return e.transport=t.sent(),[2]}})})},t.prototype.audioOnly=function(e){return co(this,void 0,void 0,function(){var t,n;return fo(this,function(r){switch(r.label){case 0:t=this.state,this.audioOnlyChanging(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.transport.mute(e||!t.playing.requested,t.muted.requested||!t.playing.requested)];case 2:return r.sent(),this.audioOnlyChanged(e),[3,4];case 3:return n=r.sent(),this.audioOnlyChangeFailed(JSON.stringify(n)),[2];case 4:return[2]}})})},t.prototype.autoBitrate=function(e){return co(this,void 0,void 0,function(){return fo(this,function(t){this.autoBitrateEnabledChanging(e);try{this.transport.autoBitrate(e)}catch(e){return this.autoBitrateEnabledChangeFailed(JSON.stringify(e)),[2]}return[2]})})},t.prototype.mute=function(e){return co(this,void 0,void 0,function(){var t,n;return fo(this,function(r){switch(r.label){case 0:t=this.state,this.muteChanging(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.transport.mute(t.audioOnly.requested||!t.playing.requested,e||!t.playing.requested)];case 2:return r.sent(),this.muteChanged(e),[3,4];case 3:return n=r.sent(),this.muteChangeFailed(JSON.stringify(n)),[2];case 4:return[2]}})})},t.prototype.play=function(e){return co(this,void 0,void 0,function(){var t,n;return fo(this,function(r){switch(r.label){case 0:t=this.state,this.playbackChanging(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.transport.mute(!e||t.audioOnly.requested,!e||this.state.muted.requested)];case 2:return r.sent(),this.playbackChanged(e),[3,4];case 3:return n=r.sent(),this.playbackChangeFailed(JSON.stringify(n)),[2];case 4:return[2]}})})},t.prototype.quality=function(e){return co(this,void 0,void 0,function(){return fo(this,function(t){switch(t.label){case 0:return this.transport.qualities.find(function(t){return t===e})?(this.qualityChanging(e),this.state.autoBitrateEnabled.requested&&(this.autoBitrateEnabledChanging(!1),this.autoBitrate(!1)),[4,this.transport.quality(e)]):(this.qualityChangeFailed("invalid quality: "+JSON.stringify(e)),[2]);case 1:return t.sent(),[2]}})})},t.prototype.getStats=function(){return co(this,void 0,void 0,function(){return fo(this,function(e){return[2]})})},t}(oo),yo=function(){function e(){var e=this;this.destroyed=!1,this._transactionHandlers=new Map,this._socketMessageHandler=function(t){if(!e.destroyed)try{var n=JSON.parse(t.data),r=n.transaction,i=e._transactionHandlers.get(r);if(i)i(n)&&e._transactionHandlers.delete(r);else{var o=n.plugindata&&n.plugindata.data&&n.plugindata.data.result,a=!0;if(o)switch(o.status){case"muted":var s=o.state;e.adapter.playbackChanged("unmuted"===s.video||e.adapter.state.audioOnly.computed&&"unmuted"===s.audio),e.adapter.muteChanged("muted"===s.audio);break;case"switched":var u=o;(l=e.qualities.find(function(e){return e.streamId===u.stream_id}))&&u.feed_id===e._feedId?e.adapter.qualityChanged(l):a=!1;break;case"switching":var l,c=o.state;(l=e.qualities.find(function(e){return e.streamId===c.to_stream_id}))?e.adapter.qualityChanging(l):a=!1;break;case"started":clearInterval(e._startedTimeoutId);break;case"starting":e._startedTimeoutId=setTimeout(function(){e.adapter.onError(po,"Timeout out waiting for started event","adapterFatal")},ho);break;default:a=!1}else"error"===n.janus&&(e.adapter.onError(po,JSON.stringify(n),"sessionFatal"),a=!0);a||e.adapter.onError(po,"Unhandled socket message: "+JSON.stringify(o||n),"warning")}}catch(t){e.adapter.onError(po,"Unhandled socket message: "+JSON.stringify(t.message),"warning")}},this._socketErrorHandler=function(t){e.destroyed||(e.adapter.onError(po,"Socket Error: "+JSON.stringify(t),"sessionFatal"),e.destroy())}}return e.create=function(t){return co(this,void 0,void 0,function(){var n;return fo(this,function(r){switch(r.label){case 0:return(n=new e).adapter=t,[4,n._init()];case 1:return r.sent(),[2,n]}})})},e.prototype._init=function(){return co(this,void 0,void 0,function(){var e,t,n,r,i,o,a,s,u,l,c,d,f,p,h,g,y,m,v,b,_,S=this;return fo(this,function(w){switch(w.label){case 0:e=no.Environment,w.label=1;case 1:return w.trys.push([1,3,,4]),t=this,[4,new Promise(function(e,t){if(!S.destroyed){var n=new WebSocket(S.adapter.instructions.server,"janus-protocol"),r=function(e){S.destroyed||(clearTimeout(o),a(),t(e))},i=function(){S.destroyed||(clearTimeout(o),a(),e(n))};n.addEventListener("open",i),n.addEventListener("error",r);var o=setTimeout(function(){S.destroyed||(a(),t({type:po,details:"WebSocket initialization timed out",severity:"sessionFatal"}))},3e4)}function a(){n.removeEventListener("error",r),n.removeEventListener("open",i)}})];case 2:return t._socket=w.sent(),this._socket.addEventListener("message",this._socketMessageHandler),[3,4];case 3:if(n=w.sent(),this.destroyed)return[2];throw this._socket&&this._socket.close(),{type:po,details:"Error creating WebSocket: "+n,severity:"sessionFatal"};case 4:return r=this,[4,this._sendRaw({janus:"create"},!0,function(e){return e.data.id})];case 5:return r._sessionId=w.sent(),this.destroyed?[2]:(i=this,[4,this._sendRaw({client_id:e.clientId,janus:"attach",plugin:"janus.plugin.plex",version:"0.0.17",body:{correlation_vector:e.correlationVector}},!0,function(e){return e.data.id})]);case 6:if(i._handleId=w.sent(),this.destroyed)return[2];w.label=7;case 7:return w.trys.push([7,9,,10]),[4,Promise.all([this._sendMessage({request:"initialize",protocol_version:1,client:e.clientId,client_version:e.clientVersion,correlation_vector:e.correlationVector,device:e.device,device_version:e.deviceVersion,ga_flags:e.experiments,is_embed:e.isEmbed,os:e.os,os_version:e.osVersion,platform:e.platform,player_version:e.playerVersion,session_guid:this.adapter.streamSessionGuid,user_agent:e.userAgent,user_id:+(e.userId||-1)},function(e){return e.plugindata.data.error&&S.adapter.onError(po,"Janus.initialize error: "+JSON.stringify(e),"warning"),e}),this._sendMessage({request:"list",access_key:this.adapter.accessKey,client_id:e.clientId,id:this.adapter.channelId},function(e){return e.plugindata.data.result.feeds[0]})])];case 8:return o=w.sent(),a=o[1],this.destroyed?[2]:(this._feedId=a.feed_id,this.qualities=a.streams.map(function(e){return{label:e.display_name,fps:e.frame_rate,height:e.height,isSource:e.is_source,kbps:e.kbps,streamId:e.stream_id,width:e.width}}),[3,10]);case 9:if(s=w.sent(),this.destroyed)return[2];throw{type:po,details:"Failed initialize, list, or resolve hostname: "+s,severity:"sessionFatal"};case 10:return u=this.adapter.defaultQualitySelector(this.qualities),[4,this._sendMessage({request:"watch",access_key:this.adapter.accessKey,client_id:e.clientId,feed_id:this._feedId,id:this.adapter.channelId,requested_stream_id:u?u.streamId:-1},function(e){return e})];case 11:if(l=w.sent(),this.destroyed)return[2];if(c=l.plugindata.data.result.result,d=c.actual_stream_id,f=c.auto_bw,this.autoState={autoAvailable:f.is_auto_bw_available,autoEnabled:f.is_auto_bw_enabled},!(p=new RTCSessionDescription(l.jsep)).type)throw{type:po,details:"Remote RTCSessionDescription: missing type",severity:"sessionFatal"};if(null===p.sdp)throw{type:po,details:"Remote RTCSessionDescription: sdp is null",severity:"sessionFatal"};h=this.adapter.instructions.iceServers.slice(0,2),g=this._peerConnection=new RTCPeerConnection({iceServers:h}),y=0,g.onicecandidate=function(e){return co(S,void 0,void 0,function(){var t;return fo(this,function(n){switch(n.label){case 0:if(this.destroyed)return[2];n.label=1;case 1:return n.trys.push([1,5,,6]),[4,g.addIceCandidate(e.candidate)];case 2:return n.sent(),this.destroyed?[2]:e.candidate?[4,this._sendRaw({janus:"trickle",candidate:e.candidate})]:[3,4];case 3:n.sent(),n.label=4;case 4:return[3,6];case 5:if(t=n.sent(),this.destroyed)return[2];if(++y>=h.length)throw{type:po,details:"PeerConnection setup error: Failed to add IceCandidates: "+t,severity:"sessionFatal"};return[3,6];case 6:return[2]}})})},m=new Promise(function(e,t){if(!S.destroyed){var n=setTimeout(t,3e4);if(S._peerConnection.ontrack){var r=function(i){S.destroyed||(clearTimeout(n),S._peerConnection.removeEventListener("track",r),i.streams&&i.streams.length?e(i.streams[0]):t({type:po,details:"No streams available",severity:"sessionFatal"}))};S._peerConnection.addEventListener("track",r)}else{var i=function(t){S.destroyed||(clearTimeout(n),S._peerConnection.removeEventListener("addstream",i),e(t.stream))};S._peerConnection.addEventListener("addstream",i)}}}),v=new Promise(function(t,n){return co(S,void 0,void 0,function(){var n,r;return fo(this,function(i){switch(i.label){case 0:return this.destroyed?[2]:[4,this._peerConnection.setRemoteDescription(p)];case 1:return i.sent(),this.destroyed?[2]:[4,this._peerConnection.createAnswer()];case 2:return n=i.sent(),this.destroyed?[2]:(n&&n.sdp&&-1!=(r=n.sdp.indexOf("fmtp:97 "))&&(r+=8,n.sdp=n.sdp.slice(0,r)+"stereo=1;sprop-stereo=1;"+n.sdp.slice(r)),[4,this._peerConnection.setLocalDescription(n)]);case 3:return i.sent(),this.destroyed?[2]:[4,this._sendRaw({janus:"message",body:{request:"start",correlation_vector:e.correlationVector},jsep:new RTCSessionDescription(n)})];case 4:return i.sent(),this.destroyed?[2]:(t(),[2])}})})}),w.label=12;case 12:return w.trys.push([12,14,,15]),[4,Promise.all([m,v])];case 13:return b=w.sent()[0],this.destroyed?[2]:(this.defaultQuality=this.qualities.find(function(e){return e.streamId===d}),this.mediaStream=b,[3,15]);case 14:if(_=w.sent(),this.destroyed)return[2];throw{type:po,details:"Failed to resolve track or start stream: "+_,severity:"sessionFatal"};case 15:return this._keepAliveIntervalId=setInterval(function(){return co(S,void 0,void 0,function(){return fo(this,function(e){switch(e.label){case 0:return this.destroyed?[2]:[4,this._sendRaw({janus:"keepalive"},!0)];case 1:return e.sent(),[2]}})})},15e3),this._socket.addEventListener("error",this._socketErrorHandler),this._socket.addEventListener("close",this._socketErrorHandler),g.onconnectionstatechange=function(){if(!S.destroyed)switch(g.connectionState){case"closed":case"disconnected":case"failed":throw S.destroy(),{type:po,details:"WebRTC PeerConnection closed",severity:"sessionFatal"}}},[2]}})})},e.prototype.destroy=function(){var e=this;this.destroyed||(this.destroyed=!0,clearInterval(this._keepAliveIntervalId),this._socket&&(this._socket.removeEventListener("error",this._socketErrorHandler),this._socket.removeEventListener("close",this._socketErrorHandler),this._socket.close()),this._peerConnection&&(this._peerConnection.onconnectionstatechange=null,this.mediaStream&&(this.mediaStream.getTracks().forEach(function(e){return e.stop()}),"closed"===this._peerConnection.signalingState&&"closed"===this._peerConnection.connectionState||(this.mediaStream.release&&this.mediaStream.release(),this._peerConnection.getSenders&&this._peerConnection.getSenders().forEach(function(t){return e._peerConnection.removeTrack(t)}))),this._peerConnection.close(),delete this._peerConnection))},e.prototype.mute=function(e,t){var n=this;return new Promise(function(r,i){try{n._sendMessage({request:"mute",audio:t?"mute":"unmute",video:e?"mute":"unmute",correlation_vector:no.Environment.correlationVector},function(){return r(),!0})}catch(e){i(new Error(JSON.stringify(e.message)))}})},e.prototype.getStats=function(){return co(this,void 0,void 0,function(){var e,t,n,r,i,o;return fo(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),e=this._peerConnection.getReceivers(),t=e[0],n=e[1],[4,Promise.all([this._getReceiverStats(t),this._getReceiverStats(n)])];case 1:return r=a.sent(),i=r[0],o=r[1],[2,{audioStats:i,videoStats:o}];case 2:return a.sent(),[2,{audioStats:{},videoStats:{}}];case 3:return[2]}})})},e.prototype.quality=function(e){return co(this,void 0,void 0,function(){var t;return fo(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._sendMessage({request:"switch",access_key:this.adapter.accessKey,client_id:no.Environment.clientId,feed_id:this._feedId,id:this.adapter.channelId,stream_id:e.streamId})];case 1:return n.sent(),[3,3];case 2:throw t=n.sent(),new Error(JSON.stringify(t.message));case 3:return[2]}})})},e.prototype.sendPlaybackStats=function(e){return co(this,void 0,void 0,function(){var t;return fo(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e.timestamp=Math.round(e.timestamp),[4,this._sendMessage(lo({request:"playbackStats"},e))];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),this.adapter.onError(po,"sendPlaybackStats() failed:"+t,"warning"),[3,3];case 3:return[2]}})})},e.prototype.autoBitrate=function(e){return co(this,void 0,void 0,function(){var t,n;return fo(this,function(r){switch(r.label){case 0:if(!this.autoState.autoAvailable&&!e)return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._sendMessage({request:"setAutoBwState",is_auto_bw_enabled:e,user_invoked:!0},function(e){return e.plugindata.data.result.state})];case 2:if(t=r.sent(),this.destroyed)return[2];if(t.is_auto_bw_enabled!==e)throw new Error(t.is_auto_bw_available?"unable to set auto-bitrate":"not supported");return this.autoState={autoAvailable:t.is_auto_bw_available,autoEnabled:t.is_auto_bw_enabled},this.adapter.autoBitrateAvailableChanged(t.is_auto_bw_available),this.adapter.autoBitrateEnabledChanged(t.is_auto_bw_enabled),[3,4];case 3:throw n=r.sent(),new Error(JSON.stringify(n.message));case 4:return[2]}})})},e.prototype._getReceiverStats=function(e){return co(this,void 0,void 0,function(){var t;return fo(this,function(n){switch(n.label){case 0:return[4,"function"==typeof e.getStats?e.getStats():this._peerConnection.getStats(e.track)];case 1:return(t=n.sent()).forEach(function(e){e&&e.type&&(t[e.type]=e)}),[2,t]}})})},e.prototype._sendMessage=function(e,t){return this._sendRaw({janus:"message",body:e},!1,t)},e.prototype._sendRaw=function(e,t,n){var r=this;return void 0===t&&(t=!1),new Promise(function(i,o){var a=setTimeout(function(){r.destroyed||o(new Error("Socket send request timed out"))},3e4),s=Object(ii.v4)();r._transactionHandlers.set(s,function(e){if(n){if("ack"===e.janus)return!1;var t=n(e);return t&&(clearTimeout(a),i(t)),!!t}return clearTimeout(a),i(),!0});var u=lo({},e,{transaction:s});r._sessionId&&(u.session_id=r._sessionId),!t&&r._handleId&&(u.handle_id=r._handleId),r._socket.send(JSON.stringify(u))})},e}(),mo=function(e){return e.stream},vo=function(e){return mo(e).request.streamSessionGuid},bo=function(e){return mo(e).renderedProtocol.server},_o=function(e,t){return(_o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function So(e,t){function n(){this.constructor=e}_o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function wo(e){return"function"==typeof e}var Eo=!1,To={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;Eo=e},get useDeprecatedSynchronousErrorHandling(){return Eo}};function xo(e){setTimeout(function(){throw e},0)}var ko={closed:!0,next:function(e){},error:function(e){if(To.useDeprecatedSynchronousErrorHandling)throw e;xo(e)},complete:function(){}},Co=Array.isArray||function(e){return e&&"number"==typeof e.length};function Ao(e){return null!==e&&"object"==typeof e}function Io(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}Io.prototype=Object.create(Error.prototype);var Oo=Io,Lo=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var o=0;o<n.length;++o){n[o].remove(this)}if(wo(r))try{r.call(this)}catch(e){t=e instanceof Oo?Ro(e.errors):[e]}if(Co(i)){o=-1;for(var a=i.length;++o<a;){var s=i[o];if(Ao(s))try{s.unsubscribe()}catch(e){t=t||[],e instanceof Oo?t=t.concat(Ro(e.errors)):t.push(e)}}}if(t)throw new Oo(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function Ro(e){return e.reduce(function(e,t){return e.concat(t instanceof Oo?t.errors:t)},[])}var Po="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Do=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=ko;break;case 1:if(!n){o.destination=ko;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new Mo(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new Mo(o,n,r,i)}return o}return So(t,e),t.prototype[Po]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Lo),Mo=function(e){function t(t,n,r,i){var o,a=e.call(this)||this;a._parentSubscriber=t;var s=a;return wo(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==ko&&(wo((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=o,a._error=r,a._complete=i,a}return So(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;To.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=To.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):xo(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;xo(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};To.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),To.useDeprecatedSynchronousErrorHandling)throw e;xo(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!To.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return To.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(xo(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Do);var No="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fo(){}function jo(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:Fo}var Uo=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof Do)return e;if(e[Po])return e[Po]()}return e||t||n?new Do(e,t,n):new Do(ko)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||To.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),To.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){To.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof Do?r:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Bo(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[No]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:jo(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Bo(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function Bo(e){if(e||(e=To.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var Vo=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return So(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(Do),Go=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};function qo(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Ho=qo(),Ko=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function zo(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Qo=function(e){if(e&&"function"==typeof e[No])return r=e,function(e){var t=r[No]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Ko(e))return Go(e);if(zo(e))return n=e,function(e){return n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,xo),e};if(e&&"function"==typeof e[Ho])return t=e,function(e){for(var n=t[Ho]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e};var t,n,r,i=Ao(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};var Wo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return So(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(Do);function Yo(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Xo(e,t))}}var Xo=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Jo(e,this.project,this.thisArg))},e}(),Jo=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return So(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Do);function $o(e,t){return new Uo(function(n){var r=new Lo,i=0;return r.add(t.schedule(function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function Zo(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[No]}(e))return function(e,t){return new Uo(function(n){var r=new Lo;return r.add(t.schedule(function(){var i=e[No]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}(e,t);if(zo(e))return function(e,t){return new Uo(function(n){var r=new Lo;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r})}(e,t);if(Ko(e))return $o(e,t);if(function(e){return e&&"function"==typeof e[Ho]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new Uo(function(n){var r,i=new Lo;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[Ho](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function ea(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(ea(function(n,r){return(i=e(n,r),o?Zo(i,o):i instanceof Uo?i:new Uo(Qo(i))).pipe(Yo(function(e,i){return t(n,e,r,i)}));var i,o},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new ta(e,n))})}var ta=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new na(e,this.project,this.concurrent))},e}(),na=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return So(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new Vo(this,void 0,void 0);this.destination.add(r),function(e,t,n,r,i){if(void 0===i&&(i=new Vo(e,n,r)),!i.closed)t instanceof Uo?t.subscribe(i):Qo(t)(i)}(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(Wo);function ra(e){return e}function ia(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=Number.POSITIVE_INFINITY,i=null,o=e[e.length-1];return(n=o)&&"function"==typeof n.schedule?(i=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof o&&(r=e.pop()),null===i&&1===e.length&&e[0]instanceof Uo?e[0]:function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),ea(ra,e)}(r)(function(e,t){return t?$o(e,t):new Uo(Go(e))}(e,i))}var oa=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return ia.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t.map(function(e){var t=e.apply(void 0,n);if(!t)throw new TypeError('combineEpics: one of the provided Epics "'+(e.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return t})))};try{Object.defineProperty(r,"name",{value:"combineEpics("+t.map(function(e){return e.name||"<anonymous>"}).join(", ")+")"})}catch(e){}return r};function aa(e,t){return function(n){return n.lift(new sa(e,t))}}var sa=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new ua(e,this.predicate,this.thisArg))},e}(),ua=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return So(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(Do),la=oa(function(e){return e.pipe(aa(Object(yi.isActionOf)(Ki)),aa(function(e){return 0===e.payload.volume}),Yo(function(e){return Gi(!0)}))}),ca=(oa(la),n(47)),da=n.n(ca),fa=function(e){var t=e,n=t.id,r=t.label;return{id:n||r,label:r,language:t.language}},pa=function(e){var t,n,r,i,o=e.uhdFeedServer,a=e.server;return a.includes("akamai"),"desktop"!==no.Environment.platform||(t=navigator.userAgent,n=window,r=t.includes("XboxOne"),i=void 0!==n.Windows,r&&i)||!o?new URL(a):new URL(o)},ha=n(48),ga=Object(ha.parse)(navigator.userAgent),ya=Number.MAX_SAFE_INTEGER,ma=function(e){if("Safari"===ga.browser.name)return ya;var t=e;if("number"==typeof t.webkitDecodedFrameCount)return t.webkitDecodedFrameCount;if("number"==typeof t.mozPaintedFrames)return t.mozPaintedFrames;if("function"==typeof e.getVideoPlaybackQuality){var n=e.getVideoPlaybackQuality(),r=n.corruptedVideoFrames,i=n.droppedVideoFrames;return n.totalVideoFrames-i-r}return ya},va=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},ba=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function _a(e){var t=this,n=e.state,r=e.video;if(r.autoplay=n.playing.requested,!r.autoplay&&r.paused)e.onFirstFrame(!1),e.playbackChanged(!1);else{r.muted=!0;var i=function(){return va(t,void 0,void 0,function(){var t,o;return ba(this,function(a){switch(a.label){case 0:if(!r.currentTime)return[2];if(!((t=ma(r))===Number.MAX_SAFE_INTEGER||t>0))return[3,5];if(r.removeEventListener("timeupdate",i),o=!0,n.muted.requested)return[3,4];if(r.muted=!1,!r.paused)return[3,4];r.muted=!0,e.muteChanged(!0),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r.play()];case 2:return a.sent(),[3,4];case 3:return a.sent(),o=!1,[3,4];case 4:e.onFirstFrame(!0),e.playbackChanged(o),a.label=5;case 5:return[2]}})})};r.addEventListener("timeupdate",i)}}var Sa=function(e,t){if(e.length>0&&(Array.from(e).forEach(function(e){return e.mode="disabled"}),t)){var n=Array.from(e).findIndex(function(e){return t.label===e.label});if(n<0)throw new Error("Invalid text track "+t.label);e[n].mode="showing"}};function wa(e,t){var n=e.video;if(n.src||n.srcObject)try{t?n.play():n.pause()}catch(t){return e.playbackChangeFailed(JSON.stringify(t)),!1}else n.autoplay=t,e.playbackChanging(t);return!0}var Ea=function(e){var t={},n=function(e,n){var r=n[e];"number"==typeof r&&(t[e]=r)};if(n("webkitDecodedFrameCount",e),n("webkitDroppedFrameCount",e),n("webkitVideoDecodedByteCount",e),n("mozDecodedFrames",e),n("mozPaintedFrames",e),n("mozPresentedFrames",e),"function"==typeof e.getVideoPlaybackQuality){var r=e.getVideoPlaybackQuality();n("corruptedVideoFrames",r),n("droppedVideoFrames",r),n("totalVideoFrames",r)}return t},Ta=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xa=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},ka=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ca=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handleVideoPlaying=function(){t.playbackChanged(!0)},t._refreshTextTracks=function(){console.log("----- _refreshTextTracks called -----"),t.textTracksChanged(Array.from(t.video.textTracks).map(function(e){return fa(e)})),Sa(t.video.textTracks,t.state.textTrack.applied),t._refreshActiveTextTrack()},t._refreshActiveTextTrack=function(){console.log("----- _refreshActiveTextTrack called -----");var e=Array.from(t.video.textTracks).find(function(e){return"showing"===e.mode});if(e){var n=t.state.textTrack.applied;n&&n.label===e.label||t.textTrackChanged(fa(e))}else t.textTrackChanged(null)},t._refreshActiveAudioTrack=function(){var e=t._hlsjs.audioTracks[t._hlsjs.audioTrack];if(e){var n=t.state.audioTrack.applied;n&&n.id===e.id||t.audioTrackChanged(Ia(e))}else t.audioTrackChanged(null)},t._refreshAudioTracks=function(){var e=t._hlsjs.audioTracks.map(Ia);t.audioTracksChanged(e)},t}return Ta(t,e),t.init=function(){Promise.resolve().then(n.t.bind(null,47,7))},Object.defineProperty(t.prototype,"server",{get:function(){return this._server},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.video&&(this.video.textTracks&&(this.video.textTracks.removeEventListener("addtrack",this._refreshTextTracks),this.video.textTracks.removeEventListener("removetrack",this._refreshTextTracks),this.video.textTracks.removeEventListener("change",this._refreshActiveTextTrack)),this.video.removeEventListener("playing",this._handleVideoPlaying)),this._hlsjs&&(this._hlsjs.detachMedia(),this._hlsjs.destroy())},t.prototype.loadStream=function(){return xa(this,void 0,void 0,function(){var e;return ka(this,function(t){switch(t.label){case 0:return this._server=pa(this.instructions),[4,Promise.resolve().then(n.t.bind(null,47,7))];case 1:if(!(e=t.sent()).default.isSupported())throw{type:"hls.js adapter error",details:"hls.js not supported",severity:"adapterFatal"};return this._hlsjs=new e.default({liveSyncDurationCount:this.instructions.recommendedSegmentBufferSize,startFragPrefetch:!0}),this._hlsjs.loadSource(this.server.toString()),[2]}})})},t.prototype.loadVideo=function(){var e=this;this._hlsjs.on("hlsAudioTracksUpdated",function(){return e._refreshAudioTracks()}),this._hlsjs.on("hlsAudioTrackSwitched",function(){return e._refreshActiveAudioTrack()}),this._hlsjs.on("hlsLevelSwitching",function(t,n){return e.qualityChanging(Aa(e._hlsjs.levels[n.level],n.level))}),this._hlsjs.on("hlsLevelSwitched",function(t,n){return e.qualityChanged(Aa(e._hlsjs.levels[n.level],n.level))}),this._hlsjs.on("hlsError",function(t,n){e.onError("hls.js adapter error",t+" "+n.details,n.fatal?"sessionFatal":"warning"),n.details===da.a.ErrorDetails.BUFFER_STALLED_ERROR&&e.store.dispatch(Vi())}),this._hlsjs.once("hlsManifestLoaded",function(t,n){var r=e._hlsjs.levels.map(Aa);e.qualitiesChanged(r);var i=e.defaultQualitySelector(r);e._hlsjs.startLevel=e._hlsjs.nextLevel=i?i.streamId:-1}),this._hlsjs.once("hlsLevelLoaded",function(){e.destroyed||(_a(e),e.autoBitrateAvailableChanged(!0),e.autoBitrateEnabledChanged(!!e._hlsjs.autoLevelEnabled),e.qualityChanged(e._hlsjs.currentLevel>-1?e._findQuality(e._hlsjs.levels[e._hlsjs.currentLevel]):null))}),this.video.textTracks&&(this.video.textTracks.addEventListener("addtrack",this._refreshTextTracks),this.video.textTracks.addEventListener("removetrack",this._refreshTextTracks),this.video.textTracks.addEventListener("change",this._refreshActiveTextTrack)),this.video.addEventListener("playing",this._handleVideoPlaying),this._hlsjs.attachMedia(this.video)},t.prototype.computeStats=function(){return{frameStats:Ea(this.video),videoHeight:this.video.videoHeight,videoWidth:this.video.videoWidth}},t.prototype.play=function(e){wa(this,e)&&this.playbackChanged(e)},t.prototype.audioOnly=function(e){var t=this;this._updateServerForAudioOnly(e),this.autoBitrateEnabledChanged(!e),this.autoBitrateAvailableChanged(!e),this._hlsjs.loadSource(this.server.toString()),this._hlsjs.attachMedia(this.video),this.audioOnlyChanged(e),this._hlsjs.once("hlsLevelLoaded",function(){t._hlsjs.nextLevel=e?t._hlsjs.currentLevel:-1,t.play(t.state.playing.requested)})},t.prototype.audioTrack=function(e){var t=this;this._hlsjs.audioTracks[+e.id]?(this.audioTrackChanging(e),this._hlsjs.once("hlsAudioTrackSwitched",function(){return t.audioTrackChanged(e)}),this._hlsjs.audioTrack=+e.id):this.audioTrackChangeFailed("invalid audio track: "+JSON.stringify(e))},t.prototype.autoBitrate=function(e){this._hlsjs.nextLevel=e?-1:this._hlsjs.currentLevel,this.autoBitrateEnabledChanged(!!this._hlsjs.autoLevelEnabled)},t.prototype.mute=function(e){this.video.muted=e,this.muteChanged(this.video.muted)},t.prototype.textTrack=function(e){try{Sa(this.video.textTracks,e)}catch(t){return void this.textTrackChangeFailed("invalid text track: "+JSON.stringify(e))}this._refreshActiveTextTrack()},t.prototype.quality=function(e){var t=this,n=this._hlsjs.levels.findIndex(function(t){return t.bitrate===e.kbps});n<0?this.textTrackChangeFailed("invalid quality: "+JSON.stringify(e)):(this.qualityChanging(e),this.autoBitrateEnabledChanging(!1),this.autoBitrateEnabledChanged(!1),this._hlsjs.once("hlsLevelLoaded",function(n,r){t.autoBitrateEnabledChanged(!!t._hlsjs.autoLevelEnabled),t._hlsjs.levels.find(function(t){return t.bitrate===e.kbps})?t.qualityChanged(e):t.onError("hls.js adapter error","unexpected quality switch: "+JSON.stringify(r),"warning")}),this._hlsjs.nextLevel=n)},t.prototype._findQuality=function(e){return this.state.qualities.find(function(t){return t.kbps===e.bitrate})||null},t.id="hls.js",t.protocol="hls",t}(so),Aa=function(e,t){return{label:e.height?e.height+"p":"",fps:-1,height:e.height||-1,isSource:0===t,kbps:e.bitrate||-1,streamId:t,width:e.width||-1}},Ia=function(e){return{id:void 0!==e.id?e.id:e.language||e.lang,label:void 0!==e.label?e.label:"",language:e.language||e.lang}},Oa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),La=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handleVideoPlaying=function(){t.playbackChanged(!0)},t._handleVideoWaiting=function(){t.store.dispatch(Vi())},t._refreshTextTracks=function(){console.log("----- _refreshTextTracks called -----"),t.textTracksChanged(Array.from(t.video.textTracks).map(function(e){return fa(e)})),Sa(t.video.textTracks,t.state.textTrack.applied),t._refreshActiveTextTrack()},t._refreshActiveTextTrack=function(){console.log("----- _refreshActiveTextTrack called -----");var e=Array.from(t.video.textTracks).find(function(e){return"showing"===e.mode});if(e){var n=t.state.textTrack.applied;n&&n.label===e.label||t.textTrackChanged(fa(e))}else t.textTrackChanged(null)},t._refreshActiveAudioTrack=function(){var e=Array.from(t.video.audioTracks).find(function(e){return e.enabled});if(e){var n=t.state.audioTrack.applied;n&&n.id===e.id||t.audioTrackChanged(Ra(e))}else t.audioTrackChanged(null)},t._refreshAudioTracks=function(){var e=Array.from(t.video.audioTracks).map(Ra);t.audioTracksChanged(e),t._refreshActiveAudioTrack()},t}return Oa(t,e),Object.defineProperty(t.prototype,"server",{get:function(){return this._server},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.video.src="",this.video&&(this.video.audioTracks&&(this.video.audioTracks.removeEventListener("addtrack",this._refreshAudioTracks),this.video.audioTracks.removeEventListener("removetrack",this._refreshAudioTracks),this.video.audioTracks.removeEventListener("change",this._refreshActiveAudioTrack)),this.video.textTracks&&(this.video.textTracks.removeEventListener("addtrack",this._refreshTextTracks),this.video.textTracks.removeEventListener("removetrack",this._refreshTextTracks),this.video.textTracks.removeEventListener("change",this._refreshActiveTextTrack)),this.video.removeEventListener("playing",this._handleVideoPlaying),this.video.addEventListener("waiting",this._handleVideoWaiting))},t.prototype.loadStream=function(){this.server||(this._server=pa(this.instructions))},t.prototype.loadVideo=function(){var e=this;this.video.addEventListener("error",function(){e.destroyed||e.video.error&&e.onError("hls native adapter error","Code "+e.video.error.code+", "+e.video.error.message,4===e.video.error.code?"adapterFatal":"sessionFatal")}),this.video.src=this.server.toString(),_a(this),this.qualityChanged(null),this.qualitiesChanged([]),this.autoBitrateAvailableChanged(!0),this.autoBitrateEnabledChanged(!0),this.video.audioTracks&&(this.video.audioTracks.addEventListener("addtrack",this._refreshAudioTracks),this.video.audioTracks.addEventListener("removetrack",this._refreshAudioTracks),this.video.audioTracks.addEventListener("change",this._refreshActiveAudioTrack)),this.video.textTracks&&(this.video.textTracks.addEventListener("addtrack",this._refreshTextTracks),this.video.textTracks.addEventListener("removetrack",this._refreshTextTracks),this.video.textTracks.addEventListener("change",this._refreshActiveTextTrack)),this.video.addEventListener("playing",this._handleVideoPlaying),this.video.addEventListener("waiting",this._handleVideoWaiting)},t.prototype.computeStats=function(){return{frameStats:Ea(this.video),videoHeight:this.video.videoHeight,videoWidth:this.video.videoWidth}},t.prototype.play=function(e){wa(this,e)&&this.playbackChanged(e)},t.prototype.audioOnly=function(e){this._updateServerForAudioOnly(e),this.video.src=this.server.toString(),this.audioOnlyChanged(e),this.play(this.state.playing.requested)},t.prototype.audioTrack=function(e){var t=null,n=null;if(this.video.audioTracks)for(var r=0;r<this.video.audioTracks.length;r++){var i=this.video.audioTracks.item(r);i.id===e.id&&(t=i),i.enabled&&(n=i)}t!==n&&(t?(n&&(n.enabled=!1),t.enabled=!0,this.audioTrackChanged(e)):this.audioTrackChangeFailed("invalid audio track: "+JSON.stringify(e)))},t.prototype.mute=function(e){this.video.muted=e,this.muteChanged(this.video.muted)},t.prototype.textTrack=function(e){try{Sa(this.video.textTracks,e)}catch(t){return void this.textTrackChangeFailed("invalid text track: "+JSON.stringify(e))}this.textTrackChanged(e)},t.id="hls-native",t.protocol="hls",t}(so),Ra=function(e){return{id:e.id,label:e.label,language:e.language}},Pa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Da=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},Ma=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Na=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handleVideoPlaying=function(){t.playbackChanged(!0)},t}return Pa(t,e),t.init=function(){n.e(0).then(n.bind(null,138))},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.video&&(this.video.srcObject=null,this.video.removeEventListener("playing",this._handleVideoPlaying))},t.prototype.loadVideo=function(){return Da(this,void 0,void 0,function(){return Ma(this,function(e){switch(e.label){case 0:return[4,n.e(0).then(n.bind(null,138))];case 1:return e.sent(),this.video.srcObject=this.transport.mediaStream,_a(this),this.autoBitrateAvailableChanged(this.transport.autoState.autoAvailable),this.autoBitrateEnabledChanged(this.transport.autoState.autoEnabled),this.qualitiesChanged(this.transport.qualities),this.qualityChanged(this.transport.defaultQuality),this.video.addEventListener("playing",this._handleVideoPlaying),[2]}})})},t.prototype.mute=function(t){return Da(this,void 0,void 0,function(){return Ma(this,function(n){return this.video.muted=t,e.prototype.mute.call(this,t),[2]})})},t.prototype.play=function(t){return Da(this,void 0,void 0,function(){return Ma(this,function(n){return wa(this,t)&&e.prototype.play.call(this,t),[2]})})},t.prototype.computeStats=function(){return{frameStats:Ea(this.video),videoHeight:this.video.videoHeight,videoWidth:this.video.videoWidth}},t.id="webRtc",t.protocol="webRtc",t}(go);function Fa(e){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ja(e){return(ja="function"==typeof Symbol&&"symbol"===Fa(Symbol.iterator)?function(e){return Fa(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Fa(e)})(e)}function Ua(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ua(e,t,n[t])})}return e}function Va(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ga(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qa(e,t,n){return t&&Ga(e.prototype,t),n&&Ga(e,n),e}function Ha(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ka(e,t){return!t||"object"!==ja(t)&&"function"!=typeof t?Ha(e):t}function za(e){return(za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qa(e,t){return(Qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qa(e,t)}function Ya(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Xa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ja={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){var n;console&&console[e]&&(n=console)[e].apply(n,Ya(t))}},$a=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Va(this,e),this.init(t,n)}return qa(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Ja,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,Ba({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),Za=function(){function e(){Va(this,e),this.observers={}}return qa(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach(function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)}),this}},{key:"off",value:function(e,t){var n=this;this.observers[e]&&this.observers[e].forEach(function(){if(t){var r=n.observers[e].indexOf(t);r>-1&&n.observers[e].splice(r,1)}else delete n.observers[e]})}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach(function(e){e.apply(void 0,n)});this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(t){t.apply(t,[e].concat(n))})}}]),e}();function es(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function ts(e){return null==e?"":""+e}function ns(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!e[a]&&n&&(e[a]=new n),e=e[a]}return i()?{}:{obj:e,k:r(o.shift())}}function rs(e,t,n){var r=ns(e,t,Object);r.obj[r.k]=n}function is(e,t){var n=ns(e,t),r=n.obj,i=n.k;if(r)return r[i]}function os(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var as={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function ss(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return as[e]}):e}var us=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Va(this,t),n=Ka(this,za(t).call(this)),Za.call(Ha(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return Wa(t,Za),qa(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=[e,t];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split(".")),is(this.data,o)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var a=[e,t];n&&(a=a.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(r=t,t=(a=e.split("."))[1]),this.addNamespaces(t),rs(this.data,a,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var s=is(this.data,a)||{};r?function e(t,n,r){for(var i in n)i in t?"string"==typeof t[i]||t[i]instanceof String||"string"==typeof n[i]||n[i]instanceof String?r&&(t[i]=n[i]):e(t[i],n[i],r):t[i]=n[i];return t}(s,n,i):s=Ba({},s,n),rs(this.data,a,s),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?Ba({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(),ls={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var o=this;return e.forEach(function(e){o.processors[e]&&(t=o.processors[e].process(t,n,r,i))}),t}},cs=function(e){function t(e){var n,r,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Va(this,t),n=Ka(this,za(t).call(this)),Za.call(Ha(n)),r=["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat"],i=e,o=Ha(n),r.forEach(function(e){i[e]&&(o[e]=i[e])}),n.options=a,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=$a.create("translator"),n}return Wa(t,Za),qa(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=t.nsSeparator||this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var o=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(o[0])>-1)&&(i=o.shift()),e=o.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,t){var n=this;if("object"!==ja(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=this.extractFromKey(e[e.length-1],t),o=i.key,a=i.namespaces,s=a[a.length-1],u=t.lng||this.language,l=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(l){var c=t.nsSeparator||this.options.nsSeparator;return s+c+o}return o}var d=this.resolve(e,t),f=d&&d.res,p=d&&d.usedKey||o,h=d&&d.exactUsedKey||o,g=Object.prototype.toString.apply(f),y=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject;if(m&&f&&("string"!=typeof f&&"boolean"!=typeof f&&"number"!=typeof f)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(g)<0&&("string"!=typeof y||"[object Array]"!==g)){if(!t.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,f,t):"key '".concat(o," (").concat(this.language,")' returned an object instead of string.");if(r){var v="[object Array]"===g,b=v?[]:{},_=v?h:p;for(var S in f)if(Object.prototype.hasOwnProperty.call(f,S)){var w="".concat(_).concat(r).concat(S);b[S]=this.translate(w,Ba({},t,{joinArrays:!1,ns:a})),b[S]===w&&(b[S]=f[S])}f=b}}else if(m&&"string"==typeof y&&"[object Array]"===g)(f=f.join(y))&&(f=this.extendTranslation(f,e,t));else{var E=!1,T=!1;if(!this.isValidLookup(f)&&void 0!==t.defaultValue){if(E=!0,void 0!==t.count){var x=this.pluralResolver.getSuffix(u,t.count);f=t["defaultValue".concat(x)]}f||(f=t.defaultValue)}this.isValidLookup(f)||(T=!0,f=o);var k=t.defaultValue&&t.defaultValue!==f&&this.options.updateMissing;if(T||E||k){this.logger.log(k?"updateKey":"missingKey",u,s,o,k?t.defaultValue:f);var C=[],A=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&A&&A[0])for(var I=0;I<A.length;I++)C.push(A[I]);else"all"===this.options.saveMissingTo?C=this.languageUtils.toResolveHierarchy(t.lng||this.language):C.push(t.lng||this.language);var O=function(e,r){n.options.missingKeyHandler?n.options.missingKeyHandler(e,s,r,k?t.defaultValue:f,k,t):n.backendConnector&&n.backendConnector.saveMissing&&n.backendConnector.saveMissing(e,s,r,k?t.defaultValue:f,k,t),n.emit("missingKey",e,s,r,f)};if(this.options.saveMissing){var L=void 0!==t.count&&"string"!=typeof t.count;this.options.saveMissingPlurals&&L?C.forEach(function(e){n.pluralResolver.getPluralFormsOfKey(e,o).forEach(function(t){return O([e],t)})}):O(C,o)}}f=this.extendTranslation(f,e,t,d),T&&f===o&&this.options.appendNamespaceToMissingKey&&(f="".concat(s,":").concat(o)),T&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(f))}return f}},{key:"extendTranslation",value:function(e,t,n,r){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(Ba({},n,{interpolation:Ba({},this.options.interpolation,n.interpolation)}));var o=n.replace&&"string"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(o=Ba({},this.options.interpolation.defaultVariables,o)),e=this.interpolator.interpolate(e,o,n.lng||this.language,n),!1!==n.nest&&(e=this.interpolator.nest(e,function(){return i.translate.apply(i,arguments)},n)),n.interpolation&&this.interpolator.reset()}var a=n.postProcess||this.options.postProcess,s="string"==typeof a?[a]:a;return null!=e&&s&&s.length&&!1!==n.applyPostProcessor&&(e=ls.handle(s,e,t,n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,o,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach(function(e){if(!a.isValidLookup(t)){var u=a.extractFromKey(e,s),l=u.key;n=l;var c=u.namespaces;a.options.fallbackNS&&(c=c.concat(a.options.fallbackNS));var d=void 0!==s.count&&"string"!=typeof s.count,f=void 0!==s.context&&"string"==typeof s.context&&""!==s.context,p=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);c.forEach(function(e){a.isValidLookup(t)||(o=e,p.forEach(function(n){if(!a.isValidLookup(t)){i=n;var o,u,c=l,p=[c];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(p,l,n,e,s);else d&&(o=a.pluralResolver.getSuffix(n,s.count)),d&&f&&p.push(c+o),f&&p.push(c+="".concat(a.options.contextSeparator).concat(s.context)),d&&p.push(c+=o);for(;u=p.pop();)a.isValidLookup(t)||(r=u,t=a.getResource(n,e,u,s))}}))})}}),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}]),t}();function ds(e){return e.charAt(0).toUpperCase()+e.slice(1)}var fs=function(){function e(t){Va(this,e),this.options=t,this.whitelist=this.options.whitelist||!1,this.logger=$a.create("languageUtils")}return qa(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map(function(e){return e.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=ds(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=ds(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=ds(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(e=this.getLanguagePartFromCode(e)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(e)>-1}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=function(e){e&&(n.isWhitelisted(e)?i.push(e):n.logger.warn("rejecting non-whitelisted language code: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),r.forEach(function(e){i.indexOf(e)<0&&o(n.formatLanguageCode(e))}),i}}]),e}(),ps=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],hs={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0===e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1===e?0:2===e?1:(e<0||e>10)&&e%10==0?2:3)}};var gs=function(){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Va(this,e),this.languageUtils=t,this.options=r,this.logger=$a.create("pluralResolver"),this.rules=(n={},ps.forEach(function(e){e.lngs.forEach(function(t){n[t]={numbers:e.nr,plurals:hs[e.fc]}})}),n)}return qa(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=this,r=[],i=this.getRule(e);return i?(i.numbers.forEach(function(i){var o=n.getSuffix(e,i);r.push("".concat(t).concat(o))}),r):r}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var i=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),o=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var a=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):a():"v2"===this.options.compatibilityJSON?a():this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),ys=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Va(this,e),this.logger=$a.create("interpolator"),this.init(t,!0)}return qa(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(arguments.length>1?arguments[1]:void 0)&&(this.options=e,this.format=e.interpolation&&e.interpolation.format||function(e){return e}),e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:ss,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?os(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?os(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?os(t.nestingPrefix):t.nestingPrefixEscaped||os("$t("),this.nestingSuffix=t.nestingSuffix?os(t.nestingSuffix):t.nestingSuffixEscaped||os(")"),this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,o,a,s=this;function u(e){return e.replace(/\$/g,"$$$$")}var l=function(e){if(e.indexOf(s.formatSeparator)<0)return is(t,e);var r=e.split(s.formatSeparator),i=r.shift().trim(),o=r.join(s.formatSeparator).trim();return s.format(is(t,i),o,n)};this.resetRegExp();var c=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler;for(a=0;(i=this.regexpUnescape.exec(e))&&(o=l(i[1].trim()),e=e.replace(i[0],o),this.regexpUnescape.lastIndex=0,!(++a>=this.maxReplaces)););for(a=0;i=this.regexp.exec(e);){if(void 0===(o=l(i[1].trim())))if("function"==typeof c){var d=c(e,i,r);o="string"==typeof d?d:""}else this.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(e)),o="";else"string"==typeof o||this.useRawValueToEscape||(o=ts(o));if(o=this.escapeValue?u(this.escape(o)):u(o),e=e.replace(i[0],o),this.regexp.lastIndex=0,++a>=this.maxReplaces)break}return e}},{key:"nest",value:function(e,t){var n,r,i=Ba({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});function o(e,t){if(e.indexOf(",")<0)return e;var n=e.split(",");e=n.shift();var r=n.join(",");r=(r=this.interpolate(r,i)).replace(/'/g,'"');try{i=JSON.parse(r),t&&(i=Ba({},t,i))}catch(t){this.logger.error("failed parsing options string in nesting for key ".concat(e),t)}return e}for(i.applyPostProcessor=!1;n=this.nestingRegexp.exec(e);){if((r=t(o.call(this,n[1].trim(),i),i))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=ts(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var ms=function(e){function t(e,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Va(this,t),i=Ka(this,za(t).call(this)),Za.call(Ha(i)),i.backend=e,i.store=n,i.languageUtils=r.languageUtils,i.options=o,i.logger=$a.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,o.backend,o),i}return Wa(t,Za),qa(t,[{key:"queueLoad",value:function(e,t,n,r){var i=this,o=[],a=[],s=[],u=[];return e.forEach(function(e){var r=!0;t.forEach(function(t){var s="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?a.indexOf(s)<0&&a.push(s):(i.state[s]=1,r=!1,a.indexOf(s)<0&&a.push(s),o.indexOf(s)<0&&o.push(s),u.indexOf(t)<0&&u.push(t)))}),r||s.push(e)}),(o.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:o,pending:a,toLoadLanguages:s,toLoadNamespaces:u}}},{key:"loaded",value:function(e,t,n){var r=Xa(e.split("|"),2),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),n&&this.store.addResourceBundle(i,o,n),this.state[e]=t?-1:2;var a={};this.queue.forEach(function(n){var r,s,u,l,c,d;r=n.loaded,s=o,l=ns(r,[i],Object),c=l.obj,d=l.k,c[d]=c[d]||[],u&&(c[d]=c[d].concat(s)),u||c[d].push(s),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach(function(e){a[e]||(a[e]=[]),n.loaded[e].length&&n.loaded[e].forEach(function(t){a[e].indexOf(t)<0&&a[e].push(t)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(function(e){return!e.done})}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,a=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,function(s,u){s&&u&&i<5?setTimeout(function(){r.read.call(r,e,t,n,i+1,2*o,a)},o):a(s,u)}):a(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(function(e){n.loadOne(e)})}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=Xa(e.split("|"),2),i=r[0],o=r[1];this.read(i,o,"read",null,null,function(r,a){r&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(i," failed"),r),!r&&a&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(i),a),t.loaded(e,r,a)})}},{key:"saveMissing",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,Ba({},o,{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,n,r)}}]),t}();function vs(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e}function bs(){}var _s,Ss,ws=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(Va(this,t),e=Ka(this,za(t).call(this)),Za.call(Ha(e)),e.options=vs(n),e.services={},e.logger=$a,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),Ka(e,Ha(e));setTimeout(function(){e.init(n,r)},0)}return e}return Wa(t,Za),qa(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),this.options=Ba({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===ja(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===ja(e[2])||"object"===ja(e[3])){var n=e[3]||e[2];Object.keys(n).forEach(function(e){t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:function(e,t,n){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",maxReplaces:1e3}},this.options,vs(t)),this.format=this.options.interpolation.format,n||(n=bs),!this.options.isClone){this.modules.logger?$a.init(r(this.modules.logger),this.options):$a.init(null,this.options);var i=new fs(this.options);this.store=new us(this.options.resources,this.options);var o=this.services;o.logger=$a,o.resourceStore=this.store,o.languageUtils=i,o.pluralResolver=new gs(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),o.interpolator=new ys(this.options),o.backendConnector=new ms(r(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))}),this.modules.languageDetector&&(o.languageDetector=r(this.modules.languageDetector),o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=r(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new cs(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))}),this.modules.external.forEach(function(t){t.init&&t.init(e)})}["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}});var a=es(),s=function(){e.changeLanguage(e.options.lng,function(t,r){e.isInitialized=!0,e.logger.log("initialized",e.options),e.emit("initialized",e.options),a.resolve(r),n(t,r)})};return this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),a}},{key:"loadResources",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bs;if(!this.options.resources||this.options.partialBundledLanguages){if(this.language&&"cimode"===this.language.toLowerCase())return t();var n=[],r=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach(function(e){n.indexOf(e)<0&&n.push(e)})};if(this.language)r(this.language);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(e){return r(e)});this.options.preload&&this.options.preload.forEach(function(e){return r(e)}),this.services.backendConnector.load(n,this.options.ns,t)}else t(null)}},{key:"reloadResources",value:function(e,t,n){var r=es();return e||(e=this.languages),t||(t=this.options.ns),n||(n=bs),this.services.backendConnector.reload(e,t,function(e){r.resolve(),n(e)}),r}},{key:"use",value:function(e){return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&ls.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this,r=es();this.emit("languageChanging",e);var i=function(e){e&&(n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.translator.language||n.translator.changeLanguage(e),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(e)),n.loadResources(function(i){!function(e,i){n.translator.changeLanguage(i),i&&(n.emit("languageChanged",i),n.logger.log("languageChanged",i)),r.resolve(function(){return n.t.apply(n,arguments)}),t&&t(e,function(){return n.t.apply(n,arguments)})}(i,e)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t){var n=this,r=function e(t,r){var i=Ba({},r);if("object"!==ja(r)){for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];i=n.options.overloadTranslationOptionHandler([t,r].concat(a))}return i.lng=i.lng||e.lng,i.lngs=i.lngs||e.lngs,i.ns=i.ns||e.ns,n.t(t,i)};return"string"==typeof e?r.lng=e:r.lngs=e,r.ns=t,r}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"loadNamespaces",value:function(e,t){var n=this,r=es();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach(function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)}),this.loadResources(function(e){r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=es();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter(function(e){return r.indexOf(e)<0});return i.length?(this.options.preload=r.concat(i),this.loadResources(function(e){n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bs,i=Ba({},this.options,n,{isClone:!0}),o=new t(i);return["store","services","language"].forEach(function(t){o[t]=e[t]}),o.translator=new cs(o.services,o.options),o.translator.on("*",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))}),o.init(i,r),o.translator.options=o.options,o}}]),t}()),Es=n(49),Ts=n.n(Es),xs=(n(16),n(6)),ks=n.n(xs),Cs=(n(21),n(0)),As=n.n(Cs),Is=(n(50),n(51)),Os=n.n(Is),Ls=n(52),Rs=n.n(Ls),Ps={bindI18n:"languageChanging languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0},Ds=As.a.createContext();function Ms(){return Ss}function Ns(){return Ps}var Fs=function(){function e(){Os()(this,e),this.usedNamespaces={}}return Rs()(e,[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach(function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function js(){return _s}var Us={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ps=ks()({},Ps,e)}(e.options.react),function(e){_s=e}(e)}};function Bs(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"string"==typeof n[0]&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}var Vs={};function Gs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&Vs[t[0]]||("string"==typeof t[0]&&(Vs[t[0]]=new Date),Bs.apply(void 0,t))}function qs(e,t,n){e.loadNamespaces(t,function(){if(e.isInitialized)n();else{e.on("initialized",function t(){setTimeout(function(){e.off("initialized",t)},0),n()})}})}function Hs(e){return e.displayName||e.name||("string"==typeof e&&e.length>0?e:"Unknown")}var Ks=n(17),zs=n.n(Ks);function Qs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.i18n,r=Ms()?Object(Cs.useContext)(Ds):{},i=r.i18n,o=r.defaultNS,a=n||i||js();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new Fs),!a){Gs("You will need pass in an i18next instance by using initReactI18next");var s=[function(e){return e},{},!0];return s.t=function(e){return e},s.i18n={},s.ready=!0,s}var u=ks()({},Ns(),a.options.react),l=t.useSuspense,c=void 0===l?u.useSuspense:l,d=e||o||a.options&&a.options.defaultNS;d="string"==typeof d?[d]:d||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(d);var f=(a.isInitialized||a.initializedStoreOnce)&&d.every(function(e){return function(e,t){if(!t.languages||!t.languages.length)return Gs("i18n.languages were undefined or empty",t.languages),!0;var n=t.languages[0],r=!!t.options&&t.options.fallbackLng,i=t.languages[t.languages.length-1];if("cimode"===n.toLowerCase())return!0;var o=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!!t.hasResourceBundle(n,e)||!t.services.backendConnector.backend||!(!o(n,e)||r&&!o(i,e))}(e,a)});function p(){return{t:a.getFixedT(null,"fallback"===u.nsMode?d:d[0])}}var h=Object(Cs.useState)(p()),g=zs()(h,2),y=g[0],m=g[1];Object(Cs.useEffect)(function(){var e=!0,t=u.bindI18n,n=u.bindI18nStore;function r(){e&&m(p())}return f||c||qs(a,d,function(){e&&m(p())}),t&&a&&a.on(t,r),n&&a&&a.store.on(n,r),function(){e=!1,t&&a&&t.split(" ").forEach(function(e){return a.off(e,r)}),n&&a&&n.split(" ").forEach(function(e){return a.store.off(e,r)})}},[d.join()]);var v=[y.t,a,f];if(v.t=y.t,v.i18n=a,v.ready=f,f)return v;if(!f&&!c)return v;throw new Promise(function(e){qs(a,d,function(){m(p()),e()})})}var Ws=n(53),Ys=n(54),Xs=n(55),Js=n(56),$s=n(57),Zs=n(58),eu=n(59),tu=n(60),nu=n(61),ru=n(62),iu=n(63),ou=n(64),au=n(65),su=n(66),uu=n(67),lu=n(68),cu=n(69),du=n(70),fu=n(71),pu=n(72),hu=n(73),gu=n(74),yu=n(75);ws.use(Ts.a).use(Us).init({detection:{caches:[],lookupCookie:"_ys_locale",lookupQuerystring:"locale"},fallbackLng:"en-US",interpolation:{escapeValue:!1},load:"currentOnly",resources:{"ar-SA":{translation:Ws},"da-DK":{translation:Ys},"de-DE":{translation:Xs},"en-GB":{translation:Js},"en-US":{translation:$s},"es-ES":{translation:Zs},"es-MX":{translation:eu},"fi-FI":{translation:tu},"fr-FR":{translation:nu},"he-IL":{translation:ru},"it-IT":{translation:iu},"ja-JP":{translation:ou},"ko-KR":{translation:au},"nb-NO":{translation:su},"nl-NL":{translation:uu},"pl-PL":{translation:lu},"pt-BR":{translation:cu},"pt-PT":{translation:du},"ru-RU":{translation:fu},"sv-SE":{translation:pu},"tr-TR":{translation:hu},"zh-CN":{translation:gu},"zh-TW":{translation:yu}}});var mu=n(13),vu=n.n(mu),bu=As.a.createContext(null);var _u=function(e){e()},Su=function(){return _u},wu=null,Eu={notify:function(){}};var Tu=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=Eu,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t,n;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=(e=Su(),t=[],n=[],{clear:function(){n=wu,t=wu},notify:function(){var r=t=n;e(function(){for(var e=0;e<r.length;e++)r[e]()})},get:function(){return n},subscribe:function(e){var r=!0;return n===t&&(n=t.slice()),n.push(e),function(){r&&t!==wu&&(r=!1,n===t&&(n=t.slice()),n.splice(n.indexOf(e),1))}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=Eu)},e}(),xu=function(e){var t,n;function r(t){var n;n=e.call(this,t)||this;var r=t.store;n.notifySubscribers=n.notifySubscribers.bind(Ha(n));var i=new Tu(r);return i.onStateChange=n.notifySubscribers,n.state={store:r,subscription:i},n.previousState=r.getState(),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){this._isMounted=!0,this.state.subscription.trySubscribe(),this.previousState!==this.props.store.getState()&&this.state.subscription.notifyNestedSubs()},i.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe(),this.state.subscription.tryUnsubscribe(),this._isMounted=!1},i.componentDidUpdate=function(e){if(this.props.store!==e.store){this.state.subscription.tryUnsubscribe();var t=new Tu(this.props.store);t.onStateChange=this.notifySubscribers,this.setState({store:this.props.store,subscription:t})}},i.notifySubscribers=function(){this.state.subscription.notifyNestedSubs()},i.render=function(){var e=this.props.context||bu;return As.a.createElement(e.Provider,{value:this.state},this.props.children)},r}(Cs.Component);xu.propTypes={store:vu.a.shape({subscribe:vu.a.func.isRequired,dispatch:vu.a.func.isRequired,getState:vu.a.func.isRequired}),context:vu.a.object,children:vu.a.any};var ku=xu;function Cu(){return(Cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Au(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Iu=n(33),Ou=n.n(Iu),Lu=n(9),Ru=n.n(Lu),Pu=n(31),Du=[],Mu=[null,null];function Nu(e,t){var n=e[1];return[t.payload,n+1]}var Fu=function(){return[null,0]},ju="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Cs.useLayoutEffect:Cs.useEffect;function Uu(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,i=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,o=n.methodName,a=void 0===o?"connectAdvanced":o,s=n.renderCountProp,u=void 0===s?void 0:s,l=n.shouldHandleStateChanges,c=void 0===l||l,d=n.storeKey,f=void 0===d?"store":d,p=n.withRef,h=void 0!==p&&p,g=n.forwardRef,y=void 0!==g&&g,m=n.context,v=void 0===m?bu:m,b=Au(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);Ru()(void 0===u,"renderCountProp is removed. render counting is built into the latest React Dev Tools profiling extension"),Ru()(!h,"withRef is removed. To access the wrapped instance, use a ref on the connected component");Ru()("store"===f,"storeKey has been removed and does not do anything. To use a custom Redux store for specific components, create a custom React context with React.createContext(), and pass the context object to React Redux's Provider and specific components like: <Provider context={MyContext}><ConnectedComponent context={MyContext} /></Provider>. You may also pass a {context : MyContext} option to connect");var _=v;return function(t){var n=t.displayName||t.name||"Component",r=i(n),o=Cu({},b,{getDisplayName:i,methodName:a,renderCountProp:u,shouldHandleStateChanges:c,storeKey:f,displayName:r,wrappedComponentName:n,WrappedComponent:t}),s=b.pure;var l=s?Cs.useMemo:function(e){return e()};function d(n){var i=Object(Cs.useMemo)(function(){var e=n.forwardedRef,t=Au(n,["forwardedRef"]);return[n.context,e,t]},[n]),a=i[0],s=i[1],u=i[2],d=Object(Cs.useMemo)(function(){return a&&a.Consumer&&Object(Pu.isContextConsumer)(As.a.createElement(a.Consumer,null))?a:_},[a,_]),f=Object(Cs.useContext)(d),p=Boolean(n.store),h=Boolean(f)&&Boolean(f.store);Ru()(p||h,'Could not find "store" in the context of "'+r+'". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to '+r+" in connect options.");var g=n.store||f.store,y=Object(Cs.useMemo)(function(){return function(t){return e(t.dispatch,o)}(g)},[g]),m=Object(Cs.useMemo)(function(){if(!c)return Mu;var e=new Tu(g,p?null:f.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[g,p,f]),v=m[0],b=m[1],S=Object(Cs.useMemo)(function(){return p?f:Cu({},f,{subscription:v})},[p,f,v]),w=Object(Cs.useReducer)(Nu,Du,Fu),E=w[0][0],T=w[1];if(E&&E.error)throw E.error;var x=Object(Cs.useRef)(),k=Object(Cs.useRef)(u),C=Object(Cs.useRef)(),A=Object(Cs.useRef)(!1),I=l(function(){return C.current&&u===k.current?C.current:y(g.getState(),u)},[g,E,u]);ju(function(){k.current=u,x.current=I,A.current=!1,C.current&&(C.current=null,b())}),ju(function(){if(c){var e=!1,t=null,n=function(){if(!e){var n,r,i=g.getState();try{n=y(i,k.current)}catch(e){r=e,t=e}r||(t=null),n===x.current?A.current||b():(x.current=n,C.current=n,A.current=!0,T({type:"STORE_UPDATED",payload:{latestStoreState:i,error:r}}))}};v.onStateChange=n,v.trySubscribe(),n();return function(){if(e=!0,v.tryUnsubscribe(),t)throw t}}},[g,v,y]);var O=Object(Cs.useMemo)(function(){return As.a.createElement(t,Cu({},I,{ref:s}))},[s,t,I]);return Object(Cs.useMemo)(function(){return c?As.a.createElement(d.Provider,{value:S},O):O},[d,O,S])}var p=s?As.a.memo(d):d;if(p.WrappedComponent=t,p.displayName=r,y){var h=As.a.forwardRef(function(e,t){return As.a.createElement(p,Cu({},e,{forwardedRef:t}))});return h.displayName=r,h.WrappedComponent=t,Ou()(h,t)}return Ou()(p,t)}}var Bu=Object.prototype.hasOwnProperty;function Vu(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Gu(e,t){if(Vu(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Bu.call(t,n[i])||!Vu(e[n[i]],t[n[i]]))return!1;return!0}var qu=n(8);function Hu(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function Ku(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function zu(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Ku(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=Ku(i),i=r(t,n)),i},r}}var Qu=[function(e){return"function"==typeof e?zu(e):void 0},function(e){return e?void 0:Hu(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?Hu(function(t){return Object(qu.bindActionCreators)(e,t)}):void 0}];var Wu=[function(e){return"function"==typeof e?zu(e):void 0},function(e){return e?void 0:Hu(function(){return{}})}];function Yu(e,t,n){return Cu({},n,e,t)}var Xu=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(t,n,s){var u=e(t,n,s);return a?i&&o(u,r)||(r=u):(a=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return Yu}}];function Ju(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function $u(e,t,n,r,i){var o,a,s,u,l,c=i.areStatesEqual,d=i.areOwnPropsEqual,f=i.areStatePropsEqual,p=!1;function h(i,p){var h,g,y=!d(p,a),m=!c(i,o);return o=i,a=p,y&&m?(s=e(o,a),t.dependsOnOwnProps&&(u=t(r,a)),l=n(s,u,a)):y?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(u=t(r,a)),l=n(s,u,a)):m?(h=e(o,a),g=!f(h,s),s=h,g&&(l=n(s,u,a)),l):l}return function(i,c){return p?h(i,c):(s=e(o=i,a=c),u=t(r,a),l=n(s,u,a),p=!0,l)}}function Zu(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=Au(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),s=r(e,o),u=i(e,o);return(o.pure?$u:Ju)(a,s,u,e,o)}function el(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function tl(e,t){return e===t}var nl,rl,il,ol,al,sl,ul,ll,cl,dl,fl,pl,hl=(il=(rl=void 0===nl?{}:nl).connectHOC,ol=void 0===il?Uu:il,al=rl.mapStateToPropsFactories,sl=void 0===al?Wu:al,ul=rl.mapDispatchToPropsFactories,ll=void 0===ul?Qu:ul,cl=rl.mergePropsFactories,dl=void 0===cl?Xu:cl,fl=rl.selectorFactory,pl=void 0===fl?Zu:fl,function(e,t,n,r){void 0===r&&(r={});var i=r,o=i.pure,a=void 0===o||o,s=i.areStatesEqual,u=void 0===s?tl:s,l=i.areOwnPropsEqual,c=void 0===l?Gu:l,d=i.areStatePropsEqual,f=void 0===d?Gu:d,p=i.areMergedPropsEqual,h=void 0===p?Gu:p,g=Au(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),y=el(e,sl,"mapStateToProps"),m=el(t,ll,"mapDispatchToProps"),v=el(n,dl,"mergeProps");return ol(pl,Cu({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:y,initMapDispatchToProps:m,initMergeProps:v,pure:a,areStatesEqual:u,areOwnPropsEqual:c,areStatePropsEqual:f,areMergedPropsEqual:h},g))});function gl(){var e=Object(Cs.useContext)(bu);return Ru()(e,"could not find react-redux context value; please ensure the component is wrapped in a <Provider>"),e}function yl(){return gl().store.dispatch}var ml="undefined"!=typeof window?Cs.useLayoutEffect:Cs.useEffect,vl=function(e,t){return e===t};function bl(e,t){void 0===t&&(t=vl),Ru()(e,"You must pass a selector to useSelectors");var n,r=gl(),i=r.store,o=r.subscription,a=Object(Cs.useReducer)(function(e){return e+1},0)[1],s=Object(Cs.useMemo)(function(){return new Tu(i,o)},[i,o]),u=Object(Cs.useRef)(),l=Object(Cs.useRef)(),c=Object(Cs.useRef)();try{n=e!==l.current||u.current?e(i.getState()):c.current}catch(e){var d="An error occured while selecting the store state: "+e.message+".";throw u.current&&(d+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\nOriginal stack trace:"),new Error(d)}return ml(function(){l.current=e,c.current=n,u.current=void 0}),ml(function(){function e(){try{var e=l.current(i.getState());if(t(e,c.current))return;c.current=e}catch(e){u.current=e}a({})}return s.onStateChange=e,s.trySubscribe(),e(),function(){return s.tryUnsubscribe()}},[i,s]),n}var _l,Sl=n(42);_l=Sl.unstable_batchedUpdates,_u=_l;var wl=n(22),El=n(77),Tl=n(26),xl=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";return e&&e.forEach(function(e){e&&(n=0===n.length?n:n+" ",n+=e)}),n},kl=Cs.forwardRef(function(e,t){var n=e.hostClasses,r=e.onMouseDown,i=e.onMouseLeave,o=e.onMouseMove,a=e.onTouchEnd,s=e.onTouchMove,u=e.onTouchStart,l=e.footer,c=e.header;return Cs.createElement("div",{ref:t,className:xl(Tl.overlay,n),onMouseDown:r||void 0,onMouseLeave:i||void 0,onMouseMove:o||void 0,onTouchEnd:a||void 0,onTouchMove:s||void 0,onTouchStart:u||void 0},Cs.createElement("div",{className:Tl.header},c),e.children,Cs.createElement("div",{className:Tl.footer},l))}),Cl=n(14),Al=n(78),Il=n(27),Ol=n(35),Ll=n(23),Rl=function(){return(Rl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Pl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n},Dl=function(e){return function(t){var n=t.toolTipAlignment,r=void 0===n?"middle":n,i=t.toolTipDirection,o=void 0===i?"top":i,a=Pl(t,["toolTipAlignment","toolTipDirection"]);return Cs.createElement("span",{className:Ll.toolTipHost},Cs.createElement(e,Rl({},a),Cs.createElement("span",{className:xl(Ll.toolTip,Ll[o],Ll[r])},a.toolTipLabel),a.children))}},Ml=function(e){var t=e.ariaLabel,n=e.ariaPressed,r=e.disabled,i=e.hostClasses,o=e.onClick,a=e.tabIndex,s=e.type,u=e.buttonStyle,l=Cs.useState(""),c=l[0],d=l[1];return Cs.useEffect(function(){switch(u){case"icon":d(Ol.buttonStyleIcon);break;default:d("")}},[u]),Cs.createElement("button",{"aria-label":t,"aria-pressed":n,type:s||"button",tabIndex:a||0,className:xl(Ol.controlButton,c,i),onClick:o,disabled:!!r},e.children)},Nl=Dl(Ml),Fl=function(e){var t=e.footer,n=e.header,r=e.items,i=e.hostClasses;return Cs.createElement("div",{className:xl(Il.menu,i)},n,Cs.createElement("div",{className:Il.scroller},r.map(function(e,t){return Cs.createElement(Ml,{key:t,ariaLabel:e.ariaLabel,onClick:e.onClick,disabled:e.disabled,hostClasses:xl(Il.menuItem,e.hostClasses)},e.labels.map(function(e,t){return Cs.createElement("div",{key:t},e)}),Cs.createElement("div",{className:"material-icons"},e.icon))})),t)},jl=function(e,t){return e},Ul=function(e,t,n){var r,i=e.lowLatency,o=e.audioOnly,a=e.quality,s=e.autoState,u=e.audioTrack,l=e.audioTracks,c=e.lowLatencyAvailable,d=e.legacyPlayerHandler,f=e.lowLatencyHandler,p=e.audioOnlyHandler,h=e.qualityHandler,g=e.languageHandler,y=e.reportHandler,m=e.videoStatsHandler,v=i?"check_box":"check_box_outline_blank",b=o?"check_box":"check_box_outline_blank",_=l.filter(function(e){return!!e&&!!e.label});r=s.autoEnabled?a&&a.label?t("Auto - {{quality}}",{quality:a.label}):t("Auto"):a&&a.label?a.label:"";var S=u?u.label:"",w=[];return d&&w.push({ariaLabel:"Enable Legacy Player",labels:[n("Toggle Spectre","Switching between the legacy player and Spectre player")&&t("Toggle Spectre")],icon:"check_box",onClick:d}),w.push({ariaLabel:"Low Latency",disabled:!c,labels:[n("Low Latency","Reduced amount of video delay from stream to viewer")&&t("Low Latency")],icon:v,onClick:f}),w.push({ariaLabel:"Audio Only",labels:[n("Audio Only","Video platform, only emitting audio without the source video")&&t("Audio Only")],icon:b,onClick:p}),w.push({ariaLabel:"Qualities",labels:[n("Quality","Video quality")&&t("Quality"),r],disabled:o,icon:"keyboard_arrow_right",onClick:h}),_.length&&w.push({ariaLabel:"Languages",labels:[n("Language","Audible video language")&&t("Language"),S],icon:"keyboard_arrow_right",onClick:g}),w.push({ariaLabel:"Report Video Issues",labels:[n("Report Video Issues","Report video related issues, specifically relating to quality")&&t("Report Video Issues")],onClick:y}),w.push({ariaLabel:"Video Stats",labels:[n("Video Stats","Statistics for video playback quality")&&t("Video Stats")],onClick:m}),w},Bl=function(e){var t=Qs().t;return Cs.createElement(Fl,{items:Ul(e,t,jl),hostClasses:Al.mainMenu})},Vl=n(20),Gl=n(12),ql=Object(Gl.createAction)("@settings/SET_MENU_PRESENTATION",function(e){return function(t){return e({presentationState:t})}}),Hl=function(e){return Cs.createElement(Fl,{items:Kl(e),hostClasses:Vl.qualityMenu})},Kl=function(e){var t=e.quality,n=e.qualities,r=e.autoState,i=e.backHandler,o=e.qualityHandler,a=e.autoHandler,s=Qs().t,u=yl(),l=[];return l.push({ariaLabel:"Back to main menu",labels:[jl("Qualities")&&s("Qualities")],icon:"keyboard_arrow_left",hostClasses:xl(Vl.header,Vl.item),onClick:i}),n&&l.push.apply(l,n.filter(function(e){return e.label&&e.height}).sort(function(e,t){return t.height-e.height}).map(function(e){var n=t&&e.label===t.label&&(!r||!r.autoAvailable||!r.autoEnabled);return{ariaLabel:e.label,labels:[e.label],icon:n?"done":"none",hostClasses:Vl.item,onClick:function(){u(ql("hidden")),o&&o(e)}}})),r.autoAvailable&&l.push({ariaLabel:"Auto Quality",labels:[jl("Auto")&&s("Auto")],icon:r.autoEnabled?"done":"none",hostClasses:Vl.item,onClick:a}),l},zl=n(24),Ql=function(e){return Cs.createElement(Fl,{items:Wl(e),hostClasses:zl.languageMenu})},Wl=function(e){var t=e.audioTrack,n=e.audioTracks,r=e.backHandler,i=e.audioTrackHandler,o=Qs().t,a=yl();return[{ariaLabel:"Back to main menu",labels:[jl("Languages")&&o("Languages")],icon:"keyboard_arrow_left",hostClasses:xl(zl.header,zl.item),onClick:r}].concat(n.filter(function(e){return e.label}).map(function(e){return{ariaLabel:e.label,labels:[e.label],icon:t&&e.id===t.id?"done":"none",hostClasses:zl.item,onClick:function(){a(ql("hidden")),i&&i(e)}}}))},Yl=n(19),Xl=n(79),Jl=function(e){var t=e.header,n=e.rows;return Cs.createElement("div",{className:Xl.videoStatsTable},Cs.createElement("div",{className:Yl.videoStatsHeader},Cs.createElement("h1",null,t)),Cs.createElement("table",null,Cs.createElement("tbody",null,n.map(function(e,t){return Cs.createElement("tr",{key:t},Cs.createElement("th",{scope:"row"},e.name),Cs.createElement("td",null,e.data))}))))},$l=function(e){var t=e.onCloseHandler,n=e.tableData,r=Qs().t;return Cs.createElement("div",{className:Yl.videoStatsContainer},Cs.createElement("div",{className:Yl.videoStatsHeader},Cs.createElement("h1",null,r("Video Stats")),Cs.createElement(Ml,{ariaLabel:"Close Video Stats",buttonStyle:"icon",onClick:t},Cs.createElement("i",{className:xl("material-icons")},"close"))),Cs.createElement("div",{className:Yl.videoStatsBody},n.map(function(e,t){return Cs.createElement(Jl,{key:t,header:e.header,rows:e.rows})})))},Zl=function(e){return function(e){return e.web.player}(e).playerSessionGuidState},ec=function(e){return function(t){return e(t.core)}},tc=function(){return(tc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},nc=function(e){var t=Qs().t,n=bl(Zl),r=bl(ec(vo)),i=bl(ec(bo)),o=Cs.useState(!0),a=o[0],s=o[1],u=Cs.useState(!1),l=u[0],c=u[1],d=Cs.useState(!1),f=d[0],p=d[1],h=Cs.useState(!1),g=h[0],y=h[1],m=e.isVisible,v=e.qualityHandler,b=e.audioTrackHandler;Cs.useEffect(function(){s(m),c(!1),p(!1),y(!1)},[m]);var _=function(){s(!a),c(!l)},S=function(){s(!a),p(!f)},w=function(){s(!a),y(!g)};return Cs.createElement("div",{className:xl(Cl.videoSettings,m?"":Cl.hide)},Cs.createElement("div",{className:a?"":Cl.hide},Cs.createElement(Bl,tc({},e,{qualityHandler:_,languageHandler:S,videoStatsHandler:w}))),Cs.createElement("div",{className:l?"":Cl.hide},Cs.createElement(Hl,tc({},e,{backHandler:_,qualityHandler:v}))),Cs.createElement("div",{className:f?"":Cl.hide},Cs.createElement(Ql,tc({},e,{backHandler:S,audioTrackHandler:b}))),Cs.createElement("div",{className:g?"":Cl.hide},Cs.createElement($l,{onCloseHandler:w,tableData:[{header:jl("General Information")&&t("General Information"),rows:[{name:jl("Player Version")&&t("Player Version"),data:"2019.7.12+4feff9db"},{name:jl("Connection URI")&&t("Connection URI"),data:i},{name:jl("Player Session Guid")&&t("Player Session Guid"),data:n},{name:jl("Stream Session Guid")&&t("Stream Session Guid"),data:r}]}]})))},rc=n(7),ic=n(36),oc=function(e){var t,n=e.ariaLabel,r=e.children,i=e.hostClasses,o=e.onChange,a=e.onChangeComplete,s=e.value,u=void 0===s?0:s,l=Cs.useState(!1),c=l[0],d=l[1],f=Cs.useState(0),p=f[0],h=f[1],g=Cs.useState("0.0000001"),y=g[0],m=g[1],v=c?p:u,b=((t={})["--min"]=0,t["--max"]=1,t["--val"]=v,t),_=function(e){return void 0===e&&(e="0.0000001"),function(){d(!0),m(e)}},S=function(e){d(!1),a&&a(+e.currentTarget.value)};return Cs.createElement(Cs.Fragment,null,Cs.createElement("input",{"aria-label":n,"aria-valuemax":1,"aria-valuemin":0,"aria-valuenow":v,className:xl(ic.slider,c?ic.changing:"",i),min:0,max:1,onChange:function(e){if(c){var t=+e.currentTarget.value;h(t),o&&o(t)}},onBlur:S,onFocus:function(){return d(!0)},onMouseDown:_(),onMouseUp:S,onKeyDown:_("0.01"),onTouchEnd:S,onTouchStart:_(),step:y,style:b,type:"range",value:""+v}),r)},ac=Dl(oc),sc=n(28),uc=function(e){var t=e.hostClasses,n=e.leftContent,r=e.rightContent;return Cs.createElement("div",{className:xl(sc.container,t)},Cs.createElement("div",{className:sc.leftContent},n),Cs.createElement("div",{className:sc.rightContent},r))},lc=function(e){var t=Math.floor,n=t(e)%60,r=t(e/60)%60,i=t(e/60/60)%24,o=t(e/60/60/24);return o?o+"d "+i+"h "+r+"m":i?i+"h "+r+"m "+n+"s":r?r+"m "+n+"s":n+"s"},cc=Promise.resolve(),dc=(void 0!==document.onfullscreenchange?"fullscreenchange":void 0!==document.onwebkitfullscreenchange&&"webkitfullscreenchange")||void 0!==document.onmozfullscreenchange&&"mozfullscreenchange"||void 0!==document.onmsfullscreenchange&&"msfullscreenchange"||"",fc=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullscreen||document.msExitFullscreen||function(){return cc},pc=Element.prototype.requestFullscreen||Element.prototype.webkitRequestFullscreen||Element.prototype.mozRequestFullscreen||Element.prototype.msRequestFullscreen||function(){return Promise.reject("Fullscreen not supported")},hc=function(){return document.fullscreenElement&&fc.apply(document)},gc=function(e,t){return pc.call(e,t)||cc},yc=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullscreenElement||document.msFullscreenElement},mc=n(37),vc=Dl(function(e){var t=e.icon,n=e.ariaLabel,r=e.isDisabled,i=e.hostClasses,o=e.onClick,a=e.tabIndex,s=e.type;return Cs.createElement("button",{"aria-label":n,type:s||"button",tabIndex:a||0,className:xl(mc.iconButton,i),onClick:o,disabled:!!r},Cs.createElement("div",null,Cs.createElement("i",{className:xl("material-icons",mc.white)},t),e.children))}),bc=function(e){var t,n=e.captionsAvailable,r=e.currentTime,i=e.duration,o=e.playing,a=e.muted,s=e.volume,u=e.textTrack,l=e.fullscreen,c=e.contentType,d=e.currentTimeHandler,f=e.playbackHandler,p=e.muteHandler,h=e.volumeHandler,g=e.closedCaptionsHandler,y=e.clipsHandler,m=e.reportAbuseHandler,v=e.settingsHandler,b=e.fullscreenHandler,_=Qs().t;t=a||0===s?"volume_off":s<=.5?"volume_down":"volume_up";var S=o?"pause":"play_arrow",w=l?"fullscreen_exit":"fullscreen",E=Cs.useState(-1),T=E[0],x=E[1],k="recording"===c&&!!i&&!Number.isNaN(r);return Cs.createElement("div",{className:rc.controlsBar},k&&Cs.createElement(oc,{ariaLabel:"Time Scrubber",hostClasses:rc.timeScrubber,onChange:function(e){return x(e*i)},onChangeComplete:function(e){d(e*i),x(-1)},value:r/i}),Cs.createElement(uc,{hostClasses:rc.controlsBarContent,leftContent:Cs.createElement(Cs.Fragment,null,Cs.createElement(Nl,{ariaLabel:o?"Pause":"Play",buttonStyle:"icon",onClick:f,toolTipAlignment:"start",toolTipDirection:"top",toolTipLabel:o?jl("Pause")&&_("Pause"):jl("Play")&&_("Play")},Cs.createElement("i",{className:xl("material-icons",rc.white)},S)),k&&Cs.createElement("span",{className:xl("current-time",rc.timestamp)},lc(T>-1?T:r))),rightContent:Cs.createElement(Cs.Fragment,null,m&&Cs.createElement(vc,{icon:"flag",ariaLabel:"Report Abuse",onClick:function(){hc(),m()},toolTipDirection:"top",toolTipLabel:_("Report Abuse")},Cs.createElement("span",{className:xl(rc.textIconWithLeftIcon,rc.displayOnSize)},jl("Report Abuse")&&_("Report Abuse"))),Cs.createElement(Nl,{ariaLabel:a||0===s?"Unmute":"Mute",buttonStyle:"icon",onClick:p,toolTipDirection:"top",toolTipLabel:a||0===s?jl("Unmute")&&_("Unmute"):jl("Mute")&&_("Mute")},Cs.createElement("i",{className:xl("material-icons",rc.white)},t)),Cs.createElement(ac,{ariaLabel:"Volume",hostClasses:rc.volumeSlider,onChange:h,toolTipDirection:"top",toolTipLabel:jl("Volume")&&_("Volume"),value:s}),n&&Cs.createElement(Nl,{ariaLabel:"Closed Captions",ariaPressed:!!u,buttonStyle:"icon",onClick:g,toolTipDirection:"top",toolTipLabel:jl("Closed Captions")&&_("Closed Captions")},Cs.createElement("i",{className:xl("material-icons",rc.white,u?rc.selected:void 0)},"closed_caption")),y&&"live"===c&&Cs.createElement(Nl,{ariaLabel:"Create Clip",buttonStyle:"icon",onClick:function(){hc(),y()},toolTipDirection:"top",toolTipLabel:jl("Create Clip")&&_("Create Clip")},Cs.createElement("i",{className:xl("material-icons",rc.white)},"movie_creation")),"live"===c&&Cs.createElement(Nl,{ariaLabel:"Settings",buttonStyle:"icon",onClick:v,toolTipDirection:"top",toolTipLabel:jl("Settings")&&_("Settings")},Cs.createElement("i",{className:xl("material-icons",rc.white)},"settings")),Cs.createElement(Nl,{ariaLabel:l?"Exit Full Screen":"Enter Full Screen",buttonStyle:"icon",onClick:b,toolTipAlignment:"end",toolTipDirection:"top",toolTipLabel:l?jl("Exit Fullscreen")&&_("Exit Fullscreen"):jl("Full Screen")&&_("Full Screen")},Cs.createElement("i",{className:xl("material-icons",rc.white)},w)))}))},_c=n(15),Sc=function(e){var t=e.report,n=e.issues,r=e.closeHandler,i=Qs().t,o=Cs.useState(),a=o[0],s=o[1];return Cs.useEffect(function(){return function(){return s(void 0)}},[t]),Cs.createElement(Fl,{items:wc(n,a,s),hostClasses:xl(_c.reportMenu,t?"":_c.remove),header:Cs.createElement("div",{className:_c.header},i("Report Video Issues")),footer:Cs.createElement("div",{className:_c.footer},Cs.createElement(Ml,{ariaLabel:"Submit",hostClasses:xl(_c.simpleButton),type:"submit",disabled:!a,onClick:function(){r()}},jl("Submit")&&i("Submit")),Cs.createElement(Ml,{ariaLabel:"Cancel",hostClasses:xl(_c.simpleButton),onClick:function(){r()}},jl("Cancel")&&i("Cancel")))})},wc=function(e,t,n){return e.filter(function(e){return!!e}).map(function(e){return{ariaLabel:e,icon:t!==e?"radio_button_unchecked":"radio_button_checked",labels:[e],onClick:function(){return n(e)}}})},Ec=function(e){return"visible"===function(e){return e.web.settings}(e).menuPresentationState},Tc=function(){return(Tc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},xc=function(e){var t=Cs.useState(!1),n=t[0],r=t[1],i=yl(),o=bl(Ec),a=Qs().t,s=function(e){return function(){switch(e){case"settings":n&&r(!n),i(ql(o?"hidden":"visible"));break;case"report":o&&i(ql(o?"hidden":"visible")),r(!n)}}},u=[jl("Video is not smooth")&&a("Video is not smooth"),jl("Video is fine, but can't hear audio")&&a("Video is fine, but can't hear audio"),jl("Video doesn't load")&&a("Video doesn't load"),jl("Video and audio are not synced")&&a("Video and audio are not synced"),jl("Video resolution changes too often")&&a("Video resolution changes too often"),jl("Video is playing, but there's distortion")&&a("Video is playing, but there's distortion")];return Cs.createElement(Cs.Fragment,null,Cs.createElement(nc,Tc({},e,{reportHandler:s("report"),isVisible:o})),Cs.createElement(Sc,{report:n,issues:u,closeHandler:s("report")}),Cs.createElement(bc,Tc({},e,{settingsHandler:s("settings")})))},kc=n(11),Cc={Normal:1,CostDeferred:2,RealTime:3},Ac={Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,DateTime:8,Guid:9},Ic="a387cfcf60114a43a7699f9fbb49289e-9bceb9fe-1c06-460f-96c5-6a0b247358bc-7238",Oc="2.0.0-rc3",Lc="1DS-Web-JS-"+Oc,Rc="undefined",Pc=null,Dc=null,Mc=Boolean("undefined"!=typeof document&&document.cookie)||Boolean("undefined"!=typeof navigator&&navigator.cookieEnabled);function Nc(e){return!(null==e||""===e)}function Fc(e){return"string"==typeof e}function jc(e){return"number"==typeof e}function Uc(e){return"boolean"==typeof e}function Bc(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return""}function Vc(){return null===Pc&&(Pc=typeof navigator!==Rc&&Boolean(navigator.sendBeacon)),Pc}function Gc(){return null===Dc&&(Dc=typeof Uint8Array!==Rc&&!function(){if(typeof navigator!==Rc&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if((e.indexOf("safari")>=0||e.indexOf("firefox")>=0)&&e.indexOf("chrome")<0)return!0}return!1}()&&!zc()),Dc}function qc(e){return!!(e&&jc(e)&&e>=1&&e<=3)}function Hc(e,t){if(!Fc(e)||null==t||""===t)return null;if(Fc(t)||jc(t)||Uc(t)||Qc(t))t={value:t};else if("object"!=typeof t||t.value){if(void 0===t.value||null===t.value||""===t.value||!Fc(t.value)&&!jc(t.value)&&!Uc(t.value)&&!Qc(t.value))return null}else t={value:JSON.stringify(t)};if(Qc(t.value)&&!(t.value.length>0))return null;if(void 0!==t.kind){if(Qc(t.value)||!function(e){if(e&&jc(e)&&(e>=0&&e<=13||32===e))return!0;return!1}(t.kind))return null;t.value=t.value.toString()}return t}function Kc(e){return e.getUTCFullYear()+"-"+td(e.getUTCMonth()+1)+"-"+td(e.getUTCDate())+"T"+td(e.getUTCHours())+":"+td(e.getUTCMinutes())+":"+td(e.getUTCSeconds())+"."+function(e){if(e<10)return"00"+e;if(e<100)return"0"+e;return e.toString()}(e.getUTCMilliseconds())+"Z"}function zc(){return!(typeof navigator===Rc||!navigator.product)&&"ReactNative"===navigator.product}function Qc(e){return e instanceof Array}function Wc(e,t,n){var r=-1;return void 0===e?r:(t&&t>0&&(32===t?r=1<<13:t<=13&&(r=t<<5)),void 0!==n&&function(e){if(jc(e)&&e>=0&&e<=9)return!0;return!1}(n)?(-1===r&&(r=0),r|n):(Qc(e)&&(e=e[0]),-1!==r?r|function(e){if(void 0===e)return-1;if(jc(e))return Ac.Double;if(Fc(e))return Ac.String;if(Uc(e))return Ac.Bool;return-1}(e):jc(e)?Ac.Double:r))}function Yc(){return Mc}function Xc(e,t,n){if(Mc){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var i="; expires="+r.toUTCString();window.document.cookie=e+"="+t+i+"; path=/;"}}function Jc(e){Xc(e,"",-1)}function $c(e){if(Mc){e+="=";for(var t=decodeURIComponent(document.cookie).split(";"),n=0;n<t.length;n++){for(var r=t[n],i=0;" "===r.charAt(i);)i++;if(0===(r=r.substring(i)).indexOf(e))return r.substring(e.length,r.length)}}return""}function Zc(){return"xxxxxxxx-xxxx-4xxx-Rxxx-xxxxxxxxxxxx".replace(/x/g,function(){return Math.floor(16*Math.random()).toString(16)}).replace("R",(8|Math.floor(3*Math.random())).toString(16))}function ed(e,t,n,r,i){var o={},a=!1,s=0,u=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(a=arguments[0],s++);for(var l=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a&&"[object Object]"===Object.prototype.toString.call(e[t])?o[t]=ed(!0,o[t],e[t]):o[t]=e[t])};s<u;s++){l(arguments[s])}return o}function td(e){return e<10?"0"+e:e.toString()}var nd,rd,id=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.initialize=function(t,n){if(t){t.endpointUrl||(t.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var r=t.propertyStorageOverride;if(r&&(!r.getProperty||!r.setProperty))throw"Invalid property storage override passed."}this.getWParam=function(){return"undefined"!=typeof document?0:-1},e.prototype.initialize.call(this,t,n)},t.prototype.track=function(t){t&&(qc(t.latency)||(t.latency=Cc.Normal)),e.prototype.track.call(this,t)},t}(kc.AppInsightsCore),od=function(){function e(e){if(this.appExpId=null,this.flightIdNameSpaces=["AX","EX","SF","CS","CF","CT","CU","DC","DF","H5","HL","WS","WP"],this.expIdCookieName="Treatments","undefined"!=typeof document){var t=document.documentElement;t&&(this.locale=t.lang)}this.expId=e.expId?this._readExpIdFromCoreData(e.expId):this._readExpIdFromCookie(),this.env=e.env?e.env:this._getMetaDataFromDOM("awa-").env}return e.prototype._getMetaDataFromDOM=function(e){var t,n={};t="undefined"!=typeof document&&document.querySelectorAll("meta");for(var r=0;r<t.length;r++){var i=t[r];if(i.name)if(0===i.name.toLowerCase().indexOf(e))n[i.name.replace(e,"")]=i.content}return n},e.prototype._setAppExpId=function(e){if(e){if(e!==this.appExpId){this.appExpId=null;for(var t=e.split(","),n=0;n<t.length;n++)this._isValidAppFlightId(t[n])&&(this.appExpId?this.appExpId+=","+t[n]:this.appExpId=t[n])}}else this.appExpId=null},e.prototype._getAppExpId=function(){return this.appExpId},e.prototype._readExpIdFromCookie=function(){return this._setAppExpId(i.getCookie(this.expIdCookieName)),this._getAppExpId()},e.prototype._readExpIdFromCoreData=function(e){return this._setAppExpId(e),this._getAppExpId()},e.prototype._isValidAppFlightId=function(e){if(!e||e.length<4)return!1;for(var t=!1,n=e.substring(0,3).toString().toUpperCase(),r=0;r<this.flightIdNameSpaces.length;r++)if(this.flightIdNameSpaces[r]+":"===n&&e.length<=256){t=!0;break}return t},e}(),ad=function(){return function(e){if(!e.disableCookiesUsage&&i.cookieAvailable()){var t=i.getCookie("MUID");t&&(this.localId="t:"+t)}if("undefined"!=typeof navigator){var n=navigator;this.locale=n.userLanguage||n.language}}}(),sd="MSIE",ud="Chrome",ld="Firefox",cd="Safari",dd="Edge",fd="Electron",pd="SkypeShell",hd="PhantomJS",gd="Opera",yd=function(){function e(e){if("undefined"!=typeof window){var t=window.location;if(t){var n=t.hostname;n&&(this.domain="file:"===t.protocol?"local":n)}}var r="undefined"!=typeof navigator?navigator.userAgent:"";if(e.userAgent&&(r=e.userAgent),e.populateBrowserInfo){if(r){var o=this._getBrowserName(r);this.browser=o,this.browserVer=this._getBrowserVersion(r,o)}var a=this._getScreenResolution();this.screenRes=a.w+"X"+a.h}this.userConsent=e.userConsented?e.userConsented:!!i.getCookie(e.userConsentCookieName)}return e.prototype._getBrowserName=function(e){return this._userAgentContainsString("OPR/",e)?gd:this._userAgentContainsString(hd,e)?hd:this._userAgentContainsString(dd,e)?dd:this._userAgentContainsString(fd,e)?fd:this._userAgentContainsString(ud,e)?ud:this._userAgentContainsString("Trident",e)?sd:this._userAgentContainsString(ld,e)?ld:this._userAgentContainsString(cd,e)?cd:this._userAgentContainsString(pd,e)?pd:"Unknown"},e.prototype._userAgentContainsString=function(e,t){return t.indexOf(e)>-1},e.prototype._getBrowserVersion=function(e,t){return t===sd?this._getIeVersion(e):this._getOtherVersion(t,e)},e.prototype._getIeVersion=function(e){var t=e.match(new RegExp(sd+" ([\\d,.]+)"));if(t)return t[1];var n=e.match(new RegExp("rv:([\\d,.]+)"));return n?n[1]:void 0},e.prototype._getOtherVersion=function(e,t){e===cd&&(e="Version");var n=t.match(new RegExp(e+"/([\\d,.]+)"));return n?n[1]:"Unknown"},e.prototype._getScreenResolution=function(){var e={h:0,w:0};return window.screen&&(e.h=screen.height,e.w=screen.width),e},e}(),md="Windows",vd="Mac OS X",bd="Android",_d=/(windows|win32)/i,Sd=/ arm;/i,wd=/windows\sphone\s\d+\.\d+/i,Ed=/(macintosh|mac os x)/i,Td=/(ipad|iphone|ipod)(?=.*like mac os x)/i,xd=/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,kd=/android/i,Cd=/CrOS/i,Ad={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},Id=function(){function e(e){var t="undefined"!=typeof navigator?navigator.userAgent:"";if(e.userAgent&&(t=e.userAgent),t&&e.populateOperatingSystemInfo){var n=this._getOsName(t.toLowerCase());this.name=n,this.ver=this._getOsVersion(t,n)}}return e.prototype._getOsName=function(e){return e.match(wd)?"Windows Phone":e.match(Sd)?"Windows RT":e.match(_d)?md:e.match(Td)?"iOS":e.match(kd)?bd:e.match(xd)?"Linux":-1!==e.indexOf("x11")?"Unix":-1!==e.indexOf("blackberry")?"BlackBerry":-1!==e.indexOf("symbian")?"Symbian":-1!==e.indexOf("nokia")?"Nokia":e.match(Ed)?vd:e.match(Cd)?"Chrome OS":"Unknown"},e.prototype._getOsVersion=function(e,t){return t===md?this._getGenericOsVersion(e,"Windows NT"):t===bd?this._getGenericOsVersion(e,t):t===vd?this._getMacOsxVersion(e):"Unknown"},e.prototype._getGenericOsVersion=function(e,t){var n=e.match(new RegExp(t+" ([\\d,.]+)"));return n?Ad[n[1]]?Ad[n[1]]:n[1]:"Unknown"},e.prototype._getMacOsxVersion=function(e){var t=e.match(new RegExp(vd+" ([\\d,_,.]+)"));if(t){var n=t[1].replace(/_/g,".");if(n){var r=this._getDelimiter(n);return r?n.split(r)[0]:n}}return"Unknown"},e.prototype._getDelimiter=function(e){return e.indexOf(".")>-1?".":e.indexOf("_")>-1?"_":null},e}(),Od=function(){return function(e,t){!e.disableCookiesUsage&&i.cookieAvailable()&&(this.msfpc=i.getCookie("MSFPC"),this.anid=i.getCookie("ANON").slice(0,34)),this.serviceName=t.serviceName?t.serviceName:""}}(),Ld=function(){return function(){this.popSample=100}}(),Rd=function(){return function(){var e=(new Date).getTimezoneOffset(),t=e%60,n=(e-t)/60,r="+";n>0&&(r="-"),n=Math.abs(n),t=Math.abs(t),this.tz=r+(n<10?"0"+n:n.toString())+":"+(t<10?"0"+t:t.toString())}}(),Pd=function(){return function(){}}(),Dd=function(){function e(){}return e.id="id",e.ver="ver",e.appName="name",e.locale="locale",e.expId="expId",e.env="env",e}(),Md=function(){function e(){}return e.domain="domain",e.browser="browser",e.browserVer="browserVer",e.screenRes="screenRes",e.userConsent="userConsent",e}(),Nd=function(){function e(){}return e.locale="locale",e.localId="localId",e}(),Fd=function(){function e(){}return e.osName="name",e.ver="ver",e}(),jd=function(){function e(){}return e.ver="ver",e.seq="seq",e.installId="installId",e}(),Ud=function(){function e(){}return e.msfpc="msfpc",e.anid="anid",e.serviceName="serviceName",e}(),Bd=function(){function e(){}return e.popSample="popSample",e}(),Vd=function(){function e(){}return e.tz="tz",e}(),Gd=function(){function e(){}return e.sessionId="sesId",e}(),qd=function(){function e(){}return e.localId="localId",e.deviceClass="deviceClass",e.make="make",e.model="model",e}(),Hd=function(){function e(){}return e.UserExt="user",e.DeviceExt="device",e.TraceExt="trace",e.WebExt="web",e.AppExt="app",e.OSExt="os",e.SdkExt="sdk",e.IntWebExt="intweb",e.UtcExt="utc",e.LocExt="loc",e}(),Kd="MicrosoftApplicationsTelemetryDeviceId",zd=function(){function e(e){if(this._sequenceId=0,this._propertyStorage=e.propertyStorageOverride,this.seq=this._sequenceId,this.ver=i.FullVersionString,!e.disableCookiesUsage&&i.cookieAvailable()||this._propertyStorage){var t=this._getData(Kd);t||(t=kc.CoreUtils.newGuid()),this._saveData(Kd,t),this.installId=t}else i.deleteCookie(Kd)}return e.prototype.getSequenceId=function(){return++this._sequenceId},e.prototype._saveData=function(e,t){this._propertyStorage?this._propertyStorage.setProperty(e,t):i.setCookie(e,t,365)},e.prototype._getData=function(e){return this._propertyStorage?this._propertyStorage.getProperty(e)||"":i.getCookie(e)},e}();!function(e){e[e.LocalStorage=0]="LocalStorage",e[e.SessionStorage=1]="SessionStorage"}(nd||(nd={})),function(e){e[e.Default=0]="Default",e[e.Required=1]="Required",e[e.Array=2]="Array",e[e.Hidden=4]="Hidden"}(rd||(rd={}));var Qd=n(1),Wd=function(){function e(){}return e.requestContextHeader="Request-Context",e.requestContextTargetKey="appId",e.requestContextAppIdFormat="appId=cid-v1:",e.requestIdHeader="Request-Id",e.sdkContextHeader="Sdk-Context",e.sdkContextHeaderAppIdRequest="appId",e.requestContextHeaderLowerCase="request-context",e}(),Yd=function(){function e(){}return e.sanitizeKeyAndAddUniqueness=function(t,n,r){var i=n.length,o=e.sanitizeKey(t,n);if(o.length!==i){for(var a=0,s=o;void 0!==r[s];)a++,s=o.substring(0,e.MAX_NAME_LENGTH-3)+e.padNumber(a);o=s}return o},e.sanitizeKey=function(t,n){var r;return n&&(n=e.trim(n.toString())).length>e.MAX_NAME_LENGTH&&(r=n.substring(0,e.MAX_NAME_LENGTH),t.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.NameTooLong,"name is too long.  It has been truncated to "+e.MAX_NAME_LENGTH+" characters.",{name:n},!0)),r||n},e.sanitizeString=function(t,n,r){var i;return void 0===r&&(r=e.MAX_STRING_LENGTH),n&&(r=r||e.MAX_STRING_LENGTH,(n=e.trim(n)).toString().length>r&&(i=n.toString().substring(0,r),t.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.StringValueTooLong,"string value is too long. It has been truncated to "+r+" characters.",{value:n},!0))),i||n},e.sanitizeUrl=function(t,n){return e.sanitizeInput(t,n,e.MAX_URL_LENGTH,Qd._InternalMessageId.UrlTooLong)},e.sanitizeMessage=function(t,n){var r;return n&&n.length>e.MAX_MESSAGE_LENGTH&&(r=n.substring(0,e.MAX_MESSAGE_LENGTH),t.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.MessageTruncated,"message is too long, it has been truncated to "+e.MAX_MESSAGE_LENGTH+" characters.",{message:n},!0)),r||n},e.sanitizeException=function(t,n){var r;return n&&n.length>e.MAX_EXCEPTION_LENGTH&&(r=n.substring(0,e.MAX_EXCEPTION_LENGTH),t.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.ExceptionTruncated,"exception is too long, it has been truncated to "+e.MAX_EXCEPTION_LENGTH+" characters.",{exception:n},!0)),r||n},e.sanitizeProperties=function(t,n){if(n){var r={};for(var i in n){var o=n[i];if("object"==typeof o&&"undefined"!=typeof JSON)try{o=JSON.stringify(o)}catch(e){t.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:e},!0)}o=e.sanitizeString(t,o,e.MAX_PROPERTY_LENGTH),r[i=e.sanitizeKeyAndAddUniqueness(t,i,r)]=o}n=r}return n},e.sanitizeMeasurements=function(t,n){if(n){var r={};for(var i in n){var o=n[i];r[i=e.sanitizeKeyAndAddUniqueness(t,i,r)]=o}n=r}return n},e.sanitizeId=function(t,n){return n?e.sanitizeInput(t,n,e.MAX_ID_LENGTH,Qd._InternalMessageId.IdTooLong).toString():n},e.sanitizeInput=function(t,n,r,i){var o;return n&&(n=e.trim(n)).length>r&&(o=n.substring(0,r),t.throwInternal(Qd.LoggingSeverity.WARNING,i,"input is too long, it has been truncated to "+r+" characters.",{data:n},!0)),o||n},e.padNumber=function(e){var t="00"+e;return t.substr(t.length-3)},e.trim=function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")},e.MAX_NAME_LENGTH=150,e.MAX_ID_LENGTH=128,e.MAX_PROPERTY_LENGTH=8192,e.MAX_STRING_LENGTH=1024,e.MAX_URL_LENGTH=2048,e.MAX_MESSAGE_LENGTH=32768,e.MAX_EXCEPTION_LENGTH=32768,e}(),Xd=function(){function e(){}return e.disableStorage=function(){e._canUseLocalStorage=!1,e._canUseSessionStorage=!1},e._getLocalStorageObject=function(){return e.canUseLocalStorage()?e._getVerifiedStorageObject(nd.LocalStorage):null},e._getVerifiedStorageObject=function(e){var t,n,r=null;try{if("undefined"==typeof window)return null;n=new Date,(r=e===nd.LocalStorage?window.localStorage:window.sessionStorage).setItem(n,n),t=r.getItem(n)!=n,r.removeItem(n),t&&(r=null)}catch(e){r=null}return r},e.isInternalApplicationInsightsEndpoint=function(t){return-1!==e._internalEndpoints.indexOf(t.toLowerCase())},e.canUseLocalStorage=function(){return void 0===e._canUseLocalStorage&&(e._canUseLocalStorage=!!e._getVerifiedStorageObject(nd.LocalStorage)),e._canUseLocalStorage},e.getStorage=function(t,n){var r=e._getLocalStorageObject();if(null!==r)try{return r.getItem(n)}catch(n){e._canUseLocalStorage=!1,t.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return null},e.setStorage=function(t,n,r){var i=e._getLocalStorageObject();if(null!==i)try{return i.setItem(n,r),!0}catch(n){e._canUseLocalStorage=!1,t.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e.removeStorage=function(t,n){var r=e._getLocalStorageObject();if(null!==r)try{return r.removeItem(n),!0}catch(n){e._canUseLocalStorage=!1,t.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e._getSessionStorageObject=function(){return e.canUseSessionStorage()?e._getVerifiedStorageObject(nd.SessionStorage):null},e.canUseSessionStorage=function(){return void 0===e._canUseSessionStorage&&(e._canUseSessionStorage=!!e._getVerifiedStorageObject(nd.SessionStorage)),e._canUseSessionStorage},e.getSessionStorageKeys=function(){var t=[];if(e.canUseSessionStorage())for(var n in window.sessionStorage)t.push(n);return t},e.getSessionStorage=function(t,n){var r=e._getSessionStorageObject();if(null!==r)try{return r.getItem(n)}catch(n){e._canUseSessionStorage=!1,t.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return null},e.setSessionStorage=function(t,n,r){var i=e._getSessionStorageObject();if(null!==i)try{return i.setItem(n,r),!0}catch(n){e._canUseSessionStorage=!1,t.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e.removeSessionStorage=function(t,n){var r=e._getSessionStorageObject();if(null!==r)try{return r.removeItem(n),!0}catch(n){e._canUseSessionStorage=!1,t.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e.disableCookies=function(){Qd.CoreUtils.disableCookies()},e.canUseCookies=function(t){if(void 0===Qd.CoreUtils._canUseCookies){Qd.CoreUtils._canUseCookies=!1;try{Qd.CoreUtils._canUseCookies=void 0!==e.document.cookie}catch(n){t.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.CannotAccessCookie,"Cannot access document.cookie - "+e.getExceptionName(n),{exception:e.dump(n)})}}return Qd.CoreUtils._canUseCookies},e.setCookie=function(t,n,r,i){var o="",a="";i&&(o=";domain="+i),e.document.location&&"https:"===e.document.location.protocol&&(a=";secure"),e.canUseCookies(t)&&(e.document.cookie=n+"="+r+o+";path=/"+a)},e.stringToBoolOrDefault=function(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString().toLowerCase()},e.getCookie=function(t,n){if(e.canUseCookies(t)){var r="";if(n&&n.length)for(var i=n+"=",o=e.document.cookie.split(";"),a=0;a<o.length;a++){var s=o[a];if((s=e.trim(s))&&0===s.indexOf(i)){r=s.substring(i.length,o[a].length);break}}return r}},e.deleteCookie=function(t,n){e.canUseCookies(t)&&(e.document.cookie=n+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},e.trim=function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")},e.newId=function(){for(var e="",t=1073741824*Math.random();t>0;){e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t%64),t=Math.floor(t/64)}return e},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return"[object Error]"===Object.prototype.toString.call(e)},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.toISOStringForIE8=function(t){if(e.isDate(t)){if(Date.prototype.toISOString)return t.toISOString();var n=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},e.getIEVersion=function(e){void 0===e&&(e=null);var t=e?e.toLowerCase():navigator.userAgent.toLowerCase();return-1!=t.indexOf("msie")?parseInt(t.split("msie")[1]):null},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24,o=Math.floor(e/864e5);return t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r,(o>0?o+".":"")+(i=i.length<2?"0"+i:i)+":"+r+":"+n+"."+t},e.isCrossOriginError=function(e,t,n,r,i){return("Script error."===e||"Script error"===e)&&!i},e.dump=function(e){var t=Object.prototype.toString.call(e),n=JSON.stringify(e);return"[object Error]"===t&&(n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'"),t+n},e.getExceptionName=function(e){return"[object Error]"===Object.prototype.toString.call(e)?e.name:""},e.addEventHandler=function(e,t){if("undefined"==typeof window||!window||"string"!=typeof e||"function"!=typeof t)return!1;var n="on"+e;if(window.addEventListener)window.addEventListener(e,t,!1);else{if(!window.attachEvent)return!1;window.attachEvent(n,t)}return!0},e.IsBeaconApiSupported=function(){return"sendBeacon"in navigator&&navigator.sendBeacon},e.getExtension=function(e,t){for(var n=null,r=0;!n&&r<e.length;)e[r]&&e[r].identifier===t&&(n=e[r]),r++;return n},e.document="undefined"!=typeof document?document:{},e._canUseLocalStorage=void 0,e._canUseSessionStorage=void 0,e._internalEndpoints=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],e.NotSpecified="not_specified",e}(),Jd=function(){function e(){}return e.parseUrl=function(t){return e.htmlAnchorElement||(e.htmlAnchorElement=e.document.createElement?e.document.createElement("a"):{host:e.parseHost(t)}),e.htmlAnchorElement.href=t,e.htmlAnchorElement},e.getAbsoluteUrl=function(t){var n,r=e.parseUrl(t);return r&&(n=r.href),n},e.getPathName=function(t){var n,r=e.parseUrl(t);return r&&(n=r.pathname),n},e.getCompleteUrl=function(e,t){return e?e.toUpperCase()+" "+t:t},e.parseHost=function(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^\/:]+)/i);return null!=t&&t.length>2&&"string"==typeof t[2]&&t[2].length>0?t[2]:null},e.document="undefined"!=typeof document?document:{},e}(),$d=(function(){function e(){}e.canIncludeCorrelationHeader=function(e,t,n){if(e&&e.disableCorrelationHeaders)return!1;if(!t)return!1;var r=Jd.parseUrl(t).host.toLowerCase();if(!(e&&e.enableCorsCorrelation||r===n))return!1;var i,o=e&&e.correlationHeaderDomains;if(o&&(o.forEach(function(e){var t=new RegExp(e.toLowerCase().replace(/\./g,".").replace(/\*/g,".*"));i=i||t.test(r)}),!i))return!1;var a=e&&e.correlationHeaderExcludedDomains;if(!a||0==a.length)return!0;for(var s=0;s<a.length;s++){if(new RegExp(a[s].toLowerCase().replace(/\./g,".").replace(/\*/g,".*")).test(r))return!1}return!0},e.getCorrelationContext=function(t){if(t){var n=e.getCorrelationContextValue(t,Wd.requestContextTargetKey);if(n&&n!==e.correlationIdPrefix)return n}},e.getCorrelationContextValue=function(e,t){if(e)for(var n=e.split(","),r=0;r<n.length;++r){var i=n[r].split("=");if(2==i.length&&i[0]==t)return i[1]}},e.correlationIdPrefix="cid-v1:"}(),function(){function e(){}e.ParseDependencyPath=function(e,t,n,r){var i,o=r,a=r;if(t&&t.length>0){var s=Jd.parseUrl(t);if(i=s.host,!o)if(null!=s.pathname){var u=0===s.pathname.length?"/":s.pathname;"/"!==u.charAt(0)&&(u="/"+u),a=s.pathname,o=Yd.sanitizeString(e,n?n+" "+u:u)}else o=Yd.sanitizeString(e,t)}else i=r,o=r;return{target:i,name:o,data:a}}}(),function(){function e(){}return e.Now="undefined"==typeof window?function(){return(new Date).getTime()}:window.performance&&window.performance.now&&window.performance.timing?function(){return window.performance.now()+window.performance.timing.navigationStart}:function(){return(new Date).getTime()},e.GetDuration=function(e,t){var n=null;return 0===e||0===t||Qd.CoreUtils.isNullOrUndefined(e)||Qd.CoreUtils.isNullOrUndefined(t)||(n=t-e),n},e}()),Zd=function(){return function(){}}(),ef=function(e){function t(n,r){var i=t.getDefaultConfig(n);return e.call(this,i,r)||this}return a(t,e),t.getDefaultConfig=function(e){return{sessionRenewalMs:e.sessionRenewalMs&&function(){return e.sessionRenewalMs},sessionExpirationMs:e.sessionExpirationMs&&function(){return e.sessionExpirationMs},cookieDomain:e.cookieDomain&&function(){return e.cookieDomain},namePrefix:e.namePrefix&&function(){return e.namePrefix}}},t}(function(){function e(t,n){var r=this;Qd.CoreUtils.isNullOrUndefined(n)?this._logger=new Qd.DiagnosticLogger:this._logger=n,t||(t={}),"function"!=typeof t.sessionExpirationMs&&(t.sessionExpirationMs=function(){return e.acquisitionSpan}),"function"!=typeof t.sessionRenewalMs&&(t.sessionRenewalMs=function(){return e.renewalSpan}),this.config=t,this._storageNamePrefix=function(){return r.config.namePrefix&&r.config.namePrefix()?e.cookieNameConst+r.config.namePrefix():e.cookieNameConst},this.automaticSession=new Zd}return e.prototype.update=function(){this.automaticSession.id||this.initializeAutomaticSession();var t=$d.Now(),n=t-this.automaticSession.acquisitionDate>this.config.sessionExpirationMs(),r=t-this.automaticSession.renewalDate>this.config.sessionRenewalMs();n||r?this.renew():(!this.cookieUpdatedTimestamp||t-this.cookieUpdatedTimestamp>e.cookieUpdateInterval)&&(this.automaticSession.renewalDate=t,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate))},e.prototype.backup=function(){this.setStorage(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate)},e.prototype.initializeAutomaticSession=function(){var e=Xd.getCookie(this._logger,this._storageNamePrefix());if(e&&"function"==typeof e.split)this.initializeAutomaticSessionWithData(e);else{var t=Xd.getStorage(this._logger,this._storageNamePrefix());t&&this.initializeAutomaticSessionWithData(t)}this.automaticSession.id||this.renew()},e.prototype.initializeAutomaticSessionWithData=function(e){var t=e.split("|");t.length>0&&(this.automaticSession.id=t[0]);try{if(t.length>1){var n=+t[1];this.automaticSession.acquisitionDate=+new Date(n),this.automaticSession.acquisitionDate=this.automaticSession.acquisitionDate>0?this.automaticSession.acquisitionDate:0}if(t.length>2){var r=+t[2];this.automaticSession.renewalDate=+new Date(r),this.automaticSession.renewalDate=this.automaticSession.renewalDate>0?this.automaticSession.renewalDate:0}}catch(e){this._logger.throwInternal(Qd.LoggingSeverity.CRITICAL,Qd._InternalMessageId.ErrorParsingAISessionCookie,"Error parsing ai_session cookie, session will be reset: "+Xd.getExceptionName(e),{exception:Xd.dump(e)})}0==this.automaticSession.renewalDate&&this._logger.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.SessionRenewalDateIsZero,"AI session renewal date is 0, session will be reset.")},e.prototype.renew=function(){var e=$d.Now();this.automaticSession.id=Xd.newId(),this.automaticSession.acquisitionDate=e,this.automaticSession.renewalDate=e,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate),Xd.canUseLocalStorage()||this._logger.throwInternal(Qd.LoggingSeverity.WARNING,Qd._InternalMessageId.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")},e.prototype.setCookie=function(e,t,n){var r=t+this.config.sessionExpirationMs(),i=n+this.config.sessionRenewalMs(),o=new Date,a=[e,t,n];r<i?o.setTime(r):o.setTime(i);var s=this.config.cookieDomain?this.config.cookieDomain():null;Xd.setCookie(this._logger,this._storageNamePrefix(),a.join("|")+";expires="+o.toUTCString(),s),this.cookieUpdatedTimestamp=$d.Now()},e.prototype.setStorage=function(e,t,n){Xd.setStorage(this._logger,this._storageNamePrefix(),[e,t,n].join("|"))},e.acquisitionSpan=864e5,e.renewalSpan=18e5,e.cookieUpdateInterval=6e4,e.cookieNameConst="ai_session",e}()),tf=function(){function e(e,t,n){this.app=new od(t),this.user=new ad(e),this.os=new Id(t),this.web=new yd(t),this.sdk=new zd(e),this.intWeb=new Od(e,t),this.utc=new Ld,this.loc=new Rd,this.device=new Pd,this.sessionManager=new ef(t,n&&n.logger),this.session=new Zd}return e.prototype.applyApplicationContext=function(e){"string"==typeof this.app.id&&(e.ext[Hd.AppExt][Dd.id]=this.app.id),"string"==typeof this.app.ver&&(e.ext[Hd.AppExt][Dd.ver]=this.app.ver),"string"==typeof this.app.name&&(e.ext[Hd.AppExt][Dd.appName]=this.app.name),"string"==typeof this.app.locale&&(e.ext[Hd.AppExt][Dd.locale]=this.app.locale),"string"==typeof this.app.expId&&(e.ext[Hd.AppExt][Dd.expId]=this.app.expId),"string"==typeof this.app.env&&(e.ext[Hd.AppExt][Dd.env]=this.app.env)},e.prototype.applyUserContext=function(e){"string"==typeof this.user.localId&&(e.ext[Hd.UserExt][Nd.localId]=this.user.localId),"string"==typeof this.user.locale&&(e.ext[Hd.UserExt][Nd.locale]=this.user.locale)},e.prototype.applyWebContext=function(e){"string"==typeof this.web.domain&&(e.ext[Hd.WebExt][Md.domain]=this.web.domain),"string"==typeof this.web.browser&&(e.ext[Hd.WebExt][Md.browser]=this.web.browser),"string"==typeof this.web.browserVer&&(e.ext[Hd.WebExt][Md.browserVer]=this.web.browserVer),"string"==typeof this.web.screenRes&&(e.ext[Hd.WebExt][Md.screenRes]=this.web.screenRes),"boolean"==typeof this.web.userConsent&&(e.ext[Hd.WebExt][Md.userConsent]=this.web.userConsent)},e.prototype.applyOsContext=function(e){"string"==typeof this.os.name&&(e.ext[Hd.OSExt][Fd.osName]=this.os.name),"string"==typeof this.os.ver&&(e.ext[Hd.OSExt][Fd.ver]=this.os.ver)},e.prototype.applySdkContext=function(e){e.ext[Hd.SdkExt][jd.seq]=this.sdk.getSequenceId(),e.ext[Hd.SdkExt][jd.ver]=this.sdk.ver,"string"==typeof this.sdk.installId&&(e.ext[Hd.SdkExt][jd.installId]=this.sdk.installId)},e.prototype.applyIntWebContext=function(e){"string"==typeof this.intWeb.msfpc&&(e.ext[Hd.IntWebExt][Ud.msfpc]=this.intWeb.msfpc),"string"==typeof this.intWeb.anid&&(e.ext[Hd.IntWebExt][Ud.anid]=this.intWeb.anid),"string"==typeof this.intWeb.serviceName&&(e.ext[Hd.IntWebExt][Ud.serviceName]=this.intWeb.serviceName)},e.prototype.applyUtcContext=function(e){e.ext[Hd.UtcExt][Bd.popSample]=this.utc.popSample},e.prototype.applyLocContext=function(e){e.ext[Hd.LocExt][Vd.tz]=this.loc.tz},e.prototype.applySessionContext=function(e){this.session&&"string"!=typeof this.session.id&&this.sessionManager.update();var t=this.sessionManager.automaticSession;t&&t.id&&"string"==typeof t.id&&(e.ext[Hd.AppExt][Gd.sessionId]=t.id),this.session&&this.session.id&&"string"==typeof this.session.id&&(e.ext[Hd.AppExt][Gd.sessionId]=this.session.id)},e.prototype.applyDeviceContext=function(e){"string"==typeof this.device.localId&&(e.ext[Hd.DeviceExt][qd.localId]=this.device.localId),"string"==typeof this.device.make&&(e.ext[Hd.DeviceExt][qd.make]=this.device.make),"string"==typeof this.device.model&&(e.ext[Hd.DeviceExt][qd.model]=this.device.model),"string"==typeof this.device.deviceClass&&(e.ext[Hd.DeviceExt][qd.deviceClass]=this.device.deviceClass)},e}(),nf=function(){function e(){this.identifier="SystemPropertiesCollector",this.priority=3,this._properties={}}return e.prototype.initialize=function(e,t,n){e.extensionConfig=e.extensionConfig||[],this._config=e.extensionConfig[this.identifier]||{},e.extensionConfig[this.identifier]=this._config,this.context=new tf(e,this._config,t)},e.prototype.processTelemetry=function(e){e.ext=e.ext?e.ext:{},e.data=e.data?e.data:{},e.ext[Hd.AppExt]=e.ext[Hd.AppExt]||{},e.ext[Hd.UserExt]=e.ext[Hd.UserExt]||{},e.ext[Hd.WebExt]=e.ext[Hd.WebExt]||{},e.ext[Hd.OSExt]=e.ext[Hd.OSExt]||{},e.ext[Hd.SdkExt]=e.ext[Hd.SdkExt]||{},e.ext[Hd.IntWebExt]=e.ext[Hd.IntWebExt]||{},e.ext[Hd.UtcExt]=e.ext[Hd.UtcExt]||{},e.ext[Hd.LocExt]=e.ext[Hd.LocExt]||{},e.ext[Hd.DeviceExt]=e.ext[Hd.DeviceExt]||{},this.context.applyApplicationContext(e),this.context.applyUserContext(e),this.context.applyWebContext(e),this.context.applyOsContext(e),this.context.applySdkContext(e),this.context.applyIntWebContext(e),this.context.applyUtcContext(e),this.context.applyLocContext(e),this.context.applySessionContext(e),this.context.applyDeviceContext(e),this._addPropertiesIfAbsent(this._properties,e.data),this._nextPlugin&&this._nextPlugin.processTelemetry(e)},e.prototype.setNextPlugin=function(e){this._nextPlugin=e},e.prototype.getPropertiesContext=function(){return this.context},e.prototype.setProperty=function(e,t){this._properties[e]=t},e.prototype._addPropertiesIfAbsent=function(e,t){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]||(t[n]=e[n]))},e}(),rf="REAL_TIME",of=function(){function e(){}return e.getPayloadBlob=function(e,t){var n="",r={};for(var i in e)if(e.hasOwnProperty(i))for(var o=0;o<e[i].length;++o){n&&(n+="\n");var a=n.length;if((n+=this.getEventBlob(e[i][o])).length-a>2e6&&(delete e[i][o],n=n.substring(0,a)),n.length>3984588){r={};var s=e[i];e[i]=s.splice(0,o),r[i]=s;break}}return{payloadBlob:n,remainingRequest:r}},e.getEventBlob=function(e){var t={};if(t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+i.getTenantId(e.iKey),e.ext)for(var n in t.ext={},e.ext)if(e.ext.hasOwnProperty(n))for(var r in t.ext[n]={},e.ext[n])e.ext[n].hasOwnProperty(r)&&e.ext[n][r]&&(t.ext[n][r]=i.sanitizeProperty(r,e.ext[n][r]).value);if(t.data={},t.data.baseData={},t.data.baseType=e.baseType,e.baseData)for(var n in e.baseData)if(e.baseData.hasOwnProperty(n)){var o=i.sanitizeProperty(n,e.baseData[n]);this._addJSONProperty(t.data.baseData,n,o),this._addJSONPropertyMetaData(t.ext,"baseData."+n,o)}if(e.data)for(var n in e.data)if(e.data.hasOwnProperty(n)){o=i.sanitizeProperty(n,e.data[n]);this._addJSONProperty(t.data,n,o),this._addJSONPropertyMetaData(t.ext,n,o)}return JSON.stringify(t)},e._addJSONProperty=function(e,t,n){if(n){for(var r=e,i=t.split("."),o=0;o<i.length-1;++o)r[i[o]]||(r[i[o]]={}),r=r[i[o]];r[i[i.length-1]]=n.value}},e._addJSONPropertyMetaData=function(e,t,n){if(n){var r=i.getCommonSchemaMetaData(n.value,n.kind,n.propertyType);if(r>-1){var o=e;o.metadata||(o.metadata={f:{}}),o=o.metadata.f;for(var a=t.split("."),s=0;s<a.length-1;++s)o[a[s]]||(o[a[s]]={f:{}}),o=o[a[s]].f;i.isArray(n.value)?o[a[a.length-1]]={a:{t:r}}:o[a[a.length-1]]={t:r}}}},e}(),af=function(){function e(){}return e.shouldRetryForStatus=function(e){return!(e>=300&&e<500&&408!==e&&429!==e||501===e||505===e)},e.getMillisToBackoffForRetry=function(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*n,Math.min(t,6e5)},e}(),sf=function(){function e(){this._killedTokenDictionary={}}return e.prototype.setKillSwitchTenants=function(e,t){if(e&&t)try{var n=e.split(",");if("this-request-only"===t)return n;for(var r=1e3*parseInt(t,10),i=0;i<n.length;++i)this._killedTokenDictionary[n[i]]=Date.now()+r}catch(e){return[]}return[]},e.prototype.isTenantKilled=function(e){return void 0!==this._killedTokenDictionary[e]&&this._killedTokenDictionary[e]>Date.now()||(delete this._killedTokenDictionary[e],!1)},e}(),uf=function(){function e(){this._allowRequestSending=!0,this._shouldAddClockSkewHeaders=!0,this._isFirstRequest=!0,this._clockSkewHeaderValue="use-collector-delta",this._clockSkewSet=!1}return e.prototype.allowRequestSending=function(){return this._isFirstRequest&&!this._clockSkewSet?(this._isFirstRequest=!1,this._allowRequestSending=!1,!0):this._allowRequestSending},e.prototype.shouldAddClockSkewHeaders=function(){return this._shouldAddClockSkewHeaders},e.prototype.getClockSkewHeaderValue=function(){return this._clockSkewHeaderValue},e.prototype.setClockSkew=function(e){this._clockSkewSet||(e?this._clockSkewHeaderValue=e:this._shouldAddClockSkewHeaders=!1,this._clockSkewSet=!0,this._allowRequestSending=!0)},e}(),lf=function(){function e(e){this._requestQueue=e,this._urlString="?cors=true&content-type=application/x-json-stream&client-id=NO_AUTH&client-version="+i.FullVersionString,this._killSwitch=new sf,this._paused=!1,this._clockSkewManager=new uf,this._useBeacons=!1,this._activeConnections=0,this._customHttpInterface=!0,this._queryStringParameters=[]}return e.prototype.initialize=function(e,t,n,r,o){var a=this;this._urlString=e+this._urlString,this._getWParam=t,this._postManager=n,this._httpInterface=r,this._notificationManager=o,this._httpInterface||(this._customHttpInterface=!1,this._useBeacons=!i.isReactNative(),this._httpInterface={sendPOST:function(e,t,n,r){if(a._useXDomainRequest()){var o=new XDomainRequest;o.open("POST",e),o.onload=function(){n(200,{})},o.onerror=function(){n(400,{})},o.ontimeout=function(){n(500,{})},o.send(t)}else if(i.isReactNative())fetch(e,(u={body:t,method:"POST",credentials:"include"},u.Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,u)).then(function(e){var t={};e.headers&&e.headers.forEach(function(e,n){t[n]=e}),n(e.status,t)}).catch(function(e){n(0,{})});else if("undefined"!=typeof XMLHttpRequest){var s=new XMLHttpRequest;s.Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,s.withCredentials=!0,s.open("POST",e,!r),s.onload=function(){n(s.status,a._convertAllHeadersToMap(s.getAllResponseHeaders()))},s.onerror=function(){n(s.status,a._convertAllHeadersToMap(s.getAllResponseHeaders()))},s.ontimeout=function(){n(s.status,a._convertAllHeadersToMap(s.getAllResponseHeaders()))},s.send(t)}var u}})},e.prototype.addQueryStringParameter=function(e,t){for(var n=0;n<this._queryStringParameters.length;n++)if(this._queryStringParameters[n].name===e)return void(this._queryStringParameters[n].value=t);this._queryStringParameters.push({name:e,value:t})},e.prototype.hasIdleConnection=function(){return this._activeConnections<2},e.prototype.sendQueuedRequests=function(){for(;this.hasIdleConnection()&&!this._paused&&this._requestQueue.length>0&&this._clockSkewManager.allowRequestSending();)this._activeConnections++,this._sendRequest(this._requestQueue.shift(),0,!1);this.hasIdleConnection()&&this._postManager._scheduleTimer()},e.prototype.isCompletelyIdle=function(){return 0===this._activeConnections},e.prototype.teardown=function(){for(;this._requestQueue.length>0;)this._sendRequest(this._requestQueue.shift(),0,!0)},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1,this.sendQueuedRequests()},e.prototype.removeQueuedRequests=function(){this._requestQueue.length=0},e.prototype.sendSynchronousRequest=function(e){this._activeConnections++,this._sendRequest(e,0,!1,!0)},e.prototype._sendRequest=function(e,t,n,r){var o=this;if(void 0===r&&(r=!1),e){if(this._paused)return this._activeConnections--,void this._postManager._addBackRequest(e);var a=0,s="";for(var u in e)e.hasOwnProperty(u)&&(this._killSwitch.isTenantKilled(u)?(this._notificationManager&&this._notificationManager.eventsDiscarded(e[u],kc.EventsDiscardedReason.KillSwitch),delete e[u]):(s.length>0&&(s+=","),s+=u,a++));if(a>0){var l=of.getPayloadBlob(e,a);l.remainingRequest&&this._requestQueue.push(l.remainingRequest);var c=this._urlString+"&apikey="+s+"&upload-time="+Date.now().toString();this._clockSkewManager.shouldAddClockSkewHeaders()&&(c=c+"&time-delta-to-apply-millis="+this._clockSkewManager.getClockSkewHeaderValue()),this._getWParam&&(c=c+"&w="+this._getWParam());for(var d=0;d<this._queryStringParameters.length;d++)c=c+"&"+this._queryStringParameters[d].name+"="+this._queryStringParameters[d].value;for(var u in e)if(e.hasOwnProperty(u))for(d=0;d<e[u].length;++d)e[u][d].sendAttempt>0?e[u][d].sendAttempt++:e[u][d].sendAttempt=1;if(!this._customHttpInterface&&this._useBeacons&&i.isBeaconsSupported()&&n&&navigator.sendBeacon(c,l.payloadBlob))return;this._httpInterface&&this._httpInterface.sendPOST(c,l.payloadBlob,function(i,u){o._retryRequestIfNeeded(i,u,e,a,s,t,n,r)},n||r)}else n||this._handleRequestFinished(null,{},n,r)}},e.prototype._retryRequestIfNeeded=function(e,t,n,r,i,o,a,s){var u=this,l=!0;if(void 0!==e){if(t){var c=this._killSwitch.setKillSwitchTenants(t["kill-tokens"],t["kill-duration-seconds"]);this._clockSkewManager.setClockSkew(t["time-delta-millis"]);for(var d=0;d<c.length;++d)this._notificationManager&&this._notificationManager.eventsDiscarded(n[c[d]],kc.EventsDiscardedReason.KillSwitch),delete n[c[d]],r--}else this._clockSkewManager.setClockSkew("");if(200===e)return void this._handleRequestFinished(!0,n,a,s);(!af.shouldRetryForStatus(e)||r<=0)&&(l=!1)}l?s?(this._activeConnections--,this._postManager._addBackRequest(n)):o<1?setTimeout(function(){return u._sendRequest(n,o+1,!1)},af.getMillisToBackoffForRetry(o)):(this._activeConnections--,this._postManager._backOffTransmission(),this._postManager._addBackRequest(n)):this._handleRequestFinished(!1,n,a,s)},e.prototype._handleRequestFinished=function(e,t,n,r){if(e&&this._postManager._clearBackOff(),this._notificationManager)for(var i in t)t.hasOwnProperty(i)&&(e?this._notificationManager.eventsSent(t[i]):this._notificationManager.eventsDiscarded(t[i],kc.EventsDiscardedReason.NonRetryableStatus));this._activeConnections--,r||n||this.sendQueuedRequests()},e.prototype._convertAllHeadersToMap=function(e){var t={};if(e)for(var n=e.split("\n"),r=0;r<n.length;++r){var i=n[r].split(": ");t[i[0]]=i[1]}return t},e.prototype._useXDomainRequest=function(){if("undefined"!=typeof XMLHttpRequest){var e=new XMLHttpRequest;return Boolean(void 0===e.withCredentials&&"undefined"!=typeof XDomainRequest)}},e}(),cf=function(){function e(e,t){this._outboundQueue=e,this._maxNumberOfEvents=t,this._currentBatch={},this._currentNumEventsInBatch=0}return e.prototype.addEventToBatch=function(e){var t=e.iKey;if(t){if(e.sync){var n={};return n[t]=[e],n}this._currentNumEventsInBatch>=this._maxNumberOfEvents&&this.flushBatch(),void 0===this._currentBatch[t]&&(this._currentBatch[t]=[]),this._currentBatch[t].push(e),this._currentNumEventsInBatch++}return null},e.prototype.flushBatch=function(){this._currentNumEventsInBatch>0&&(this._outboundQueue.push(this._currentBatch),this._currentBatch={},this._currentNumEventsInBatch=0)},e.prototype.hasBatch=function(){return this._currentNumEventsInBatch>0},e}(),df=500,ff=function(){function e(){this.identifier="PostChannel",this.priority=1011,this._isTeardownCalled=!1,this._isCurrentlyFlushingNow=!1,this._flushQueue=[],this._databaseAdded=!1,this._paused=!1,this._queueSize=0,this._queueSizeLimit=1e4,this._profiles={},this._currentProfile=rf,this._timeout=null,this._currentBackoffCount=0,this._timerCount=0,this._flushCallback=-1,this._flushOutboundQueue=[],this._outboundQueue=[],this._inboundQueues={},this._inboundQueues[Cc.RealTime]=[],this._inboundQueues[Cc.CostDeferred]=[],this._inboundQueues[Cc.Normal]=[],this._initializeProfiles(),this._addEmptyQueues(),this._batcher=new cf(this._outboundQueue,df),this._syncFlushBatcher=new cf(this._flushOutboundQueue,df),this._httpManager=new lf(this._outboundQueue)}return e.prototype.initialize=function(e,t,n){var r=this;this._core=t,e.extensionConfig=e.extensionConfig||[],e.extensionConfig[this.identifier]=e.extensionConfig[this.identifier]||{},this._config=e.extensionConfig[this.identifier],this._config.eventsLimitInMem>0&&(this._queueSizeLimit=this._config.eventsLimitInMem),this._config.httpXHROverride&&this._config.httpXHROverride.sendPOST&&(this._xhrOverride=this._config.httpXHROverride);var i=this._config.overrideEndpointUrl?this._config.overrideEndpointUrl:e.endpointUrl;this._notificationManager=e.extensionConfig.NotificationManager,this._httpManager.initialize(i,this._core.getWParam,this,this._xhrOverride,this._notificationManager);for(var o=0;o<n.length;++o)n[o].identifier&&"LocalStorage"===n[o].identifier&&(this._databaseAdded=!0);"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("beforeunload",function(){r.releaseAllQueuesUsingBeacons()}),window.addEventListener("unload",function(){r.releaseAllQueuesUsingBeacons()})):window.attachEvent&&(window.attachEvent("onbeforeunload",function(){r.releaseAllQueuesUsingBeacons()}),window.attachEvent("onunload",function(){r.releaseAllQueuesUsingBeacons()})))},e.prototype.processTelemetry=function(e){e.ext&&delete e.ext.trace;var t=e;if(!this._config.disableTelemetry&&!this._isTeardownCalled){if(this._config.overrideInstrumentationKey&&(t.iKey=this._config.overrideInstrumentationKey),t.sendAttempt||(t.sendAttempt=0),t.latency||(t.latency=Cc.Normal),t.sync)if(this._currentBackoffCount>0||this._paused)t.latency=Cc.RealTime,t.sync=!1;else if(this._httpManager)return void this._httpManager.sendSynchronousRequest(this._batcher.addEventToBatch(t));this._queueSize<this._queueSizeLimit?this._addEventToProperQueue(t):this._dropEventWithLatencyOrLess(t.latency)?this._addEventToProperQueue(t):this._notificationManager&&this._notificationManager.eventsDiscarded([t],kc.EventsDiscardedReason.QueueFull),this._scheduleTimer()}this._nextPlugin&&this._nextPlugin.processTelemetry(t)},e.prototype.teardown=function(){this.releaseAllQueuesUsingBeacons(),this._isTeardownCalled=!0},e.prototype.pause=function(){this._clearTimeout(),this._paused=!0,this._httpManager.pause(),this._databaseAdded&&(this._queueSize-=this._inboundQueues[Cc.RealTime][0].length+this._inboundQueues[Cc.CostDeferred][0].length+this._inboundQueues[Cc.Normal][0].length,this._inboundQueues[Cc.RealTime][0]=[],this._inboundQueues[Cc.CostDeferred][0]=[],this._inboundQueues[Cc.Normal][0]=[],this._httpManager.removeQueuedRequests())},e.prototype.resume=function(){this._paused=!1,this._httpManager.resume(),this._scheduleTimer()},e.prototype.setNextPlugin=function(e){this._nextPlugin=e},e.prototype._loadTransmitProfiles=function(e){for(var t in this._resetTransmitProfiles(),e)if(e.hasOwnProperty(t)){if(e[t].length<2)continue;if(e[t].splice(0,e[t].length-2),e[t][1]<0&&(e[t][0]=-1),e[t][1]>0&&e[t][0]>0){var n=e[t][0]/e[t][1];e[t][0]=Math.ceil(n)*e[t][1]}this._profiles[t]=e[t]}},e.prototype.flush=function(e,t){var n=this;if(void 0===e&&(e=!0),!this._paused)if(this._clearTimeout(),e)this._addEmptyQueues(),this._isCurrentlyFlushingNow?this._flushQueue.push(t):(this._isCurrentlyFlushingNow=!0,setTimeout(function(){return n._flushImpl(t)},0));else{this._batchEvents(Cc.Normal,this._syncFlushBatcher);for(var r=0;r<this._flushOutboundQueue.length;r++)this._httpManager.sendSynchronousRequest(this._flushOutboundQueue[r]);null!=t&&t()}},e.prototype.setMsaAuthTicket=function(e){this._httpManager.addQueryStringParameter("AuthMsaDeviceTicket",e)},e.prototype._setTransmitProfile=function(e){this._currentProfile!==e&&void 0!==this._profiles[e]&&(this._clearTimeout(),this._currentProfile=e,this._scheduleTimer())},e.prototype._sendEventsForLatencyAndAbove=function(e){this._batchEvents(e),this._httpManager.sendQueuedRequests()},e.prototype._hasEvents=function(){return(this._inboundQueues[Cc.RealTime][0].length>0||this._inboundQueues[Cc.CostDeferred][0].length>0||this._inboundQueues[Cc.Normal][0].length>0||this._batcher.hasBatch())&&this._httpManager.hasIdleConnection()},e.prototype._addBackRequest=function(e){if(!this._paused||!this._databaseAdded)for(var t in e)if(e.hasOwnProperty(t)){1===e[t].length&&e[t][0].sync&&(e[t][0].latency=Cc.RealTime,e[t][0].sync=!1);for(var n=0;n<e[t].length;++n)e[t][n].sendAttempt<6?this.processTelemetry(e[t][n]):this._notificationManager&&this._notificationManager.eventsDiscarded([e[t][n]],kc.EventsDiscardedReason.NonRetryableStatus)}},e.prototype._scheduleTimer=function(){var e=this,t=this._profiles[this._currentProfile][1];if(!this._timeout&&t>=0&&!this._paused)if(this._hasEvents()){0===t&&this._currentBackoffCount>0&&(t=1);var n=1e3;this._currentBackoffCount>0&&(n=af.getMillisToBackoffForRetry(this._currentBackoffCount-1)),this._timeout=setTimeout(function(){return e._batchAndSendEvents()},t*n)}else this._timerCount=0},e.prototype._backOffTransmission=function(){this._currentBackoffCount<4&&(this._currentBackoffCount++,this._clearTimeout(),this._scheduleTimer())},e.prototype._clearBackOff=function(){this._currentBackoffCount>0&&(this._currentBackoffCount=0,this._clearTimeout(),this._scheduleTimer())},e.prototype._clearTimeout=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null,this._timerCount=0)},e.prototype._batchAndSendEvents=function(){var e=Cc.RealTime;this._timerCount++,2===this._timerCount&&(e=Cc.Normal,this._timerCount=0),this._sendEventsForLatencyAndAbove(e),this._timeout=null,this._scheduleTimer()},e.prototype.releaseAllQueuesUsingBeacons=function(){this._clearTimeout(),this._flushCallback>0&&clearTimeout(this._flushCallback),this._paused||this._databaseAdded||(this._mergeQueues(),this._batchEvents(Cc.Normal),this._httpManager.teardown())},e.prototype._removeFirstQueues=function(){this._inboundQueues[Cc.RealTime].shift(),this._inboundQueues[Cc.CostDeferred].shift(),this._inboundQueues[Cc.Normal].shift()},e.prototype._addEmptyQueues=function(){this._inboundQueues[Cc.RealTime].push([]),this._inboundQueues[Cc.CostDeferred].push([]),this._inboundQueues[Cc.Normal].push([])},e.prototype._mergeQueues=function(){for(var e=Cc.Normal;e<=Cc.RealTime;e++)for(var t=1;t<this._inboundQueues[e].length;t++)for(;this._inboundQueues[e][t].length>0;)this._inboundQueues[e][0].push(this._inboundQueues[e][t].pop())},e.prototype._addEventToProperQueue=function(e){this._paused&&this._databaseAdded||(this._queueSize++,this._inboundQueues[e.latency][this._inboundQueues[e.latency].length-1].push(e))},e.prototype._dropEventWithLatencyOrLess=function(e){for(var t=Cc.Normal;t<=e;){if(this._inboundQueues[t][this._inboundQueues[t].length-1].length>0){var n=this._inboundQueues[t][this._inboundQueues[t].length-1].splice(0,20);return this._notificationManager&&this._notificationManager.eventsDiscarded(n,kc.EventsDiscardedReason.QueueFull),!0}t++}return!1},e.prototype._batchEvents=function(e,t){void 0===t&&(t=this._batcher);for(var n=Cc.RealTime;n>=e;){for(;this._inboundQueues[n][0].length>0;){var r=this._inboundQueues[n][0].pop();this._queueSize--,t.addEventToBatch(r)}n--}t.flushBatch()},e.prototype._flushImpl=function(e){var t=this;this._hasEvents()&&this._sendEventsForLatencyAndAbove(Cc.Normal),this._checkOutboundQueueEmptyAndSent(function(){t._removeFirstQueues(),null!=e&&e(),t._flushQueue.length>0?t._flushCallback=setTimeout(function(){return t._flushImpl(t._flushQueue.shift())},0):(t._isCurrentlyFlushingNow=!1,t._hasEvents()&&t._scheduleTimer())})},e.prototype._checkOutboundQueueEmptyAndSent=function(e){var t=this;this._httpManager.isCompletelyIdle()?e():this._flushCallback=setTimeout(function(){return t._checkOutboundQueueEmptyAndSent(e)},250)},e.prototype._resetTransmitProfiles=function(){this._clearTimeout(),this._initializeProfiles(),this._currentProfile=rf,this._scheduleTimer()},e.prototype._initializeProfiles=function(){this._profiles={},this._profiles[rf]=[2,1],this._profiles.NEAR_REAL_TIME=[6,3],this._profiles.BEST_EFFORT=[18,9]},e}(),pf=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.initialize=function(t,n){this._postChannel=new ff,this._propertyManager=new nf;var r=[this._propertyManager,this._postChannel];n&&(r=r.concat(n)),t.extensionConfig=t.extensionConfig||[],t.extensionConfig[this._postChannel.identifier]=t?t.propertyConfiguration:{},e.prototype.initialize.call(this,t,r)},t.prototype.getPropertyManager=function(){return this._propertyManager},t.prototype.getPostChannel=function(){return this._postChannel},t}(id));pf.initialize({instrumentationKey:"c03ed6d368484b098de1d58fc82d7d4d-958a4b38-fb56-4097-b57d-e4fb127d5787-7564"});var hf=function(){return(hf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},gf=function(e){void 0===e&&(e=!1);return{log:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(n){e&&t&&console.log("[Spectre UI]",n)})},warn:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(n){e&&t&&console.warn("[Spectre UI]",n)})},error:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(n){e&&t&&console.error("[Spectre UI]",n)})}}},yf=function(){function e(e){this.logger=gf(),this.storage=e}return e.prototype.set=function(e,t){try{return this.storage.setItem(e,""+t),!0}catch(e){this.logger.error("Web storage set exception",e)}return!1},e.prototype.get=function(e){try{return this.storage.getItem(e)}catch(e){this.logger.error("Web storage get exception",e)}},e.prototype.getNumber=function(e){var t=this.get(e);if(null!=t)return+t},e.prototype.getBoolean=function(e){var t=this.get(e);return"true"===t||"false"!==t&&void 0},e.prototype.getObject=function(e){var t=this.get(e);if(null!=t)return JSON.parse(t)},e}(),mf=function(e){var t=e.timeout,n=e.children,r=e.forceRender,i=Cs.useState(!1),o=i[0],a=i[1];return Cs.useEffect(function(){var e=setTimeout(function(){return a(!0)},t);return function(){return clearTimeout(e)}},[]),Cs.createElement(Cs.Fragment,null,(o||r)&&n)},vf=function(e,t,n){void 0===n&&(n=!1);var r,i=n?-1:performance.now();return{handler:function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];clearTimeout(r);var a=performance.now();a-i>t?(i=a,e.apply(void 0,n)):r=setTimeout(function(){i=performance.now(),e.apply(void 0,n)},t)},cancel:function(){return clearTimeout(r)}}},bf=n(25),_f=function(e){var t=Cs.useState(!1),n=t[0],r=t[1];return Cs.useEffect(function(){r(!0)},[]),Cs.createElement("div",{className:xl(bf.loadingIndicator,bf[e.position],n&&e.visible?bf.visible:"")},Cs.createElement("div",{className:bf.loadingIndicatorChevron}))},Sf={arSA:"ar-SA",daDK:"da-DK",deDE:"de-DE",enGB:"en-GB",enUS:"en-US",esES:"es-ES",esMX:"es-MX",fiFI:"fi-FI",frFR:"fr-FR",heIL:"he-IL",itIT:"it-IT",jaJP:"ja-JP",koKR:"ko-KR",nbNO:"nb-NO",nlNL:"nl-NL",plPL:"pl-PL",ptBR:"pt-BR",ptPT:"pt-PT",ruRU:"ru-RU",svSE:"sv-SE",trTR:"tr-TR",zhCN:"zh-CN",zhTW:"zh-TW"},wf=n(80),Ef=Object(qu.combineReducers)({menuPresentationState:function(e,t){switch(void 0===e&&(e="hidden"),t.type){case Object(Gl.getType)(ql):return t.payload.presentationState;default:return e}}}),Tf=Object(Gl.createAction)("@player/SET_PLAYER_SESSION_GUID",function(e){return function(t){return e({playerSessionGuid:t})}}),xf=Object(qu.combineReducers)({playerSessionGuidState:function(e,t){switch(void 0===e&&(e=""),t.type){case Object(Gl.getType)(Tf):return t.payload.playerSessionGuid;default:return e}}}),kf=Object(qu.combineReducers)({player:xf,settings:Ef}),Cf=Object(qu.combineReducers)({web:kf,core:$i}),Af=Object(qu.createStore)(Cf,Object(wf.composeWithDevTools)()),If=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Of=function(){return(Of=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Lf=.6,Rf=3e3,Pf="video_settings",Df=function(e){function t(t){var n=e.call(this,t)||this;n.handleFullscreenChange=function(e){e.target===n.videoContainerRef.current&&n.setState({fullscreen:!!n.videoContainerRef.current&&yc()===n.videoContainerRef.current})},n.togglePlaybackHandler=function(){n.playerCore.play(!n.playerCore.state.playing.computed)},n.toggleMuteHandler=function(){n.playerCore.state.muted.applied?(n.playerCore.mute(!1),n.updateVolumeHandler(n.state.lastUnmutedVolume)):(n.playerCore.mute(!0),n.setState({volume:0}),n.videoElementRef.current&&(n.videoElementRef.current.volume=0))},n.toggleClosedCaptions=function(){n.playerCore.textTrack(n.playerCore.state.textTrack.computed?null:n.playerCore.state.textTracks[0])},n.updateVolumeHandler=function(e){var t=n.videoElementRef.current;t&&(t.volume=e,n.playerCore.mute(0===e))},n._updateLastUnmutedVolume=vf(function(e){0!==e&&n.setState({lastUnmutedVolume:e})},200).handler,n._onVolumeChange=function(e){var t=n.lsVideoSettings.getObject(Pf);t=Of({},t,{volume:e}),n.lsVideoSettings.set(Pf,JSON.stringify(t)),n.setState({volume:e}),n._updateLastUnmutedVolume(e)},n._updateCurrentTime=function(e){var t=n.videoElementRef.current;t&&(t.currentTime=e,n.setState({currentTime:e}))},n.toggleLowLatency=function(){n.playerCore.switchProtocol(n.state.lowLatency?"hls":"webRtc")},n.toggleAudioOnly=function(){n.playerCore.audioOnly(!n.playerCore.state.audioOnly.computed)},n.toggleFullscreen=function(){var e=n.videoContainerRef.current;n.state.fullscreen?hc():e&&gc(e)},n.selectQuality=function(e){n.playerCore.quality(e)},n.toggleAuto=function(){n.playerCore.state.autoBitrateAvailable.computed&&!n.playerCore.state.autoBitrateEnabled.requested&&n.playerCore.autoBitrate(!0)},n.selectAudioTrack=function(e){n.playerCore.audioTrack(e)},n.mouseMoveDebouncer=vf(function(e){n.setActivityTimeout()},100,!0),n.handleOverlayTouchStart=function(e){e.currentTarget===e.target?n.setState({initialTouchTime:performance.now()}):n.setActivityTimeout()},n.handleContainerTouchEnd=function(e){e.target===n.videoOverlayRef.current&&performance.now()-n.state.initialTouchTime<100&&(n.state.activityTimeoutHandle?(e.preventDefault(),n.resetActivityTimeout()):n.setActivityTimeout())},n.resetActivityTimeout=function(){n.state.activityTimeoutHandle&&(clearTimeout(n.state.activityTimeoutHandle),n.setState({activityTimeoutHandle:void 0}))},n.setActivityTimeout=function(){clearTimeout(n.state.activityTimeoutHandle);var e=setTimeout(function(){return n.resetActivityTimeout()},Rf);n.setState({activityTimeoutHandle:e})};var r=t.i18n,i=t.overrideLocale;i&&(Object.values(Sf).includes(i)?r.changeLanguage(i):console.warn(i+" is not a supported locale")),n.lsVideoSettings=new yf(localStorage);var o=n.lsVideoSettings.getObject(Pf);o||(o={muted:void 0!==n.props.mute&&n.props.mute,volume:Lf},n.lsVideoSettings.set(Pf,JSON.stringify(o)));return n.state={contentType:"live",currentTime:0,fullscreen:!1,hasHover:!1,initialRender:!1,initialTouchTime:performance.now(),playing:!1,lastUnmutedVolume:Lf,lowLatency:!1,volume:o.volume},n.videoContainerRef=Cs.createRef(),n.videoElementRef=Cs.createRef(),n.videoOverlayRef=Cs.createRef(),n}return If(t,e),t.prototype.componentDidMount=function(){var e,t=this,n=this.props,r=n.setPlayerSessionGuid,i=n.mediaConfig,o=n.onPlayerSessionGuidChanged,a=this.videoElementRef.current,s=this.lsVideoSettings.getObject(Pf),u=s.muted,l=s.volume,c=Object(El.v4)();r(c),o&&o(c),this.playerCore=new no(Of({},this.props,{mute:u,nativePlayer:a,logTelemetry:function(e){var n,r;r={name:"microsoft_mixer_spectre_"+(n=e).name,data:hf({},n.data,{isFocused:!document.hidden,userAgent:navigator.userAgent})},pf.track(r),t.props.telemetryHook&&t.props.telemetryHook(e)},playerSessionGuid:c,store:Af})),this._setupCallbacks(),i&&this.setState({contentType:"live"===i.type?"live":"recording"}),this.props.mute||u?(this.setState({volume:0}),a.volume=0):l&&(this.updateVolumeHandler(l),a.volume=l),e=this.handleFullscreenChange,dc&&document.addEventListener(dc,e)},t.prototype.componentDidUpdate=function(e){var t=e.mediaConfig,n=e.mute,r=e.overrideLocale,i=this.props,o=i.i18n,a=i.overrideLocale,s=i.mediaConfig,u=i.mute;a&&r!==a&&(Object.values(Sf).includes(a)?o.changeLanguage(a):console.warn(a+" is not a supported locale")),!s||t&&t.id===s.id||(this.setState({contentType:"live"===s.type?"live":"recording"}),this.playerCore.load(s)),null!=u&&n!==u&&this.playerCore.mute(u)},t.prototype.componentWillUnmount=function(){var e;e=this.handleFullscreenChange,dc&&document.removeEventListener(dc,e),this.playerCore.destroy()},t.prototype.render=function(){var e=this,t=this.props,n=t.onLegacyPlayerRequest,r=t.onReportAbuse,i=t.onRequestCreateClip,o=t.onRequestUhd,a=t.t,s=this.playerCore,u=this.videoElementRef.current?this.videoElementRef.current.duration:void 0;return Cs.createElement(Cs.Fragment,null,Cs.createElement("div",{ref:this.videoContainerRef,className:xl("spectre-player",wl.container,this.state.activityTimeoutHandle?"":"hidden")},Cs.createElement("video",{ref:this.videoElementRef,className:"spectre-video-element "+wl.video,onTimeUpdate:"recording"===this.state.contentType?function(t){var n=t.currentTarget.currentTime;e.setState({currentTime:n}),e.props.onTimeUpdated&&e.props.onTimeUpdated(n)}:void 0,onVolumeChange:function(t){return e._onVolumeChange(t.currentTarget.volume)},playsInline:!0}),s&&Cs.createElement(kl,{ref:this.videoOverlayRef,hostClasses:s.state.audioOnly.computed?wl.overlayBlackOut:void 0,onMouseDown:this.setActivityTimeout,onMouseLeave:function(){e.mouseMoveDebouncer.cancel(),e.resetActivityTimeout()},onMouseMove:this.mouseMoveDebouncer.handler,onTouchEnd:this.handleContainerTouchEnd,onTouchStart:this.handleOverlayTouchStart,header:Cs.createElement(Cs.Fragment,null,Cs.createElement(_f,{visible:s.state.playing.loading,position:"center"}),Cs.createElement(_f,{visible:!s.state.playing.loading&&s.state.playing.applied&&s.state.quality.loading,position:"topRight"})),footer:Cs.createElement(mf,{timeout:5e3,forceRender:this.state.initialRender},Cs.createElement(xc,Of({},this.state,{audioOnly:s.state.audioOnly.computed,autoState:{autoAvailable:s.state.autoBitrateAvailable.computed,autoEnabled:s.state.autoBitrateEnabled.computed},audioTrack:s.state.audioTrack.computed,audioTracks:s.state.audioTracks,captionsAvailable:s.state.captionsAvailable||s.state.textTracks&&s.state.textTracks.length>0,contentType:this.state.contentType,duration:u,lowLatencyAvailable:s.state.lowLatencyAvailable,muted:s.state.muted.computed,playing:s.state.playing.computed,quality:s.state.quality.computed,qualities:s.state.qualities,textTrack:s.state.textTrack.computed,textTracks:s.state.textTracks,audioOnlyHandler:this.toggleAudioOnly,audioTrackHandler:this.selectAudioTrack,autoHandler:this.toggleAuto,clipsHandler:i,closedCaptionsHandler:this.toggleClosedCaptions,currentTimeHandler:this._updateCurrentTime,fullscreenHandler:this.toggleFullscreen,legacyPlayerHandler:n,lowLatencyHandler:this.toggleLowLatency,muteHandler:this.toggleMuteHandler,playbackHandler:this.togglePlaybackHandler,qualityHandler:this.selectQuality,reportAbuseHandler:r,uhdHandler:o,volumeHandler:this.updateVolumeHandler})))},s.state.audioOnly.computed&&Cs.createElement("div",{className:wl.audioOnlyText},a("Audio Only")))))},t.prototype._setupCallbacks=function(){var e=this;this.playerCore.subscribe(function(){!e.state.initialRender&&e.playerCore.state.playing.applied&&(e.props.onInitialPlayback&&e.props.onInitialPlayback(),e.setState({initialRender:!0})),!e.state.playing&&e.playerCore.state.playing.applied&&(e.props.onPlaybackChanged&&e.props.onPlaybackChanged(!0),e.setState({playing:!0})),e.state.playing&&!e.playerCore.state.playing.applied&&(e.props.onPlaybackChanged&&e.props.onPlaybackChanged(!1),e.setState({playing:!1})),e.setState({lowLatency:"webRtc"===e.playerCore.state.protocol});var t=e.lsVideoSettings.getObject(Pf);t=Of({},t,{muted:e.playerCore.state.muted.requested}),e.lsVideoSettings.set(Pf,JSON.stringify(t)),e.forceUpdate()}),this.playerCore.on(Bi.error,function(t){return e.props.onError&&e.props.onError(t)})},t}(Cs.Component),Mf=function(){return(Mf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Nf=hl(function(e){return{}},function(e){return{setPlayerSessionGuid:function(t){return e(Tf(t))}}})(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){function r(r,i){var o=Qs(e,r),a=zs()(o,3),s=a[0],u=a[1],l=a[2],c=ks()({},r,{t:s,i18n:u,tReady:l});return t.withRef&&i&&(c.ref=i),As.a.createElement(n,c)}return r.displayName="withI18nextTranslation(".concat(Hs(n),")"),r.WrappedComponent=n,t.withRef?As.a.forwardRef(r):r}}()(Df)),Ff=function(e){return Cs.createElement(ku,{store:Af},Cs.createElement(Nf,Mf({},e)))};n.d(t,"loadSpectreByDefault",function(){return jf}),n.d(t,"MixerPlayer",function(){return ni}),n.d(t,"Core",function(){return no}),n.d(t,"VideoContainer",function(){return Ff});var jf=!0;ni.VERSION=ni.VERSION+"_spectre",window.MixerPlayer={composeQuality:On,fetchFalconManifest:function(e,t,n){return Wr(e,t).then(function(e){return{response:e}})},MixerPlayer:ni,selectQualityByBitrate:function(e){return function(t){return An(t,function(t){return Math.abs(t.bitrate-e)})[0]}},selectQualityByName:function(e){return function(t){return e?t.find(function(t){return t.displayName===e}):void 0}}};var Uf=no.Environment;if(Uf.clientId=ga.browser.name,Uf.clientVersion=ga.browser.version,Uf.device="PC",Uf.deviceVersion="unknown",Uf.os=ga.os.name,Uf.osVersion=ga.os.versionName||ga.os.version,Uf.platform=ga.platform.type,Uf.playerId="spectre.web",Uf.playerVersion="2019.7.12+4feff9db",Uf.userAgent=navigator.userAgent,"iOS"===ga.os.name)no.setAdapterTypes([La]);else switch(ga.browser.name){case"Internet Explorer":no.setAdapterTypes([Ca]);break;case"Safari":no.setAdapterTypes([La]);break;case"Chrome":case"Firefox":no.setAdapterTypes([Na,Ca]);break;default:no.setAdapterTypes([Na,La,Ca])}}]);